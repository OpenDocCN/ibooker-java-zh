<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Creating Your First Spring Boot REST API"><div class="chapter" id="sbur-03">
<h1><span class="label">Chapter 3. </span>Creating Your First Spring Boot REST API</h1>


<p><a data-type="indexterm" data-primary="REST API" id="ix_rest_api_ch3"/>In this chapter, I explain and demonstrate how to develop a basic working application using Spring Boot. <a data-type="indexterm" data-primary="API (Application Programming Interface)" data-seealso="REST API" id="idm45693965200440"/>Since most applications involve exposing backend cloud resources to users, usually via a frontend UI, an Application Programming Interface (API) is an excellent starting point for both understanding and practicality. Let’s get started.</p>






<section data-type="sect1" data-pdf-bookmark="The Hows and Whys of APIs"><div class="sect1" id="idm45693965199016">
<h1>The Hows and Whys of APIs</h1>

<p>The age of the monolithic application that does everything is over.</p>

<p>This isn’t to say that monoliths no longer exist or that they won’t still be created for ages to come. Under various circumstances, a monolithic application that provides numerous capabilities in one package still makes sense, especially in the following settings:</p>

<ul>
<li>
<p>The domain and thus domain boundaries are largely unknown.</p>
</li>
<li>
<p>Provided capabilities are tightly coupled, and absolute performance of module interactions takes precedence over flexibility.</p>
</li>
<li>
<p>Scaling requirements for all related capabilities are known and consistent.</p>
</li>
<li>
<p>Functionality isn’t volatile; change is slow, limited in scope, or both.</p>
</li>
</ul>

<p>For everything else, there are microservices.</p>

<p>This is a gross oversimplification, of course, but I believe it to be a useful summary. By splitting capabilities into smaller, cohesive “chunks,” we can decouple them, resulting in the potential for more flexible and robust systems that can be more rapidly deployed and more easily maintained.</p>

<p>In any distributed system—and make no mistake, a system comprising microservices is exactly that—communication is key. No service is an island. And while there are numerous mechanisms for connecting applications/microservices, we often begin our journey by emulating the very fabric of our daily lives: the internet.</p>

<p>The internet was built for communication. In fact, the designers of its precursor, the Advanced Research Projects Agency Network (ARPANET), anticipated a need to maintain intersystem communication even in the event of “significant interruption.” It is reasonable to conclude that an HTTP-based approach similar to the one we use to conduct a great deal of our daily lives could also ably allow us to create, retrieve, update, and delete various resources “over the wire.”</p>

<p>As much as I love history, I won’t dive deeper into the history of REST APIs other than to say that <a data-type="indexterm" data-primary="Fielding, Roy" id="idm45693965189256"/>Roy Fielding laid out their principles in his 2000 PhD dissertation, which built upon the <em>HTTP object model</em> from 1994.<a data-type="indexterm" data-primary="" data-startref="ix_API_ch3" id="idm45693965187928"/></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="What Is REST, and Why Does It Matter?"><div class="sect1" id="idm45693965186792">
<h1>What Is REST, and Why Does It Matter?</h1>

<p>As mentioned earlier, an API is the specification/interface that we developers <em>write to</em> so our code can use other code: libraries, other applications, or services. But what does the <em>REST</em> in <em>REST API</em> represent?</p>

<p>REST is an acronym for <em>representational state transfer</em>, which is a somewhat cryptic way of saying that when one application communicates with another, Application A brings its current state with it; it doesn’t expect Application B to maintain state—
<span class="keep-together">current</span> and cumulative, process-based information—between communication calls. Application A supplies a representation of its relevant state with each request to Application B. You can easily see why this increases survivability and resilience, because if there is a communication issue or Application B crashes and is restarted, it doesn’t lose the current state of its interactions with Application A; Application A can simply reissue the request and pick up where the two applications left off.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>This general concept is often referred to as <em>stateless</em> applications/services, because each service maintains its own current state, even within a sequence of interactions, and doesn’t expect others to do so on its behalf. <a data-type="indexterm" data-primary="stateless applications/services" id="idm45693965179912"/></p>
</div>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Your API, HTTP Verb Style"><div class="sect1" id="idm45693965178760">
<h1>Your API, HTTP Verb Style</h1>

<p><a data-type="indexterm" data-primary="REST API" data-secondary="HTTP verbs" id="ix_rest_api_http_verbs"/><a data-type="indexterm" data-primary="HTTP verbs" id="ix_http_verbs"/>Now, about that REST API—sometimes called a RESTful API, which is a nice, relaxing take on things, isn’t it?</p>

<p><a data-type="indexterm" data-primary="IETF (Internet Engineering Task Force)" id="idm45693965174584"/>There are a number of standardized HTTP verbs defined within a handful of Internet Engineering Task Force (IETF) requests for comments (RFCs). Of these, a small number are typically used consistently for building APIs, with a couple more that find occasional use. REST APIs are primarily built upon the following HTTP verbs:</p>

<ul>
<li>
<p><code>POST</code></p>
</li>
<li>
<p><code>GET</code></p>
</li>
<li>
<p><code>PUT</code></p>
</li>
<li>
<p><code>PATCH</code></p>
</li>
<li>
<p><code>DELETE</code></p>
</li>
</ul>

<p><a data-type="indexterm" data-primary="PATCH" id="idm45693965167464"/>These verbs correspond with typical operations we perform on resources: create (<code>POST</code>), read (<code>GET</code>), update (<code>PUT</code> and <code>PATCH</code>), and delete (<code>DELETE</code>).</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>I’m admittedly blurring the lines somewhat by loosely equating <code>PUT</code> with updating a resource, and a bit less so by equating <code>POST</code> with creating a resource. I would ask the reader to bear with me as I step through the implementation and provide clarifications.</p>
</div>

<p><a data-type="indexterm" data-primary="HEAD" id="idm45693965161736"/><a data-type="indexterm" data-primary="OPTIONS" id="idm45693965161032"/>Occasionally, the following two verbs are employed:</p>

<ul>
<li>
<p><code>OPTIONS</code></p>
</li>
<li>
<p><code>HEAD</code></p>
</li>
</ul>

<p>These can be used to retrieve the communication options available for request/response pairs (<code>OPTIONS</code>) and retrieve a response header minus its body (<code>HEAD</code>).</p>

<p>For this book, and indeed for most production use, I will focus on the first, heavily utilized group. To get (no pun intended) started, let’s create a simple microservice that implements a very basic REST API.</p>








<section data-type="sect2" data-pdf-bookmark="Back to the Initializr"><div class="sect2" id="idm45693965155384">
<h2>Back to the Initializr</h2>

<p><a data-type="indexterm" data-primary="Spring Initializr (start.spring.io)" id="ix_Spring_Init_ch3"/><a data-type="indexterm" data-primary="REST API" data-secondary="Initializr" id="ix_rest_api_init"/>We begin as usual with the Spring Initializr, as shown in <a data-type="xref" href="#creating_a_spring_boot_project_to_build_a_rest_api">Figure 3-1</a>. I’ve changed the Group and Artifact fields to reflect the details I use (please feel free to use your preferred nomenclature), selected Java 11 under Options (optional, any listed version will do nicely), and selected only the Spring Web dependency. As it indicates in the displayed description, this dependency brings with it several capabilities, including that of “[building] web, <em>including RESTful</em>, applications using Spring MVC” (emphasis added). This is exactly what we require for the task at hand.</p>

<figure><div id="creating_a_spring_boot_project_to_build_a_rest_api" class="figure">
<img src="Images/sbur_0301.png" alt="sbur 0301" width="600" height="465"/>
<h6><span class="label">Figure 3-1. </span>Creating a Spring Boot project to build a REST API</h6>
</div></figure>

<p>Once we’ve generated the project in the Initializr and saved the resultant <em>.zip</em> file locally, we’ll extract the compressed project files—typically by double-clicking the <em>sbur-rest-demo.zip</em> file that was downloaded in your file browser or by using <em>unzip</em> from a shell/terminal window—and then open the now-extracted project in your chosen IDE or text editor for a view similar to <a data-type="xref" href="#our_new_spring_boot_project_just_waiting_for_us_to_begin">Figure 3-2</a>.<a data-type="indexterm" data-primary="" data-startref="ix_rest_api_init" id="idm45693965144728"/><a data-type="indexterm" data-primary="" data-startref="ix_Spring_Init_ch3" id="idm45693965143752"/></p>

<figure><div id="our_new_spring_boot_project_just_waiting_for_us_to_begin" class="figure">
<img src="Images/sbur_0302.png" alt="sbur 0302" width="600" height="265"/>
<h6><span class="label">Figure 3-2. </span>Our new Spring Boot project, just waiting for us to begin</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Creating a Simple Domain"><div class="sect2" id="idm45693965140824">
<h2>Creating a Simple Domain</h2>

<p><a data-type="indexterm" data-primary="REST API" data-secondary="creating a domain" id="ix_rest_api_domain"/><a data-type="indexterm" data-primary="domain classes" id="ix_domain_class_ch3"/>In order to <em>work with</em> resources, we’ll need to write some code to <em>accommodate some</em> resources. Let’s start by creating a very simple domain class that represents a resource we want to manage.</p>

<p>I’m somewhat of a coffee aficionado, as my good friends—this now includes you—know. With that in mind, I’ll be using a coffee domain, with a class representing a particular type of coffee, as the domain for this example.</p>

<p>Let’s begin by creating the <code>Coffee</code> class. This is essential to the example, as we need a resource of some kind to demonstrate how to manage resources via a REST API. But the domain simplicity or complexity is incidental to the example, so I’ll keep it simple to focus on the objective: the resultant REST API.</p>

<p>As shown in <a data-type="xref" href="#the_coffee_class_our_domain_class">Figure 3-3</a>, the <code>Coffee</code> class has two member variables:</p>

<ul>
<li>
<p>An <code>id</code> field used to uniquely identify a particular kind of coffee</p>
</li>
<li>
<p>A <code>name</code> field that describes the coffee by name</p>
</li>
</ul>

<figure><div id="the_coffee_class_our_domain_class" class="figure">
<img src="Images/sbur_0303.png" alt="sbur 0303" width="600" height="777"/>
<h6><span class="label">Figure 3-3. </span>The Coffee class: our domain class</h6>
</div></figure>

<p>I declare the <code>id</code> field as <code>final</code> so that it can be assigned only once and never modified; as such, this also requires that it is assigned when creating an instance of class <code>Coffee</code> and implies that it has no mutator method.</p>

<p>I create two constructors: one that takes both parameters and another that provides a unique identifier if none is provided upon creation of a <code>Coffee</code>.</p>

<p>Next, I create accessor and mutator methods—or getter and setter methods, if you prefer to call them that—for the <code>name</code> field, which is not declared <code>final</code> and is thus mutable. This is a debatable design decision, but it serves our upcoming needs for this example well.</p>

<p>With that, we now have a basic domain in place. Next it’s time for a REST.<a data-type="indexterm" data-primary="" data-startref="ix_domain_class_ch3" id="idm45693965122280"/><a data-type="indexterm" data-primary="" data-startref="ix_rest_api_domain" id="idm45693965121304"/></p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="GET-ting"><div class="sect1" id="idm45693965178296">
<h1>GET-ting</h1>

<p><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="GET" id="ix_http_verbs_get"/><a data-type="indexterm" data-primary="GET" id="ix_get_ch3"/><a data-type="indexterm" data-primary="JSON (JavaScript Object Notation)" data-secondary="GET" id="idm45693965117064"/>Perhaps the most-used of the most-used verbs is <code>GET</code>. So let’s <em>get</em> (pun intended) started.</p>








<section data-type="sect2" data-pdf-bookmark="@RestController in a Nutshell"><div class="sect2" id="idm45693965114952">
<h2>@RestController in a Nutshell</h2>

<p><a data-type="indexterm" data-primary="Spring MVC (Model-View-Controller)" data-secondary="purpose" id="idm45693965113560"/>Without going too deep down the rabbit hole, Spring MVC (Model-View-Controller) was created to separate concerns between data, its delivery, and its presentation, assuming the views would be provided as a server-rendered web page. <a data-type="indexterm" data-primary="@Controller" id="idm45693965112152"/>The <code>@Controller</code> annotation helps tie the various pieces together.</p>

<p><code>@Controller</code> is a stereotype/alias for the <a data-type="indexterm" data-primary="@Component" id="idm45693965109944"/><code>@Component</code> annotation, meaning that upon application startup, a Spring Bean—an object created and managed by the <a data-type="indexterm" data-primary="IoC (Inversion of Control) container" id="idm45693965108728"/>Spring inversion of control (IoC) container within the app—is created from that class. <code>@Controller</code>-annotated classes accommodate <a data-type="indexterm" data-primary="Model object" id="idm45693965107384"/>a <code>Model</code> object to provide model-based data to the presentation layer and work with <a data-type="indexterm" data-primary="ViewResolver" id="idm45693965106136"/>a <code>ViewResolver</code> to direct the application to display a particular view, as rendered by a view technology.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Spring supports several view technologies and templating engines, covered in a later chapter.</p>
</div>

<p>It’s also possible to instruct a <code>Controller</code> class to return a formatted response as JavaScript Object Notation (JSON) or as another data-oriented format such as XML simply by adding <a data-type="indexterm" data-primary="@ResponseBody" id="idm45693965102440"/>an <code>@ResponseBody</code> annotation to the class or method (JSON by default). This results in the Object/Iterable return value of a method being the <em>entire body</em> of the response to a web request, instead of being returned as a part of the <code>Model</code>.</p>

<p><a data-type="indexterm" data-primary="@RestController" id="idm45693965100056"/>The <code>@RestController</code> annotation is a convenience notation that combines <code>@Controller</code> with <code>@ResponseBody</code> into a single descriptive annotation, simplifying your code and making intent more obvious. Once we’ve annotated a class as an <code>@RestController</code>, we can begin creating our REST API.</p>










<section data-type="sect3" data-pdf-bookmark="Let’s GET Busy"><div class="sect3" id="idm45693965097096">
<h3>Let’s <code>GET</code> Busy</h3>

<p>REST APIs deal with objects, and objects can come alone or as a group of related objects. To leverage our coffee scenario, you may want to retrieve a particular coffee; you may instead wish to retrieve all coffees, or all that are considered dark roast, fall within a range of identifiers, or include “Colombian” in the description, for example. To accommodate the need to retrieve one instance or more than one instance of an object, it is a good practice to create multiple methods in our code.</p>

<p>I’ll begin by creating a list of <code>Coffee</code> objects to support the method returning multiple <code>Coffee</code> objects, as shown in the rudimentary class definition that follows. I define the variable holding this group of coffees as a <code>List</code> of <code>Coffee</code> objects. I choose <code>List</code> as the higher-level interface for my member variable type, but I’ll actually assign an empty <code>ArrayList</code> for use within <a data-type="indexterm" data-primary="RestApiDemoController" id="ix_rest_api_demo"/>the <code>RestApiDemoController</code> class:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@RestController</code>
<code class="kd">class</code> <code class="nc">RestApiDemoController</code> <code class="o">{</code>
	<code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="n">coffees</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;&gt;();</code>
<code class="o">}</code></pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>It’s a recommended practice to adopt the highest level of type (class, interface) that can cleanly satisfy internal and external APIs. These may not match in all cases, as they don’t here. Internally, <code>List</code> provides the level of API that enables me to create the cleanest implementation based on my criteria; externally, we can define an even higher-level abstraction, as I’ll demonstrate shortly.</p>
</div>

<p>It’s always a good idea to have some data to retrieve in order to confirm that everything is working as expected. In the following code, I create a constructor for the <code>RestApiDemoController</code> class, adding code to populate the list of coffees upon object creation:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@RestController</code>
<code class="kd">class</code> <code class="nc">RestApiDemoController</code> <code class="o">{</code>
	<code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="n">coffees</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;&gt;();</code>

	<code class="kd">public</code> <code class="nf">RestApiDemoController</code><code class="o">()</code> <code class="o">{</code>
		<code class="n">coffees</code><code class="o">.</code><code class="na">addAll</code><code class="o">(</code><code class="n">List</code><code class="o">.</code><code class="na">of</code><code class="o">(</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Cereza"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Ganador"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Lareño"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Três Pontas"</code><code class="o">)</code>
		<code class="o">));</code>
	<code class="o">}</code>
<code class="o">}</code></pre>
<div class="hard-pagebreak"/>

<p>As shown in the following code, I create a method in the <code>RestApiDemoController</code> class that returns an iterable group of coffees represented by our member variable <code>coffees</code>. I choose to use an <code>Iterable&lt;Coffee&gt;</code> because any iterable type will satisfactorily provide this API’s desired functionality:</p>

<p><a data-type="indexterm" data-primary="@RequestMapping" id="ix_requestmapping"/>.Using <code>@RequestMapping</code> to <code>GET</code> the list of coffees</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@RestController</code>
<code class="kd">class</code> <code class="nc">RestApiDemoController</code> <code class="o">{</code>
	<code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="n">coffees</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;&gt;();</code>

	<code class="kd">public</code> <code class="nf">RestApiDemoController</code><code class="o">()</code> <code class="o">{</code>
		<code class="n">coffees</code><code class="o">.</code><code class="na">addAll</code><code class="o">(</code><code class="n">List</code><code class="o">.</code><code class="na">of</code><code class="o">(</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Cereza"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Ganador"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Lareño"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Três Pontas"</code><code class="o">)</code>
		<code class="o">));</code>
	<code class="o">}</code>

	<code class="nd">@RequestMapping</code><code class="o">(</code><code class="n">value</code> <code class="o">=</code> <code class="s">"/coffees"</code><code class="o">,</code> <code class="n">method</code> <code class="o">=</code> <code class="n">RequestMethod</code><code class="o">.</code><code class="na">GET</code><code class="o">)</code>
	<code class="n">Iterable</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">getCoffees</code><code class="o">()</code> <code class="o">{</code>
		<code class="k">return</code> <code class="n">coffees</code><code class="o">;</code>
	<code class="o">}</code>
<code class="o">}</code></pre>

<p><a data-type="indexterm" data-primary="JSON (JavaScript Object Notation)" data-secondary="GET" id="idm45693964970200"/>To the <code>@RequestMapping</code> annotation, I add a path specification of <code>/coffees</code> and a method type of <code>RequestMethod.GET</code>, indicating that the method will respond to requests with the path of <code>/coffees</code> and restrict requests to only <code>HTTP GET</code> requests. Retrieval of data is handled by this method, but updates of any kind are not. Spring Boot, via the Jackson dependencies included in Spring Web, performs the marshalling and unmarshalling of objects to JSON or other formats automatically.</p>

<p>We can streamline this even further using another convenience annotation. <a data-type="indexterm" data-primary="@GetMapping" id="idm45693964868600"/>Using <code>@GetMapping</code> incorporates the direction to allow only <code>GET</code> requests, reducing boilerplate and requiring only the path to be specified, even omitting the <code>path =</code> since no parameter deconfliction is required. The following code clearly demonstrates the readability benefits of this annotation swap:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@GetMapping</code><code class="o">(</code><code class="s">"/coffees"</code><code class="o">)</code>
<code class="n">Iterable</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">getCoffees</code><code class="o">()</code> <code class="o">{</code>
    <code class="k">return</code> <code class="n">coffees</code><code class="o">;</code>
<code class="o">}</code></pre>
<div class="hard-pagebreak"/>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45693964859416">
<h5>Helpful Hints About @RequestMapping</h5>
<p><code>@RequestMapping</code> has several specialized convenience annotations:</p>

<ul>
<li>
<p><code>@GetMapping</code></p>
</li>
<li>
<p><code>@PostMapping</code></p>
</li>
<li>
<p><code>@PutMapping</code></p>
</li>
<li>
<p><code>@PatchMapping</code></p>
</li>
<li>
<p><code>@DeleteMapping</code></p>
</li>
</ul>

<p>Any of these mapping annotations can be applied at the class or method level, and paths are additive. For example, if I were to annotate the <code>RestApiDemoController</code> and its <code>getCoffees()</code> method as shown in the code, the application would respond exactly the same as it does with the following code shown in the previous two code snippets:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@RestController</code>
<code class="nd">@RequestMapping</code><code class="o">(</code><code class="s">"/"</code><code class="o">)</code>
<code class="kd">class</code> <code class="nc">RestApiDemoController</code> <code class="o">{</code>
	<code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="n">coffees</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;&gt;();</code>

	<code class="kd">public</code> <code class="nf">RestApiDemoController</code><code class="o">()</code> <code class="o">{</code>
		<code class="n">coffees</code><code class="o">.</code><code class="na">addAll</code><code class="o">(</code><code class="n">List</code><code class="o">.</code><code class="na">of</code><code class="o">(</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Cereza"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Ganador"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Lareño"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Três Pontas"</code><code class="o">)</code>
		<code class="o">));</code>
	<code class="o">}</code>

	<code class="nd">@GetMapping</code><code class="o">(</code><code class="s">"/coffees"</code><code class="o">)</code>
	<code class="n">Iterable</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">getCoffees</code><code class="o">()</code> <code class="o">{</code>
		<code class="k">return</code> <code class="n">coffees</code><code class="o">;</code>
	<code class="o">}</code>
<code class="o">}</code></pre>

<p>Retrieving all coffees in our makeshift datastore is useful, but it isn’t enough. What if we want to retrieve one particular coffee?</p>

<p>Retrieving a single item works similarly to retrieving several items. I’ll add another method called <code>getCoffeeById</code> to manage this for us, as shown in the next code segment.</p>

<p>The <code>{id}</code> portion of the specified path is a URI (uniform resource identifier) variable, and its value is passed to the <code>getCoffeeById</code> method via the <code>id</code> method parameter by annotating it <a data-type="indexterm" data-primary="@PathVariable" id="idm45693964696744"/>with <code>@PathVariable</code>.</p>

<p>Iterating over the list of coffees, the method returns a populated <code>Optional&lt;Coffee&gt;</code> if it finds a match, or an empty <code>Optional&lt;Coffee&gt;</code> if the <code>id</code> requested isn’t present in our small group of coffees:<a data-type="indexterm" data-primary="" data-startref="ix_get_ch3" id="idm45693964693896"/><a data-type="indexterm" data-primary="" data-startref="ix_http_verbs_get" id="idm45693964692920"/></p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@GetMapping</code><code class="o">(</code><code class="s">"/coffees/{id}"</code><code class="o">)</code>
<code class="n">Optional</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">getCoffeeById</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">)</code> <code class="o">{</code>
    <code class="k">for</code> <code class="o">(</code><code class="n">Coffee</code> <code class="nl">c:</code> <code class="n">coffees</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">if</code> <code class="o">(</code><code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">))</code> <code class="o">{</code>
            <code class="k">return</code> <code class="n">Optional</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="n">c</code><code class="o">);</code>
        <code class="o">}</code>
    <code class="o">}</code>

    <code class="k">return</code> <code class="n">Optional</code><code class="o">.</code><code class="na">empty</code><code class="o">();</code>
<code class="o">}</code></pre>
</div></aside>
</div></section>



</div></section>













<section data-type="sect2" data-pdf-bookmark="POST-ing"><div class="sect2" id="idm45693965096568">
<h2>POST-ing</h2>

<p><a data-type="indexterm" data-primary="POST" id="idm45693964646168"/><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="POST" id="idm45693964645464"/>To create resources, an <code>HTTP POST</code> method is the preferred option.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>A <code>POST</code> supplies details of a resource, typically in JSON format, and requests that the destination service creates that resource <em>under</em> the specified URI.</p>
</div>

<p><a data-type="indexterm" data-primary="JSON (JavaScript Object Notation)" data-secondary="POST" id="idm45693964641544"/>As shown in the next code fragment, a <code>POST</code> is a relatively simple affair: our service receives the specified coffee details as a <code>Coffee</code> object—thanks to Spring Boot’s automatic marshalling—and adds it to our list of coffees. It then returns the <code>Coffee</code> 
<span class="keep-together">object—automatically</span> unmarshalled by Spring Boot to JSON by default—to the requesting application or service:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@PostMapping</code><code class="o">(</code><code class="s">"/coffees"</code><code class="o">)</code>
<code class="n">Coffee</code> <code class="nf">postCoffee</code><code class="o">(</code><code class="nd">@RequestBody</code> <code class="n">Coffee</code> <code class="n">coffee</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">coffees</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">coffee</code><code class="o">);</code>
    <code class="k">return</code> <code class="n">coffee</code><code class="o">;</code>
<code class="o">}</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="PUT-ting"><div class="sect2" id="idm45693964595032">
<h2>PUT-ting</h2>

<p><a data-type="indexterm" data-primary="PUT" id="idm45693964532360"/><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="PUT" id="idm45693964531656"/>Generally speaking, <code>PUT</code> requests are used to update existing resources with known URIs.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>Per the IETF’s document titled <a href="https://tools.ietf.org/html/rfc7231">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>, <code>PUT</code> requests should update the specified resource if present; if the resource doesn’t already exist, it should be created.</p>
</div>

<p>The following code operates in accordance with the specification: search for the coffee with the specified identifier, and if found, update it. If no such coffee is contained within the list, create it:<a data-type="indexterm" data-primary="" data-startref="ix_rest_api_demo" id="idm45693964574296"/></p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@PutMapping</code><code class="o">(</code><code class="s">"/coffees/{id}"</code><code class="o">)</code>
<code class="n">Coffee</code> <code class="nf">putCoffee</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">,</code> <code class="nd">@RequestBody</code> <code class="n">Coffee</code> <code class="n">coffee</code><code class="o">)</code> <code class="o">{</code>
    <code class="kt">int</code> <code class="n">coffeeIndex</code> <code class="o">=</code> <code class="o">-</code><code class="mi">1</code><code class="o">;</code>

    <code class="k">for</code> <code class="o">(</code><code class="n">Coffee</code> <code class="nl">c:</code> <code class="n">coffees</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">if</code> <code class="o">(</code><code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">))</code> <code class="o">{</code>
            <code class="n">coffeeIndex</code> <code class="o">=</code> <code class="n">coffees</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code><code class="n">c</code><code class="o">);</code>
            <code class="n">coffees</code><code class="o">.</code><code class="na">set</code><code class="o">(</code><code class="n">coffeeIndex</code><code class="o">,</code> <code class="n">coffee</code><code class="o">);</code>
        <code class="o">}</code>
    <code class="o">}</code>

    <code class="k">return</code> <code class="o">(</code><code class="n">coffeeIndex</code> <code class="o">==</code> <code class="o">-</code><code class="mi">1</code><code class="o">)</code> <code class="o">?</code> <code class="n">postCoffee</code><code class="o">(</code><code class="n">coffee</code><code class="o">)</code> <code class="o">:</code> <code class="n">coffee</code><code class="o">;</code>
<code class="o">}</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="DELETE-ing"><div class="sect2" id="idm45693964572072">
<h2>DELETE-ing</h2>

<p><a data-type="indexterm" data-primary="DELETE" id="idm45693964571064"/><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="DELETE" id="idm45693964430296"/>To delete a resource, we use an <code>HTTP DELETE</code> request. <a data-type="indexterm" data-primary="@PathVariable" id="idm45693964428840"/>As shown in the next code fragment, we create a method that accepts a coffee’s identifier as an <code>@PathVariable</code> and removes the applicable coffee from our list using the <code>removeIf</code> <code>Collection</code> method. <code>removeIf</code> accepts a <code>Predicate</code>, meaning we can provide a lambda to evaluate that will return a boolean value of <code>true</code> for the desired coffee to remove. Nice and tidy:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@DeleteMapping</code><code class="o">(</code><code class="s">"/coffees/{id}"</code><code class="o">)</code>
<code class="kt">void</code> <code class="nf">deleteCoffee</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">)</code> <code class="o">{</code>
    <code class="n">coffees</code><code class="o">.</code><code class="na">removeIf</code><code class="o">(</code><code class="n">c</code> <code class="o">-&gt;</code> <code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">));</code>
<code class="o">}</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="And More"><div class="sect2" id="idm45693964424136">
<h2>And More</h2>

<p>While there are many more things that could be done to improve this scenario, I’m going to focus on two in particular: reducing repetition and returning HTTP status codes where required by the specification.</p>

<p>To reduce repetition in the code, I’ll elevate the portion of the URI mapping that is common to all methods within the <code>RestApiDemoController</code> class to the class-level <code>@RequestMapping</code> annotation, <code>"/coffees".</code> We can then remove that same portion of the URI from each method’s mapping URI specification, reducing the textual noise level a bit, as the following code shows:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@RestController</code>
<code class="nd">@RequestMapping</code><code class="o">(</code><code class="s">"/coffees"</code><code class="o">)</code>
<code class="kd">class</code> <code class="nc">RestApiDemoController</code> <code class="o">{</code>
	<code class="kd">private</code> <code class="n">List</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="n">coffees</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ArrayList</code><code class="o">&lt;&gt;();</code>

	<code class="kd">public</code> <code class="nf">RestApiDemoController</code><code class="o">()</code> <code class="o">{</code>
		<code class="n">coffees</code><code class="o">.</code><code class="na">addAll</code><code class="o">(</code><code class="n">List</code><code class="o">.</code><code class="na">of</code><code class="o">(</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Cereza"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Ganador"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Lareño"</code><code class="o">),</code>
				<code class="k">new</code> <code class="nf">Coffee</code><code class="o">(</code><code class="s">"Café Três Pontas"</code><code class="o">)</code>
		<code class="o">));</code>
	<code class="o">}</code>

	<code class="nd">@GetMapping</code>
	<code class="n">Iterable</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">getCoffees</code><code class="o">()</code> <code class="o">{</code>
		<code class="k">return</code> <code class="n">coffees</code><code class="o">;</code>
	<code class="o">}</code>

	<code class="nd">@GetMapping</code><code class="o">(</code><code class="s">"/{id}"</code><code class="o">)</code>
	<code class="n">Optional</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">getCoffeeById</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">)</code> <code class="o">{</code>
		<code class="k">for</code> <code class="o">(</code><code class="n">Coffee</code> <code class="nl">c:</code> <code class="n">coffees</code><code class="o">)</code> <code class="o">{</code>
			<code class="k">if</code> <code class="o">(</code><code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">))</code> <code class="o">{</code>
				<code class="k">return</code> <code class="n">Optional</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="n">c</code><code class="o">);</code>
			<code class="o">}</code>
		<code class="o">}</code>

		<code class="k">return</code> <code class="n">Optional</code><code class="o">.</code><code class="na">empty</code><code class="o">();</code>
	<code class="o">}</code>

	<code class="nd">@PostMapping</code>
	<code class="n">Coffee</code> <code class="nf">postCoffee</code><code class="o">(</code><code class="nd">@RequestBody</code> <code class="n">Coffee</code> <code class="n">coffee</code><code class="o">)</code> <code class="o">{</code>
		<code class="n">coffees</code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="n">coffee</code><code class="o">);</code>
		<code class="k">return</code> <code class="n">coffee</code><code class="o">;</code>
	<code class="o">}</code>

	<code class="nd">@PutMapping</code><code class="o">(</code><code class="s">"/{id}"</code><code class="o">)</code>
	<code class="n">Coffee</code> <code class="nf">putCoffee</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">,</code> <code class="nd">@RequestBody</code> <code class="n">Coffee</code> <code class="n">coffee</code><code class="o">)</code> <code class="o">{</code>
		<code class="kt">int</code> <code class="n">coffeeIndex</code> <code class="o">=</code> <code class="o">-</code><code class="mi">1</code><code class="o">;</code>

		<code class="k">for</code> <code class="o">(</code><code class="n">Coffee</code> <code class="nl">c:</code> <code class="n">coffees</code><code class="o">)</code> <code class="o">{</code>
			<code class="k">if</code> <code class="o">(</code><code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">))</code> <code class="o">{</code>
				<code class="n">coffeeIndex</code> <code class="o">=</code> <code class="n">coffees</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code><code class="n">c</code><code class="o">);</code>
				<code class="n">coffees</code><code class="o">.</code><code class="na">set</code><code class="o">(</code><code class="n">coffeeIndex</code><code class="o">,</code> <code class="n">coffee</code><code class="o">);</code>
			<code class="o">}</code>
		<code class="o">}</code>

		<code class="k">return</code> <code class="o">(</code><code class="n">coffeeIndex</code> <code class="o">==</code> <code class="o">-</code><code class="mi">1</code><code class="o">)</code> <code class="o">?</code> <code class="n">postCoffee</code><code class="o">(</code><code class="n">coffee</code><code class="o">)</code> <code class="o">:</code> <code class="n">coffee</code><code class="o">;</code>
	<code class="o">}</code>

	<code class="nd">@DeleteMapping</code><code class="o">(</code><code class="s">"/{id}"</code><code class="o">)</code>
	<code class="kt">void</code> <code class="nf">deleteCoffee</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">)</code> <code class="o">{</code>
		<code class="n">coffees</code><code class="o">.</code><code class="na">removeIf</code><code class="o">(</code><code class="n">c</code> <code class="o">-&gt;</code> <code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">));</code>
	<code class="o">}</code>
<code class="o">}</code></pre>

<p><a data-type="indexterm" data-primary="IETF (Internet Engineering Task Force)" id="idm45693964383160"/>Next, I consult the IETF document referenced earlier and note that while HTTP status codes are not specified for <code>GET</code> and suggested for <code>POST</code> and <code>DELETE</code> methods, they are required for <code>PUT</code> method responses. To accomplish this, I modify the <code>putCoffee</code> method as shown in the following code segment. Instead of returning only the updated or created <code>Coffee</code> object, the <code>putCoffee</code> method will now return a <code>ResponseEntity</code> containing said <code>Coffee</code> and the appropriate HTTP status code: 201 (Created) if the <code>PUT</code> coffee didn’t already exist, and 200 (OK) if it existed and was updated. We could do more, of course, but the current application code fulfills requirements and represents straightforward and clean internal and external APIs:<a data-type="indexterm" data-primary="" data-startref="ix_http_verbs" id="idm45693964116200"/><a data-type="indexterm" data-primary="" data-startref="ix_rest_api_http_verbs" id="idm45693964115224"/><a data-type="indexterm" data-primary="" data-startref="ix_requestmapping" id="idm45693964114280"/></p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@PutMapping</code><code class="o">(</code><code class="s">"/{id}"</code><code class="o">)</code>
<code class="n">ResponseEntity</code><code class="o">&lt;</code><code class="n">Coffee</code><code class="o">&gt;</code> <code class="nf">putCoffee</code><code class="o">(</code><code class="nd">@PathVariable</code> <code class="n">String</code> <code class="n">id</code><code class="o">,</code>
        <code class="nd">@RequestBody</code> <code class="n">Coffee</code> <code class="n">coffee</code><code class="o">)</code> <code class="o">{</code>
    <code class="kt">int</code> <code class="n">coffeeIndex</code> <code class="o">=</code> <code class="o">-</code><code class="mi">1</code><code class="o">;</code>

    <code class="k">for</code> <code class="o">(</code><code class="n">Coffee</code> <code class="nl">c:</code> <code class="n">coffees</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">if</code> <code class="o">(</code><code class="n">c</code><code class="o">.</code><code class="na">getId</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">id</code><code class="o">))</code> <code class="o">{</code>
            <code class="n">coffeeIndex</code> <code class="o">=</code> <code class="n">coffees</code><code class="o">.</code><code class="na">indexOf</code><code class="o">(</code><code class="n">c</code><code class="o">);</code>
            <code class="n">coffees</code><code class="o">.</code><code class="na">set</code><code class="o">(</code><code class="n">coffeeIndex</code><code class="o">,</code> <code class="n">coffee</code><code class="o">);</code>
        <code class="o">}</code>
    <code class="o">}</code>

    <code class="k">return</code> <code class="o">(</code><code class="n">coffeeIndex</code> <code class="o">==</code> <code class="o">-</code><code class="mi">1</code><code class="o">)</code> <code class="o">?</code>
            <code class="k">new</code> <code class="n">ResponseEntity</code><code class="o">&lt;&gt;(</code><code class="n">postCoffee</code><code class="o">(</code><code class="n">coffee</code><code class="o">),</code> <code class="n">HttpStatus</code><code class="o">.</code><code class="na">CREATED</code><code class="o">)</code> <code class="o">:</code>
            <code class="k">new</code> <code class="n">ResponseEntity</code><code class="o">&lt;&gt;(</code><code class="n">coffee</code><code class="o">,</code> <code class="n">HttpStatus</code><code class="o">.</code><code class="na">OK</code><code class="o">);</code>
<code class="o">}</code></pre>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Trust, but Verify"><div class="sect1" id="idm45693964111304">
<h1>Trust, but Verify</h1>

<p><a data-type="indexterm" data-primary="testing" data-secondary="first REST API code" id="ix_test_code_rest_api"/><a data-type="indexterm" data-primary="REST API" data-secondary="testing the code" id="ix_rest_api_test_code"/>With all of the code in place, let’s put this API through its paces.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>I use the <a href="https://httpie.org">HTTPie</a> command line HTTP client for nearly all of my HTTP-based chores. Occasionally I will also use <a href="https://curl.haxx.se">curl</a> or <a href="https://www.postman.com">Postman</a>, but I find <a data-type="indexterm" data-primary="HTTPie" id="idm45693964062344"/>HTTPie to be a versatile client with a streamlined command-line interface and superb utility.</p>
</div>

<p><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="GET" id="idm45693964060984"/><a data-type="indexterm" data-primary="GET" id="idm45693964059784"/>As shown in <a data-type="xref" href="#get_all_the_coffees">Figure 3-4</a>, I query the <em>coffees</em> endpoint for all coffees currently in our list. HTTPie defaults to a <code>GET</code> request and assumes <em>localhost</em> if no hostname is provided, reducing unnecessary typing. As expected, we see all four coffees with which we prepopulated our list.</p>

<figure><div id="get_all_the_coffees" class="figure">
<img src="Images/sbur_0304.png" alt="sbur 0304" width="600" height="392"/>
<h6><span class="label">Figure 3-4. </span><code>GET</code>-ting all coffees</h6>
</div></figure>

<p>Next, I copy the <code>id</code> field for one of the coffees just listed and paste it into another <code>GET</code> request. <a data-type="xref" href="#get_a_coffee">Figure 3-5</a> displays the correct response.</p>

<figure><div id="get_a_coffee" class="figure">
<img src="Images/sbur_0305.png" alt="sbur 0305" width="600" height="181"/>
<h6><span class="label">Figure 3-5. </span><code>GET</code>-ting a coffee</h6>
</div></figure>

<p><a data-type="indexterm" data-primary="JSON (JavaScript Object Notation)" data-secondary="POST" id="idm45693964049880"/><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="POST" id="idm45693964048776"/><a data-type="indexterm" data-primary="POST" id="idm45693964047832"/>To execute a <code>POST</code> request with HTTPie is simple: just pipe a plaintext file containing a JSON representation of a <code>Coffee</code> object with <code>id</code> and <code>name</code> fields, and HTTPie assumes that a <code>POST</code> operation is in order. <a data-type="xref" href="#post_a_new_coffee_to_the_list">Figure 3-6</a> shows the command and its successful outcome.</p>

<figure><div id="post_a_new_coffee_to_the_list" class="figure">
<img src="Images/sbur_0306.png" alt="sbur 0306" width="600" height="181"/>
<h6><span class="label">Figure 3-6. </span><code>POST</code>-ing a new coffee to the list</h6>
</div></figure>

<p><a data-type="indexterm" data-primary="PUT" id="idm45693964041560"/><a data-type="indexterm" data-primary="JSON (JavaScript Object Notation)" data-secondary="PUT" id="idm45693964040632"/><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="PUT" id="idm45693964039720"/>As mentioned earlier, a <code>PUT</code> command should allow for updating an existing resource or adding a new one if the requested resource doesn’t already exist. In <a data-type="xref" href="#put_an_updated_to_an_existing_coffee">Figure 3-7</a>, I specify the <code>id</code> of the coffee I just added and pass another JSON object with a different name to the command. The result is that the coffee with <code>id</code> of “99999” now has a <code>name</code> of “Caribou Coffee” instead of “Kaldi’s Coffee” as before. The return code is 200 (OK), as expected as well.</p>

<figure><div id="put_an_updated_to_an_existing_coffee" class="figure">
<img src="Images/sbur_0307.png" alt="sbur 0307" width="600" height="182"/>
<h6><span class="label">Figure 3-7. </span><code>PUT</code>-ting an update to an existing coffee</h6>
</div></figure>

<p>In <a data-type="xref" href="#put_a_new_coffee">Figure 3-8</a> I initiate a <code>PUT</code> request in the same manner but reference an <code>id</code> in the URI that doesn’t exist. The application dutifully adds it in compliance with IETF-specified behavior and correctly returns an HTTP status of 201 (Created).</p>

<figure><div id="put_a_new_coffee" class="figure">
<img src="Images/sbur_0308.png" alt="sbur 0308" width="600" height="184"/>
<h6><span class="label">Figure 3-8. </span><code>PUT</code>-ting a new coffee</h6>
</div></figure>

<p><a data-type="indexterm" data-primary="DELETE" id="idm45693964028680"/><a data-type="indexterm" data-primary="HTTP verbs" data-secondary="DELETE" id="idm45693964027976"/>Creating a <code>DELETE</code> request with HTTPie is very similar to creating a <code>PUT</code> request: the HTTP verb must be specified, and the resource’s URI must be complete. <a data-type="xref" href="#delete_a_coffee">Figure 3-9</a> shows the result: an HTTP status code of 200 (OK), indicating the resource was successfully deleted and with no shown value, since the resource no longer exists.</p>

<figure><div id="delete_a_coffee" class="figure">
<img src="Images/sbur_0309.png" alt="sbur 0309" width="600" height="95"/>
<h6><span class="label">Figure 3-9. </span><code>DELETE</code>-ing a coffee</h6>
</div></figure>

<p>Finally, we re-query our full list of coffees to confirm the expected final state. As <a data-type="xref" href="#get_all_coffees_now_in_the_list">Figure 3-10</a> demonstrates, we now have one additional coffee that wasn’t in our list before, as expected: Mötor Oil Coffee. API validation is a success.<a data-type="indexterm" data-primary="" data-startref="ix_rest_api_ch3" id="idm45693964021272"/><a data-type="indexterm" data-primary="" data-startref="ix_rest_api_test_code" id="idm45693964020328"/><a data-type="indexterm" data-primary="" data-startref="ix_test_code_rest_api" id="idm45693964019384"/></p>

<figure><div id="get_all_coffees_now_in_the_list" class="figure">
<img src="Images/sbur_0310.png" alt="sbur 0310" width="600" height="453"/>
<h6><span class="label">Figure 3-10. </span><code>GET</code>-ting all coffees now in the list</h6>
</div></figure>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idm45693964110808">
<h1>Summary</h1>

<p>This chapter demonstrated how to develop a basic working application using Spring Boot. Since most applications involve exposing backend cloud resources to users, usually via a frontend user interface, I showed how to create and evolve a useful REST API that can be consumed in numerous, consistent ways to provide needed functionality for creating, reading, updating, and deleting resources central to nearly every critical system.</p>

<p>I examined and explained the <code>@RequestMapping</code> annotation and its various convenience annotation specializations that align with defined HTTP verbs:</p>

<ul>
<li>
<p><code>@GetMapping</code></p>
</li>
<li>
<p><code>@PostMapping</code></p>
</li>
<li>
<p><code>@PutMapping</code></p>
</li>
<li>
<p><code>@PatchMapping</code></p>
</li>
<li>
<p><code>@DeleteMapping</code></p>
</li>
</ul>

<p>After creating methods that addressed many of these annotations and their associated actions, I then refactored the code a bit to streamline it and provide HTTP response codes where required. Validating the API confirmed its correct operation.</p>

<p>In the next chapter, I discuss and demonstrate how to add database access to our Spring Boot application to make it increasingly useful and ready for production.</p>
</div></section>







</div></section></div></body></html>