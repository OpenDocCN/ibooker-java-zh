<html><head></head><body><section data-pdf-bookmark="Chapter 8. Testing Framework Specifics" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch08">&#13;
<h1><span class="label">Chapter 8. </span>Testing Framework Specifics</h1>&#13;
&#13;
&#13;
<p>In the examples presented throughout this book, I have recommended embedding the calls to the Selenium WebDriver API in Java methods <a data-primary="@Test annotation" data-primary-sortas="Test annotation" data-type="indexterm" id="idm45849707819152"/><a data-primary="unit testing frameworks" data-secondary="about" data-type="indexterm" id="idm45849707818304"/>decorated with the annotation <code>@Test</code> using different unit testing frameworks: JUnit 4, JUnit 5 (alone or extended with Selenium-Jupiter), or TestNG. When executing regular tests, the difference in using one or another testing framework is minimal. Nevertheless, each testing framework has specific features for different use cases. This chapter summarizes some of these features to implement Selenium WebDriver tests. As usual, you can find the source code for this chapter in the examples repository for this book. You can use these examples to compare and choose the most convenient unit testing framework for your specific needs.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Parameterized Tests" data-type="sect1"><div class="sect1" id="parameterized-tests">&#13;
<h1>Parameterized Tests</h1>&#13;
&#13;
<p>A widespread feature <a data-primary="parameterized tests" data-secondary="about" data-type="indexterm" id="idm45849707814944"/><a data-primary="unit testing frameworks" data-secondary="parameterized tests with" data-type="indexterm" id="ch8_term6"/>commonly supported by unit testing frameworks is creating <em>parameterized tests</em>. This feature enables the execution of tests multiple times using different parameters. Although we can implement parameterized tests both <span class="keep-together">with JUnit</span> (4 and 5) and TestNG, there are significant differences among each <span class="keep-together">implementation</span>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849707810736">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>We need <a data-primary="test runners" data-type="indexterm" id="ch8_term5"/><a data-primary="JUnit 4" data-secondary="parameterized tests with" data-type="indexterm" id="ch8_term2"/><a data-primary="parameterized test runner" data-type="indexterm" id="ch8_term3"/><a data-primary="parameterized tests" data-secondary="with JUnit 4" data-secondary-sortas="JUnit 4" data-type="indexterm" id="ch8_term4"/>to use a <em>test runner</em> called <code>Parameterized</code> for implementing parameterized tests in JUnit 4. A test runner in JUnit 4 is a Java class responsible for running tests. We <a data-primary="@RunWith annotation" data-primary-sortas="RunWith annotation" data-type="indexterm" id="idm45849707802912"/>decorate a Java class using the JUnit 4 annotation <code>@RunWith</code> to specify a test runner. Then, we <a data-primary="@Parameters annotation" data-primary-sortas="Parameters annotation" data-type="indexterm" id="idm45849707801424"/>need to use the JUnit 4 annotation <code>@Parameters</code> to decorate the method that provides the test parameters. There are two ways to inject these parameters into the test class: in the test class constructor or <a data-primary="class attributes as test parameters" data-type="indexterm" id="ch8_term1"/>as class attributes decorated with the annotation  <code>@Parameter</code>. <a data-type="xref" href="#junit4-parameterized">Example 8-1</a> shows a test case where the test parameters are injected using the second technique. This example executes the same <a data-primary="login form, test cases with" data-type="indexterm" id="ch8_term7"/><a data-primary="credentials, authentication" data-type="indexterm" id="idm45849707796320"/><a data-primary="username and password" data-type="indexterm" id="idm45849707795632"/><a data-primary="authentication, approaches to" data-type="indexterm" id="idm45849707794960"/>test for login into the practice site using different credentials (username and password). As a result, the message provided by the web page is different (login successful or invalid credentials).</p>&#13;
<div data-type="example" id="junit4-parameterized">&#13;
<h5><span class="label">Example 8-1. </span>Parameterized test using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@RunWith</code><code class="o">(</code><code class="n">Parameterized</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO1-1" id="co_testing_framework_specifics_CO1-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ParameterizedJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Parameter</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO1-2" id="co_testing_framework_specifics_CO1-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="n">username</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Parameter</code><code class="o">(</code><code class="mi">1</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="n">password</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Parameter</code><code class="o">(</code><code class="mi">2</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="n">expectedText</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Before</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@After</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Parameters</code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"{index}: username={0} password={1} expectedText={2}"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO1-3" id="co_testing_framework_specifics_CO1-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Collection</code><code class="o">&lt;</code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">&gt;</code><code> </code><code class="nf">data</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="n">Arrays</code><code>&#13;
</code><code>                </code><code class="o">.</code><code class="na">asList</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">[</code><code class="o">]</code><code> </code><code class="o">{</code><code> </code><code class="o">{</code><code> </code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"Login successful"</code><code> </code><code class="o">}</code><code class="o">,</code><code>&#13;
</code><code>                        </code><code class="o">{</code><code> </code><code class="s">"bad-user"</code><code class="o">,</code><code> </code><code class="s">"bad-passwd"</code><code class="o">,</code><code> </code><code class="s">"Invalid credentials"</code><code> </code><code class="o">}</code><code> </code><code class="o">}</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO1-4" id="co_testing_framework_specifics_CO1-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testParameterized</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO1-5" id="co_testing_framework_specifics_CO1-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"username"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">username</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"password"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">password</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"button"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">String</code><code> </code><code class="n">bodyText</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"body"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">getText</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">bodyText</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="n">expectedText</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO1-6" id="co_testing_framework_specifics_CO1-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO1-1" id="callout_testing_framework_specifics_CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We specify the <code>Parameterized</code> test runner for this Java class.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO1-2" id="callout_testing_framework_specifics_CO1-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We inject three test parameters as class attributes: username (index <code>0</code>), password (index <code>1</code>), and expected text (index <code>2</code>).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO1-3" id="callout_testing_framework_specifics_CO1-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We specify the test parameter in a method that returns a collection of generic parameters (<code>Collection&lt;Object[]&gt;</code>).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO1-4" id="callout_testing_framework_specifics_CO1-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We return a collection of the three <code>String</code> sets to be used as a test parameter. The values of each entry will be injected using the previously declared three parameters (username, password, and expected text).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO1-5" id="callout_testing_framework_specifics_CO1-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>In the test logic (that will be executed twice, once per data entry), we try to log in to the practice site using the username and password provided as parameters.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO1-6" id="callout_testing_framework_specifics_CO1-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>We assert the expected data (which is different depending on the credentials provided as a parameter) is available in the page body.</p></dd>&#13;
</dl>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>One of the <a data-primary="JUnit 4" data-secondary="limitations of" data-type="indexterm" id="idm45849707441584"/>most significant limitations of JUnit 4 is that we can use only one test runner per Java class. In other words, test runners are not composable in JUnit 4. To overcome this restriction (among others), the JUnit team released <a data-startref="ch8_term1" data-type="indexterm" id="idm45849707440448"/><a data-startref="ch8_term2" data-type="indexterm" id="idm45849707439776"/><a data-startref="ch8_term3" data-type="indexterm" id="idm45849707439104"/><a data-startref="ch8_term4" data-type="indexterm" id="idm45849707438432"/><a data-startref="ch8_term5" data-type="indexterm" id="idm45849707437760"/>JUnit 5 in 2017.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849707436576">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>We can use <a data-primary="@DataProvider annotation" data-primary-sortas="DataProvider annotation" data-type="indexterm" id="idm45849707434448"/><a data-primary="parameterized tests" data-secondary="with TestNG" data-secondary-sortas="TestNG" data-type="indexterm" id="idm45849707433424"/><a data-primary="TestNG" data-secondary="parameterized tests with" data-type="indexterm" id="idm45849707432208"/>the annotation <code>@DataProvider</code> to decorate the method that provides the test parameters in a parameterized TestNG test. As you can see in <a data-type="xref" href="#testng-parameterized">Example 8-2</a>, this method returns a double array of general Java objects. The annotation <code>@Data​Pro⁠vider</code> should provide a name as an attribute. This name is later used in the <code>@Test</code> method to specify the data provider. Finally, the parameters are injected into the test method.</p>&#13;
<div data-type="example" id="testng-parameterized">&#13;
<h5><span class="label">Example 8-2. </span>Parameterized test using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ParameterizedNGTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeMethod</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterMethod</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@DataProvider</code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"loginData"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO2-1" id="co_testing_framework_specifics_CO2-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">[</code><code class="o">]</code><code> </code><code class="nf">data</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="k">new</code><code> </code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">[</code><code class="o">]</code><code> </code><code class="o">{</code><code> </code><code class="o">{</code><code> </code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"Login successful"</code><code> </code><code class="o">}</code><code class="o">,</code><code>&#13;
</code><code>                </code><code class="o">{</code><code> </code><code class="s">"bad-user"</code><code class="o">,</code><code> </code><code class="s">"bad-passwd"</code><code class="o">,</code><code> </code><code class="s">"Invalid credentials"</code><code> </code><code class="o">}</code><code> </code><code class="o">}</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code class="o">(</code><code class="n">dataProvider</code><code> </code><code class="o">=</code><code> </code><code class="s">"loginData"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO2-2" id="co_testing_framework_specifics_CO2-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testParameterized</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">username</code><code class="o">,</code><code> </code><code class="n">String</code><code> </code><code class="n">password</code><code class="o">,</code><code>&#13;
</code><code>            </code><code class="n">String</code><code> </code><code class="n">expectedText</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO2-3" id="co_testing_framework_specifics_CO2-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="c1">// Same test logic than the example before&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO2-1" id="callout_testing_framework_specifics_CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We create a method used as a data provider.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO2-2" id="callout_testing_framework_specifics_CO2-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We specify this test will use the previous data provider that we call <code>loginData</code>.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO2-3" id="callout_testing_framework_specifics_CO2-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>A notable difference between JUnit 4 and TestNG regarding parameterized tests is that the parameters (username, password, and expected test in this example) are injected in TestNG as test method <a data-startref="ch8_term7" data-type="indexterm" id="idm45849707264368"/>parameters.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849707263408">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>Jupiter (the programming and extension model of JUnit 5) provides a <a data-primary="JUnit 5" data-secondary="Jupiter and" data-type="indexterm" id="ch8_term12"/><a data-primary="Jupiter" data-secondary="JUnit 5 and" data-type="indexterm" id="ch8_term13"/>potent mechanism for <a data-primary="parameterized tests" data-secondary="with JUnit 5" data-secondary-sortas="JUnit 5" data-type="indexterm" id="ch8_term10"/><a data-primary="JUnit 5" data-secondary="parameterized tests with" data-type="indexterm" id="ch8_term11"/>creating parameterized tests. In a nutshell, we need two elements to implement these tests in JUnit 5:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>An argument <a data-primary="argument providers in JUnit 5" data-type="indexterm" id="ch8_term8"/><a data-primary="JUnit 5" data-secondary="argument providers in" data-type="indexterm" id="ch8_term9"/>provider, which is the data source for the parameterized tests. <a data-type="xref" href="#argument-providers">Table 8-1</a> provides a <a data-primary="@ValueSource argument provider" data-primary-sortas="ValueSource argument provider" data-type="indexterm" id="idm45849707205008"/><a data-primary="@MethodSource argument provider" data-primary-sortas="MethodSource argument provider" data-type="indexterm" id="idm45849707204160"/><a data-primary="@CsvSource argument provider" data-primary-sortas="CsvSource argument provider" data-type="indexterm" id="idm45849707203312"/>comprehensive summary of these argument providers.</p>&#13;
</li>&#13;
<li>&#13;
<p>The <a data-primary="@ParameterizedTest annotation" data-primary-sortas="ParameterizedTest annotation" data-type="indexterm" id="idm45849707201568"/>annotation <code>@ParameterizedTest</code> (instead of the usual <code>@Test</code> annotation), which decorates the test method where the parameters are injected.</p>&#13;
</li>&#13;
</ul>&#13;
<table id="argument-providers">&#13;
<caption><span class="label">Table 8-1. </span>Argument providers in JUnit 5</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Annotation</th>&#13;
<th>Description</th>&#13;
<th>Example</th>&#13;
<th>Example output</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ValueSource</code></pre></div></td>&#13;
<td><p>Array of literal values</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@ValueSource</code><code class="o">(</code><code class="n">strings</code> <code class="o">=</code> <code class="o">{</code> <code class="s">"Hi"</code><code class="o">,</code> <code class="s">"Bye"</code> <code class="o">})</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">argument</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"arg: {}"</code><code class="o">,</code> <code class="n">argument</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">arg: Hi&#13;
arg: Bye</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@EnumSource</code></pre></div></td>&#13;
<td><p>Constants of a Java enumeration</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@EnumSource</code><code class="o">(</code><code class="n">TimeUnit</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">TimeUnit</code> <code class="n">argument</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"{}"</code><code class="o">,</code> <code class="n">argument</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">NANOSECONDS&#13;
MICROSECONDS&#13;
MILLISECONDS&#13;
SECONDS&#13;
MINUTES&#13;
HOURS&#13;
DAYS</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@MethodSource</code></pre></div></td>&#13;
<td><p>A static method of the class that provides a <code>Stream</code> of values</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">static</code> <code class="n">IntStream</code> <code class="nf">intProvider</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">return</code> <code class="n">IntStream</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="mi">0</code><code class="o">,</code> <code class="mi">1</code><code class="o">);</code>&#13;
<code class="o">}</code>&#13;
&#13;
<code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@MethodSource</code><code class="o">(</code><code class="s">"intProvider"</code><code class="o">)</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="kt">int</code> <code class="n">argument</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"arg: {}"</code><code class="o">,</code> <code class="n">argument</code><code class="o">);</code>&#13;
    <code class="n">assertNotNull</code><code class="o">(</code><code class="n">argument</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">arg: 0&#13;
arg: 1</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@CsvSource</code></pre></div></td>&#13;
<td><p>Comma-Separated Values (CSV) within the annotation</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@CsvSource</code><code class="o">({</code> <code class="s">"hello, 1"</code><code class="o">,</code> <code class="s">"world, 2"</code><code class="o">})</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">first</code><code class="o">,</code> <code class="kt">int</code> <code class="n">second</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"{} and {} "</code><code class="o">,</code> <code class="n">first</code><code class="o">,</code>&#13;
            <code class="n">second</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">hello and 1&#13;
world and 2</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@CsvFileSource</code></pre></div></td>&#13;
<td><p>Values in CSV format in a file located in the classpath</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@CsvFileSource</code><code class="o">(</code><code class="n">resources</code> <code class="o">=</code>&#13;
            <code class="s">"/input.csv"</code><code class="o">)</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">first</code><code class="o">,</code> <code class="kt">int</code> <code class="n">second</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"{} and {} "</code><code class="o">,</code> <code class="n">first</code><code class="o">,</code>&#13;
            <code class="n">second</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">hi and 3&#13;
there and 4</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ArgumentsSource</code></pre></div></td>&#13;
<td><p>A class that implements the <code>ArgumentsProvider</code> interface</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@ArgumentsSource</code><code class="o">(</code><code class="n">MyArgs</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">first</code><code class="o">,</code> <code class="kt">int</code> <code class="n">second</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"{} and {} "</code><code class="o">,</code> <code class="n">first</code><code class="o">,</code>&#13;
            <code class="n">second</code><code class="o">);</code>&#13;
<code class="o">}</code>&#13;
&#13;
<code class="kd">public</code> <code class="kd">class</code> <code class="nc">MyArgs</code> <code class="kd">implements</code>&#13;
            <code class="n">ArgumentsProvider</code> <code class="o">{</code>&#13;
  <code class="nd">@Override</code>&#13;
  <code class="kd">public</code> <code class="n">Stream</code><code class="o">&lt;?</code> <code class="kd">extends</code>&#13;
        <code class="n">Arguments</code><code class="o">&gt;</code> <code class="nf">provideArguments</code><code class="o">(</code>&#13;
        <code class="n">ExtensionContext</code> <code class="n">context</code><code class="o">)</code> <code class="o">{</code>&#13;
     <code class="k">return</code> <code class="n">Stream</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="n">Arguments</code><code class="o">.</code>&#13;
        <code class="n">of</code><code class="o">(</code><code class="s">"hi"</code><code class="o">,</code> <code class="mi">5</code><code class="o">),</code> <code class="n">Arguments</code><code class="o">.</code>&#13;
        <code class="n">of</code><code class="o">(</code><code class="s">"there"</code><code class="o">,</code> <code class="mi">6</code><code class="o">));</code>&#13;
  <code class="o">}</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">hi and 5&#13;
there and 6</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@NullSource</code></pre></div></td>&#13;
<td><p>A single <code>null</code> argument</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@ValueSource</code><code class="o">(</code><code class="n">strings</code> <code class="o">=</code> <code class="o">{</code> <code class="s">"one"</code><code class="o">,</code>&#13;
            <code class="s">"two"</code> <code class="o">})</code>&#13;
<code class="nd">@NullSource</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">argument</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"arg: {}"</code><code class="o">,</code> <code class="n">argument</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">arg: one&#13;
arg: two&#13;
arg: null</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@EmptySource</code></pre></div></td>&#13;
<td><p>A single empty argument</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@ValueSource</code><code class="o">(</code><code class="n">strings</code> <code class="o">=</code> <code class="o">{</code> <code class="s">"three"</code><code class="o">,</code>&#13;
            <code class="s">"four"</code> <code class="o">})</code>&#13;
<code class="nd">@EmptySource</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">argument</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"arg: {}"</code><code class="o">,</code> <code class="n">argument</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">arg: three&#13;
arg: four&#13;
arg:</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@NullAndEmptySource</code></pre></div></td>&#13;
<td><p>A <code>null</code> plus an empty argument</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ParameterizedTest</code>&#13;
<code class="nd">@ValueSource</code><code class="o">(</code><code class="n">strings</code> <code class="o">=</code> <code class="o">{</code> <code class="s">"five"</code><code class="o">,</code>&#13;
            <code class="s">"six"</code> <code class="o">})</code>&#13;
<code class="nd">@NullAndEmptySource</code>&#13;
<code class="kt">void</code> <code class="nf">test</code><code class="o">(</code><code class="n">String</code> <code class="n">arg</code><code class="o">)</code> <code class="o">{</code>&#13;
    <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"arg: {}"</code><code class="o">,</code> <code class="n">arg</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">arg: five&#13;
arg: six&#13;
arg: null&#13;
arg:</pre></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p><a data-type="xref" href="#junit5-parameterized">Example 8-3</a> illustrates the Jupiter version of the <a data-primary="login form, test cases with" data-type="indexterm" id="ch8_term14"/>same parameterized test shown in the previous examples. We can use different argument providers to implement this parameterized test. In this case, <a data-primary="@MethodSource argument provider" data-primary-sortas="MethodSource argument provider" data-type="indexterm" id="idm45849706471952"/>we use <code>@MethodSource</code> to return a stream of arguments. An alternative that might fit well for this <a data-primary="@CsvSource argument provider" data-primary-sortas="CsvSource argument provider" data-type="indexterm" id="idm45849706470528"/>test is using <code>@CsvSource</code> to embed the input data and expected outcome as CSV format.</p>&#13;
<div class="pagebreak-before less_space" data-type="example" id="junit5-parameterized">&#13;
<h5><span class="label">Example 8-3. </span>Parameterized test using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">ParameterizedJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">Arguments</code><code class="o">&gt;</code><code> </code><code class="nf">loginData</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO3-1" id="co_testing_framework_specifics_CO3-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="n">Stream</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="n">Arguments</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"Login successful"</code><code class="o">)</code><code class="o">,</code><code>&#13;
</code><code>                </code><code class="n">Arguments</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="s">"bad-user"</code><code class="o">,</code><code> </code><code class="s">"bad-passwd"</code><code class="o">,</code><code> </code><code class="s">"Invalid credentials"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@ParameterizedTest</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO3-2" id="co_testing_framework_specifics_CO3-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="nd">@MethodSource</code><code class="o">(</code><code class="s">"loginData"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO3-3" id="co_testing_framework_specifics_CO3-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testParameterized</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">username</code><code class="o">,</code><code> </code><code class="n">String</code><code> </code><code class="n">password</code><code class="o">,</code><code>&#13;
</code><code>            </code><code class="n">String</code><code> </code><code class="n">expectedText</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO3-4" id="co_testing_framework_specifics_CO3-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="c1">// Same test logic than the examples before&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO3-1" id="callout_testing_framework_specifics_CO3-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We define a static method to be used as an <a data-primary="@MethodSource argument provider" data-primary-sortas="MethodSource argument provider" data-type="indexterm" id="idm45849706283760"/>argument provider in <code>@MethodSource</code>.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO3-2" id="callout_testing_framework_specifics_CO3-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>Instead of a regular <code>@Test</code>, we implement a parameterized test.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO3-3" id="callout_testing_framework_specifics_CO3-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>The argument provider is linked to the <a data-primary="loginData() method" data-type="indexterm" id="idm45849706301744"/>data provided by the <code>loginData</code> method.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO3-4" id="callout_testing_framework_specifics_CO3-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>The parameters are injected in the test <a data-startref="ch8_term8" data-type="indexterm" id="idm45849706245440"/><a data-startref="ch8_term9" data-type="indexterm" id="idm45849706244800"/><a data-startref="ch8_term10" data-type="indexterm" id="idm45849706244128"/><a data-startref="ch8_term11" data-type="indexterm" id="idm45849706243456"/>method.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Selenium-Jupiter" data-type="sect2"><div class="sect2" id="idm45849706242528">&#13;
<h2>Selenium-Jupiter</h2>&#13;
&#13;
<p>You can use the same <a data-primary="parameterized tests" data-secondary="with Selenium-Jupiter" data-secondary-sortas="Selenium-Jupiter" data-type="indexterm" id="idm45849706240848"/><a data-primary="Selenium-Jupiter" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="idm45849706239568"/><a data-primary="unit testing frameworks" data-secondary="Selenium-Jupiter with" data-type="indexterm" id="idm45849706238336"/>approach for implementing JUnit 5 parameterized tests when using Selenium-Jupiter. The only difference is that you delegate the creation and disposal of <code>WebDriver</code> objects with Selenium-Jupiter. <a data-type="xref" href="#seljup-parameterized">Example 8-4</a> demonstrates how to implement the same test explained in the previous sections (i.e., parameterized login) but using Selenium-Jupiter.</p>&#13;
<div data-type="example" id="seljup-parameterized">&#13;
<h5><span class="label">Example 8-4. </span>Parameterized test using JUnit 5 with Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ExtendWith</code><code class="o">(</code><code class="n">SeleniumJupiter</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code>&#13;
</code><code class="kd">class</code><code> </code><code class="nc">ParameterizedSelJupTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">Stream</code><code class="o">&lt;</code><code class="n">Arguments</code><code class="o">&gt;</code><code> </code><code class="nf">loginData</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="n">Stream</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="n">Arguments</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"Login successful"</code><code class="o">)</code><code class="o">,</code><code>&#13;
</code><code>                </code><code class="n">Arguments</code><code class="o">.</code><code class="na">of</code><code class="o">(</code><code class="s">"bad-user"</code><code class="o">,</code><code> </code><code class="s">"bad-passwd"</code><code class="o">,</code><code> </code><code class="s">"Invalid credentials"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@ParameterizedTest</code><code>&#13;
</code><code>    </code><code class="nd">@MethodSource</code><code class="o">(</code><code class="s">"loginData"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testParameterized</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">username</code><code class="o">,</code><code> </code><code class="n">String</code><code> </code><code class="n">password</code><code class="o">,</code><code>&#13;
</code><code>            </code><code class="n">String</code><code> </code><code class="n">expectedText</code><code class="o">,</code><code> </code><code class="n">ChromeDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO4-1" id="co_testing_framework_specifics_CO4-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="c1">// Same test logic than the examples before&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO4-1" id="callout_testing_framework_specifics_CO4-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>When using different parameter resolvers in a Jupiter test, by convention, we must <a data-primary="@ParameterizedTest annotation" data-primary-sortas="ParameterizedTest annotation" data-type="indexterm" id="idm45849706149520"/>first declare the parameters injected due to <code>@ParameterizedTest</code>, and then the parameter injected by extensions (Selenium-Jupiter in this <a data-startref="ch8_term12" data-type="indexterm" id="idm45849706148000"/><a data-startref="ch8_term13" data-type="indexterm" id="idm45849706147296"/><a data-startref="ch8_term14" data-type="indexterm" id="idm45849706146624"/>case, for <code>WebDriver</code> objects).</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Cross-Browser Testing" data-type="sect2"><div class="sect2" id="idm45849706145280">&#13;
<h2>Cross-Browser Testing</h2>&#13;
&#13;
<p>Cross-browser testing is a kind of <a data-primary="functional testing" data-type="indexterm" id="idm45849706143728"/><a data-primary="testing" data-secondary="functional" data-type="indexterm" id="idm45849706143024"/><a data-primary="parameterized tests" data-secondary="cross-browser testing with" data-type="indexterm" id="ch8_term15"/><a data-primary="browsers" data-secondary="cross-browser testing with" data-type="indexterm" id="ch8_term16"/><a data-primary="Chrome" data-secondary="cross-browser testing with" data-type="indexterm" id="ch8_term17"/><a data-primary="cross-browser testing" data-type="indexterm" id="ch8_term18"/><a data-primary="Edge" data-secondary="cross-browser testing with" data-type="indexterm" id="ch8_term19"/><a data-primary="Firefox" data-secondary="cross-browser testing with" data-type="indexterm" id="ch8_term20"/><a data-primary="unit testing frameworks" data-secondary="cross-browser testing with" data-type="indexterm" id="ch8_term21"/>functional testing in which we verify that a web application works as expected using different types of web browsers. A possible way to implement cross-browser tests is through parameterized tests using the browser type (i.e., Chrome, Firefox, Edge, etc.) as the test parameter. The following sections describe how to use the unit testing framework capabilities for parameterized testing applied to cross-browser testing. We will use local browsers (Chrome, Firefox, and Edge) in these examples. An alternative way to carry out cross-browser testing is to use remote browsers (from a Selenium Server, cloud provider, or Docker), as explained in <a data-type="xref" href="ch06.html#ch06">Chapter 6</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849706093632">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p><a data-type="xref" href="#junit4-cbt">Example 8-5</a> shows a cross-browser <a data-primary="generic manager of WebDriverManager" data-type="indexterm" id="ch8_term22"/><a data-primary="JUnit 4" data-secondary="parameterized tests with" data-type="indexterm" id="ch8_term23"/><a data-primary="parameterized tests" data-secondary="with JUnit 4" data-secondary-sortas="JUnit 4" data-type="indexterm" id="ch8_term24"/><a data-primary="WebDriverManager" data-secondary="in cross-browser testing" data-secondary-sortas="cross-browser testing" data-type="indexterm" id="ch8_term25"/><a data-primary="WebDriverManager" data-secondary="generic manager of" data-type="indexterm" id="ch8_term26"/>test implemented with JUnit 4. We use <span class="keep-together">WebDriverManager</span> to ease the parameterization. As explained in <a data-type="xref" href="app02.html#generic_manager">“Generic Manager”</a>, WebDriverManager can use one or another manager depending on the value of a parameter. This parameter can be a <code>WebDriver</code> class, an enumeration, or the browser name. We use the latter in the following examples (although you can find the alternative methods in the <a href="https://github.com/bonigarcia/selenium-webdriver-java">examples repository</a>).</p>&#13;
<div data-type="example" id="junit4-cbt">&#13;
<h5><span class="label">Example 8-5. </span>Cross-browser testing using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@RunWith</code><code class="o">(</code><code class="n">Parameterized</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">CrossBrowserJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Parameter</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="n">browserName</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Parameters</code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"{index}: browser={0}"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Collection</code><code class="o">&lt;</code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">&gt;</code><code> </code><code class="nf">data</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="n">Arrays</code><code class="o">.</code><code class="na">asList</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="k">new</code><code> </code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">[</code><code class="o">]</code><code> </code><code class="o">{</code><code> </code><code class="o">{</code><code> </code><code class="s">"chrome"</code><code> </code><code class="o">}</code><code class="o">,</code><code> </code><code class="o">{</code><code> </code><code class="s">"edge"</code><code> </code><code class="o">}</code><code class="o">,</code><code> </code><code class="o">{</code><code> </code><code class="s">"firefox"</code><code> </code><code class="o">}</code><code> </code><code class="o">}</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO5-1" id="co_testing_framework_specifics_CO5-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Before</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">getInstance</code><code class="o">(</code><code class="n">browserName</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO5-2" id="co_testing_framework_specifics_CO5-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@After</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testCrossBrowser</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO5-3" id="co_testing_framework_specifics_CO5-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"Selenium WebDriver"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO5-1" id="callout_testing_framework_specifics_CO5-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We specify three browsers using their names.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO5-2" id="callout_testing_framework_specifics_CO5-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use the WebDriverManager generic manager, using these browser names as the parameters. An alternative way to select one or another browser is using the generic manager without parameters (i.e., with the method <code>.getInstance()</code>, as explained in <a data-type="xref" href="app02.html#generic_manager">“Generic Manager”</a>) and then parameterize the test (or the suite) using the Java system property <code>wdm.defaultBrowser</code> (for instance, when running it with Maven or Gradle).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO5-3" id="callout_testing_framework_specifics_CO5-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>This test is executed three times, using a different browser (Chrome, Edge, and Firefox) each <a data-startref="ch8_term22" data-type="indexterm" id="idm45849706056640"/><a data-startref="ch8_term23" data-type="indexterm" id="idm45849706055936"/><a data-startref="ch8_term24" data-type="indexterm" id="idm45849706055264"/><a data-startref="ch8_term25" data-type="indexterm" id="idm45849706054592"/><a data-startref="ch8_term26" data-type="indexterm" id="idm45849706053920"/>time.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849706052992">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p><a data-type="xref" href="#testng-cbt">Example 8-6</a> shows the same cross-browser test, this time <a data-primary="parameterized tests" data-secondary="with TestNG" data-secondary-sortas="TestNG" data-type="indexterm" id="idm45849706050544"/><a data-primary="TestNG" data-secondary="parameterized tests with" data-type="indexterm" id="idm45849706049328"/>using TestNG. In this case, the test parameter (the browser name) is injected into the test method.</p>&#13;
<div data-type="example" id="testng-cbt">&#13;
<h5><span class="label">Example 8-6. </span>Cross-browser testing using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">CrossBrowserNGTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@DataProvider</code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"browsers"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">[</code><code class="o">]</code><code> </code><code class="nf">data</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="k">new</code><code> </code><code class="n">Object</code><code class="o">[</code><code class="o">]</code><code class="o">[</code><code class="o">]</code><code> </code><code class="o">{</code><code> </code><code class="o">{</code><code> </code><code class="s">"chrome"</code><code> </code><code class="o">}</code><code class="o">,</code><code> </code><code class="o">{</code><code> </code><code class="s">"edge"</code><code> </code><code class="o">}</code><code class="o">,</code><code> </code><code class="o">{</code><code> </code><code class="s">"firefox"</code><code> </code><code class="o">}</code><code> </code><code class="o">}</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterMethod</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code class="o">(</code><code class="n">dataProvider</code><code> </code><code class="o">=</code><code> </code><code class="s">"browsers"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testCrossBrowser</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">browserName</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">getInstance</code><code class="o">(</code><code class="n">browserName</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO6-1" id="co_testing_framework_specifics_CO6-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"Selenium WebDriver"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO6-1" id="callout_testing_framework_specifics_CO6-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We need to <a data-primary="test logic" data-type="indexterm" id="idm45849705825568"/><a data-primary="WebDriver" data-secondary="object creation for" data-type="indexterm" id="idm45849705824832"/>create the <code>WebDriver</code> instance in the test logic since the test parameters are injected in the test method when using TestNG.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849705822448">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p><a data-type="xref" href="#junit5-cbt">Example 8-7</a> shows the same <a data-primary="JUnit 5" data-secondary="parameterized tests with" data-type="indexterm" id="idm45849705819776"/><a data-primary="parameterized tests" data-secondary="with JUnit 5" data-secondary-sortas="JUnit 5" data-type="indexterm" id="idm45849705818832"/>cross-browser test following the Jupiter model. Again, <a data-primary="WebDriverManager" data-secondary="in cross-browser testing" data-secondary-sortas="cross-browser testing" data-type="indexterm" id="idm45849705817488"/><a data-primary="@ValueSource argument provider" data-primary-sortas="ValueSource argument provider" data-type="indexterm" id="idm45849705816304"/>we use WebDriverManager to create the <code>WebDriver</code> instance, using the browser name as a parameter. Since these parameters are strings, we use <code>@ValueSource</code> as an argument provider.</p>&#13;
<div data-type="example" id="junit5-cbt">&#13;
<h5><span class="label">Example 8-7. </span>Cross-browser testing using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">CrossBrowserJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@ParameterizedTest</code><code>&#13;
</code><code>    </code><code class="nd">@ValueSource</code><code class="o">(</code><code class="n">strings</code><code> </code><code class="o">=</code><code> </code><code class="o">{</code><code> </code><code class="s">"chrome"</code><code class="o">,</code><code> </code><code class="s">"edge"</code><code class="o">,</code><code> </code><code class="s">"firefox"</code><code> </code><code class="o">}</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testCrossBrowser</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">browserName</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">getInstance</code><code class="o">(</code><code class="n">browserName</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>  </code><a class="co" href="#callout_testing_framework_specifics_CO7-1" id="co_testing_framework_specifics_CO7-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"Selenium WebDriver"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO7-1" id="callout_testing_framework_specifics_CO7-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>In Jupiter, the parameters in parameterized tests are injected in the test methods. For this reason, we need to create the driver instance in the test logic.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Selenium-Jupiter" data-type="sect2"><div class="sect2" id="idm45849705537344">&#13;
<h2>Selenium-Jupiter</h2>&#13;
&#13;
<p>Selenium-Jupiter provides a complementary <a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="parameterized tests with" data-type="indexterm" id="ch8_term27"/><a data-primary="parameterized tests" data-secondary="with Selenium-Jupiter" data-secondary-sortas="Selenium-Jupiter" data-type="indexterm" id="ch8_term28"/><a data-primary="test templates extension" data-type="indexterm" id="ch8_term29"/>feature for creating cross-browser tests, called <em>test templates</em>. Test templates are a special kind of parameterized test supported by Jupiter in which an extension collects the parameters. Selenium-Jupiter uses this feature to provide a comprehensive way to specify different browser aspects (such as type, version, arguments, and capabilities) using a <a data-primary="JSON, browser scenarios in" data-type="indexterm" id="idm45849705551008"/>custom JSON notation called a <em>browser scenario</em> in Selenium-Jupiter jargon. You can find more details about this feature in the <a href="https://bonigarcia.dev/selenium-jupiter/#template-tests">Selenium-Jupiter documentation</a>.</p>&#13;
&#13;
<p><a data-type="xref" href="#seljup-test-templates-json">Example 8-8</a> shows a sample browser scenario. This JSON is stored in a file called <code>browsers.json</code>, the default name used by a template test. <a data-type="xref" href="#seljup-test-templates">Example 8-9</a> shows a template test using this browser scenario.</p>&#13;
<div data-type="example" id="seljup-test-templates-json">&#13;
<h5><span class="label">Example 8-8. </span>Browser scenario for a test template in Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="json" data-type="programlisting"><code class="p">{</code><code class="w">&#13;
   </code><code class="nt">"browsers"</code><code class="p">:</code><code class="w"> </code><code class="p">[</code><code class="w">&#13;
      </code><code class="p">[</code><code class="w">&#13;
         </code><code class="p">{</code><code class="w">&#13;
            </code><code class="nt">"type"</code><code class="p">:</code><code class="w"> </code><code class="s2">"chrome"</code><code class="w"> </code><a class="co" href="#callout_testing_framework_specifics_CO8-1" id="co_testing_framework_specifics_CO8-1"><img alt="1" src="assets/1.png"/></a><code class="w">&#13;
         </code><code class="p">}</code><code class="w">&#13;
      </code><code class="p">],</code><code class="w">&#13;
      </code><code class="p">[</code><code class="w">&#13;
         </code><code class="p">{</code><code class="w">&#13;
            </code><code class="nt">"type"</code><code class="p">:</code><code class="w"> </code><code class="s2">"edge"</code><code class="p">,</code><code class="w"> </code><a class="co" href="#callout_testing_framework_specifics_CO8-2" id="co_testing_framework_specifics_CO8-2"><img alt="2" src="assets/2.png"/></a><code class="w">&#13;
             </code><code class="nt">"arguments"</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="p">[</code><code class="w">&#13;
                </code><code class="s2">"--headless"</code><code class="w">&#13;
             </code><code class="p">]</code><code class="w">&#13;
         </code><code class="p">}</code><code class="w">&#13;
      </code><code class="p">],</code><code class="w">&#13;
      </code><code class="p">[</code><code class="w">&#13;
         </code><code class="p">{</code><code class="w">&#13;
            </code><code class="nt">"type"</code><code class="p">:</code><code class="w"> </code><code class="s2">"firefox-in-docker"</code><code class="p">,</code><code class="w"> </code><a class="co" href="#callout_testing_framework_specifics_CO8-3" id="co_testing_framework_specifics_CO8-3"><img alt="3" src="assets/3.png"/></a><code class="w">&#13;
            </code><code class="nt">"version"</code><code class="p">:</code><code class="w"> </code><code class="s2">"93"</code><code class="w">&#13;
         </code><code class="p">}</code><code class="w">&#13;
      </code><code class="p">]</code><code class="w">&#13;
   </code><code class="p">]</code><code class="w">&#13;
</code><code class="p">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO8-1" id="callout_testing_framework_specifics_CO8-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>This browser scenario contains three browsers. The first one is a local Chrome.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO8-2" id="callout_testing_framework_specifics_CO8-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>The second browser is a local Edge in headless mode.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO8-3" id="callout_testing_framework_specifics_CO8-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>The third browser is Firefox 93, executed in a Docker container.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="seljup-test-templates">&#13;
<h5><span class="label">Example 8-9. </span>Cross-browser testing using test templates in JUnit 5 with Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@EnabledIfDockerAvailable</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO9-1" id="co_testing_framework_specifics_CO9-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="nd">@ExtendWith</code><code class="o">(</code><code class="n">SeleniumJupiter</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code>&#13;
</code><code class="kd">class</code><code> </code><code class="nc">CrossBrowserJsonSelJupTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@TestTemplate</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO9-2" id="co_testing_framework_specifics_CO9-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testCrossBrowser</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO9-3" id="co_testing_framework_specifics_CO9-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"Selenium WebDriver"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO9-1" id="callout_testing_framework_specifics_CO9-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use this Selenium-Jupiter annotation to skip the test when Docker is unavailable (since one of the browsers defined in the scenario uses Docker).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO9-2" id="callout_testing_framework_specifics_CO9-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We need to decorate the <a data-primary="@TestTemplate annotation" data-primary-sortas="TestTemplate annotation" data-type="indexterm" id="idm45849705338304"/>test method using <code>@TestTemplate</code> instead of the usual <code>@Test</code> annotation.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO9-3" id="callout_testing_framework_specifics_CO9-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We use the generic <code>WebDriver</code> to inject the driver instances. Alternatively, <code>RemoteWebDriver</code> is also valid for <a data-startref="ch8_term6" data-type="indexterm" id="idm45849705296656"/><a data-startref="ch8_term15" data-type="indexterm" id="idm45849705295952"/><a data-startref="ch8_term16" data-type="indexterm" id="idm45849705295280"/><a data-startref="ch8_term17" data-type="indexterm" id="idm45849705294608"/><a data-startref="ch8_term18" data-type="indexterm" id="idm45849705293936"/><a data-startref="ch8_term19" data-type="indexterm" id="idm45849705293264"/><a data-startref="ch8_term20" data-type="indexterm" id="idm45849705292592"/><a data-startref="ch8_term21" data-type="indexterm" id="idm45849705291920"/><a data-startref="ch8_term27" data-type="indexterm" id="idm45849705291248"/><a data-startref="ch8_term28" data-type="indexterm" id="idm45849705290576"/><a data-startref="ch8_term29" data-type="indexterm" id="idm45849705289904"/>test templates.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Categorizing and Filtering Tests" data-type="sect1"><div class="sect1" id="categorizing_and_filtering">&#13;
<h1>Categorizing and Filtering Tests</h1>&#13;
&#13;
<p>A common need when basing a test suite on Selenium WebDriver (especially when the number of tests is high) is to <a data-primary="exclusion and inclusion of tests" data-type="indexterm" id="ch8_term77"/><a data-primary="categorizing tests" data-type="indexterm" id="ch8_term30"/><a data-primary="filtering tests" data-type="indexterm" id="ch8_term31"/><a data-primary="testing" data-secondary="conditional execution of" data-type="indexterm" id="ch8_term34"/><a data-primary="testing" data-secondary="with specified groupings" data-secondary-sortas="specified groupings" data-type="indexterm" id="ch8_term35"/>execute only a group of tests. There are different ways to achieve single or group test execution. When <a data-primary="IDEs (Integrated Development Environments)" data-type="indexterm" id="idm45849705281664"/><a data-primary="Integrated Development Environments (IDEs)" data-type="indexterm" id="idm45849705280960"/>using an IDE to run tests, we can select the specific test(s) to be executed. When using the command line, there are other mechanisms we can use to select these tests.</p>&#13;
&#13;
<p>At first glance, we can use the filtering mechanisms provided by the build tools. For instance, <a data-primary="Gradle" data-secondary="test inclusion and exclusion with" data-type="indexterm" id="ch8_term79"/><a data-primary="Maven" data-secondary="test inclusion and exclusion with" data-type="indexterm" id="ch8_term80"/><a data-primary="inclusion and exclusion of tests" data-type="indexterm" id="ch8_term78"/><a data-primary="excludeTests property" data-type="indexterm" id="idm45849705275824"/>Maven and Gradle allow including or excluding tests based on the test classes and method names. The basic syntax for these commands is introduced in <a data-type="xref" href="app03.html#appendix03">Appendix C</a>. <a data-type="xref" href="#maven_gradle_filtering">Table 8-2</a> shows several common examples using these commands. Notice that the wildcard <code>*</code> is used in these examples to match any character in the test class name.</p>&#13;
<table id="maven_gradle_filtering">&#13;
<caption><span class="label">Table 8-2. </span>Examples of Maven and Gradle commands for including and excluding tests</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Description</th>&#13;
<th>Maven</th>&#13;
<th>Gradle</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Run tests starting with the word <em>Hello</em></p></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">mvn -B test&#13;
    -Dtest=Hello*</pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">gradle test&#13;
    --tests Hello*</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Run tests that contain <em>Basic</em> or <em>Timeout</em></p></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">mvn test&#13;
    -Dtest=*Basic*,*Timeout*</pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">gradle test&#13;
    --tests *Basic* --tests *Timeout*</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Run tests except those starting with <em>Firefox</em></p></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">mvn test&#13;
    -Dtest=!*Firefox*</pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">gradle test&#13;
    -PexcludeTests=**/*Firefox*</pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Run tests except those starting with <em>Docker</em> or containing <em>Remote</em></p></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">mvn test&#13;
    -Dtest=!Docker*,!*Remote*</pre></div></td>&#13;
<td><div>&#13;
<pre data-type="programlisting">gradle test&#13;
    -PexcludeTests=**/Docker*,**/*Remote*</pre></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>In addition to the build tool, we can use <a data-primary="unit testing frameworks" data-secondary="for grouping tests" data-secondary-sortas="grouping tests" data-type="indexterm" id="ch8_term36"/><a data-primary="grouping tests" data-type="indexterm" id="ch8_term32"/><a data-primary="tagging tests" data-type="indexterm" id="ch8_term33"/>built-in features provided by the unit testing frameworks for categorizing (also known as grouping or tagging) and filtering tests based on those categories. The following subsections explain how.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849705249424">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>JUnit 4 provides the <a data-primary="@Category annotation" data-primary-sortas="Category annotation" data-type="indexterm" id="idm45849705247680"/><a data-primary="JUnit 4" data-secondary="grouping tests with" data-type="indexterm" id="ch8_term37"/>annotation <code>@Category</code> to group tests. We need to specify one or more Java classes as attributes in this annotation. Then we can use these classes to select and execute the tests belonging to one or more categories. <a data-type="xref" href="#junit4-tag">Example 8-10</a> shows a basic class using this feature.</p>&#13;
<div data-type="example" id="junit4-tag">&#13;
<h5><span class="label">Example 8-10. </span>Test using categories and JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">CategoriesJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Before</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@After</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="nd">@Category</code><code class="o">(</code><code class="n">WebForm</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO10-1" id="co_testing_framework_specifics_CO10-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testCategoriesWebForm</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"web-form"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="nd">@Category</code><code class="o">(</code><code class="n">HomePage</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO10-2" id="co_testing_framework_specifics_CO10-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">tesCategoriestHomePage</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">doesNotContain</code><code class="o">(</code><code class="s">"web-form"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO10-1" id="callout_testing_framework_specifics_CO10-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p><code>WebForm</code> is an empty interface available in the examples repository.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO10-2" id="callout_testing_framework_specifics_CO10-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p><code>HomePage</code> is another empty interface available in the examples repository.</p></dd>&#13;
</dl>&#13;
&#13;
<p>Then we can use the command line to execute tests based on their groups. For instance, the following commands show the Maven and Gradle command for running the tests that belong to the <code>HomePage</code> category.</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -Dgroups=&#13;
    io.github.bonigarcia.webdriver.junit4.ch08.categories.HomePage&#13;
gradle test -Pgroups=&#13;
    io.github.bonigarcia.webdriver.junit4.ch08.categories.HomePage</pre>&#13;
&#13;
<p>We can combine this filtering with the Maven and Gradle support for selecting tests based on the class name. For instance, the following commands execute those tests belonging to the <code>HomePage</code> category but only in <a data-startref="ch8_term37" data-type="indexterm" id="idm45849705103008"/>the test class <code>CategoriesJUnit4Test</code>.</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -Dtest=CategoriesJUnit4Test -DexcludedGroups=&#13;
    io.github.bonigarcia.webdriver.junit4.ch08.categories.HomePage&#13;
gradle test --tests CategoriesJUnit4Test -PexcludedGroups=&#13;
    io.github.bonigarcia.webdriver.junit4.ch08.categories.HomePage</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849705100880">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>TestNG also <a data-primary="TestNG" data-secondary="grouping tests with" data-type="indexterm" id="idm45849705099040"/>allows grouping tests. <a data-type="xref" href="#testng-tag">Example 8-11</a> demonstrates a basic use of this feature. In <a data-primary="@Test annotation" data-primary-sortas="Test annotation" data-type="indexterm" id="idm45849705043696"/>summary, the <code>@Test</code> annotation allows specifying string labels for these groups.</p>&#13;
<div class="pagebreak-before less_space" data-type="example" id="testng-tag">&#13;
<h5><span class="label">Example 8-11. </span>Test using groups and TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">CategoriesNGTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeMethod</code><code class="o">(</code><code class="n">alwaysRun</code><code> </code><code class="o">=</code><code> </code><code class="kc">true</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO11-1" id="co_testing_framework_specifics_CO11-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterMethod</code><code class="o">(</code><code class="n">alwaysRun</code><code> </code><code class="o">=</code><code> </code><code class="kc">true</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code class="o">(</code><code class="n">groups</code><code> </code><code class="o">=</code><code> </code><code class="o">{</code><code> </code><code class="s">"WebForm"</code><code> </code><code class="o">}</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO11-2" id="co_testing_framework_specifics_CO11-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testCategoriesWebForm</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"web-form"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code class="o">(</code><code class="n">groups</code><code> </code><code class="o">=</code><code> </code><code class="o">{</code><code> </code><code class="s">"HomePage"</code><code> </code><code class="o">}</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO11-3" id="co_testing_framework_specifics_CO11-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">tesCategoriestHomePage</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">doesNotContain</code><code class="o">(</code><code class="s">"web-form"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO11-1" id="callout_testing_framework_specifics_CO11-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We set to <code>true</code> the attribute <code>alwaysRun</code> to indicate that the setup and teardown methods are not filtered during test execution.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO11-2" id="callout_testing_framework_specifics_CO11-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We assign the group name <code>WebForm</code> to the first test of this class.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO11-3" id="callout_testing_framework_specifics_CO11-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We set the group name <code>HomePage</code> to the second test.</p></dd>&#13;
</dl>&#13;
&#13;
<p>Then we can use the command line to filter the test execution based on these categories. The following snippet first shows how to execute the test that belongs to the <code>HomePage</code> group. The second illustrates how to combine this grouping with the Maven and Gradle filtering mechanism based on the class name.</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -Dgroups=HomePage&#13;
gradle test -Pgroups=HomePage&#13;
&#13;
mvn test -Dtest=CategoriesNGTest -DexcludedGroups=HomePage&#13;
gradle test --tests CategoriesNGTest -PexcludedGroups=HomePage</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849704882048">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>The Jupiter programming model <a data-primary="JUnit 5" data-secondary="grouping tests with" data-type="indexterm" id="idm45849704880336"/><a data-primary="@Tag annotation" data-primary-sortas="Tag annotation" data-type="indexterm" id="idm45849704820944"/><a data-primary="JUnit 5" data-secondary="Jupiter and" data-type="indexterm" id="idm45849704820096"/><a data-primary="Jupiter" data-secondary="JUnit 5 and" data-type="indexterm" id="idm45849704819184"/>provides a way to group tests based on custom labels called <em>tags</em>. We use the annotation <code>@Tag</code> for that purpose. <a data-type="xref" href="#junit5-tag">Example 8-12</a> illustrates this feature.</p>&#13;
<div data-type="example" id="junit5-tag">&#13;
<h5><span class="label">Example 8-12. </span>Test using tags and JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">CategoriesJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="nd">@Tag</code><code class="o">(</code><code class="s">"WebForm"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO12-1" id="co_testing_framework_specifics_CO12-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testCategoriesWebForm</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"web-form"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="nd">@Tag</code><code class="o">(</code><code class="s">"HomePage"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO12-2" id="co_testing_framework_specifics_CO12-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testCategoriesHomePage</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">doesNotContain</code><code class="o">(</code><code class="s">"web-form"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO12-1" id="callout_testing_framework_specifics_CO12-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We mark the first test using the label <code>WebForm</code>.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO12-2" id="callout_testing_framework_specifics_CO12-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We categorize the second test using the <code>HomePage</code> tag.</p></dd>&#13;
</dl>&#13;
&#13;
<p>We can use these tags to include or exclude tests when executing tests using the command line. The following commands show several examples for <a data-startref="ch8_term30" data-type="indexterm" id="idm45849704687248"/><a data-startref="ch8_term31" data-type="indexterm" id="idm45849704686544"/><a data-startref="ch8_term32" data-type="indexterm" id="idm45849704685872"/><a data-startref="ch8_term33" data-type="indexterm" id="idm45849704685200"/><a data-startref="ch8_term34" data-type="indexterm" id="idm45849704684528"/><a data-startref="ch8_term35" data-type="indexterm" id="idm45849704683856"/><a data-startref="ch8_term36" data-type="indexterm" id="idm45849704683184"/><a data-startref="ch8_term77" data-type="indexterm" id="idm45849704682512"/><a data-startref="ch8_term78" data-type="indexterm" id="idm45849704630240"/><a data-startref="ch8_term79" data-type="indexterm" id="idm45849704629744"/><a data-startref="ch8_term80" data-type="indexterm" id="idm45849704629136"/>Maven and Gradle:</p>&#13;
&#13;
<pre class="pagebreak-before" data-type="programlisting">mvn test -Dgroups=HomePage&#13;
gradle test -Pgroups=HomePage&#13;
&#13;
mvn test -Dtest=CategoriesNGTest -DexcludedGroups=HomePage&#13;
gradle test --tests CategoriesNGTest -PexcludedGroups=HomePage</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Ordering Tests" data-type="sect1"><div class="sect1" id="idm45849704627536">&#13;
<h1>Ordering Tests</h1>&#13;
&#13;
<p>The test execution <a data-primary="ordering of test execution" data-secondary="about" data-type="indexterm" id="idm45849704626160"/><a data-primary="testing" data-secondary="order of execution of" data-type="indexterm" id="ch8_term38"/><a data-primary="unit testing frameworks" data-secondary="for ordering of test execution" data-secondary-sortas="ordering of test execution" data-type="indexterm" id="ch8_term39"/>order is unknown beforehand in the unit testing frameworks used in this book. Nevertheless, there are mechanisms to select a given execution order. One possible use of this feature in the Selenium WebDriver arena is to reuse the same browser session (i.e., use the same <code>WebDriver</code> instance) by different tests, interacting with the SUT in a given order. The following examples demonstrate this use case for JUnit 4, TestNG, JUnit 5, and JUnit 5 plus Selenium-Jupiter.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849704621904">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>JUnit 4 provides the <a data-primary="@FixMethodOrder annotation" data-primary-sortas="FixMethodOrder annotation" data-type="indexterm" id="ch8_term40"/><a data-primary="JUnit 4" data-secondary="ordering of test execution with" data-type="indexterm" id="ch8_term41"/><a data-primary="ordering of test execution" data-secondary="with JUnit 4" data-secondary-sortas="JUnit 4" data-type="indexterm" id="ch8_term42"/>annotation <code>@FixMethodOrder</code> to establish the test execution. This annotation <a data-primary="MethodSorters enumeration" data-type="indexterm" id="idm45849704615504"/>accepts an enumeration called <code>MethodSorters</code>, which is composed of the following values:</p>&#13;
<dl>&#13;
<dt><code>NAME_ASCENDING</code></dt>&#13;
<dd>&#13;
<p>Sorts the test methods by the method name in lexicographic order</p>&#13;
</dd>&#13;
<dt><code>JVM</code></dt>&#13;
<dd>&#13;
<p>Leaves the test methods in the order returned by the JVM</p>&#13;
</dd>&#13;
<dt><code>DEFAULT</code></dt>&#13;
<dd>&#13;
<p>Sorts the test methods in a deterministic, but not predictable, order</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#junit4-order">Example 8-13</a> shows a complete test case in which the tests are executed using the method name.</p>&#13;
<div data-type="example" id="junit4-order">&#13;
<h5><span class="label">Example 8-13. </span>Ordering tests using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@FixMethodOrder</code><code class="o">(</code><code class="n">MethodSorters</code><code class="o">.</code><code class="na">NAME_ASCENDING</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO13-1" id="co_testing_framework_specifics_CO13-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">OrderJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeClass</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO13-2" id="co_testing_framework_specifics_CO13-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterClass</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO13-3" id="co_testing_framework_specifics_CO13-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO13-4" id="co_testing_framework_specifics_CO13-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testA</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/navigation1.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertBodyContains</code><code class="o">(</code><code class="s">"Lorem ipsum"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testB</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">linkText</code><code class="o">(</code><code class="s">"2"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertBodyContains</code><code class="o">(</code><code class="s">"Ut enim"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testC</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">linkText</code><code class="o">(</code><code class="s">"3"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertBodyContains</code><code class="o">(</code><code class="s">"Excepteur sint"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">assertBodyContains</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">text</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">String</code><code> </code><code class="n">bodyText</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"body"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">getText</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">bodyText</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="n">text</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO13-1" id="callout_testing_framework_specifics_CO13-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use the annotation <code>@FixMethodOrder</code> at the class level to fix the order of the tests available in this class.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO13-2" id="callout_testing_framework_specifics_CO13-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We create the driver instance before all tests (since we want to use the <code>WebDriver</code> session in all the tests).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO13-3" id="callout_testing_framework_specifics_CO13-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We quit the driver instance after all tests. Therefore, we finish the session after the last test of this class.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO13-4" id="callout_testing_framework_specifics_CO13-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>Since the test names are lexicographically ordered (<code>testA</code>, <code>testB</code>, and <code>testC</code>), the test execution will follow this <a data-startref="ch8_term40" data-type="indexterm" id="idm45849704339344"/><a data-startref="ch8_term41" data-type="indexterm" id="idm45849704338640"/><a data-startref="ch8_term42" data-type="indexterm" id="idm45849704337968"/>sequence.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849704337168">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>A simple way to order <a data-primary="ordering of test execution" data-secondary="with TestNG" data-secondary-sortas="TestNG" data-type="indexterm" id="idm45849704335488"/><a data-primary="TestNG" data-secondary="ordering of test execution with" data-type="indexterm" id="idm45849704330192"/><a data-primary="priority attribute with @Test" data-type="indexterm" id="idm45849704329232"/><a data-primary="@Test annotation" data-primary-sortas="Test annotation" data-type="indexterm" id="idm45849704328544"/>tests in TestNG is using an incremental priority for each test. <a data-type="xref" href="#testng-order">Example 8-14</a> demonstrates this feature, by using the attribute <code>priority</code> in the <code>@Test</code> annotation.</p>&#13;
<div data-type="example" id="testng-order">&#13;
<h5><span class="label">Example 8-14. </span>Ordering tests using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">OrderNGTest</code> <code class="o">{</code>&#13;
&#13;
    <code class="kd">static</code> <code class="n">WebDriver</code> <code class="n">driver</code><code class="o">;</code>&#13;
&#13;
    <code class="nd">@BeforeClass</code>&#13;
    <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">driver</code> <code class="o">=</code> <code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">().</code><code class="na">create</code><code class="o">();</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@AfterClass</code>&#13;
    <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">teardown</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">();</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code><code class="o">(</code><code class="n">priority</code> <code class="o">=</code> <code class="mi">1</code><code class="o">)</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testA</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code><code class="o">(</code><code class="n">priority</code> <code class="o">=</code> <code class="mi">2</code><code class="o">)</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testB</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code><code class="o">(</code><code class="n">priority</code> <code class="o">=</code> <code class="mi">3</code><code class="o">)</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testC</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849704283504">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>Jupiter provides the <a data-primary="JUnit 5" data-secondary="ordering of test execution with" data-type="indexterm" id="idm45849704209328"/><a data-primary="ordering of test execution" data-secondary="with JUnit 5" data-secondary-sortas="JUnit 5" data-type="indexterm" id="idm45849704208352"/><a data-primary="@TestMethodOrder annotation" data-primary-sortas="TestMethodOrder annotation" data-type="indexterm" id="idm45849704186880"/>annotation <code>@TestMethodOrder</code> for ordering tests. This annotation can be configured using the following ordering implementations:</p>&#13;
<dl>&#13;
<dt><code>DisplayName</code></dt>&#13;
<dd>&#13;
<p>Sorts test methods alphanumerically based on their display names.</p>&#13;
</dd>&#13;
<dt><code>MethodName</code></dt>&#13;
<dd>&#13;
<p>Sorts test methods alphanumerically based on their names.</p>&#13;
</dd>&#13;
<dt><code>OrderAnnotation</code></dt>&#13;
<dd>&#13;
<p>Sorts test methods based on the numeric values specified using the <code>@Order</code> annotation. <a data-type="xref" href="#junit5-order">Example 8-15</a> shows a test using this method.</p>&#13;
</dd>&#13;
<dt><code>Random</code></dt>&#13;
<dd>&#13;
<p>Orders test methods pseudorandomly.</p>&#13;
</dd>&#13;
</dl>&#13;
<div data-type="example" id="junit5-order">&#13;
<h5><span class="label">Example 8-15. </span>Ordering tests using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@TestMethodOrder</code><code class="o">(</code><code class="n">OrderAnnotation</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>&#13;
<code class="kd">class</code> <code class="nc">OrderJupiterTest</code> <code class="o">{</code>&#13;
&#13;
    <code class="kd">static</code> <code class="n">WebDriver</code> <code class="n">driver</code><code class="o">;</code>&#13;
&#13;
    <code class="nd">@BeforeAll</code>&#13;
    <code class="kd">static</code> <code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">driver</code> <code class="o">=</code> <code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">().</code><code class="na">create</code><code class="o">();</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@AfterAll</code>&#13;
    <code class="kd">static</code> <code class="kt">void</code> <code class="nf">teardown</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">();</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="nd">@Order</code><code class="o">(</code><code class="mi">1</code><code class="o">)</code>&#13;
    <code class="kt">void</code> <code class="nf">testA</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="nd">@Order</code><code class="o">(</code><code class="mi">2</code><code class="o">)</code>&#13;
    <code class="kt">void</code> <code class="nf">testB</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="nd">@Order</code><code class="o">(</code><code class="mi">3</code><code class="o">)</code>&#13;
    <code class="kt">void</code> <code class="nf">testC</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Selenium-Jupiter" data-type="sect2"><div class="sect2" id="idm45849704114736">&#13;
<h2>Selenium-Jupiter</h2>&#13;
&#13;
<p>As usual, tests using <a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="ordering of test execution with" data-type="indexterm" id="idm45849704077872"/><a data-primary="ordering of test execution" data-secondary="with Selenium-Jupiter" data-secondary-sortas="Selenium-Jupiter" data-type="indexterm" id="idm45849704076928"/><a data-primary="Selenium-Jupiter" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="idm45849704075744"/><a data-primary="unit testing frameworks" data-secondary="Selenium-Jupiter with" data-type="indexterm" id="idm45849704055520"/>Selenium-Jupiter also use the Jupiter programming model; therefore, these features (such as test ordering) also are valid for Selenium-Jupiter tests. <a data-type="xref" href="#seljup-order">Example 8-16</a> shows the same test as before, using Selenium-Jupiter for the driver instantiation. By default, the driver objects are created before each test and terminated after each test. Selenium-Jupiter <a data-primary="@SingleSession annotation" data-primary-sortas="SingleSession annotation" data-type="indexterm" id="idm45849704053648"/>provides the annotation <code>@SingleSession</code> to change this behavior, creating the driver instance before all tests, and closing the session after all tests.</p>&#13;
<div data-type="example" id="seljup-order">&#13;
<h5><span class="label">Example 8-16. </span>Ordering tests using JUnit 5 with Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@ExtendWith</code><code class="o">(</code><code class="n">SeleniumJupiter</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>&#13;
<code class="nd">@TestMethodOrder</code><code class="o">(</code><code class="n">OrderAnnotation</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>&#13;
<code class="nd">@SingleSession</code>&#13;
<code class="kd">class</code> <code class="nc">OrderSelJupTest</code> <code class="o">{</code>&#13;
&#13;
    <code class="n">WebDriver</code> <code class="n">driver</code><code class="o">;</code>&#13;
&#13;
    <code class="n">OrderSelJupTest</code><code class="o">(</code><code class="n">ChromeDriver</code> <code class="n">driver</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="k">this</code><code class="o">.</code><code class="na">driver</code> <code class="o">=</code> <code class="n">driver</code><code class="o">;</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="nd">@Order</code><code class="o">(</code><code class="mi">1</code><code class="o">)</code>&#13;
    <code class="kt">void</code> <code class="nf">testA</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="nd">@Order</code><code class="o">(</code><code class="mi">2</code><code class="o">)</code>&#13;
    <code class="kt">void</code> <code class="nf">testB</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="nd">@Order</code><code class="o">(</code><code class="mi">3</code><code class="o">)</code>&#13;
    <code class="kt">void</code> <code class="nf">testC</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="c1">// Test logic</code>&#13;
    <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Failure Analysis" data-type="sect1"><div class="sect1" id="failure_analysis">&#13;
<h1>Failure Analysis</h1>&#13;
&#13;
<p><em>Failure analysis</em> (also known as <em>troubleshooting</em>) is the <a data-startref="ch8_term38" data-type="indexterm" id="idm45849703972720"/><a data-startref="ch8_term39" data-type="indexterm" id="idm45849703971984"/><a data-primary="end-to-end (E2E) testing" data-secondary="challenges with" data-type="indexterm" id="idm45849703971312"/><a data-primary="failure analysis" data-type="indexterm" id="ch8_term43"/><a data-primary="testing" data-secondary="failure analysis and" data-type="indexterm" id="ch8_term44"/><a data-primary="troubleshooting" data-type="indexterm" id="ch8_term45"/><a data-primary="unit testing frameworks" data-secondary="failure analysis with" data-type="indexterm" id="ch8_term46"/><a data-primary="end-to-end (E2E) testing" data-secondary="failure analysis in" data-type="indexterm" id="ch8_term47"/>process of gathering and analyzing data to discover the cause of a failure. This process can be challenging for Selenium WebDriver tests because the whole system is tested, and the underlying root causes of a failed test can be multiple. For instance, the cause of a failure in an end-to-end test might be the client-side (frontend) logic, the server-side (backend) logic, or even the integration with other components (e.g., database or external services).</p>&#13;
&#13;
<p>We can use different techniques to help developers and testers in the failure analysis process. A typical way to do this is to detect when a test has failed and, before terminating the driver session, gather some data to discover the cause. The following assets can help in this process:</p>&#13;
<dl>&#13;
<dt>Screenshots</dt>&#13;
<dd>&#13;
<p>A picture of the <a data-primary="screenshots" data-secondary="for failure analysis" data-secondary-sortas="failure analysis" data-type="indexterm" id="ch8_term48"/>web application UI after a test failure might help determine the failure cause. <a data-type="xref" href="ch04.html#screenshots">“Screenshots”</a> explains how to use the Selenium WebDriver API to make screenshots.</p>&#13;
</dd>&#13;
<dt>Browser log</dt>&#13;
<dd>&#13;
<p>The JavaScript <a data-primary="browser log" data-type="indexterm" id="idm45849703928464"/><a data-primary="log gathering" data-type="indexterm" id="idm45849703927728"/>console can be another potential source of information when an error occurs. <a data-type="xref" href="ch05.html#log-gathering">“Log Gathering”</a> explains how to carry out this log <span class="keep-together">gathering</span>.</p>&#13;
</dd>&#13;
<dt>Session recordings</dt>&#13;
<dd>&#13;
<p>We can <a data-primary="recording of sessions" data-type="indexterm" id="idm45849703924128"/><a data-primary="session recordings" data-type="indexterm" id="idm45849703923392"/>easily record the browser session when using browsers in Docker containers. <a data-type="xref" href="ch06.html#browsers-in-docker">“Browsers in Docker Containers”</a> explains how to do this with WebDriverManager and Selenium-Jupiter.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>The following subsections provide basic examples for making browser screenshots of failed tests. To that aim, we need to relay in the unit testing specific features to detect failed tests.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849703921152">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>JUnit allows tuning the default behavior of tests by using <em>rules</em>. A test class defines a rule by <a data-primary="@Rules annotation" data-primary-sortas="Rules annotation" data-type="indexterm" id="idm45849703918576"/><a data-primary="JUnit 4" data-secondary="rules in" data-type="indexterm" id="ch8_term49"/><a data-primary="rules in JUnit 4" data-type="indexterm" id="ch8_term50"/><a data-primary="failure analysis" data-secondary="JUnit 4 for" data-type="indexterm" id="ch8_term51"/><a data-primary="JUnit 4" data-secondary="for failure analysis" data-secondary-sortas="failure analysis" data-type="indexterm" id="ch8_term52"/>decorating a class attribute with the <code>@Rule</code> annotation. <a data-type="xref" href="#junit4-rules">Table 8-3</a> summarizes the rules provided out of the box by JUnit 4.</p>&#13;
<table id="junit4-rules">&#13;
<caption><span class="label">Table 8-3. </span>Rules in JUnit 4</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Rule</th>&#13;
<th>Description</th>&#13;
<th>Example</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">ErrorCollector</code></pre></div></td>&#13;
<td><p>Allows the execution of a test to continue when exceptions happen (while collecting these exceptions)</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Rule</code>&#13;
<code class="kd">public</code> <code class="n">ErrorCollector</code> <code class="n">collector</code> <code class="o">=</code>&#13;
        <code class="k">new</code> <code class="nf">ErrorCollector</code><code class="o">();</code>&#13;
&#13;
<code class="nd">@Ignore</code>&#13;
<code class="nd">@Test</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">test</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">collector</code><code class="o">.</code><code class="na">checkThat</code><code class="o">(</code><code class="s">"a"</code><code class="o">,</code> <code class="n">equalTo</code><code class="o">(</code><code class="s">"b"</code><code class="o">));</code>&#13;
    <code class="n">collector</code><code class="o">.</code><code class="na">checkThat</code><code class="o">(</code><code class="mi">1</code><code class="o">,</code> <code class="n">equalTo</code><code class="o">(</code><code class="mi">2</code><code class="o">));</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">ExternalResource</code></pre></div></td>&#13;
<td><p>Provides a base class to set up and tear down an external resource before each test</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">private</code> <code class="n">Resource</code> <code class="n">resource</code><code class="o">;</code>&#13;
&#13;
<code class="nd">@Rule</code>&#13;
<code class="kd">public</code> <code class="n">ExternalResource</code> <code class="n">rule</code> <code class="o">=</code>&#13;
        <code class="k">new</code> <code class="nf">ExternalResource</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">before</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">Throwable</code> <code class="o">{</code>&#13;
        <code class="n">resource</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Resource</code><code class="o">();</code>&#13;
        <code class="n">resource</code><code class="o">.</code><code class="na">open</code><code class="o">();</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">after</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">resource</code><code class="o">.</code><code class="na">close</code><code class="o">();</code>&#13;
    <code class="o">}</code>&#13;
<code class="o">};</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TestName</code></pre></div></td>&#13;
<td><p>Makes the current test name available for test methods</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Rule</code>&#13;
<code class="kd">public</code> <code class="n">TestName</code> <code class="n">name</code> <code class="o">=</code> <code class="k">new</code> <code class="n">TestName</code><code class="o">();</code>&#13;
&#13;
<code class="nd">@Test</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">testA</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">assertThat</code><code class="o">(</code><code class="s">"testA"</code><code class="o">)</code>&#13;
        <code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">name</code><code class="o">.</code><code class="na">getMethodName</code><code class="o">());</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TemporaryFolder</code></pre></div></td>&#13;
<td><p>Allows for the creation of temporary files and folders</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Rule</code>&#13;
<code class="kd">public</code> <code class="n">TemporaryFolder</code> <code class="n">folder</code> <code class="o">=</code>&#13;
        <code class="k">new</code> <code class="nf">TemporaryFolder</code><code class="o">();</code>&#13;
&#13;
<code class="nd">@Test</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">test</code><code class="o">()</code> <code class="kd">throws</code> <code class="n">IOException</code> <code class="o">{</code>&#13;
    <code class="n">File</code> <code class="n">file</code> <code class="o">=</code> <code class="n">folder</code><code class="o">.</code><code class="na">newFile</code><code class="o">(</code><code class="s">"myfile.txt"</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Timeout</code></pre></div></td>&#13;
<td><p>Applies a timeout to all test methods in a class</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Rule</code>&#13;
<code class="kd">public</code> <code class="n">Timeout</code> <code class="n">timeout</code> <code class="o">=</code>&#13;
        <code class="k">new</code> <code class="nf">Timeout</code><code class="o">(</code><code class="mi">10</code><code class="o">,</code> <code class="n">SECONDS</code><code class="o">);</code>&#13;
&#13;
<code class="nd">@Test</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">test</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="k">while</code> <code class="o">(</code><code class="kc">true</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TestWatcher</code></pre></div></td>&#13;
<td><p>Allows the capture of several execution phases of a test: <code>starting</code>, <code>succeeded</code>, <code>failed</code>, <code>skipped</code>, and <code>finished</code>.</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Rule</code>&#13;
<code class="kd">public</code> <code class="n">TestWatcher</code> <code class="n">watcher</code> <code class="o">=</code>&#13;
        <code class="k">new</code> <code class="nf">TestWatcher</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">succeeded</code><code class="o">(</code><code class="n">Description</code> <code class="n">d</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Test succeeded: {}"</code><code class="o">,</code>&#13;
            <code class="n">d</code><code class="o">.</code><code class="na">getMethodName</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">protected</code> <code class="kt">void</code> <code class="nf">failed</code><code class="o">(</code><code class="n">Throwable</code> <code class="n">e</code><code class="o">,</code>&#13;
            <code class="n">Description</code> <code class="n">d</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Test failed: {}"</code><code class="o">,</code>&#13;
            <code class="n">d</code><code class="o">.</code><code class="na">getMethodName</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
<code class="o">};</code></pre></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>We can <a data-startref="ch8_term49" data-type="indexterm" id="idm45849703449632"/><a data-startref="ch8_term50" data-type="indexterm" id="idm45849703426592"/><a data-primary="TestWatcher rule" data-type="indexterm" id="idm45849703425984"/><a data-primary="screenshots" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="ch8_term53"/>use the <code>TestWatcher</code> rule to gather data for failure analysis with JUnit 4. <a data-type="xref" href="#junit4-failure-1">Example 8-17</a> shows a test that captures a screenshot when the test fails. <a data-type="xref" href="#junit4-failure-2">Example 8-18</a> contains the implementation for this rule. As noted earlier, we make a browser screenshot. The logic to make this screenshot is available in <a data-type="xref" href="#junit4-failure-3">Example 8-19</a>.</p>&#13;
<div data-type="example" id="junit4-failure-1">&#13;
<h5><span class="label">Example 8-17. </span>Analyzing failed tests using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">FailureJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Rule</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">TestRule</code><code> </code><code class="n">testWatcher</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">FailureWatcher</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO14-1" id="co_testing_framework_specifics_CO14-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeClass</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterClass</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testFailure</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">fail</code><code class="o">(</code><code class="s">"Forced error"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO14-2" id="co_testing_framework_specifics_CO14-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO14-1" id="callout_testing_framework_specifics_CO14-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We define the rule at the class level, passing the driver instance as a parameter.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO14-2" id="callout_testing_framework_specifics_CO14-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We force this test to fail to make the screenshot of the browser using the rule.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="junit4-failure-2">&#13;
<h5><span class="label">Example 8-18. </span>Analyzing failed tests using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">FailureWatcher</code><code> </code><code class="kd">extends</code><code> </code><code class="n">TestWatcher</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">FailureManager</code><code> </code><code class="n">failureManager</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">FailureWatcher</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">failureManager</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">FailureManager</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO15-1" id="co_testing_framework_specifics_CO15-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Override</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">failed</code><code class="o">(</code><code class="n">Throwable</code><code> </code><code class="n">throwable</code><code class="o">,</code><code> </code><code class="n">Description</code><code> </code><code class="n">description</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO15-2" id="co_testing_framework_specifics_CO15-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="n">failureManager</code><code class="o">.</code><code class="na">takePngScreenshot</code><code class="o">(</code><code class="n">description</code><code class="o">.</code><code class="na">getDisplayName</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO15-1" id="callout_testing_framework_specifics_CO15-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We encapsulate the logic for failure analysis in a separate class.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO15-2" id="callout_testing_framework_specifics_CO15-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We override the method triggered when the test fails. In this case, we simply use the failure manager instance to make a screenshot.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="junit4-failure-3">&#13;
<h5><span class="label">Example 8-19. </span>Analyzing failed tests using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">FailureManager</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kd">final</code><code> </code><code class="n">Logger</code><code> </code><code class="n">log</code><code> </code><code class="o">=</code><code> </code><code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">lookupClass</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">FailureManager</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">takePngScreenshot</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">filename</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO16-1" id="co_testing_framework_specifics_CO16-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="n">TakesScreenshot</code><code> </code><code class="n">ts</code><code> </code><code class="o">=</code><code> </code><code class="o">(</code><code class="n">TakesScreenshot</code><code class="o">)</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">File</code><code> </code><code class="n">screenshot</code><code> </code><code class="o">=</code><code> </code><code class="n">ts</code><code class="o">.</code><code class="na">getScreenshotAs</code><code class="o">(</code><code class="n">OutputType</code><code class="o">.</code><code class="na">FILE</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">Path</code><code> </code><code class="n">destination</code><code> </code><code class="o">=</code><code> </code><code class="n">Paths</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">filename</code><code> </code><code class="o">+</code><code> </code><code class="s">".png"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="k">try</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="n">Files</code><code class="o">.</code><code class="na">move</code><code class="o">(</code><code class="n">screenshot</code><code class="o">.</code><code class="na">toPath</code><code class="o">(</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">destination</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">IOException</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="n">log</code><code class="o">.</code><code class="na">error</code><code class="o">(</code><code class="s">"Exception moving screenshot from {} to {}"</code><code class="o">,</code><code> </code><code class="n">screenshot</code><code class="o">,</code><code>&#13;
</code><code>                    </code><code class="n">destination</code><code class="o">,</code><code> </code><code class="n">e</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO16-1" id="callout_testing_framework_specifics_CO16-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We take the screenshot as a PNG file, stored with a file name <a data-startref="ch8_term51" data-type="indexterm" id="idm45849702956480"/><a data-startref="ch8_term52" data-type="indexterm" id="idm45849702955776"/><a data-startref="ch8_term53" data-type="indexterm" id="idm45849702955104"/>passed as a parameter.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849703920560">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>TestNG provides <a data-primary="failure analysis" data-secondary="TestNG for" data-type="indexterm" id="idm45849702977072"/><a data-primary="TestNG" data-secondary="for failure analysis" data-secondary-sortas="failure analysis" data-type="indexterm" id="idm45849702976064"/><a data-primary="listeners" data-secondary="test (for groupings)" data-type="indexterm" id="idm45849702974848"/><a data-primary="test listeners" data-type="indexterm" id="idm45849702973904"/>several <em>listeners</em> out of the box. These listeners are classes that capture different events of the test lifecycle. For instance, the <code>ITestResult</code> listener allows you to monitor the status and result of a test. As <a data-type="xref" href="#testng-failure">Example 8-20</a> shows, we can easily use this listener to implement failure analysis in a Selenium WebDriver test.</p>&#13;
<div data-type="example" id="testng-failure">&#13;
<h5><span class="label">Example 8-20. </span>Analyzing failed tests using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">FailureNGTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeMethod</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterMethod</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="n">ITestResult</code><code> </code><code class="n">result</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO17-1" id="co_testing_framework_specifics_CO17-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">result</code><code class="o">.</code><code class="na">getStatus</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">=</code><code class="o">=</code><code> </code><code class="n">ITestResult</code><code class="o">.</code><code class="na">FAILURE</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO17-2" id="co_testing_framework_specifics_CO17-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>            </code><code class="n">FailureManager</code><code> </code><code class="n">failureManager</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">FailureManager</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO17-3" id="co_testing_framework_specifics_CO17-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>            </code><code class="n">failureManager</code><code class="o">.</code><code class="na">takePngScreenshot</code><code class="o">(</code><code class="n">result</code><code class="o">.</code><code class="na">getName</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testFailure</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">fail</code><code class="o">(</code><code class="s">"Forced error"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO17-1" id="callout_testing_framework_specifics_CO17-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We declare an <code>ITestResult</code> parameter in the <a data-primary="teardown in testing" data-type="indexterm" id="idm45849702773184"/>method for test teardown.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO17-2" id="callout_testing_framework_specifics_CO17-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We read the status of the test.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO17-3" id="callout_testing_framework_specifics_CO17-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>In case of failure, we create an instance of the failure manager (we use the same logic described in <a data-type="xref" href="#junit4-failure-3">Example 8-19</a>) for creating a screenshot.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849702791248">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>In JUnit 5, the Jupiter <a data-primary="extensions, Jupiter" data-type="indexterm" id="idm45849702789248"/><a data-primary="JUnit 4" data-secondary="limitations of" data-type="indexterm" id="idm45849702736112"/><a data-primary="JUnit 5" data-secondary="Jupiter and" data-type="indexterm" id="idm45849702735264"/><a data-primary="Jupiter" data-secondary="JUnit 5 and" data-type="indexterm" id="idm45849702734416"/><a data-primary="Jupiter" data-secondary="extensions with" data-type="indexterm" id="idm45849702733568"/><a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="Jupiter extensions with" data-type="indexterm" id="idm45849702732720"/><a data-primary="failure analysis" data-secondary="JUnit 5 for" data-type="indexterm" id="ch8_term54"/><a data-primary="JUnit 5" data-secondary="for failure analysis" data-secondary-sortas="failure analysis" data-type="indexterm" id="ch8_term55"/>extension model replaced and improved the former test <span class="keep-together">lifecycle</span> management of JUnit 4 based on rules. As introduced in <a data-type="xref" href="ch02.html#ch02">Chapter 2</a>, the extension model provided by Jupiter allows adding new features on the top of the Jupiter programming model. This way, a Jupiter extension is a Java class that implements one or several <em>extension points</em>, which are interfaces that allow different types of operations in the Jupiter programming model. <a data-type="xref" href="#junit5-extension-points">Table 8-4</a> summarizes the extension points provided by Jupiter.</p>&#13;
<table id="junit5-extension-points">&#13;
<caption><span class="label">Table 8-4. </span>Jupiter extension points</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Category</th>&#13;
<th>Description</th>&#13;
<th>Extension point(s)</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Test lifecycle callbacks</p></td>&#13;
<td><p>To include <a data-primary="test lifecycle callbacks extension" data-type="indexterm" id="idm45849702721232"/>custom logic during the test lifecycle</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">BeforeAllCallback</code>&#13;
<code class="n">BeforeEachCallback</code>&#13;
<code class="n">BeforeTestExecutionCallback</code>&#13;
<code class="n">AfterTestExecutionCallback</code>&#13;
<code class="n">AfterEachCallback</code>&#13;
<code class="n">AfterAllCallback</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Parameter resolution</p></td>&#13;
<td><p>To inject <a data-primary="parameter resolution extension" data-type="indexterm" id="idm45849702709584"/>parameters in test methods or constructors</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">ParameterResolver</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Test templates</p></td>&#13;
<td><p>To implement <a data-primary="@TestTemplate annotation" data-primary-sortas="TestTemplate annotation" data-type="indexterm" id="idm45849702705776"/><a data-primary="test templates extension" data-type="indexterm" id="idm45849702705152"/>tests using <code>@TestTemplate</code></p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TestTemplateInvocationContextProvider</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Conditional test execution</p></td>&#13;
<td><p>To enable or <a data-primary="conditional test execution extension" data-type="indexterm" id="idm45849702674720"/><a data-primary="testing" data-secondary="conditional execution of" data-type="indexterm" id="idm45849702674112"/>disable tests depending on custom conditions</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">ExecutionCondition</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Exception handling</p></td>&#13;
<td><p>To handle <a data-primary="exception handling extension" data-type="indexterm" id="idm45849702680256"/>exceptions during the test and its lifecycle</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TestExecutionExceptionHandler</code>&#13;
<code class="n">LifecycleMethodExecutionExceptionHandler</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Test instance</p></td>&#13;
<td><p>To create and <a data-primary="test instance extension" data-type="indexterm" id="idm45849710024912"/>process test class instances</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TestInstanceFactory</code>&#13;
<code class="n">TestInstancePostProcessor</code>&#13;
<code class="n">TestInstancePreDestroyCallback</code></pre></div></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Intercepting invocations</p></td>&#13;
<td><p>To intercept <a data-primary="intercepting invocations extension" data-type="indexterm" id="idm45849702604192"/>calls to test code (and decide whether or not these calls proceed)</p></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">InvocationInterceptor</code></pre></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>A convenient <a data-primary="AfterTestExecutionCallback extension" data-type="indexterm" id="idm45849702627024"/>extension point for implementing failure analysis is <code>AfterTestExecutionCallback</code>, since it allows including custom logic immediately after an individual test has been executed. <a data-type="xref" href="#junit5-failure-1">Example 8-21</a> provides a Jupiter test using a custom annotation (see <a data-type="xref" href="#junit5-failure-2">Example 8-22</a>) implementing this extension point.</p>&#13;
<div class="pagebreak-before less_space" data-type="example" id="junit5-failure-1">&#13;
<h5><span class="label">Example 8-21. </span>Analyzing failed tests using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">FailureJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@RegisterExtension</code><code>&#13;
</code><code>    </code><code class="n">FailureWatcher</code><code> </code><code class="n">failureWatcher</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">FailureWatcher</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO18-1" id="co_testing_framework_specifics_CO18-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeAll</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterAll</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testFailure</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">fail</code><code class="o">(</code><code class="s">"Forced error"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO18-2" id="co_testing_framework_specifics_CO18-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO18-1" id="callout_testing_framework_specifics_CO18-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We <a data-primary="FailureWatcher extension" data-type="indexterm" id="idm45849702430816"/>use the <code>FailureWatcher</code> extension for the tests available in this class. We pass the driver instance as an argument.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO18-2" id="callout_testing_framework_specifics_CO18-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We force a failure to <a data-primary="screenshots" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="ch8_term56"/>make the extension take the browser screenshot.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="junit5-failure-2">&#13;
<h5><span class="label">Example 8-22. </span>Analyzing failed tests using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">FailureWatcher</code><code> </code><code class="kd">implements</code><code> </code><code class="n">AfterTestExecutionCallback</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO19-1" id="co_testing_framework_specifics_CO19-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">FailureManager</code><code> </code><code class="n">failureManager</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">FailureWatcher</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">failureManager</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">FailureManager</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Override</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">afterTestExecution</code><code class="o">(</code><code class="n">ExtensionContext</code><code> </code><code class="n">context</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">Exception</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO19-2" id="co_testing_framework_specifics_CO19-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">context</code><code class="o">.</code><code class="na">getExecutionException</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">isPresent</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO19-3" id="co_testing_framework_specifics_CO19-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>            </code><code class="n">failureManager</code><code class="o">.</code><code class="na">takePngScreenshot</code><code class="o">(</code><code class="n">context</code><code class="o">.</code><code class="na">getDisplayName</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO19-4" id="co_testing_framework_specifics_CO19-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO19-1" id="callout_testing_framework_specifics_CO19-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>This extension <a data-primary="AfterTestExecutionCallback extension" data-type="indexterm" id="idm45849702296736"/>implements a single extension point: <code>AfterTestExecution​Call⁠back</code>.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO19-2" id="callout_testing_framework_specifics_CO19-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>This extension point must override this method, which is executed immediately after each test.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO19-3" id="callout_testing_framework_specifics_CO19-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We check if an execution exception is present.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO19-4" id="callout_testing_framework_specifics_CO19-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>If so, we take a screenshot <a data-startref="ch8_term54" data-type="indexterm" id="idm45849702265872"/><a data-startref="ch8_term55" data-type="indexterm" id="idm45849702265168"/>using the <code>WebDriver</code> instance.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Selenium-Jupiter" data-type="sect2"><div class="sect2" id="idm45849702263824">&#13;
<h2>Selenium-Jupiter</h2>&#13;
&#13;
<p>Selenium-Jupiter is a <a data-primary="Jupiter" data-secondary="extensions with" data-type="indexterm" id="idm45849702262048"/><a data-primary="extensions, Jupiter" data-type="indexterm" id="idm45849702261040"/><a data-primary="failure analysis" data-secondary="Selenium-Jupiter for" data-type="indexterm" id="idm45849702260368"/><a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="for failure analysis" data-secondary-sortas="failure analysis" data-type="indexterm" id="idm45849702259424"/><a data-primary="Selenium-Jupiter" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="idm45849702258240"/><a data-primary="unit testing frameworks" data-secondary="Selenium-Jupiter with" data-type="indexterm" id="idm45849702257008"/>Jupiter extension that, among other features, allows making browser screenshots effortlessly. <a data-type="xref" href="#seljup-failure">Example 8-23</a> demonstrates this feature.</p>&#13;
<div data-type="example" id="seljup-failure">&#13;
<h5><span class="label">Example 8-23. </span>Analyzing failed tests JUnit 5 with Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">FailureSelJupTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@RegisterExtension</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">SeleniumJupiter</code><code> </code><code class="n">seleniumJupiter</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">SeleniumJupiter</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeAll</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">seleniumJupiter</code><code class="o">.</code><code class="na">getConfig</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">enableScreenshotWhenFailure</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO20-1" id="co_testing_framework_specifics_CO20-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testFailure</code><code class="o">(</code><code class="n">ChromeDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">fail</code><code class="o">(</code><code class="s">"Forced error"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO20-1" id="callout_testing_framework_specifics_CO20-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Selenium-Jupiter takes a browser screenshot in the case of failed tests simply by using this configuration <a data-startref="ch8_term43" data-type="indexterm" id="idm45849702184848"/><a data-startref="ch8_term44" data-type="indexterm" id="idm45849702184144"/><a data-startref="ch8_term45" data-type="indexterm" id="idm45849702183472"/><a data-startref="ch8_term46" data-type="indexterm" id="idm45849702182800"/><a data-startref="ch8_term47" data-type="indexterm" id="idm45849702182128"/><a data-startref="ch8_term48" data-type="indexterm" id="idm45849702181456"/><a data-startref="ch8_term56" data-type="indexterm" id="idm45849702180784"/>capability.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Retrying Tests" data-type="sect1"><div class="sect1" id="idm45849704025472">&#13;
<h1>Retrying Tests</h1>&#13;
&#13;
<p>As explained in <a data-type="xref" href="ch07.html#ch07">Chapter 7</a>, test <em>flakiness</em> (i.e., lack of reliability) is a well-known <a data-primary="end-to-end (E2E) testing" data-secondary="reliability of" data-type="indexterm" id="idm45849702141712"/><a data-primary="flakiness, test" data-type="indexterm" id="idm45849702140864"/><a data-primary="testing" data-secondary="reliability in" data-type="indexterm" id="idm45849702140256"/><a data-primary="retrying tests" data-type="indexterm" id="ch8_term57"/><a data-primary="unit testing frameworks" data-secondary="for retrying tests" data-secondary-sortas="retrying tests" data-type="indexterm" id="ch8_term58"/>issue in end-to-end tests. As testers, we sometimes need to identify a <em>flaky</em> test (i.e., a test that passes or fails under the same conditions), and for that, we retry a given test to check whether its result is consistent. Thus, we might want a mechanism to retry tests in case of failure. This section explains how to carry out this process using the different unit testing frameworks.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849702136400">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>We need to use a <a data-primary="JUnit 4" data-secondary="rules in" data-type="indexterm" id="ch8_term59"/><a data-primary="rules in JUnit 4" data-type="indexterm" id="ch8_term60"/><a data-primary="JUnit 4" data-secondary="for retrying tests" data-secondary-sortas="retrying tests" data-type="indexterm" id="ch8_term61"/>custom JUnit 4 rule for retrying failed tests. <a data-type="xref" href="#junit4-retry-1">Example 8-24</a> shows a test using an example of this kind of rule, and <a data-type="xref" href="#junit4-retry-2">Example 8-25</a> contains the source code of that rule.</p>&#13;
<div data-type="example" id="junit4-retry-1">&#13;
<h5><span class="label">Example 8-24. </span>Retrying tests using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">RandomCalculatorJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Rule</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">RetryRule</code><code> </code><code class="n">retryRule</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">RetryRule</code><code class="o">(</code><code class="mi">5</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO21-1" id="co_testing_framework_specifics_CO21-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeClass</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO21-2" id="co_testing_framework_specifics_CO21-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterClass</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testRandomCalculator</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>         </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/random-calculator.html"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO21-3" id="co_testing_framework_specifics_CO21-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="c1">// 1 + 3&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='1']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO21-4" id="co_testing_framework_specifics_CO21-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='+']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='3']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='=']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="c1">// ... should be 4&#13;
</code><code>        </code><code class="n">String</code><code> </code><code class="n">result</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">className</code><code class="o">(</code><code class="s">"screen"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">getText</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">result</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"4"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO21-5" id="co_testing_framework_specifics_CO21-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO21-1" id="callout_testing_framework_specifics_CO21-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We declare the retrying rule as a test attribute.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO21-2" id="callout_testing_framework_specifics_CO21-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use the same browser for all the repetitions.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO21-3" id="callout_testing_framework_specifics_CO21-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We open a <a data-primary="random calculator practice page" data-type="indexterm" id="idm45849701932384"/>practice web page called <em>random calculator</em>. This page has been designed to produce incorrect results a given percentage of the time (50% by default). Then the calculator works perfectly after a configurable number of times (five by default).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO21-4" id="callout_testing_framework_specifics_CO21-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We use the calculator GUI to make an essential arithmetic operation.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO21-5" id="callout_testing_framework_specifics_CO21-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We verify the result. There is a 50% probability of getting an incorrect result for the first five attempts.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="junit4-retry-2">&#13;
<h5><span class="label">Example 8-25. </span>JUnit 4 rule for retrying failed tests</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">RetryRule</code><code> </code><code class="kd">implements</code><code> </code><code class="n">TestRule</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO22-1" id="co_testing_framework_specifics_CO22-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kd">final</code><code> </code><code class="n">Logger</code><code> </code><code class="n">log</code><code> </code><code class="o">=</code><code> </code><code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">lookupClass</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">maxRetries</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">RetryRule</code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">maxRetries</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">maxRetries</code><code> </code><code class="o">=</code><code> </code><code class="n">maxRetries</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO22-2" id="co_testing_framework_specifics_CO22-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Override</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">Statement</code><code> </code><code class="nf">apply</code><code class="o">(</code><code class="n">Statement</code><code> </code><code class="n">base</code><code class="o">,</code><code> </code><code class="n">Description</code><code> </code><code class="n">description</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO22-3" id="co_testing_framework_specifics_CO22-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="k">new</code><code> </code><code class="nf">Statement</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="nd">@Override</code><code>&#13;
</code><code>            </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">evaluate</code><code class="o">(</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">Throwable</code><code> </code><code class="o">{</code><code>&#13;
</code><code>                </code><code class="n">Throwable</code><code> </code><code class="n">throwable</code><code> </code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">;</code><code>&#13;
</code><code>                </code><code class="k">for</code><code> </code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code> </code><code class="n">i</code><code> </code><code class="o">&lt;</code><code> </code><code class="n">maxRetries</code><code class="o">;</code><code> </code><code class="n">i</code><code class="o">+</code><code class="o">+</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO22-4" id="co_testing_framework_specifics_CO22-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>                    </code><code class="k">try</code><code> </code><code class="o">{</code><code>&#13;
</code><code>                        </code><code class="n">base</code><code class="o">.</code><code class="na">evaluate</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>                        </code><code class="k">return</code><code class="o">;</code><code>&#13;
</code><code>                    </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">Throwable</code><code> </code><code class="n">t</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO22-5" id="co_testing_framework_specifics_CO22-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>                        </code><code class="n">throwable</code><code> </code><code class="o">=</code><code> </code><code class="n">t</code><code class="o">;</code><code>&#13;
</code><code>                        </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"{}: run {} failed"</code><code class="o">,</code><code>&#13;
</code><code>                                </code><code class="n">description</code><code class="o">.</code><code class="na">getDisplayName</code><code class="o">(</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">i</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>                    </code><code class="o">}</code><code>&#13;
</code><code>                </code><code class="o">}</code><code>&#13;
</code><code>                </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"{}: giving up after {} failures"</code><code class="o">,</code><code>&#13;
</code><code>                        </code><code class="n">description</code><code class="o">.</code><code class="na">getDisplayName</code><code class="o">(</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">maxRetries</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>                </code><code class="k">throw</code><code> </code><code class="n">throwable</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO22-6" id="co_testing_framework_specifics_CO22-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code>            </code><code class="o">}</code><code>&#13;
</code><code>        </code><code class="o">}</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO22-1" id="callout_testing_framework_specifics_CO22-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We implement the generic interface for JUnit 4 rules, i.e., <code>TestRule</code>.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO22-2" id="callout_testing_framework_specifics_CO22-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>This rule accepts an integer value in its constructor, used to determine the maximum number of retries.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO22-3" id="callout_testing_framework_specifics_CO22-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We need to override the method <code>apply,</code> which <a data-primary="lifecycles, test" data-type="indexterm" id="idm45849701648848"/><a data-primary="test lifecycles" data-type="indexterm" id="idm45849701648112"/>allows manipulation of the test lifecycle.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO22-4" id="callout_testing_framework_specifics_CO22-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We repeat the test execution in a loop, repeated a maximum number of times equal to the number of retries.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO22-5" id="callout_testing_framework_specifics_CO22-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>In case of error during test execution, we get the exception object and repeat the test execution.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO22-6" id="callout_testing_framework_specifics_CO22-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>If this line is reached, it means the test has been repeated the <a data-startref="ch8_term59" data-type="indexterm" id="idm45849701568448"/><a data-startref="ch8_term60" data-type="indexterm" id="idm45849701567840"/><a data-startref="ch8_term61" data-type="indexterm" id="idm45849701567232"/>maximum number of times.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849701617584">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>TestNG provides a <a data-primary="TestNG" data-secondary="for retrying tests" data-secondary-sortas="retrying tests" data-type="indexterm" id="idm45849701564832"/><a data-primary="random calculator practice page" data-type="indexterm" id="ch8_term62"/>custom capability for implementing test retries. As shown in <a data-type="xref" href="#testng-retry-1">Example 8-26</a>, we use <a data-primary="retryAnalyzer attribute" data-type="indexterm" id="idm45849701562032"/><a data-primary="@Test annotation" data-primary-sortas="Test annotation" data-type="indexterm" id="idm45849701561424"/>the attribute <code>retryAnalyzer</code> of a <code>@Test</code> annotation to enable this feature. <a data-type="xref" href="#testng-retry-2">Example 8-27</a> shows the implementation for that retries analyzer.</p>&#13;
<div data-type="example" id="testng-retry-1">&#13;
<h5><span class="label">Example 8-26. </span>Retrying tests using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code class="o">(</code><code class="n">retryAnalyzer</code> <code class="o">=</code> <code class="n">RetryAnalyzer</code><code class="o">.</code><code class="na">class</code><code class="o">)</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">testRandomCalculator</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="c1">// Same logic than the example before</code>&#13;
<code class="o">}</code></pre></div>&#13;
<div data-type="example" id="testng-retry-2">&#13;
<h5><span class="label">Example 8-27. </span>Test analyzer for TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">RetryAnalyzer</code><code> </code><code class="kd">implements</code><code> </code><code class="n">IRetryAnalyzer</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO23-1" id="co_testing_framework_specifics_CO23-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kd">final</code><code> </code><code class="kt">int</code><code> </code><code class="n">MAX_RETRIES</code><code> </code><code class="o">=</code><code> </code><code class="mi">5</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO23-2" id="co_testing_framework_specifics_CO23-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">retryCount</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Override</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">boolean</code><code> </code><code class="nf">retry</code><code class="o">(</code><code class="n">ITestResult</code><code> </code><code class="n">result</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO23-3" id="co_testing_framework_specifics_CO23-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">retryCount</code><code> </code><code class="o">&lt;</code><code class="o">=</code><code> </code><code class="n">MAX_RETRIES</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO23-4" id="co_testing_framework_specifics_CO23-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>            </code><code class="n">retryCount</code><code class="o">+</code><code class="o">+</code><code class="o">;</code><code>&#13;
</code><code>            </code><code class="k">return</code><code> </code><code class="kc">true</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="kc">false</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO23-1" id="callout_testing_framework_specifics_CO23-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We need to <a data-primary="IretryAnalyzer listener" data-type="indexterm" id="idm45849701445168"/><a data-primary="listeners" data-secondary="with retrying tests" data-secondary-sortas="retrying tests" data-type="indexterm" id="idm45849701444432"/>implement a TestNG listener called <code>IRetryAnalyzer</code> to implement a retry analyzer.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO23-2" id="callout_testing_framework_specifics_CO23-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We cannot parameterize this class; therefore, we declare the maximum retries number within the class (as a constant, in this case).</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO23-3" id="callout_testing_framework_specifics_CO23-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We need to <a data-primary="retry() method" data-type="indexterm" id="idm45849701437936"/>override the method <code>retry</code>. This method returns a boolean value that determines if the test is retried or not in case of failure.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO23-4" id="callout_testing_framework_specifics_CO23-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>The logic to determine this value is an accumulator that checks if the retries threshold is reached.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849701394960">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>We need to use <a data-primary="JUnit 5" data-secondary="for retrying tests" data-secondary-sortas="retrying tests" data-type="indexterm" id="idm45849701393184"/><a data-primary="JUnit Pioneer extension" data-type="indexterm" id="idm45849701392064"/><a data-primary="rerunner-jupiter extension" data-type="indexterm" id="idm45849701391360"/><a data-primary="Jupiter" data-secondary="extensions with" data-type="indexterm" id="idm45849701390720"/><a data-primary="extensions, Jupiter" data-type="indexterm" id="idm45849701389776"/>the extension model previously explained (see <a data-type="xref" href="#junit5-extension-points">Table 8-4</a>) for retrying failed tests. Instead of reinventing the wheel, we can use an existing open source Jupiter extension for this aim. To retry tests, and as introduced in <a data-type="xref" href="ch02.html#ch02">Chapter 2</a>, there are various alternatives: <a href="https://junit-pioneer.org">JUnit Pioneer</a> or <a href="https://github.com/artsok/rerunner-jupiter">rerunner-jupiter</a>. <a data-type="xref" href="#junit5-retry">Example 8-28</a> shows a test using the <span class="keep-together">latter</span>.</p>&#13;
<div data-type="example" id="junit5-retry">&#13;
<h5><span class="label">Example 8-28. </span>Retrying tests using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@RepeatedIfExceptionsTest</code><code class="o">(</code><code class="n">repeats</code><code> </code><code class="o">=</code><code> </code><code class="mi">5</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO24-1" id="co_testing_framework_specifics_CO24-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testRandomCalculator</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Same logic as the example before&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO24-1" id="callout_testing_framework_specifics_CO24-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Simply decorating a test with this annotation, we repeat the test a maximum number of times (five in this case) in case of failure.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Selenium-Jupiter" data-type="sect2"><div class="sect2" id="idm45849701363520">&#13;
<h2>Selenium-Jupiter</h2>&#13;
&#13;
<p>Tests using <a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="for retrying tests" data-secondary-sortas="retrying tests" data-type="indexterm" id="idm45849701361776"/><a data-primary="Selenium-Jupiter" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="idm45849701360528"/><a data-primary="unit testing frameworks" data-secondary="Selenium-Jupiter with" data-type="indexterm" id="idm45849701359296"/>Selenium-Jupiter can also use other extensions. <a data-type="xref" href="#seljup-retry">Example 8-29</a> shows how to use rerunner-jupiter in a Selenium-Jupiter test.</p>&#13;
<div data-type="example" id="seljup-retry">&#13;
<h5><span class="label">Example 8-29. </span>Retrying tests JUnit 5 with Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@SingleSession</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO25-1" id="co_testing_framework_specifics_CO25-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="nd">@ExtendWith</code><code class="o">(</code><code class="n">SeleniumJupiter</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code>&#13;
</code><code class="kd">class</code><code> </code><code class="nc">RandomCalculatorSelJupTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@RepeatedIfExceptionsTest</code><code class="o">(</code><code class="n">repeats</code><code> </code><code class="o">=</code><code> </code><code class="mi">5</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testRandomCalculator</code><code class="o">(</code><code class="n">ChromeDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="c1">// Same logic than the example before&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO25-1" id="callout_testing_framework_specifics_CO25-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We reuse the same browser for all the possible <a data-startref="ch8_term57" data-type="indexterm" id="idm45849701297280"/><a data-startref="ch8_term58" data-type="indexterm" id="idm45849701296576"/><a data-startref="ch8_term62" data-type="indexterm" id="idm45849701295904"/>repetitions.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Parallel Test Execution" data-type="sect1"><div class="sect1" id="idm45849701294848">&#13;
<h1>Parallel Test Execution</h1>&#13;
&#13;
<p>The time required <a data-primary="parallel test execution" data-secondary="about" data-type="indexterm" id="idm45849701293312"/><a data-primary="testing" data-secondary="time with execution of" data-type="indexterm" id="idm45849701292304"/><a data-primary="unit testing frameworks" data-secondary="for parallel test execution" data-secondary-sortas="parallel test execution" data-type="indexterm" id="ch8_term65"/>to execute a Selenium WebDriver test suite (especially if the number of tests is high) can be considerable. The reason for this slowness is that a regular Selenium WebDriver test starts a new browser each time, and as a result, the overall execution time rises. A possible solution to this problem is to execute tests in parallel. There are different ways to achieve this parallelization. First, we can use the built-in capabilities for parallel execution provided by the build tools (Maven or Gradle). Second, we can use the features provided by the unit testing frameworks (JUnit 4 or 5, and TestNG) to that aim. The following subsections explain all these options.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Maven" data-type="sect2"><div class="sect2" id="idm45849701260784">&#13;
<h2>Maven</h2>&#13;
&#13;
<p>Maven offers <a data-primary="Maven" data-secondary="parallel test execution with" data-type="indexterm" id="ch8_term63"/><a data-primary="parallel test execution" data-secondary="Maven and Gradle for" data-type="indexterm" id="ch8_term64"/>different mechanisms for parallel execution. First, Maven allows building modules of multimodule projects in parallel. For that, we need to invoke the Maven command <a data-primary="command line options" data-type="indexterm" id="idm45849701256320"/><a data-primary="Maven" data-secondary="command line options in" data-type="indexterm" id="idm45849701255648"/>from the command line using the option <code>-T</code>. This option accepts two types of arguments for parallelization: using a fixed number of threads or using a factor multiplied by the number of available CPU cores in your system. The following snippet shows an example of each type:</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -T 4 <a class="co" href="#callout_testing_framework_specifics_CO26-1" id="co_testing_framework_specifics_CO26-1"><img alt="1" src="assets/1.png"/></a>&#13;
mvn test -T 1C <a class="co" href="#callout_testing_framework_specifics_CO26-2" id="co_testing_framework_specifics_CO26-2"><img alt="2" src="assets/2.png"/></a></pre>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO26-1" id="callout_testing_framework_specifics_CO26-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>It executes the test of a multimodule project (e.g., the examples repository) in parallel using four threads.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO26-2" id="callout_testing_framework_specifics_CO26-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>It executes the test of a multimodule project using the same number of threads as the CPU cores (for example, four threads in a quad-core system).</p></dd>&#13;
</dl>&#13;
&#13;
<p>In addition, the <a data-primary="Surefire plug-in" data-type="indexterm" id="idm45849701243520"/>plug-in used to execute unit tests in Maven (called <em>Surefire</em>) provides two ways to run tests in parallel. The first is multithreading inside a single JVM <span class="keep-together">process</span>. To enable this mode, we <a data-primary="configuration" data-secondary="for Maven" data-secondary-sortas="Maven" data-type="indexterm" id="idm45849701241472"/><a data-primary="Maven" data-secondary="configuration in" data-type="indexterm" id="idm45849701240224"/><a data-primary="configuration" data-secondary="parameters for parallel test execution" data-type="indexterm" id="idm45849701239280"/>need to specify different configuration parameters, <span class="keep-together">such as</span>:</p>&#13;
<dl>&#13;
<dt><code>parallel</code></dt>&#13;
<dd>&#13;
<p>To configure the level of granularity for parallelism. The possible values for this parameter are <code>methods</code> (to execute test methods in separate threads), <code>classes</code> (for test classes),  <code>suites</code> (for test suites), <code>suitesAndClasses</code> (for test suites and classes), <code>suitesAndMethods</code> (for test suites and methods), and <code>all</code> (to execute every test in separate threads).</p>&#13;
</dd>&#13;
<dt><code>threadCount</code></dt>&#13;
<dd>&#13;
<p>To define the <a data-primary="threadcount parameter (Maven)" data-type="indexterm" id="idm45849701231360"/>maximum number of threads for parallelism.</p>&#13;
</dd>&#13;
<dt><code>useUnlimitedThreads</code></dt>&#13;
<dd>&#13;
<p>To allow <a data-primary="useunlimitedthreads parameter (Maven)" data-type="indexterm" id="idm45849701229056"/>an unlimited number of threads.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>There are two ways to specify these configuration parameters. First, we can configure them directly on the Maven configuration file (i.e., the <code>pom.xml</code> file). <a data-type="xref" href="#maven-parallel">Example 8-30</a> demonstrates how. In addition, we <a data-primary="configuration" data-secondary="parameters for parallel test execution" data-type="indexterm" id="idm45849701226352"/>can specify these parameters as system properties when using the command line, for example:</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -Dparallel=classesAndMethods -DthreadCount=4</pre>&#13;
<div data-type="example" id="maven-parallel">&#13;
<h5><span class="label">Example 8-30. </span>Maven Surefire configuration sample for parallel execution</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="o">&lt;</code><code class="n">build</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;</code><code class="n">plugins</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;</code><code class="n">plugin</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="n">groupId</code><code class="o">&gt;</code><code class="n">org</code><code class="o">.</code><code class="na">apache</code><code class="o">.</code><code class="na">maven</code><code class="o">.</code><code class="na">plugins</code><code class="o">&lt;/</code><code class="n">groupId</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="n">artifactId</code><code class="o">&gt;</code><code class="n">maven</code><code class="o">-</code><code class="n">surefire</code><code class="o">-</code><code class="n">plugin</code><code class="o">&lt;/</code><code class="n">artifactId</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="n">version</code><code class="o">&gt;</code><code class="n">$</code><code class="o">{</code><code class="n">maven</code><code class="o">-</code><code class="n">surefire</code><code class="o">-</code><code class="n">plugin</code><code class="o">.</code><code class="na">version</code><code class="o">}&lt;/</code><code class="n">version</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;</code><code class="n">configuration</code><code class="o">&gt;</code>&#13;
                <code class="o">&lt;</code><code class="n">parallel</code><code class="o">&gt;</code><code class="n">classesAndMethods</code><code class="o">&lt;/</code><code class="n">parallel</code><code class="o">&gt;</code>&#13;
                <code class="o">&lt;</code><code class="n">threadCount</code><code class="o">&gt;</code><code class="mi">4</code><code class="o">&lt;/</code><code class="n">threadCount</code><code class="o">&gt;</code>&#13;
            <code class="o">&lt;/</code><code class="n">configuration</code><code class="o">&gt;</code>&#13;
        <code class="o">&lt;/</code><code class="n">plugin</code><code class="o">&gt;</code>&#13;
    <code class="o">&lt;/</code><code class="n">plugins</code><code class="o">&gt;</code>&#13;
<code class="o">&lt;/</code><code class="n">build</code><code class="o">&gt;</code></pre></div>&#13;
&#13;
<p>The second way to <a data-primary="forking and JVM processes" data-type="indexterm" id="idm45849701105712"/><a data-primary="JVM (Java Virtual Machine)" data-type="indexterm" id="idm45849701105104"/>implement parallelism with Maven Surefire is <em>forking</em>, i.e., creating multiple JVM processes. This option can be helpful if we need to prevent thread-level concurrency issues since different processes do not share memory space, as happens in multithreading. As a drawback, forking consumes more memory and has lower performance. To enable forking, we need to use the <code>forkCount</code> configuration property (again, in the <code>pom.xml</code> or as a system property) to a value higher than one (i.e., the number of JVM process to be created). For example, the following command executes the tests of a Maven project using <a data-startref="ch8_term63" data-type="indexterm" id="idm45849701137792"/>four JVM processes:</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -DforkCount=4</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Gradle" data-type="sect2"><div class="sect2" id="idm45849701136144">&#13;
<h2>Gradle</h2>&#13;
&#13;
<p>Gradle also provides <a data-primary="Gradle" data-secondary="parallel test execution with" data-type="indexterm" id="idm45849701134048"/>several ways to execute tests in parallel. First, it allows executing tasks in parallel in a multimodule project. There are two ways to enable this mode. First, by <a data-primary="configuration" data-secondary="for Gradle" data-secondary-sortas="Gradle" data-type="indexterm" id="idm45849701132944"/><a data-primary="Gradle" data-secondary="configuration in" data-type="indexterm" id="idm45849701131728"/>setting the property <code>org.gradle.parallel=true</code> in the configuration file <code>gradle.properties</code>. Second, using the option <code>--parallel</code> in the command, for example:</p>&#13;
&#13;
<pre data-type="programlisting">gradle test --parallel</pre>&#13;
&#13;
<p>In addition, we can use the <a data-primary="maxParallelForks property" data-type="indexterm" id="idm45849701096544"/>configuration property <code>maxParallelForks</code> in the Gradle configuration file to specify the maximum number of test processes to start in parallel. By default, Gradle executes a single test class at a time. We change this default behavior by setting a value higher than one for this parameter. In addition to a fixed value, we can specify the number of available CPU cores in your system:</p>&#13;
&#13;
<pre data-type="programlisting">maxParallelForks = Runtime.runtime.availableProcessors()</pre>&#13;
&#13;
<p>In the example <a data-primary="Pparallel property (Gradle)" data-type="indexterm" id="idm45849701094416"/>repository, this property is enabled conditionally using a profile called <code>parallel</code> (see <a data-type="xref" href="app03.html#appendix03">Appendix C</a>). Therefore, we can use this profile using the <a data-startref="ch8_term64" data-type="indexterm" id="idm45849701092464"/>command line:</p>&#13;
&#13;
<pre data-type="programlisting">gradle test -Pparallel</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849701090816">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>JUnit provides a <a data-primary="JUnit 4" data-secondary="parallel test execution with" data-type="indexterm" id="idm45849701089040"/><a data-primary="parallel test execution" data-secondary="JUnit 4 for" data-type="indexterm" id="idm45849701088016"/>basic way to execute tests in parallel through the class <code>Parallel​Com⁠puter</code>. This class accepts two boolean parameters in its constructor to enable parallel test execution of classes and methods, respectively. <a data-type="xref" href="#junit4-parallel">Example 8-31</a> shows a test using this class.</p>&#13;
<div data-type="example" id="junit4-parallel">&#13;
<h5><span class="label">Example 8-31. </span>Parallel test execution using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ParallelJUnit4Suite</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">runInParallel</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">Class</code><code class="o">&lt;</code><code class="o">?</code><code class="o">&gt;</code><code class="o">[</code><code class="o">]</code><code> </code><code class="n">classes</code><code> </code><code class="o">=</code><code> </code><code class="o">{</code><code> </code><code class="n">Parallel1JUnit4Test</code><code class="o">.</code><code class="na">class</code><code class="o">,</code><code>&#13;
</code><code>                </code><code class="n">Parallel2JUnit4Test</code><code class="o">.</code><code class="na">class</code><code> </code><code class="o">}</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO27-1" id="co_testing_framework_specifics_CO27-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="n">JUnitCore</code><code class="o">.</code><code class="na">runClasses</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">ParallelComputer</code><code class="o">(</code><code class="kc">true</code><code class="o">,</code><code> </code><code class="kc">true</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">classes</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO27-2" id="co_testing_framework_specifics_CO27-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO27-1" id="callout_testing_framework_specifics_CO27-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We specify which test classes are executed in parallel.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO27-2" id="callout_testing_framework_specifics_CO27-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We enable parallel test execution for test classes and methods.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849701022448">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>A common way to specify <a data-primary="testing.xml configuration file" data-type="indexterm" id="idm45849701020608"/><a data-primary="parallel test execution" data-secondary="TestNG for" data-type="indexterm" id="idm45849701019936"/><a data-primary="TestNG" data-secondary="parallel test execution with" data-type="indexterm" id="idm45849701018992"/>parallel execution for tests in TestNG is through the configuration file <code>testng.xml</code>. The most relevant attributes to enable this mode in TestNG are:</p>&#13;
<dl>&#13;
<dt><code>parallel</code></dt>&#13;
<dd>&#13;
<p>Specifies the mode for running tests in parallel. The alternatives are <code>methods</code>, <code>tests</code>, and <code>classes</code>.</p>&#13;
</dd>&#13;
<dt><code>threadcount</code></dt>&#13;
<dd>&#13;
<p>Sets the default maximum number of threads for running tests in parallel.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#testng-parallel">Example 8-32</a> shows a basic configuration of <code>testng.xml</code> for test parallelism.</p>&#13;
<div data-type="example" id="testng-parallel">&#13;
<h5><span class="label">Example 8-32. </span>Parallel test configuration for TestNG</h5>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="cp">&lt;!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd"&gt;</code>&#13;
<code class="nt">&lt;suite</code> <code class="na">name=</code><code class="s">"parallel-suite"</code> <code class="na">parallel=</code><code class="s">"classes"</code> <code class="na">thread-count=</code><code class="s">"2"</code><code class="nt">&gt;</code>&#13;
    <code class="nt">&lt;test</code> <code class="na">name=</code><code class="s">"parallel-tests"</code><code class="nt">&gt;</code>&#13;
        <code class="nt">&lt;classes&gt;</code>&#13;
            <code class="nt">&lt;class</code> <code class="na">name=</code>&#13;
              <code class="s">"io.github.bonigarcia.webdriver.testng.ch08.parallel.Parallel1NGTest"</code><code class="nt">/&gt;</code>&#13;
            <code class="nt">&lt;class</code> <code class="na">name=</code>&#13;
              <code class="s">"io.github.bonigarcia.webdriver.testng.ch08.parallel.Parallel2NGTest"</code><code class="nt">/&gt;</code>&#13;
        <code class="nt">&lt;/classes&gt;</code>&#13;
    <code class="nt">&lt;/test&gt;</code>&#13;
<code class="nt">&lt;/suite&gt;</code></pre></div>&#13;
&#13;
<p>We can use Maven or Gradle in the command line to run the previous parallel test suite:</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -Dsurefire.suiteXmlFiles=src/test/resources/testng.xml&#13;
gradle test -Psuite=src/test/resources/testng.xml</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849700964752">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>JUnit 5 allows different ways to execute tests in parallel. The following list <a data-primary="configuration" data-secondary="parameters for parallel test execution" data-type="indexterm" id="idm45849700951312"/><a data-primary="JUnit 5" data-secondary="parallel test execution with" data-type="indexterm" id="idm45849700950368"/><a data-primary="parallel test execution" data-secondary="JUnit 5 for" data-type="indexterm" id="idm45849700949456"/><a data-primary="JUnit 5" data-secondary="Jupiter and" data-type="indexterm" id="idm45849700948512"/><a data-primary="Jupiter" data-secondary="JUnit 5 and" data-type="indexterm" id="idm45849700947568"/>summarizes the most relevant configuration parameters for this purpose:</p>&#13;
<dl>&#13;
<dt><code>junit.jupiter.execution.parallel.enabled</code></dt>&#13;
<dd>&#13;
<p>Boolean flag to enable test parallelism (<code>false</code> by default).</p>&#13;
</dd>&#13;
<dt><code>junit.jupiter.execution.parallel.mode.classes.default</code></dt>&#13;
<dd>&#13;
<p>To run test classes in parallel. The possible values are <code>same_thread</code> for single threaded execution (by default) and <code>concurrent</code> for parallel execution.</p>&#13;
</dd>&#13;
<dt><code>junit.jupiter.execution.parallel.mode.default</code></dt>&#13;
<dd>&#13;
<p>To run test methods in parallel. The possible values are the same as before (for test classes).</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>There are two ways to specify these parameters. First, in the configuration file <code>junit-platform.properties</code> (that should be available in the project classpath). <a data-type="xref" href="#junit5-parallel-1">Example 8-33</a> shows sample content of this file. Second, by <a data-primary="command line options" data-type="indexterm" id="idm45849700938736"/><a data-primary="Maven" data-secondary="command line options in" data-type="indexterm" id="idm45849700938064"/><a data-primary="Gradle" data-secondary="command line options in" data-type="indexterm" id="idm45849700937120"/>using system properties and the command line. The following commands (Maven/Gradle) show how:</p>&#13;
&#13;
<pre data-type="programlisting">mvn test -Djunit.jupiter.execution.parallel.enabled=true&#13;
gradle test -Djunit.jupiter.execution.parallel.enabled=true</pre>&#13;
<div data-type="example" id="junit5-parallel-1">&#13;
<h5><span class="label">Example 8-33. </span>Parallel test execution using JUnit 5</h5>&#13;
&#13;
<pre data-type="programlisting">junit.jupiter.execution.parallel.enabled = true&#13;
junit.jupiter.execution.parallel.mode.default = same_thread&#13;
junit.jupiter.execution.parallel.mode.classes.default = same_thread</pre></div>&#13;
&#13;
<p>In addition, the Jupiter <a data-primary="@Execution annotation" data-primary-sortas="Execution annotation" data-type="indexterm" id="idm45849700898736"/>programming model provides the annotation <code>@Execution</code> to change the parallelization mode for test classes or methods. This annotation can be used at the class level or method level and accepts two values: <code>ExecutionMode.CONCURRENT</code> (for parallel execution) and <code>ExecutionMode.SAME_THREAD</code> (for single-thread execution). <a data-type="xref" href="#junit5-parallel-2">Example 8-34</a> shows the structure of a test class contained in the example repository. Supposing that the parallel test is enabled (as in <a data-type="xref" href="#junit5-parallel-1">Example 8-33</a>), this class will be executed in parallel together with other tests that allow <a data-startref="ch8_term65" data-type="indexterm" id="idm45849700894832"/>parallelization.</p>&#13;
<div data-type="example" id="junit5-parallel-2">&#13;
<h5><span class="label">Example 8-34. </span>Parallel test execution using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Execution</code><code class="o">(</code><code class="n">ExecutionMode</code><code class="o">.</code><code class="na">CONCURRENT</code><code class="o">)</code>&#13;
<code class="kd">class</code> <code class="nc">Parallel1JupiterTest</code> <code class="o">{</code>&#13;
&#13;
    <code class="c1">// Test logic</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Test Listeners" data-type="sect1"><div class="sect1" id="sect-test-listeners">&#13;
<h1>Test Listeners</h1>&#13;
&#13;
<p>A common need in the testing process is to <a data-primary="lifecycles, test" data-type="indexterm" id="ch8_term68"/><a data-primary="listeners" data-secondary="test (for groupings)" data-type="indexterm" id="ch8_term69"/><a data-primary="testing" data-secondary="stages of execution of" data-type="indexterm" id="ch8_term70"/><a data-primary="test lifecycles" data-type="indexterm" id="ch8_term71"/><a data-primary="test listeners" data-type="indexterm" id="ch8_term72"/><a data-primary="unit testing frameworks" data-secondary="test listeners for" data-type="indexterm" id="ch8_term73"/>keep track of the different stages of test execution. Unit testing frameworks thus provide a feature known as a <em>test listener</em>. Test listeners can be seen as utilities that modify the default test behavior by performing custom actions at multiple stages of the test execution cycle. As usual, each unit testing framework provides its own implementation for these test listeners.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849700877408">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>In JUnit 4, test listeners <a data-primary="JUnit 4" data-secondary="for test listeners" data-secondary-sortas="test listeners" data-type="indexterm" id="ch8_term66"/><a data-primary="test runners" data-type="indexterm" id="ch8_term67"/>include custom operations when tests are started, passed, finished, failed, skipped, or ignored. The first step for implementing a JUnit 4 listener is to <a data-primary="RunListener class" data-type="indexterm" id="idm45849700845312"/>create a Java class that extends the <code>RunListener</code> class. In this class, you can override several methods (e.g., <code>testRunStarted</code>, <code>testIgnored</code>, <code>testFailure</code>, etc.) for including additional logic in the different steps of the test lifecycle. <a data-type="xref" href="#junit4-listeners-3">Example 8-35</a> shows basic implementation of a JUnit 4 test listener. This listener simply displays a message in the standard output about the test stage.</p>&#13;
<div class="pagebreak-before less_space" data-type="example" id="junit4-listeners-3">&#13;
<h5><span class="label">Example 8-35. </span>Test listener using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MyTestListener</code> <code class="kd">extends</code> <code class="n">RunListener</code> <code class="o">{</code>&#13;
&#13;
    <code class="kd">static</code> <code class="kd">final</code> <code class="n">Logger</code> <code class="n">log</code> <code class="o">=</code> <code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">().</code><code class="na">lookupClass</code><code class="o">());</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testStarted</code><code class="o">(</code><code class="n">Description</code> <code class="n">description</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>&#13;
        <code class="kd">super</code><code class="o">.</code><code class="na">testStarted</code><code class="o">(</code><code class="n">description</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"testStarted {}"</code><code class="o">,</code> <code class="n">description</code><code class="o">.</code><code class="na">getDisplayName</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testFailure</code><code class="o">(</code><code class="n">Failure</code> <code class="n">failure</code><code class="o">)</code> <code class="kd">throws</code> <code class="n">Exception</code> <code class="o">{</code>&#13;
        <code class="kd">super</code><code class="o">.</code><code class="na">testFailure</code><code class="o">(</code><code class="n">failure</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"testFailure {} {}"</code><code class="o">,</code> <code class="n">failure</code><code class="o">.</code><code class="na">getException</code><code class="o">(),</code>&#13;
                <code class="n">failure</code><code class="o">.</code><code class="na">getMessage</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="c1">// Other listeners</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
&#13;
<p>A common way to register a test listener in JUnit 4 is to create a custom runner and use that runner in test classes. <a data-type="xref" href="#junit4-listeners-2">Example 8-36</a> shows a custom test runner registering the previous listener. <a data-type="xref" href="#junit4-listeners-1">Example 8-37</a> shows a test skeleton using this runner.</p>&#13;
<div data-type="example" id="junit4-listeners-2">&#13;
<h5><span class="label">Example 8-36. </span>Test listeners using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">MyTestRunner</code><code> </code><code class="kd">extends</code><code> </code><code class="n">BlockJUnit4ClassRunner</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO28-1" id="co_testing_framework_specifics_CO28-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">MyTestRunner</code><code class="o">(</code><code class="n">Class</code><code class="o">&lt;</code><code class="o">?</code><code class="o">&gt;</code><code> </code><code class="n">clazz</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">InitializationError</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="kd">super</code><code class="o">(</code><code class="n">clazz</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Override</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">run</code><code class="o">(</code><code class="n">RunNotifier</code><code> </code><code class="n">notifier</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">notifier</code><code class="o">.</code><code class="na">addListener</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">MyTestListener</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO28-2" id="co_testing_framework_specifics_CO28-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="kd">super</code><code class="o">.</code><code class="na">run</code><code class="o">(</code><code class="n">notifier</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO28-3" id="co_testing_framework_specifics_CO28-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO28-1" id="callout_testing_framework_specifics_CO28-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We extend <code>Blockjunit4classrunner</code>, the default test runner in JUnit 4.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO28-2" id="callout_testing_framework_specifics_CO28-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We register our custom test listener.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO28-3" id="callout_testing_framework_specifics_CO28-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We call the parent to continue using the default test runner.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="junit4-listeners-1">&#13;
<h5><span class="label">Example 8-37. </span>Test listeners using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@RunWith</code><code class="o">(</code><code class="n">MyTestRunner</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO29-1" id="co_testing_framework_specifics_CO29-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ListenersJUnit4Test</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO29-1" id="callout_testing_framework_specifics_CO29-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We decorate test classes using <a data-primary="@RunWith annotation" data-primary-sortas="RunWith annotation" data-type="indexterm" id="idm45849700582768"/>the JUnit 4 annotation <code>@RunWith</code> and our custom <a data-startref="ch8_term66" data-type="indexterm" id="idm45849700581248"/><a data-startref="ch8_term67" data-type="indexterm" id="idm45849700580512"/>runner.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849700579456">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>TestNG provides <a data-primary="ITestListener interface" data-type="indexterm" id="idm45849700554160"/><a data-primary="TestNG" data-secondary="test lifecycle of" data-type="indexterm" id="idm45849700553632"/><a data-primary="TestNG" data-secondary="for test listeners" data-secondary-sortas="test listeners" data-type="indexterm" id="idm45849700552656"/>the interface <code>ITestListener</code> for implementing test listeners. The classes implementing this interface can override methods for the different stages of the TestNG lifecycle, such as <code>onTestSuccess</code>, <code>onTestFailure</code>, or <code>onTestSkipped</code>, among others. <a data-type="xref" href="#testng-listeners-2">Example 8-38</a> shows a sample class implementing this interface. In this example, the listener methods log a message in the standard output. <a data-type="xref" href="#testng-listeners-1">Example 8-39</a> shows a test using this listener.</p>&#13;
<div data-type="example" id="testng-listeners-2">&#13;
<h5><span class="label">Example 8-38. </span>Test listener using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MyTestListener</code> <code class="kd">implements</code> <code class="n">ITestListener</code> <code class="o">{</code>&#13;
&#13;
    <code class="kd">static</code> <code class="kd">final</code> <code class="n">Logger</code> <code class="n">log</code> <code class="o">=</code> <code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">().</code><code class="na">lookupClass</code><code class="o">());</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">onTestStart</code><code class="o">(</code><code class="n">ITestResult</code> <code class="n">result</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">ITestListener</code><code class="o">.</code><code class="na">super</code><code class="o">.</code><code class="na">onTestStart</code><code class="o">(</code><code class="n">result</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"onTestStart {}"</code><code class="o">,</code> <code class="n">result</code><code class="o">.</code><code class="na">getName</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">onTestFailure</code><code class="o">(</code><code class="n">ITestResult</code> <code class="n">result</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">ITestListener</code><code class="o">.</code><code class="na">super</code><code class="o">.</code><code class="na">onTestFailure</code><code class="o">(</code><code class="n">result</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"onTestFailure {}"</code><code class="o">,</code> <code class="n">result</code><code class="o">.</code><code class="na">getThrowable</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="c1">// Other listeners</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
<div class="pagebreak-before less_space" data-type="example" id="testng-listeners-1">&#13;
<h5><span class="label">Example 8-39. </span>Test listeners using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Listeners</code><code class="o">(</code><code class="n">MyTestListener</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO30-1" id="co_testing_framework_specifics_CO30-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ListenersNGTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO30-1" id="callout_testing_framework_specifics_CO30-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use the <a data-primary="@Listeners annotation" data-primary-sortas="Listeners annotation" data-type="indexterm" id="idm45849700409536"/>TestNG annotation <code>@Listeners</code> to specify that all the tests in this class use our custom test listener.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849700407792">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>As previously <a data-primary="JUnit 5" data-secondary="for test listeners" data-secondary-sortas="test listeners" data-type="indexterm" id="idm45849700405760"/><a data-primary="JUnit 5" data-secondary="Jupiter and" data-type="indexterm" id="idm45849700404480"/><a data-primary="Jupiter" data-secondary="JUnit 5 and" data-type="indexterm" id="idm45849700379776"/>discussed (see <a data-type="xref" href="#junit5-extension-points">Table 8-4</a>), Jupiter provides a wide variety of extension points for including custom logic in the JUnit 5 test lifecycle. In addition to this extension model, JUnit 5 allows the implementation of test listeners to keep track of several test execution stages, such as test started, skipped, or finished. This <a data-primary="JUnit Platform Launcher API" data-type="indexterm" id="idm45849700378064"/>feature is available through the JUnit Launcher API, which is the API for discovering, filtering, and executing tests in the JUnit Platform (see <a data-type="xref" href="ch02.html#junit5-arch">Figure 2-4</a>).</p>&#13;
&#13;
<p>To create a <a data-primary="TestExecutionListener interface" data-type="indexterm" id="idm45849700376112"/>test listener in JUnit 5, we need to implement the <code>TestExecutionListener</code> interface. A class implementing this interface can override different methods to be notified of events that occur during test execution. <a data-type="xref" href="#junit5-listeners-1">Example 8-40</a> contains a basic class implementing this interface. These kinds of listeners are registered in JUnit 5 using a standard Java service loader mechanism. For that, we need to create a file called <code>/META-INF/services/org.junit.platform.launcher.TestExecutionLis⁠ten​er</code> in the project classpath, and write the fully qualified name of the test listener we want to register (e.g., <code>io.github.bonigarcia.webdriver.jupiter.ch08.listen⁠ers​.MyTestListener</code> for <a data-type="xref" href="#junit5-listeners-1">Example 8-40</a>). Note that this file is not included in the examples repository to avoid intruding on the whole test suite.</p>&#13;
<div data-type="example" id="junit5-listeners-1">&#13;
<h5><span class="label">Example 8-40. </span>Test listeners using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">MyTestListener</code> <code class="kd">implements</code> <code class="n">TestExecutionListener</code> <code class="o">{</code>&#13;
&#13;
    <code class="kd">static</code> <code class="kd">final</code> <code class="n">Logger</code> <code class="n">log</code> <code class="o">=</code> <code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">().</code><code class="na">lookupClass</code><code class="o">());</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">executionStarted</code><code class="o">(</code><code class="n">TestIdentifier</code> <code class="n">testIdentifier</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">TestExecutionListener</code><code class="o">.</code><code class="na">super</code><code class="o">.</code><code class="na">executionStarted</code><code class="o">(</code><code class="n">testIdentifier</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Test execution started {}"</code><code class="o">,</code> <code class="n">testIdentifier</code><code class="o">.</code><code class="na">getDisplayName</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">executionSkipped</code><code class="o">(</code><code class="n">TestIdentifier</code> <code class="n">testIdentifier</code><code class="o">,</code> <code class="n">String</code> <code class="n">reason</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">TestExecutionListener</code><code class="o">.</code><code class="na">super</code><code class="o">.</code><code class="na">executionSkipped</code><code class="o">(</code><code class="n">testIdentifier</code><code class="o">,</code> <code class="n">reason</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Test execution skipped: {}"</code><code class="o">,</code> <code class="n">reason</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="nd">@Override</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">executionFinished</code><code class="o">(</code><code class="n">TestIdentifier</code> <code class="n">testIdentifier</code><code class="o">,</code>&#13;
            <code class="n">TestExecutionResult</code> <code class="n">testExecutionResult</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">TestExecutionListener</code><code class="o">.</code><code class="na">super</code><code class="o">.</code><code class="na">executionFinished</code><code class="o">(</code><code class="n">testIdentifier</code><code class="o">,</code>&#13;
                <code class="n">testExecutionResult</code><code class="o">);</code>&#13;
        <code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Test execution finished {}"</code><code class="o">,</code>&#13;
                <code class="n">testExecutionResult</code><code class="o">.</code><code class="na">getStatus</code><code class="o">());</code>&#13;
    <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Interface <code>TestExecutionListener</code> belongs to <a data-primary="TestExecutionListener interface" data-type="indexterm" id="idm45849700305360"/><a data-primary="JUnit Platform Launcher API" data-type="indexterm" id="idm45849700304688"/>the JUnit Platform Launcher API; therefore, to use it, we need to include this API as an extra dependency in our project. <a data-type="xref" href="app03.html#appendix03">Appendix C</a> explains the required Maven and Gradle <a data-startref="ch8_term68" data-type="indexterm" id="idm45849700303120"/><a data-startref="ch8_term69" data-type="indexterm" id="idm45849700302448"/><a data-startref="ch8_term70" data-type="indexterm" id="idm45849700301776"/><a data-startref="ch8_term71" data-type="indexterm" id="idm45849700301104"/><a data-startref="ch8_term72" data-type="indexterm" id="idm45849700201760"/><a data-startref="ch8_term73" data-type="indexterm" id="idm45849700201152"/>setup for that.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Disabled Tests" data-type="sect1"><div class="sect1" id="idm45849700200288">&#13;
<h1>Disabled Tests</h1>&#13;
&#13;
<p>Unit testing frameworks <a data-primary="disabling tests" data-type="indexterm" id="ch8_term74"/><a data-primary="testing" data-secondary="conditional execution of" data-type="indexterm" id="ch8_term75"/><a data-primary="unit testing frameworks" data-secondary="for disabling specified tests" data-secondary-sortas="disabling specified tests" data-type="indexterm" id="ch8_term76"/>allow disabling (i.e., skipping in test execution) entire test classes or individual test methods programmatically. The following subsections explain the differences between JUnit 4, TestNG, JUnit 5, and Selenium-Jupiter.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 4" data-type="sect2"><div class="sect2" id="idm45849700195040">&#13;
<h2>JUnit 4</h2>&#13;
&#13;
<p>JUnit 4 provides <a data-primary="@Ignore annotation" data-primary-sortas="Ignore annotation" data-type="indexterm" id="idm45849700193472"/><a data-primary="JUnit 4" data-secondary="for disabling tests" data-secondary-sortas="disabling tests" data-type="indexterm" id="idm45849700192464"/>the annotation <code>@Ignore</code> to disable tests. This annotation can be used at the class or method level. Optionally, we can include a message in the annotation to specify the reason for disabling. <a data-type="xref" href="#junit4-disabled">Example 8-41</a> contains a disabled test.</p>&#13;
<div data-type="example" id="junit4-disabled">&#13;
<h5><span class="label">Example 8-41. </span>Disabled tests using JUnit 4</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Ignore</code><code class="o">(</code><code class="s">"Optional reason for disabling"</code><code class="o">)</code>&#13;
<code class="nd">@Test</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">testDisabled</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="c1">// Test logic</code>&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="TestNG" data-type="sect2"><div class="sect2" id="idm45849700147296">&#13;
<h2>TestNG</h2>&#13;
&#13;
<p>TestNG allows <a data-primary="TestNG" data-secondary="for disabling tests" data-secondary-sortas="disabling tests" data-type="indexterm" id="idm45849700179312"/>disabling tests in two ways. First, we can use the annotation <code>@Ignore</code> for test classes or methods. Second, we <a data-primary="@Test annotation" data-primary-sortas="Test annotation" data-type="indexterm" id="idm45849700177520"/>can use the <code>enabled</code> attribute of the <code>@Test</code> annotation. <a data-type="xref" href="#testng-disabled">Example 8-42</a> illustrates both methods.</p>&#13;
<div data-type="example" id="testng-disabled">&#13;
<h5><span class="label">Example 8-42. </span>Disabled tests using TestNG</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Ignore</code><code class="o">(</code><code class="s">"Optional reason for disabling"</code><code class="o">)</code>&#13;
<code class="nd">@Test</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">testDisabled1</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="c1">// Test logic</code>&#13;
<code class="o">}</code>&#13;
&#13;
<code class="nd">@Test</code><code class="o">(</code><code class="n">enabled</code> <code class="o">=</code> <code class="kc">false</code><code class="o">)</code>&#13;
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">testDisabled2</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="c1">// Test logic</code>&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="JUnit 5" data-type="sect2"><div class="sect2" id="idm45849700143952">&#13;
<h2>JUnit 5</h2>&#13;
&#13;
<p>The Jupiter <a data-primary="JUnit 5" data-secondary="for disabling tests" data-secondary-sortas="disabling tests" data-type="indexterm" id="idm45849700130048"/><a data-primary="JUnit 5" data-secondary="Jupiter and" data-type="indexterm" id="idm45849700128768"/><a data-primary="Jupiter" data-secondary="disabling tests with" data-type="indexterm" id="idm45849700127824"/><a data-primary="Jupiter" data-secondary="JUnit 5 and" data-type="indexterm" id="idm45849700126880"/>programming model provides various annotations for disabling tests based on different conditions. <a data-type="xref" href="#jupiter-disabling">Table 8-5</a> summarizes these annotations, and <a data-type="xref" href="#junit5-disabled">Example 8-43</a> provides a basic example using some of these annotations.</p>&#13;
<table id="jupiter-disabling">&#13;
<caption><span class="label">Table 8-5. </span>Jupiter annotations for disabling tests</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Annotation(s)</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Disabled</code></pre></div></td>&#13;
<td><p>To disable test class or method</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@DisabledOnJre</code>&#13;
<code class="nd">@EnabledOnJre</code></pre></div></td>&#13;
<td><p>To disable/enable depending on the Java version</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@DisabledOnJreRange</code>&#13;
<code class="nd">@EnabledOnJreRange</code></pre></div></td>&#13;
<td><p>To disable/enable depending on a range of Java versions</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@DisabledOnOs</code>&#13;
<code class="nd">@EnabledOnOs</code></pre></div></td>&#13;
<td><p>To disable/enable depending on the operating system (e.g., Windows, Linux, macOS, etc.)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@DisabledIfSystemProperty</code>&#13;
<code class="nd">@DisabledIfSystemProperties</code>&#13;
<code class="nd">@EnabledIfSystemProperty</code>&#13;
<code class="nd">@EnabledIfSystemProperties</code></pre></div></td>&#13;
<td><p>To disable/enable depending on the value of system properties</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@DisabledIfEnvironmentVariable</code>&#13;
<code class="nd">@DisabledIfEnvironmentVariables</code>&#13;
<code class="nd">@EnabledIfEnvironmentVariable</code>&#13;
<code class="nd">@EnabledIfEnvironmentVariables</code></pre></div></td>&#13;
<td><p>To disable/enable depending on the value of an environment variable</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@DisabledIf</code>&#13;
<code class="nd">@EnabledIf</code></pre></div></td>&#13;
<td><p>To disable/enable based on the boolean return of a custom method</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<div data-type="example" id="junit5-disabled">&#13;
<h5><span class="label">Example 8-43. </span>Disabled tests using JUnit 5</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Disabled</code><code class="o">(</code><code class="s">"Optional reason for disabling"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO31-1" id="co_testing_framework_specifics_CO31-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testDisabled1</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="nd">@DisabledOnJre</code><code class="o">(</code><code class="n">JAVA_8</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO31-2" id="co_testing_framework_specifics_CO31-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testDisabled2</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="nd">@EnabledOnOs</code><code class="o">(</code><code class="n">MAC</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO31-3" id="co_testing_framework_specifics_CO31-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">testDisabled3</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO31-1" id="callout_testing_framework_specifics_CO31-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We skip this test always.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO31-2" id="callout_testing_framework_specifics_CO31-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We skip this test in the case of using Java 8.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO31-3" id="callout_testing_framework_specifics_CO31-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We skip this test in any operating system different than macOS.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="notoc" data-pdf-bookmark="Selenium-Jupiter" data-type="sect2"><div class="sect2" id="idm45849699861296">&#13;
<h2>Selenium-Jupiter</h2>&#13;
&#13;
<p>Selenium-Jupiter provides <a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="for disabling tests" data-secondary-sortas="disabling tests" data-type="indexterm" id="idm45849699859552"/><a data-primary="Selenium-Jupiter" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="idm45849699822528"/>additional annotations to disable tests conditionally depending on specific conditions of Selenium WebDriver tests. These conditions are browser availability, Docker availability, and URL online (i.e., it returns a 200 response code when requesting the URL with the <code>GET</code> HTTP method). <a data-type="xref" href="#seljup-disabled">Example 8-44</a> shows several tests using these annotations.</p>&#13;
<div data-type="example" id="seljup-disabled">&#13;
<h5><span class="label">Example 8-44. </span>Disabled tests using JUnit 5 with Selenium-Jupiter</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@EnabledIfBrowserAvailable</code><code class="o">(</code><code class="n">SAFARI</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO32-1" id="co_testing_framework_specifics_CO32-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testDisabled1</code><code class="o">(</code><code class="n">SafariDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="nd">@EnabledIfDockerAvailable</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO32-2" id="co_testing_framework_specifics_CO32-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testDisabled2</code><code class="o">(</code><code class="nd">@DockerBrowser</code><code class="o">(</code><code class="n">type</code><code> </code><code class="o">=</code><code> </code><code class="n">CHROME</code><code class="o">)</code><code> </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="nd">@EnabledIfDriverUrlOnline</code><code class="o">(</code><code class="s">"http://localhost:4444/"</code><code class="o">)</code><code> </code><a class="co" href="#callout_testing_framework_specifics_CO32-3" id="co_testing_framework_specifics_CO32-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testDisabled3</code><code class="o">(</code><code>&#13;
</code><code>        </code><code class="nd">@DriverCapabilities</code><code class="o">(</code><code class="s">"browserName=chrome"</code><code class="o">)</code><code> </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="c1">// Test logic&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO32-1" id="callout_testing_framework_specifics_CO32-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>This test is skipped if Safari is unavailable in the system.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO32-2" id="callout_testing_framework_specifics_CO32-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>This test is skipped if Docker is unavailable in the system.</p></dd>&#13;
<dt><a class="co" href="#co_testing_framework_specifics_CO32-3" id="callout_testing_framework_specifics_CO32-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>This test is skipped if a Selenium Server URL is not online. If so, the test is executed, and the previous URL is used to create an instance of <code>RemoteWebDriver</code>. To <a data-primary="@DriverCapabilities annotation" data-primary-sortas="DriverCapabilities annotation" data-type="indexterm" id="idm45849699747760"/>specify the required capabilities, we use the annotation <code>@DriverCapabilities</code> in this <a data-startref="ch8_term74" data-type="indexterm" id="idm45849699746256"/><a data-startref="ch8_term75" data-type="indexterm" id="idm45849699708272"/><a data-startref="ch8_term76" data-type="indexterm" id="idm45849699707664"/>test (as explained in <a data-type="xref" href="ch06.html#ch06">Chapter 6</a>).</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Summary and Outlook" data-type="sect1"><div class="sect1" id="idm45849699706032">&#13;
<h1>Summary and Outlook</h1>&#13;
&#13;
<p>This chapter presented some of the most <a data-primary="unit testing frameworks" data-secondary="about" data-type="indexterm" id="idm45849699704800"/>relevant specific features of the testing framework used in this book (i.e., JUnit 4, TestNG, JUnit 5, and Selenium-Jupiter) for developing Selenium WebDriver tests. First, you learned how to implement parameterized tests. This feature can be convenient for cross-browser testing (i.e., using different browsers for web testing). Then, you learned how to categorize tests and use these categories to include or exclude them from test execution. You continued by comprehending mechanisms for failure analysis (e.g., make a browser screenshot when a test fails), retrying tests, or executing tests in parallel. Finally, you discovered how to implement test listeners and the different mechanisms for disabling tests.</p>&#13;
&#13;
<p>In the next chapter, you will learn how to integrate Selenium WebDriver with different third-party utilities for implementing advanced end-to-end tests. You will discover how to download files from web applications, capture traffic without using CDP (e.g., in Firefox), test nonfunctional requirements (such as performance, security, or accessibility), handle different input data, improve test reporting, and integrate with existing frameworks such as Spring or Cucumber.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>