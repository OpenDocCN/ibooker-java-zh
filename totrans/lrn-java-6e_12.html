<html><head></head><body><section data-pdf-bookmark="Chapter 12. Desktop Applications" data-type="chapter" epub:type="chapter"><div class="chapter" id="learnjava6-CHP-12">&#13;
<h1><span class="label">Chapter 12. </span>Desktop Applications</h1>&#13;
&#13;
&#13;
<p>Java leapt to fame and <a data-primary="desktop applications" data-type="indexterm" id="ix_desktop_apps_ch12"/>glory on the power of applets—amazing, <em>interactive</em> elements on a web page. Sounds mundane these days, but at the time it was nothing short of a marvel. <a data-primary="Abstract Window Toolkit (AWT)" data-type="indexterm" id="id2305"/><a data-primary="AWT (Abstract Window Toolkit)" data-type="indexterm" id="id2306"/>Java also had cross-platform support up its sleeve and could run the same code on Windows, Unix, and macOS systems. The early JDKs had a rudimentary set of graphical components collectively known as the Abstract Window Toolkit (AWT). The “abstract” in AWT comes from the use of common classes (<code>Button</code>, <code>Window</code>, etc.) with native implementations. You write AWT applications with abstract, cross-platform code; your computer runs your application and provides concrete, native components.</p>&#13;
&#13;
<p>Unfortunately, that nifty combination of abstract and native comes with some pretty serious limitations. In the abstract realm, you encounter “lowest common denominator” designs that only give you access to features available on every platform supported by the JDK. In the native implementations, even some features roughly available everywhere were distinctly different when actually rendered on the screen. Many desktop developers working with Java in those early days joked that the “write once, run everywhere” tagline was really “write once, debug everywhere.” The Java Swing package set out to ameliorate this woeful state. While Swing didn’t solve every problem of cross-platform application delivery, it did make serious desktop application development possible in Java. You can find many quality open source projects and even some commercial applications written in Swing. Indeed, the IDE we detail in <a data-type="xref" href="app01.html#learnjava6-APP-A">Appendix A</a>, IntelliJ IDEA, is a Swing application! It clearly goes toe-to-toe with native IDEs on both performance and usability.<sup><a data-type="noteref" href="ch12.html#id2307" id="id2307-marker">1</a></sup></p>&#13;
&#13;
<p>If you look at the <a data-primary="javax.swing package" data-type="indexterm" id="id2308"/>documentation for the <code>javax.swing</code><sup><a data-type="noteref" href="ch12.html#id2309" id="id2309-marker">2</a></sup> package, you will see it contains a multitude of classes. <a data-primary="java.awt package" data-type="indexterm" id="id2310"/>You will still need some pieces of the original <code>java.awt</code> realm as well. There are entire books on AWT (<a href="https://oreil.ly/ppyCu"><em>Java AWT Reference</em></a>, Zukowski, O’Reilly) and on Swing (<a href="https://oreil.ly/bO7g6"><em>Java Swing</em></a>, Loy, et al., O’Reilly), and even on subpackages of the AWT, such as 2D graphics  (<a href="https://oreil.ly/o3YxN"><em>Java 2D Graphics</em></a>, Knudsen, O’Reilly). In this chapter, we’ll stick to covering some popular components like buttons and text fields. We’ll look at how to lay them out in your application window and how to interact with them. You may be surprised by how sophisticated your application can get with these simple starting topics. If you do more desktop development after reading this book, you may also be surprised by how much more graphical user interface (GUI, or just UI) content is out there for Java. We want to whet your appetite while acknowledging that there are many, <em>many</em> more UI discussions we must leave for you to discover later. With that said, let the whirlwind tour commence!</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Buttons and Sliders and Text Fields, Oh My!" data-type="sect1"><div class="sect1" id="learnjava6-CHP-12-SECT-1">&#13;
<h1>Buttons and Sliders and Text Fields, Oh My!</h1>&#13;
&#13;
<p>So where to begin? We have a bit of a “chicken and the egg” problem: we need to discuss the “things” to put on the screen, such as the <code>JLabel</code> objects we used in <a data-type="xref" href="ch02.html#learnjava6-CHP-2-SECT-2">“HelloJava”</a>. But we also need to discuss what you put those things into. And <em>where</em> you put those things also merits discussion, as it’s a nontrivial process. We actually seem to have a chicken, egg, and brunch problem. Grab a cup of coffee or a mimosa, and we’ll get started. We will cover some popular components (the “things”) first, then their containers, and finally the topic of laying out your components in those containers. Once you can put a nice set of widgets on the screen, we’ll discuss how to interact with them as well as how to handle user interfaces in a multithreaded world.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Component Hierarchies" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-1.1">&#13;
<h2>Component Hierarchies</h2>&#13;
&#13;
<p>As we’ve <a data-primary="desktop applications" data-secondary="component hierarchies" data-type="indexterm" id="id2311"/><a data-primary="JComponent class" data-type="indexterm" id="id2312"/><a data-primary="JContainer class" data-type="indexterm" id="id2313"/><a data-primary="components, GUI" data-secondary="hierarchy of" data-type="indexterm" id="id2314"/>discussed in previous chapters, Java classes are designed and extended in a hierarchical fashion. <code>JComponent</code> and <code>JContainer</code> sit at the top of the Swing class hierarchy, as shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-1">Figure 12-1</a>. We won’t cover these two classes in much detail, but remember their names. You will find several common attributes and methods in these classes as you read the Swing documentation. As you advance in your programming endeavors, you’ll likely want to build your own component. <code>JComponent</code> is a great starting point. We used <code>JComponent</code> when building our graphical <code>Hello</code>&#13;
<span class="keep-together"><code>Component</code></span> back in <a data-type="xref" href="ch02.html#learnjava6-CHP-2">Chapter 2</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-1">&#13;
<img alt="ljv6 1201" src="assets/ljv6_1201.png"/>&#13;
<h6><span class="label">Figure 12-1. </span>Partial (very partial) Swing class hierarchy</h6>&#13;
</div></figure>&#13;
&#13;
<p>We will be covering most of the other classes mentioned in the abridged hierarchy above, but you will definitely want to visit the <a href="https://oreil.ly/H7KhT">online documentation</a> to see the many components we had to leave out.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Model View Controller Architecture" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-1.2">&#13;
<h2>Model View Controller Architecture</h2>&#13;
&#13;
<p>At the <a data-primary="desktop applications" data-secondary="model view controller architecture" data-type="indexterm" id="id2315"/><a data-primary="Model-View-Controller (MVC) framework" data-type="indexterm" id="id2316"/><a data-primary="MVC (Model-View-Controller) framework" data-type="indexterm" id="id2317"/>base of Swing’s notion of “things” is a design pattern known as Model View Controller (MVC). The Swing package authors worked hard to consistently apply this pattern so that when you encounter new components, their behavior and usage should feel familiar. MVC architecture aims to compartmentalize what you see (the view) from the behind-the-scenes state (the model) and from the collection of interactions (the controller) that change those parts. This separation of concerns allows you to concentrate on getting each piece right. Network traffic can update the model behind the scenes. The view can be synchronized at regular intervals that feel smooth and responsive to the user. MVC provides a powerful yet manageable framework to use when building any desktop application.</p>&#13;
&#13;
<p class="pagebreak-before">As we look at our small selection of components, we’ll highlight the model and the view elements. We’ll then go into more detail on the controllers in <a data-type="xref" href="#learnjava6-CHP-12-SECT-3">“Events”</a>. If you find the notion of programming patterns intriguing, <a href="https://oreil.ly/gt4Pt"><em>Design Patterns: Elements of Reusable Object-Oriented Software</em></a> (Addison-Wesley) by Gamma, Helm, Johnson, and Vlissides (the renowned Gang of Four) is the classic work. For more details on the use of the MVC pattern in Swing specifically, see the introductory chapter of <a href="https://oreil.ly/ADKQq"><em>Java Swing</em></a>, by Loy et al.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Labels and Buttons" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-1.3">&#13;
<h2>Labels and Buttons</h2>&#13;
&#13;
<p>The <a data-primary="labels, GUI" data-type="indexterm" id="ix_labels_gui"/><a data-primary="desktop applications" data-secondary="labels (JLabel)" data-type="indexterm" id="ix_apps_label"/><a data-primary="JLabel class" data-type="indexterm" id="ix_jlabel_ch11"/><a data-primary="components, GUI" data-secondary="labels" data-type="indexterm" id="ix_comp_label"/>simplest UI component is not surprisingly one of the most popular. Labels are used all over the place to indicate functionality, display status, and draw focus. We used a label for our first graphical application back in <a data-type="xref" href="ch02.html#learnjava6-CHP-2">Chapter 2</a>. We’ll use many more labels as we continue building more interesting programs.</p>&#13;
&#13;
<p>The <code>JLabel</code> component is a versatile tool. Let’s look at some examples of how to use <code>JLabel</code> and customize its many attributes. We’ll start by revisiting our “Hello, Java” program with a few preparatory tweaks:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w">&#13;
</code><code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="kd">public</code><code class="w"> </code><code class="kd">class</code><code> </code><code class="nc">Labels</code><code class="w"> </code><code class="p">{</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[</code><code class="o">]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"</code><code class="s">JLabel Examples</code><code class="s">"</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">;</code><code class="w"> </code><a class="co" href="#callout_desktop_applications_CO1-1" id="co_desktop_applications_CO1-1"><img alt="1" src="assets/1.png"/></a><code class="w">&#13;
</code><code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">)</code><code class="p">;</code><code class="w"> </code><a class="co" href="#callout_desktop_applications_CO1-2" id="co_desktop_applications_CO1-2"><img alt="2" src="assets/2.png"/></a><code class="w">&#13;
</code><code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">150</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">basic</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"</code><code class="s">Default Label</code><code class="s">"</code><code class="p">)</code><code class="p">;</code><code class="w"> </code><a class="co" href="#callout_desktop_applications_CO1-3" id="co_desktop_applications_CO1-3"><img alt="3" src="assets/3.png"/></a><code class="w">&#13;
</code><code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">basic</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">  </code><code class="p">}</code><code class="w">&#13;
</code><code class="p">}</code></pre>&#13;
&#13;
<p>Briefly, the interesting parts are:</p>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_desktop_applications_CO1-1" id="callout_desktop_applications_CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Setting the layout manager for use by the frame.</p></dd>&#13;
<dt><a class="co" href="#co_desktop_applications_CO1-2" id="callout_desktop_applications_CO1-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>Setting the action taken when using the operating system’s “close” button (in this case, the red dot in the upper-left corner of the window). The action we selected here exits the application.</p></dd>&#13;
<dt><a class="co" href="#co_desktop_applications_CO1-3" id="callout_desktop_applications_CO1-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>Creating our simple label and adding it to the frame.</p></dd>&#13;
</dl>&#13;
&#13;
<p>You declare and initialize the label, then add it to the frame. That should be familiar. What is likely new is our use of a <code>FlowLayout</code> instance, which helps us produce the screenshot shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-2">Figure 12-2</a>.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-2">&#13;
<img alt="ljv6 1202" src="assets/ljv6_1202.png"/>&#13;
<h6><span class="label">Figure 12-2. </span>A single, simple <code>JLabel</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>We’ll go over <a data-primary="FlowLayout class" data-type="indexterm" id="id2318"/>layout managers in much more detail in <a data-type="xref" href="#learnjava6-CHP-12-SECT-2">“Containers and Layouts”</a>, but we need something to get us off the ground that also allows us to add multiple components to a single container. The <code>FlowLayout</code> class fills a container by horizontally centering components at the top, adding from left to right until that “row” runs out of room, then continuing on a new row below. This type of arrangement won’t be of much use in larger applications, but it is ideal for getting several things on the screen quickly.</p>&#13;
&#13;
<p>Let’s prove that point by adding a few more labels to the frame. Check out the results shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-3">Figure 12-3</a>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Labels</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"JLabel Examples"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">150</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">basic</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Default Label"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">another</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Another Label"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">simple</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"A Simple Label"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">standard</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"A Standard Label"</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">basic</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">another</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">simple</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">standard</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-3">&#13;
<img alt="ljv6 1203" src="assets/ljv6_1203.png"/>&#13;
<h6><span class="label">Figure 12-3. </span>Several basic <code>JLabel</code> objects</h6>&#13;
</div></figure>&#13;
&#13;
<p>Neat, right? Again, this <a data-primary="Color class, java.awt" data-type="indexterm" id="id2319"/><a data-primary="java.awt package" data-type="indexterm" id="id2320"/><a data-primary="backgrounds, GUI" data-type="indexterm" id="ix_backg_gui"/>simple layout is not meant for most types of content you find in production applications, but it’s definitely useful as you get started. One more point about layouts that we want to make, as you’ll encounter this idea later: <code>FlowLayout</code> also deals with the size of the labels. That can be hard to notice in this example because labels have a transparent background by default. If we import the <code>java.awt.Color</code> class, we can use that class to help make them opaque and give them a specific background color:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">basic</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Default Label"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">basic</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">basic</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">YELLOW</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">another</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Another Label"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">another</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">another</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">GREEN</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">basic</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">another</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// other frame setup</code><code class="w"/></pre>&#13;
&#13;
<p>If we do the same for all of our labels, we can now see their true sizes and the gaps between them in <a data-type="xref" href="#learnjava6-CHP-12-FIG-4">Figure 12-4</a>. But if we can control the background color of labels, what else can we do? Can we change the foreground color? (Yes.) Can we change the font? (Yes.) Can we change the alignment? (Yes.) Can we add icons? (Yes.) Can we create self-aware labels that eventually build Skynet and bring about the end of humanity? (Maybe, but probably not, and certainly not easily. Just as well.) <a data-type="xref" href="#learnjava6-CHP-12-FIG-5">Figure 12-5</a> shows some of these possible tweaks.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-4">&#13;
<img alt="ljv6 1204" src="assets/ljv6_1204.png"/>&#13;
<h6><span class="label">Figure 12-4. </span>Opaque, colored labels</h6>&#13;
</div></figure>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-5">&#13;
<img alt="ljv6 1205" src="assets/ljv6_1205.png"/>&#13;
<h6><span class="label">Figure 12-5. </span>More labels with fancier options</h6>&#13;
</div></figure>&#13;
&#13;
<p>And here is the relevant source code that built this added variety:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// a white label with a forced size and text centered inside</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">centered</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Centered Text"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">centered</code><code class="p">.</code><code class="na">setPreferredSize</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">Dimension</code><code class="p">(</code><code class="mi">150</code><code class="p">,</code><code class="w"> </code><code class="mi">24</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">centered</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">centered</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">WHITE</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// a white label with an alternate, larger font</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">times</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Times Roman"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">times</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">times</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">WHITE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">times</code><code class="p">.</code><code class="na">setFont</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">Font</code><code class="p">(</code><code class="s">"TimesRoman"</code><code class="p">,</code><code class="w"> </code><code class="n">Font</code><code class="p">.</code><code class="na">BOLD</code><code class="p">,</code><code class="w"> </code><code class="mi">18</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// a white label using inline HTML for styling</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">styled</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"&lt;html&gt;Some &lt;b&gt;&lt;i&gt;styling&lt;/i&gt;&lt;/b&gt;"</code><code class="w"/>&#13;
<code class="w">        </code><code class="o">+</code><code class="w"> </code><code class="s">" is also allowed&lt;/html&gt;"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">styled</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">styled</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">WHITE</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// a label with both an icon and text</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">icon</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Verified"</code><code class="p">,</code><code class="w"/>&#13;
<code class="w">        </code><code class="k">new</code><code class="w"> </code><code class="n">ImageIcon</code><code class="p">(</code><code class="s">"ch10/examples/check.png"</code><code class="p">),</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">LEFT</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">icon</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">icon</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">WHITE</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// finally, add all our new labels to the frame</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">centered</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">times</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">styled</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">icon</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>We used a few other <a data-primary="java.awt package" data-type="indexterm" id="id2321"/><a data-primary="javax.swing package" data-secondary="ImageIcon" data-type="indexterm" id="id2322"/><a data-primary="ImageIcon class, java.awt" data-type="indexterm" id="id2323"/><a data-primary="Font class, java.awt" data-type="indexterm" id="id2324"/>classes to help out, such as <code>java.awt.Font</code> and <code>javax.swing.ImageIcon</code>. We could review many more options, but we need to look at some other components. If you want to play around with these labels and try out more of the options you see in the Java documentation, try importing a helper we built for <em>jshell</em> and playing around.<sup><a data-type="noteref" href="ch12.html#id2325" id="id2325-marker">3</a></sup> The results of our few lines are shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-6">Figure 12-6</a>:<a data-primary="" data-startref="ix_backg_gui" data-type="indexterm" id="id2326"/></p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">$ javac ch12/examples/Widget.java&#13;
$ jshell&#13;
|  Welcome to JShell -- Version 21-ea&#13;
|  For an introduction type: /help intro&#13;
&#13;
jshell&gt; import javax.swing.*&#13;
jshell&gt; import java.awt.*&#13;
jshell&gt; import ch12.examples.Widget&#13;
&#13;
jshell&gt; Widget w = new Widget()&#13;
w ==&gt; ch10.Widget[frame0,0,23,300x150,layout=java.awt.B ... abled=true]&#13;
&#13;
jshell&gt; JLabel label1 = new JLabel("Green")&#13;
label1 ==&gt; javax.swing.JLabel[,0,0,0x0,invalid,alignmentX=0. ... ion=CENTER]&#13;
&#13;
jshell&gt; label1.setOpaque(true)&#13;
jshell&gt; label1.setBackground(Color.GREEN)&#13;
&#13;
jshell&gt; w.add(label1)&#13;
$8 ==&gt; javax.swing.JLabel[,0,0,0x0,...]&#13;
&#13;
jshell&gt; w.add(new JLabel("Quick test"))&#13;
$9 ==&gt; javax.swing.JLabel[,0,0,0x0,...]</pre>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-6">&#13;
<img alt="ljv6 1206" src="assets/ljv6_1206.png"/>&#13;
<h6><span class="label">Figure 12-6. </span>Using our <code>Widget</code> class in <em>jshell</em></h6>&#13;
</div></figure>&#13;
&#13;
<p>We hope you see how easy it is now to create a label (or other components, such as the buttons that we’ll be exploring next) and tweak its parameters interactively. This is a great way to familiarize yourself with the building blocks you have at your disposal for creating Java desktop applications. If you use our <code>Widget</code> much, you may find its <code>reset()</code> method handy. This method removes all of the current components and refreshes the window so you can start over quickly.<a data-primary="" data-startref="ix_comp_label" data-type="indexterm" id="id2327"/><a data-primary="" data-startref="ix_apps_label" data-type="indexterm" id="id2328"/><a data-primary="" data-startref="ix_jlabel_ch11" data-type="indexterm" id="id2329"/><a data-primary="" data-startref="ix_labels_gui" data-type="indexterm" id="id2330"/></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Buttons" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-1.3.1">&#13;
<h3>Buttons</h3>&#13;
&#13;
<p>The other near-universal <a data-primary="buttons" data-type="indexterm" id="id2331"/><a data-primary="components, GUI" data-secondary="buttons" data-type="indexterm" id="id2332"/><a data-primary="desktop applications" data-secondary="buttons (JButton)" data-type="indexterm" id="id2333"/><a data-primary="JButton class" data-type="indexterm" id="id2334"/>component you’ll need for graphical applications is the button. The <code>JButton</code> class is your go-to button in Swing. (You’ll also find other popular button types, such as <code>JCheckbox</code> and <code>JToggleButton</code>, in the documentation.) Creating a button is very similar to creating a label, as shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-7">Figure 12-7</a>.</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Buttons</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"JButton Examples"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">150</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">basic</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Try me!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">basic</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-7">&#13;
<img alt="ljv6 1207" src="assets/ljv6_1207.png"/>&#13;
<h6><span class="label">Figure 12-7. </span>A simple <code>JButton</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>You can control the colors, text and image alignment, font, and so on for buttons in much the same way as you do for labels. The difference, of course, is that you can click on a button and react to that click in your program, whereas labels are mostly static displays. Try running this example and clicking on the button. It should change color and feel “pressed,” even though it does not perform any other function in our program yet. We want to go through a few more components before tackling that notion of “reacting” to a button click (an “event” in Swing-speak), but you can jump to <a data-type="xref" href="#learnjava6-CHP-12-SECT-3">“Events”</a> if you can’t wait!</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Text Components" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-1.4">&#13;
<h2>Text Components</h2>&#13;
&#13;
<p>It would be impossible to <a data-primary="JTextArea" data-type="indexterm" id="id2335"/><a data-primary="JTextComponent" data-type="indexterm" id="id2336"/><a data-primary="JTextPane" data-type="indexterm" id="id2337"/><a data-primary="desktop applications" data-secondary="text components" data-type="indexterm" id="ix_apps_text_comp"/><a data-primary="text processing" data-secondary="components" data-type="indexterm" id="ix_text_comp_gui"/>imagine a desktop or web application today without the text input fields. These input elements allow for free-form entry of information and are nearly ubiquitous in online forms. You can grab names, email addresses, phone numbers, and credit card numbers. You can do all that in languages that compose their characters, or others that read from right to left. Swing has three big text components: <code>JTextField</code>, <code>JTextArea</code>, and <code>JTextPane</code>; all extended from a common parent, <code>JTextComponent</code>. <code>JTextField</code> is a classic text field meant for brief, single-word or single-line input. <code>JTextArea</code> allows for much more input spread across multiple lines. <code>JTextPane</code> is a specialized component meant for editing &#13;
<span class="keep-together">rich text</span>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Text fields" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-1.4.1">&#13;
<h3>Text fields</h3>&#13;
&#13;
<p>Let’s get an <a data-primary="JTextField" data-type="indexterm" id="ix_jtext_field"/><a data-primary="text fields, GUI" data-type="indexterm" id="ix_text_field_gui"/><a data-primary="components, GUI" data-secondary="text fields" data-type="indexterm" id="text_field"/>example of text input running in our simple, flowing application. We’ll pare things back to two labels and corresponding text fields:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">TextInputs</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"JTextField Examples"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">400</code><code class="p">,</code><code class="w"> </code><code class="mi">200</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">nameLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Name:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JTextField</code><code class="w"> </code><code class="n">nameField</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextField</code><code class="p">(</code><code class="mi">10</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">emailLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Email:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JTextField</code><code class="w"> </code><code class="n">emailField</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextField</code><code class="p">(</code><code class="mi">24</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">nameLabel</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">nameField</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">emailLabel</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">emailField</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Notice in <a data-type="xref" href="#learnjava6-CHP-12-FIG-8">Figure 12-8</a> that the size of a text field is dictated by the number of columns we specify in its constructor. That’s not the only way to initialize a text field, but it is useful when there are no other layout mechanisms dictating the width of the field. (Here, the <code>FlowLayout</code> failed us a bit—the <code>“Email:”</code> label did not stay on the same line as the email text field. We’ll fix that soon as we learn more about layouts.) Go ahead and type something! You can enter and delete text; highlight stuff inside the field with your mouse; and cut, copy, and paste as you’d expect.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-8">&#13;
<img alt="ljv6 1208" src="assets/ljv6_1208.png"/>&#13;
<h6><span class="label">Figure 12-8. </span>Simple labels and <code>JTextField</code>s</h6>&#13;
</div></figure>&#13;
&#13;
<p>If you add a text field to our demo app in <em>jshell</em>, as shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-9">Figure 12-9</a>, you can <a data-primary="getText() method, JTextField" data-type="indexterm" id="id2338"/>call its <code>getText()</code> method to see that the content is indeed available to you.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-9">&#13;
<img alt="ljv6 1209" src="assets/ljv6_1209.png"/>&#13;
<h6><span class="label">Figure 12-9. </span>Retrieving the contents of a <code>JTextField</code></h6>&#13;
</div></figure>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; w.reset()&#13;
&#13;
jshell&gt; JTextField emailField = new JTextField(15)&#13;
emailField ==&gt; javax.swing.JTextField[,0,0,0x0, ... lignment=LEADING]&#13;
&#13;
jshell&gt; w.add(new JLabel("Email:"))&#13;
$12 ==&gt; javax.swing.JLabel[,0,0,0x0, ... sition=CENTER]&#13;
&#13;
jshell&gt; w.add(emailField)&#13;
$13 ==&gt; javax.swing.JTextField[,0,0,0x0, ... lignment=LEADING]&#13;
&#13;
// Enter an sample address, we typed in "me@some.company"&#13;
&#13;
jshell&gt; emailField.getText()&#13;
$14 ==&gt; "me@some.company"</pre>&#13;
&#13;
<p>Note <a data-primary="setText() method, JTextField" data-type="indexterm" id="id2339"/>that the <code>text</code> property is read-write. You can call <code>setText()</code> on your text field to change its content programmatically. This can be great for setting default values, auto-formatting things like phone numbers, or prefilling a form from information you gather over the network. Try it out in <em>jshell</em>.<a data-primary="" data-startref="text_field" data-type="indexterm" id="id2340"/><a data-primary="" data-startref="ix_jtext_field" data-type="indexterm" id="id2341"/><a data-primary="" data-startref="ix_text_field_gui" data-type="indexterm" id="id2342"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Text areas" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-1.4.2">&#13;
<h3>Text areas</h3>&#13;
&#13;
<p>When you <a data-primary="JTextArea" data-type="indexterm" id="ix_jtext_area"/><a data-primary="text areas" data-type="indexterm" id="ix_text_area"/><a data-primary="components, GUI" data-secondary="text areas" data-type="indexterm" id="ix_comp_gui_text_area"/>need room for more than simple words or even long URL entries, you’ll likely turn to <code>JTextArea</code> to give the user multiple lines of input space. You can create an empty text area with a constructor similar to <code>JTextField</code>. For <code>JTextArea</code>, you specify the number of rows in addition to the number of columns. Take a look at the code to add a text area to our text input demo app:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">bodyLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Body:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JTextArea</code><code class="w"> </code><code class="n">bodyArea</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextArea</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code><code class="mi">30</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">bodyLabel</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">bodyArea</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>The results are shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-10">Figure 12-10</a>. You can see we have room for multiple lines of text. Go ahead and run this new version and try it yourself. What happens if you type past the end of a line? What happens when you press the Return key? Do you get the behaviors you’re familiar with? You still have access to its content just like you do with a text field.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-10">&#13;
<img alt="ljv6 1210" src="assets/ljv6_1210.png"/>&#13;
<h6><span class="label">Figure 12-10. </span>Adding a <code>JTextArea</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>Let’s add a text area to our widget in <em>jshell</em> so that we can play with its properties:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; w.reset()&#13;
&#13;
jshell&gt; w.add(new JLabel("Body:"))&#13;
$16 ==&gt; javax.swing.JLabel[,0,0,0x0, ... ition=CENTER]&#13;
&#13;
jshell&gt; JTextArea bodyArea = new JTextArea(5,20)&#13;
bodyArea ==&gt; javax.swing.JTextArea[,0,0,0x0, ... word=false,wrap=false]&#13;
&#13;
jshell&gt; w.add(bodyArea)&#13;
$18 ==&gt; javax.swing.JTextArea[,0,0,0x0, ... lse,wrap=false]&#13;
&#13;
jshell&gt; bodyArea.getText()&#13;
$19 ==&gt; "This is the first line.\nThis should be the second.\nAnd the third..."</pre>&#13;
&#13;
<p>Great! We can see that the Return key we typed to produce our three lines in <a data-type="xref" href="#learnjava6-CHP-12-FIG-11">Figure 12-11</a> gets encoded as the <code>\n</code> character in the string we retrieve.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-11">&#13;
<img alt="ljv6 1211" src="assets/ljv6_1211.png"/>&#13;
<h6><span class="label">Figure 12-11. </span>Retrieving the contents of a <code>JTextArea</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>But what happens if you try to type a long, run-on sentence that runs past the end of the line? You may get an odd text area that expanded to the size of your window and beyond, as shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-12">Figure 12-12</a>.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-12">&#13;
<img alt="ljv6 1212" src="assets/ljv6_1212.png"/>&#13;
<h6><span class="label">Figure 12-12. </span>An overly long line in a simple <code>JTextArea</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>We can fix that incorrect sizing behavior by looking at a pair of properties of &#13;
<span class="keep-together"><code>JText</code></span><code>Area</code>, shown in <a data-type="xref" href="#learnjava6-CHP-12-TABLE-1">Table 12-1</a>.</p>&#13;
<table id="learnjava6-CHP-12-TABLE-1">&#13;
<caption><span class="label">Table 12-1. </span>Wrap properties of <code>JTextArea</code></caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Property</th>&#13;
<th>Default</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>lineWrap</code></p></td>&#13;
<td><p><code>false</code></p></td>&#13;
<td><p>Whether lines longer than the table should wrap at all</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>wrapStyleWord</code></p></td>&#13;
<td><p><code>false</code></p></td>&#13;
<td><p>If lines do wrap, whether the line breaks should be on word or character boundaries</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>So let’s start <a data-primary="setLineWrap() method, JTextArea" data-type="indexterm" id="id2343"/><a data-primary="setWrapStyleWord() method, JTextArea" data-type="indexterm" id="id2344"/><a data-primary="wrap properties, JTextArea" data-type="indexterm" id="id2345"/>fresh and turn on the word wrap. We can use <code>setLineWrap(true)</code> to make sure the text wraps. But that’s probably not enough. We’ll add a call to <code>setWrapStyleWord(true)</code> to make sure the text area doesn’t just break words in the middle. That should look similar to <a data-type="xref" href="#learnjava6-CHP-12-FIG-13">Figure 12-13</a>.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-13">&#13;
<img alt="ljv6 1213" src="assets/ljv6_1213.png"/>&#13;
<h6><span class="label">Figure 12-13. </span>A wrapping line in a simple <code>JTextArea</code></h6>&#13;
</div></figure>&#13;
&#13;
<p class="pagebreak-before">You can try that yourself in <em>jshell</em> or in your own app. When you retrieve the text from the <code>bodyArea</code> object, you should <em>not</em> see a line break (<code>\n</code>) in line three between the second “on” and the “but.”<a data-primary="" data-startref="ix_comp_gui_text_area" data-type="indexterm" id="id2346"/><a data-primary="" data-startref="ix_jtext_area" data-type="indexterm" id="id2347"/><a data-primary="" data-startref="ix_text_area" data-type="indexterm" id="id2348"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Text scrolling" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-1.4.3">&#13;
<h3>Text scrolling</h3>&#13;
&#13;
<p>What <a data-primary="text processing" data-secondary="scrolling" data-type="indexterm" id="ix_text_scroll_gui"/><a data-primary="JScrollPane" data-type="indexterm" id="ix_jscrollpane_ch11"/><a data-primary="scrolling, GUI text components" data-type="indexterm" id="ix_scroll_gui"/><a data-primary="components, GUI" data-secondary="scroll panes" data-type="indexterm" id="ix_comp_gui_scroll"/>happens if we have too many rows? On its own, <code>JTextArea</code> does that odd “grow until it can’t” trick, as shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-14">Figure 12-14</a>.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-14">&#13;
<img alt="ljv6 1214" src="assets/ljv6_1214.png"/>&#13;
<h6><span class="label">Figure 12-14. </span>Too many lines in a simple <code>JTextArea</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>To fix this problem, we need to call in some support from a standard Swing helper component: <code>JScrollPane</code>. This is a general-purpose container that makes it easy to present large components in confined spaces. To show you just how easy this is, let’s fix our text area:<sup><a data-type="noteref" href="ch12.html#id2349" id="id2349-marker">4</a></sup></p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; w.remove(bodyArea); // So we can start with a fresh text area&#13;
&#13;
jshell&gt; bodyArea = new JTextArea(5,20)&#13;
bodyArea ==&gt; javax.swing.JTextArea[,0,0,0x0,inval... word=false,wrap=false]&#13;
&#13;
jshell&gt; w.add(new JScrollPane(bodyArea))&#13;
$17 ==&gt; javax.swing.JScrollPane[,47,5,244x84, ... ortBorder=]</pre>&#13;
&#13;
<p class="pagebreak-before">You can see in <a data-type="xref" href="#learnjava6-CHP-12-FIG-15">Figure 12-15</a> that the text area no longer grows beyond the bounds of the frame. You can also see the standard scroll bars along the side and bottom. If you just need simple scrolling, you’re done! But like most other components in Swing, <code>JScrollPane</code> has many fine details you can adjust as needed. We won’t cover most of those here, but we do want to show you how to tackle a common setup for text areas: line wrapping (breaking on words) with vertical scrolling—meaning no horizontal scrolling.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-15">&#13;
<img alt="ljv6 1215" src="assets/ljv6_1215.png"/>&#13;
<h6><span class="label">Figure 12-15. </span>Too many lines in a <code>JTextArea</code> embedded in a <code>JScrollPane</code></h6>&#13;
</div></figure>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">bodyLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Body:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JTextArea</code><code class="w"> </code><code class="n">bodyArea</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextArea</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code><code class="mi">30</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bodyArea</code><code class="p">.</code><code class="na">setLineWrap</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bodyArea</code><code class="p">.</code><code class="na">setWrapStyleWord</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JScrollPane</code><code class="w"> </code><code class="n">bodyScroller</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JScrollPane</code><code class="p">(</code><code class="n">bodyArea</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bodyScroller</code><code class="p">.</code><code class="na">setHorizontalScrollBarPolicy</code><code class="p">(</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">JScrollPane</code><code class="p">.</code><code class="na">HORIZONTAL_SCROLLBAR_NEVER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bodyScroller</code><code class="p">.</code><code class="na">setVerticalScrollBarPolicy</code><code class="p">(</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">JScrollPane</code><code class="p">.</code><code class="na">VERTICAL_SCROLLBAR_ALWAYS</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">bodyLabel</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// note we don't add bodyArea, it's already in bodyScroller</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">bodyScroller</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>You should end up with a text area like the one shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-16">Figure 12-16</a>.</p>&#13;
&#13;
<figure class="width-75"><div class="figure" id="learnjava6-CHP-12-FIG-16">&#13;
<img alt="ljv6 1216" src="assets/ljv6_1216.png"/>&#13;
<h6><span class="label">Figure 12-16. </span>A well-formed <code>JTextArea</code> in a <code>JScrollPane</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>Hooray! You now have a taste of the most common Swing components, including labels, buttons, and text fields. But we really have just scratched the surface of these components. Look over the Java documentation and play around with each of these components in <em>jshell</em> or in your own mini applications.</p>&#13;
&#13;
<p>Getting comfortable with UI design takes practice. We encourage you to look up other books and online resources if you will be building desktop applications, but nothing beats time spent at the keyboard.<a data-primary="" data-startref="ix_apps_text_comp" data-type="indexterm" id="id2350"/><a data-primary="" data-startref="ix_text_comp_gui" data-type="indexterm" id="id2351"/><a data-primary="" data-startref="ix_comp_gui_scroll" data-type="indexterm" id="id2352"/><a data-primary="" data-startref="ix_jscrollpane_ch11" data-type="indexterm" id="id2353"/><a data-primary="" data-startref="ix_scroll_gui" data-type="indexterm" id="id2354"/><a data-primary="" data-startref="ix_text_scroll_gui" data-type="indexterm" id="id2355"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Other Components" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-1.5">&#13;
<h2>Other Components</h2>&#13;
&#13;
<p>If you’ve already looked at the documentation on the <code>javax.swing</code> package, you know several dozen other components are available. Within that large list, there are a few that we want to highlight.<sup><a data-type="noteref" href="ch12.html#id2356" id="id2356-marker">5</a></sup></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="JSlider" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-1.5.1">&#13;
<h3>JSlider</h3>&#13;
&#13;
<p>Sliders are a nifty, efficient input <a data-primary="desktop applications" data-secondary="sliders (JSlider)" data-type="indexterm" id="ix_apps_slider"/><a data-primary="JSlider" data-type="indexterm" id="ix_jslider_gui"/><a data-primary="components, GUI" data-secondary="sliders" data-type="indexterm" id="ix_comp_gui_slider"/><a data-primary="sliders, GUI component" data-type="indexterm" id="ix_slider_gui"/>component when you want the user to choose from a range of values: for instance, things like font size selectors, color pickers, and zoom selectors. Sliders are perfect for the angle and force values we need in our apple tossing game. Our angles range from 0 to 180, and our force value ranges from 0 to 20 (an arbitrary maximum). <a data-type="xref" href="#learnjava6-CHP-12-FIG-17">Figure 12-17</a> shows these sliders in place (ignore how we achieved the layout for now).</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-17">&#13;
<img alt="ljv6 1217" src="assets/ljv6_1217.png"/>&#13;
<h6><span class="label">Figure 12-17. </span>Using <code>JSlider</code> in our apple tossing game</h6>&#13;
</div></figure>&#13;
&#13;
<p>To create a new slider, you provide three values: the minimum (<code>0</code> for our angle slider), the maximum (<code>180</code>), and the initial value (start in the middle for the game at <code>90</code>). You can add such a slider to our <em>jshell</em> playground like this:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">// reset the widget&#13;
jshell&gt; w.reset()&#13;
&#13;
jshell&gt; JSlider slider = new JSlider(0, 180, 90);&#13;
slider ==&gt; javax.swing.JSlider[,0,0,0x0, ... ks=false,snapToValue=true]&#13;
&#13;
jshell&gt; w.add(slider)&#13;
$20 ==&gt; javax.swing.JSlider[,0,0,0x0, ... alue=true]</pre>&#13;
&#13;
<p class="pagebreak-before">Scoot the slider around like you see in <a data-type="xref" href="#learnjava6-CHP-12-FIG-18">Figure 12-18</a>, then look at its current value using the <code>getValue()</code> method:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; slider.getValue()&#13;
$21 ==&gt; 112</pre>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-18">&#13;
<img alt="ljv6 1218" src="assets/ljv6_1218.png"/>&#13;
<h6><span class="label">Figure 12-18. </span>A simple <code>JSlider</code> in <em>jshell</em></h6>&#13;
</div></figure>&#13;
&#13;
<p>In <a data-type="xref" href="#learnjava6-CHP-12-SECT-3">“Events”</a>, we’ll see how to receive those values in real time as the user changes them.</p>&#13;
&#13;
<p>The <code>JSlider</code> constructors use integers for the minimum and maximum values, and <code>getValue()</code> returns an integer. If you need fractional values, that falls to you. The force slider in our game, for example, would benefit from supporting more than 21 discrete levels. We can address that by building the slider with a larger range of integers, then dividing the current value by an appropriate scale factor:<a data-primary="" data-startref="ix_comp_gui_slider" data-type="indexterm" id="id2357"/><a data-primary="" data-startref="ix_apps_slider" data-type="indexterm" id="id2358"/><a data-primary="" data-startref="ix_jslider_gui" data-type="indexterm" id="id2359"/><a data-primary="" data-startref="ix_slider_gui" data-type="indexterm" id="id2360"/></p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; JSlider force = new JSlider(0, 200, 100)&#13;
force ==&gt; javax.swing.JSlider[,0,0,0x0, ... ks=false,snapToValue=true]&#13;
&#13;
jshell&gt; w.add(force)&#13;
$23 ==&gt; javax.swing.JSlider[,0,0,0x0,invalid ... alue=true]&#13;
&#13;
jshell&gt; force.getValue()&#13;
$24 ==&gt; 68&#13;
&#13;
jshell&gt; float myForce = force.getValue() / 10.0f;&#13;
myForce ==&gt; 6.8</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="JList" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-1.5.2">&#13;
<h3>JList</h3>&#13;
&#13;
<p>If you have a <a data-primary="lists, GUI component" data-type="indexterm" id="ix_list_gui"/><a data-primary="desktop applications" data-secondary="lists (JList)" data-type="indexterm" id="ix_apps_lists"/><a data-primary="JList" data-type="indexterm" id="ix_jlist_gui"/><a data-primary="components, GUI" data-secondary="lists" data-type="indexterm" id="ix_comp_gui_list"/>discrete set of values but those values are not a simple, contiguous range of numbers, the “list” UI element is a great choice. <code>JList</code> is the Swing implementation of this input type. You can set it to allow single or multiple selections, and if you dig deeper into Swing’s features, you can produce custom views that display the items in your list with extra information or details. (For example, you can make lists of icons, or icons and text, or multiline text, and so on.)</p>&#13;
&#13;
<p>Unlike the other components we’ve seen so far, <code>JList</code> requires a little more information to get started. To make a useful list component, you need to use one of the constructors that takes the data you intend to show. The simplest such constructor accepts an <code>Object</code> array. While you can pass an array of objects of any type, the default behavior of <code>JList</code> will be to show the output of your objects’ <code>toString()</code> method in the list. Using an array of <code>String</code> objects is very common and produces the expected results. <a data-type="xref" href="#learnjava6-CHP-12-FIG-19">Figure 12-19</a> shows a simple list of cities.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-19">&#13;
<img alt="ljv6 1219" src="assets/ljv6_1219.png"/>&#13;
<h6><span class="label">Figure 12-19. </span>A simple <code>JList</code> of four cities in <em>jshell</em></h6>&#13;
</div></figure>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; w.reset()&#13;
&#13;
jshell&gt; String[] cities = new String[] { "Atlanta", "Boston",&#13;
   ...&gt;   "Chicago", "Denver" };&#13;
cities ==&gt; String[4] { "Atlanta", ..., "Denver" }&#13;
&#13;
jshell&gt; JList cityList = new JList&lt;String&gt;(cities);&#13;
cityList ==&gt; javax.swing.JList[,0,0,0x0, ...entation=0]&#13;
&#13;
jshell&gt; w.add(cityList)&#13;
$29 ==&gt; javax.swing.JList[,0,0,0x0,invalid ... ation=0]</pre>&#13;
&#13;
<p>We use the <a data-primary="&lt;String&gt; object" data-type="indexterm" id="id2361"/>same <code>&lt;String&gt;</code> type information with the constructor as we do when creating parameterized collection objects, such as <code>ArrayList</code> (see <a data-type="xref" href="ch07.html#learnjava6-CHP-7-SECT-2">“Type Limitations”</a>). As Swing was added well before generics, you may encounter examples online or in books that do not add the type information. Omitting it doesn’t stop your code from compiling or running, but you will receive the same <code>unchecked</code> warning message at compile time that you saw with the collection classes.</p>&#13;
&#13;
<p>Similar to <a data-primary="getSelectedIndices() method, JList" data-type="indexterm" id="id2362"/><a data-primary="getSelectedValue() method, JList" data-type="indexterm" id="id2363"/><a data-primary="getSelectedValues() method, JList" data-type="indexterm" id="id2364"/><a data-primary="getSelectedIndex() method, JList" data-type="indexterm" id="id2365"/>getting the current value of a slider, you can retrieve the selected item or items in a list at any time using one of four methods:</p>&#13;
<dl>&#13;
<dt><code>getSelectedIndex()</code></dt>&#13;
<dd>&#13;
<p>For single-select lists, returns an <code>int</code></p>&#13;
</dd>&#13;
<dt><code>getSelectedIndices()</code></dt>&#13;
<dd>&#13;
<p>For multiselect lists, returns an array of <code>int</code></p>&#13;
</dd>&#13;
<dt><code>getSelectedValue()</code></dt>&#13;
<dd>&#13;
<p>For single-select lists, returns an object</p>&#13;
</dd>&#13;
<dt><code>getSelectedValues()</code></dt>&#13;
<dd>&#13;
<p>For multiselect lists, returns an array of objects</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>The main difference is whether the index of the selected item(s) or the actual value(s) is more useful to you. Playing with our city list in <em>jshell</em>, we can pull out a selected city like so:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; cityList.getSelectedIndex()&#13;
$31 ==&gt; 2&#13;
&#13;
jshell&gt; cityList.getSelectedIndices()&#13;
$32 ==&gt; int[1] { 2 }&#13;
&#13;
jshell&gt; cityList.getSelectedValue()&#13;
$33 ==&gt; "Chicago"&#13;
&#13;
jshell&gt; cities[cityList.getSelectedIndex()]&#13;
$34 ==&gt; "Chicago"</pre>&#13;
&#13;
<p>For large lists, you’ll probably want a scroll bar. Swing promotes reusability in its code, so you can use a <code>JScrollPane</code> with <code>JList</code> just like we did for text areas.<a data-primary="" data-startref="ix_comp_gui_list" data-type="indexterm" id="id2366"/><a data-primary="" data-startref="ix_apps_lists" data-type="indexterm" id="id2367"/><a data-primary="" data-startref="ix_jlist_gui" data-type="indexterm" id="id2368"/><a data-primary="" data-startref="ix_list_gui" data-type="indexterm" id="id2369"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Containers and Layouts" data-type="sect1"><div class="sect1" id="learnjava6-CHP-12-SECT-2">&#13;
<h1>Containers and Layouts</h1>&#13;
&#13;
<p>That <a data-primary="desktop applications" data-secondary="containers and layouts" data-type="indexterm" id="ix_apps_contain"/><a data-primary="containers" data-type="indexterm" id="ix_contain_gui"/>formidable list of components is only a subset of the widgets available. In this section, you’ll be laying out the components we’ve discussed into useful arrangements. Those arrangements happen inside a <em>container</em>, which is Java’s term for a component that can have (or “contain”) other components. Let’s start by looking at the most common containers.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Frames and Windows" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-2.1">&#13;
<h2>Frames and Windows</h2>&#13;
&#13;
<p>Every <a data-primary="JFrame" data-type="indexterm" id="ix_win_frame)))"/><a data-primary="desktop applications" data-secondary="frames and windows (JFrame)" data-type="indexterm" id="ix_apps_frame_win"/><a data-primary="frames and windows, GUI" data-type="indexterm" id="ix_frame_win_gui"/><a data-primary="containers" data-secondary="frames and windows" data-type="indexterm" id="ix_cont_frame"/><a data-primary="JWindow class" data-type="indexterm" id="id2370"/>desktop application needs at least one window. This term predates Swing and is used by most graphical interfaces available on the three big operating systems—including Windows (no relation). Swing does provide a low-level <code>JWindow</code> class if you need it, but most likely you will build your application inside a <code>JFrame</code>. <a data-type="xref" href="#learnjava6-CHP-12-FIG-20">Figure 12-20</a> illustrates the class hierarchy of <code>JFrame</code>. We will stick to its basic features, but as your applications become richer, you may want to create customized windows using elements higher up in the hierarchy.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-20">&#13;
<img alt="ljv6 1220" src="assets/ljv6_1220.png"/>&#13;
<h6><span class="label">Figure 12-20. </span>The <code>JFrame</code> class hierarchy</h6>&#13;
</div></figure>&#13;
&#13;
<p>Let’s revisit the creation of that first graphical application from <a data-type="xref" href="ch02.html#learnjava6-CHP-2">Chapter 2</a> and focus a bit more on the <code>JFrame</code> object:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloJavaAgain</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">150</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The string we pass to the <code>JFrame</code> constructor becomes the title of the window. We then set a few specific properties on our object. We make sure that when the user closes the window, we quit our program. (That might seem obvious, but complex applications might have multiple windows, such as tool palettes or support for multiple documents. Closing one window in these applications may not mean “quit.”)</p>&#13;
&#13;
<p>We then pick a <a data-primary="content pane, frames and windows" data-type="indexterm" id="id2371"/>starting size for the window and add our actual label component to the frame (which in turn places the label in its <em>content pane</em>, more on that in a minute). Once the component is added, we make the window visible, and the result is <a data-type="xref" href="#learnjava6-CHP-12-FIG-21">Figure 12-21</a>.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-21">&#13;
<img alt="ljv6 1221" src="assets/ljv6_1221.png"/>&#13;
<h6><span class="label">Figure 12-21. </span>A simple <code>JFrame</code> with an added label</h6>&#13;
</div></figure>&#13;
&#13;
<p>This basic process is the foundation of every Swing application. The interesting part of your application comes from what you do with that content pane.</p>&#13;
&#13;
<p>But what <em>is</em> that content pane? The frame uses its own set of containers that hold various parts of typical applications. You can set your own content pane to be any object descended from <code>java.awt.Container</code>, but we’ll be sticking with the default &#13;
<span class="keep-together">for now</span>.</p>&#13;
&#13;
<p>We are also using a <a data-primary="add() method" data-secondary="JFrame" data-type="indexterm" id="id2372"/>shortcut to add our label. The <code>JFrame</code> version of <code>add()</code> will delegate to the content pane’s <code>add()</code>. The following snippet shows how to add the label without the shortcut:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">getContentPane</code><code class="p">().</code><code class="na">add</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>The <code>JFrame</code> class does not have shortcuts for everything, however. Read the documentation and use a shortcut if it exists. If not, don’t hesitate to grab a reference via <code>getContentPane()</code> and then configure or tweak that container as needed.<a data-primary="" data-startref="ix_cont_frame" data-type="indexterm" id="id2373"/><a data-primary="" data-startref="ix_apps_frame_win" data-type="indexterm" id="id2374"/><a data-primary="" data-startref="ix_frame_win_gui" data-type="indexterm" id="id2375"/><a data-primary="" data-startref="ix_jframe_gui" data-type="indexterm" id="id2376"/><a data-primary="" data-startref="ix_win_frame" data-type="indexterm" id="id2377"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="JPanel" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-2.2">&#13;
<h2>JPanel</h2>&#13;
&#13;
<p>The default <a data-primary="containers" data-secondary="panels (JPanel)" data-type="indexterm" id="id2378"/><a data-primary="JPanel" data-type="indexterm" id="id2379"/><a data-primary="panels, GUI" data-type="indexterm" id="id2380"/>content pane is a <code>JPanel</code>, the go-to container in Swing. It is a component just like <code>JButton</code> or <code>JLabel</code>, so your panels can contain other panels. Such nesting often plays a big role in application layout. For example, you could create a <code>JPanel</code> to house the formatting buttons of a text editor in a “toolbar,” then add that toolbar to the content pane. This arrangement makes it easy for users to show, hide, or move it around.</p>&#13;
&#13;
<p><code>JPanel</code> lets you <a data-primary="repaint() method" data-secondary="JPanel" data-type="indexterm" id="id2381"/><a data-primary="remove() method" data-secondary="JPanel" data-type="indexterm" id="id2382"/><a data-primary="add() method" data-secondary="JPanel" data-type="indexterm" id="id2383"/>add and remove components from the screen. (The methods are inherited from the <code>Container</code> class, but we access them through our <code>JPanel</code> objects.) You can also <code>repaint()</code> a panel if something has changed and you want to update your UI.</p>&#13;
&#13;
<p class="pagebreak-before">We can see the effects of the <code>add()</code> and <code>remove()</code> methods shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-22">Figure 12-22</a> using our playground widget in <em>jshell</em>:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; Widget w = new Widget()&#13;
w ==&gt; ch10.Widget[frame0,0,23,300x300, ... kingEnabled=true]&#13;
&#13;
jshell&gt; JLabel emailLabel = new JLabel("Email:")&#13;
emailLabel ==&gt; javax.swing.JLabel[,0,0,0x0 ... ition=CENTER]&#13;
&#13;
jshell&gt; JTextField emailField = new JTextField(12)&#13;
emailField ==&gt; javax.swing.JTextField[,0,0,0x0, ... LEADING]&#13;
&#13;
jshell&gt; JButton submitButton = new JButton("Submit")&#13;
submitButton ==&gt; javax.swing.JButton[,0,0,0x0, ... ble=true]&#13;
&#13;
jshell&gt; w.add(emailLabel);&#13;
$8 ==&gt; javax.swing.JLabel[,0,0,0x0, ... ition=CENTER]&#13;
// Left screenshot in image above&#13;
&#13;
jshell&gt; w.add(emailField)&#13;
$9 ==&gt; javax.swing.JTextField[,0,0,0x0, ... nment=LEADING]&#13;
&#13;
jshell&gt; w.add(submitButton)&#13;
$10 ==&gt; javax.swing.JButton[,0,0,0x0, ... pable=true]&#13;
// Now we have the middle screenshot&#13;
&#13;
jshell&gt; w.remove(emailLabel)&#13;
// And finally the right screenshot</pre>&#13;
&#13;
<p>Try it yourself! Most applications don’t add and remove components willy-nilly. You’ll usually build your interface by adding what you need and then leave it alone. You might enable or disable some buttons along the way, but try not to surprise the user with disappearing parts or new elements popping up.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-22">&#13;
<img alt="ljv6 1222" src="assets/ljv6_1222.png"/>&#13;
<h6><span class="label">Figure 12-22. </span>Adding and removing components in a <code>JPanel</code></h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Layout Managers" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-2.3">&#13;
<h2>Layout Managers</h2>&#13;
&#13;
<p>Containers like <code>JPanel</code> are <a data-primary="layout managers" data-type="indexterm" id="ix_layout_man"/><a data-primary="containers" data-secondary="layout managers" data-type="indexterm" id="ix_contain_layout"/>responsible for laying out the components you add. Java provides several <em>layout managers</em> to help you achieve your desired results.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="less_space pagebreak-before" data-pdf-bookmark="BorderLayout" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-2.3.1">&#13;
<h3>BorderLayout</h3>&#13;
&#13;
<p>You’ve <a data-primary="BorderLayout" data-type="indexterm" id="ix_border_layout"/>already seen the <code>FlowLayout</code> in action. You were using another layout manager without really knowing it: the content pane of a <code>JFrame</code> uses <code>BorderLayout</code> by default. <a data-type="xref" href="#learnjava6-CHP-12-FIG-23">Figure 12-23</a> shows the five areas controlled by <code>BorderLayout</code>, along with their regions. Notice that the <code>NORTH</code> and <code>SOUTH</code> regions are as wide as the application window but only as tall as required to fit the label. Similarly, the <code>EAST</code> and <code>WEST</code> regions fill the vertical gap between the <code>NORTH</code> and <code>SOUTH</code> regions but are only as wide as required, leaving the remaining space to be filled both horizontally and vertically by the <code>CENTER</code> region:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">BorderLayoutDemo</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"BorderLayout Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">400</code><code class="p">,</code><code class="w"> </code><code class="mi">200</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">northLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Top - North"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">southLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Bottom - South"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">eastLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Right - East"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">westLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Left - West"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">centerLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Center (everything else)"</code><code class="p">,</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Color the labels so we can see their boundaries better</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">northLabel</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">northLabel</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">GREEN</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">southLabel</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">southLabel</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">GREEN</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">eastLabel</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">eastLabel</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">RED</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">westLabel</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">westLabel</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">RED</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">centerLabel</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">centerLabel</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">YELLOW</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">northLabel</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">NORTH</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">southLabel</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">SOUTH</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">eastLabel</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">EAST</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">westLabel</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">WEST</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">centerLabel</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<figure class="width-75"><div class="figure" id="learnjava6-CHP-12-FIG-23">&#13;
<img alt="ljv6 1223" src="assets/ljv6_1223.png"/>&#13;
<h6><span class="label">Figure 12-23. </span>The regions available with <code>BorderLayout</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>The <code>add()</code> method in this <a data-primary="add() method" data-secondary="BorderLayout" data-type="indexterm" id="id2384"/>case takes an extra argument and passes it to the layout manager. (Not all managers need this argument, as you saw with <code>FlowLayout</code>.)</p>&#13;
&#13;
<p><a data-type="xref" href="#learnjava6-CHP-12-FIG-24">Figure 12-24</a> shows an example of nesting <code>JPanel</code> objects within an application. We use a text area for a large message in the center and then add some action buttons to a panel along the bottom. Again, without the events we’ll cover in the next section, none of these buttons do anything, but we want to show you how to work with multiple containers. And you could continue nesting <code>JPanel</code> objects if you wanted.</p>&#13;
&#13;
<p>Sometimes a better top-level layout choice makes your app both more maintainable and more performant:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">NestedPanelDemo</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"Nested Panel Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">400</code><code class="p">,</code><code class="w"> </code><code class="mi">200</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Create the text area and add it to the center</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JTextArea</code><code class="w"> </code><code class="n">messageArea</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextArea</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">messageArea</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Create the button container</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JPanel</code><code class="w"> </code><code class="n">buttonPanel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JPanel</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Create the buttons</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">sendButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Send"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">saveButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Save"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">resetButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Reset"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">cancelButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Cancel"</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Add the buttons to their container</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">buttonPanel</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">sendButton</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">buttonPanel</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">saveButton</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">buttonPanel</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">resetButton</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">buttonPanel</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">cancelButton</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// And finally, add that container to the bottom of the app</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">buttonPanel</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">SOUTH</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-24">&#13;
<img alt="ljv6 1224" src="assets/ljv6_1224.png"/>&#13;
<h6><span class="label">Figure 12-24. </span>A simple nested container example</h6>&#13;
</div></figure>&#13;
&#13;
<p>Two things to note in this example. First, you might see that we did not specify the number of rows or columns when creating our <code>JTextArea</code> object. Unlike <span class="keep-together"><code>FlowLayout</code>,</span> <code>BorderLayout</code> will set the size of its components when possible. For the top and bottom, this means using the component’s own height, similar to how <code>FlowLayout</code> works, but then setting the width of the component to fill the frame. The sides use their components’ width, but the layout manager sets the height. <code>BorderLayout</code> sets both the width and height of the component in the center.</p>&#13;
&#13;
<p>Second, when we add the <code>messageArea</code> and <code>buttonPanel</code> objects to the <code>frame</code>, we specify the extra “where” argument to the frame’s <code>add()</code> method. However, when we are adding the buttons themselves to <code>buttonPanel</code>, we use the simpler version of <code>add()</code> with only the component argument. The container’s layout manager dictates which variation of <code>add()</code> we need. So even though the <code>buttonPanel</code> is in the <code>SOUTH</code> region of the frame using  <code>BorderLayout</code>, the <code>saveButton</code> and its compatriots are in an enclosing container of their own and don’t know or care about what is happening outside that container.<a data-primary="" data-startref="ix_border_layout" data-type="indexterm" id="id2385"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="GridLayout" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-2.3.2">&#13;
<h3>GridLayout</h3>&#13;
&#13;
<p>Many times you <a data-primary="GridLayout class" data-type="indexterm" id="grid_layout_cl"/>need (or want) your components or labels to occupy symmetric spaces. Think of the Yes, No, and Cancel buttons along the bottom of a confirmation dialog. (Swing can make those dialogs, too; more on that in <a data-type="xref" href="#learnjava6-CHP-12-SECT-5.2">“Modals and Pop-Ups”</a>.) The <code>GridLayout</code> class can help with such even spacing. Let’s try using <code>GridLayout</code> for those buttons in our previous example. All we have to do is change one line:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// Create the button container. Old version:</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// JPanel buttonPanel = new JPanel(new FlowLayout());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JPanel</code><code class="w"> </code><code class="n">buttonPanel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JPanel</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">GridLayout</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="mi">0</code><code class="p">));</code><code class="w"/></pre>&#13;
&#13;
<p>The calls to <code>add()</code> remain exactly the same; no separate constraint argument is needed.</p>&#13;
&#13;
<p>As you can see in <a data-type="xref" href="#learnjava6-CHP-12-FIG-25">Figure 12-25</a>, the <code>GridLayout</code> buttons are the same size, even though the text of the Cancel button is a bit longer than the others.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-25">&#13;
<img alt="ljv6 1225" src="assets/ljv6_1225.png"/>&#13;
<h6><span class="label">Figure 12-25. </span>Using <code>GridLayout</code> for a row of buttons</h6>&#13;
</div></figure>&#13;
&#13;
<p>In creating the layout manager, we told it we want exactly one row, with no restrictions on how many columns <code>(1, 0)</code>. Grids can also be two-dimensional with multiple rows and columns. <a data-type="xref" href="#learnjava6-CHP-12-FIG-26">Figure 12-26</a> shows the classic phone-keypad layout as an example.</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">PhoneGridDemo</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"Nested Panel Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">200</code><code class="p">,</code><code class="w"> </code><code class="mi">300</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Create the phone pad container</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JPanel</code><code class="w"> </code><code class="n">phonePad</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JPanel</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">GridLayout</code><code class="p">(</code><code class="mi">4</code><code class="p">,</code><code class="mi">3</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Create and add the 12 buttons, top-left to bottom-right</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"1"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"2"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"3"</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"4"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"5"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"6"</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"7"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"8"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"9"</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"*"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"0"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">phonePad</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"#"</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// And finally, add the pad to the center of the app</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">phonePad</code><code class="p">,</code><code class="w"> </code><code class="n">BorderLayout</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Adding the buttons in order from left to right, top to bottom, should result in the app you see in <a data-type="xref" href="#learnjava6-CHP-12-FIG-26">Figure 12-26</a>.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-26">&#13;
<img alt="ljv6 1226" src="assets/ljv6_1226.png"/>&#13;
<h6><span class="label">Figure 12-26. </span>A two-dimensional grid layout for a phone pad</h6>&#13;
</div></figure>&#13;
&#13;
<p>Very handy and very easy if you need perfectly symmetric elements. But what if you want a <em>mostly</em> symmetric layout? Think of popular web forms with a column of labels on the left and a column of text fields on the right. <code>GridLayout</code> could handle a basic, two-column form like that, but many times your labels are short and simple, while your text fields are wider, giving the user more space to type. How does Java accommodate those layouts?<a data-primary="" data-startref="grid_layout_cl" data-type="indexterm" id="id2386"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="GridBagLayout" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-2.3.3">&#13;
<h3>GridBagLayout</h3>&#13;
&#13;
<p>If you need a more interesting <a data-primary="GridBagLayout class" data-type="indexterm" id="ix_grid_bag_layout"/>layout but don’t want to nest lots of panels, consider <code>GridBagLayout</code>. It’s more complex to set up, but it allows for intricate layouts that still keep elements aesthetically aligned and sized. Similar to <code>BorderLayout</code>, you add components with an extra argument. The argument for <code>GridBagLayout</code>, however, is a rich <code>GridBagConstraints</code> object rather than a simple <code>String</code>.</p>&#13;
&#13;
<p>The “grid” in <code>GridBagLayout</code> is exactly that, a rectangular container divvied up into various rows and columns. The “bag” part, though, comes from a grab-bag notion of how you use the cells created by those rows and columns. The rows and columns can have their own height or width, and components can occupy any rectangular collection of cells. We can take advantage of this flexibility to build out our game interface with a single <code>JPanel</code> rather than with several nested panes. <a data-type="xref" href="#learnjava6-CHP-12-FIG-27">Figure 12-27</a> shows one way of carving up the screen into four rows and three columns, and then placing the components.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-27">&#13;
<img alt="ljv6 1227" src="assets/ljv6_1227.png"/>&#13;
<h6><span class="label">Figure 12-27. </span>An example grid for use with <code>GridBagLayout</code></h6>&#13;
</div></figure>&#13;
&#13;
<p>You can see the different row heights and column widths. Some components occupy more than one cell. This type of arrangement won’t work for every application, but it is powerful and works for many UIs that need more than simple layouts.</p>&#13;
&#13;
<p>To build an application with a <code>GridBagLayout</code>, you need to keep a couple of references around as you add components. Let’s set up the grid first:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">SCORE_HEIGHT</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">30</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">CONTROL_WIDTH</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">300</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">CONTROL_HEIGHT</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">40</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">FIELD_WIDTH</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">3</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">CONTROL_WIDTH</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">FIELD_HEIGHT</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">2</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">CONTROL_WIDTH</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="n">FORCE_SCALE</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">0.7f</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">GridBagLayout</code><code class="w"> </code><code class="n">gameLayout</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">GridBagLayout</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">gameLayout</code><code class="p">.</code><code class="na">columnWidths</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"/>&#13;
<code class="w">        </code><code class="p">{</code><code class="w"> </code><code class="n">CONTROL_WIDTH</code><code class="p">,</code><code class="w"> </code><code class="n">CONTROL_WIDTH</code><code class="p">,</code><code class="w"> </code><code class="n">CONTROL_WIDTH</code><code class="w"> </code><code class="p">};</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameLayout</code><code class="p">.</code><code class="na">rowHeights</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"/>&#13;
<code class="w">        </code><code class="p">{</code><code class="w"> </code><code class="n">SCORE_HEIGHT</code><code class="p">,</code><code class="w"> </code><code class="n">FIELD_HEIGHT</code><code class="p">,</code><code class="w"> </code><code class="n">CONTROL_HEIGHT</code><code class="p">,</code><code class="w"> </code><code class="n">CONTROL_HEIGHT</code><code class="w"> </code><code class="p">};</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JPanel</code><code class="w"> </code><code class="n">gamePane</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JPanel</code><code class="p">(</code><code class="n">gameLayout</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>This step <a data-primary="GridBagConstraints object" data-type="indexterm" id="id2387"/>requires a little planning on your part, but it’s easy to adjust once you get a few components on the screen. To add those components, you need to create and configure a <code>GridBagConstraints</code> object. Fortunately, you can reuse the same object for all of your components—you just need to repeat the configuration portion before adding each element. Here’s an example of how you could add the main playing field component:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">GridBagConstraints</code><code class="w"> </code><code class="n">gameConstraints</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">GridBagConstraints</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">fill</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">GridBagConstraints</code><code class="p">.</code><code class="na">BOTH</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridy</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridx</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridheight</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridwidth</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">3</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">Field</code><code class="w"> </code><code class="n">field</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Field</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gamePane</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">field</code><code class="p">,</code><code class="w"> </code><code class="n">gameConstraints</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>Notice how we set which cells the field will occupy. We specify the upper-left corner of a rectangle by giving the row (<code>gridy</code>) and column (<code>gridx</code>). Then we specify how many rows our field will occupy (<code>gridheight</code>) and how many columns (<code>gridwidth</code>). This is the core of configuring grid bag constraints.</p>&#13;
&#13;
<p>You can also adjust things like how a component will fill the cells it occupies (<code>fill</code>) and how much of a margin each component gets. We’ve settled on simply filling all of the space available in a group of cells (“both” a horizontal fill and a <span class="keep-together">vertical</span> fill), but you can read about more options in the <a href="https://oreil.ly/XwdXt">documentation for <code>GridBagConstraints</code></a>.</p>&#13;
&#13;
<p>Let’s add a scorekeeping label at the top:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">fill</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">GridBagConstraints</code><code class="p">.</code><code class="na">BOTH</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridy</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridx</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridheight</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridwidth</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">scoreLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">" Player 1: 0"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gamePane</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">scoreLabel</code><code class="p">,</code><code class="w"> </code><code class="n">gameConstraints</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>For this second component, do you see how similar the setup of the constraints is to how we handled the game field? Any time you see similarities like this, consider pulling those similar steps into a function you can reuse:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="kd">private</code><code class="w"> </code><code class="n">GridBagConstraints</code><code class="w"> </code><code class="nf">buildConstraints</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">row</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">col</code><code class="p">,</code><code class="w"/>&#13;
<code class="w">        </code><code class="kt">int</code><code class="w"> </code><code class="n">rowspan</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">colspan</code><code class="p">)</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="c1">// Use our global reference to the gameConstraints object</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">fill</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">GridBagConstraints</code><code class="p">.</code><code class="na">BOTH</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridy</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">row</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridx</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">col</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridheight</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">rowspan</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">gameConstraints</code><code class="p">.</code><code class="na">gridwidth</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">colspan</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">return</code><code class="w"> </code><code class="n">gameConstraints</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Then you could rewrite the earlier blocks of code for the score label and game field, like this:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">GridBagConstraints</code><code class="w"> </code><code class="n">gameConstraints</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">GridBagConstraints</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">scoreLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">" Player 1: 0"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Field</code><code class="w"> </code><code class="n">field</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Field</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gamePane</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">scoreLabel</code><code class="p">,</code><code class="w"> </code><code class="n">buildConstraints</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">1</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gamePane</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">field</code><code class="p">,</code><code class="w"> </code><code class="n">buildConstraints</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="mi">0</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">3</code><code class="p">));</code><code class="w"/></pre>&#13;
&#13;
<p>With that function in place, you can quickly add the various other components and labels to complete the game interface. For example, the toss button in the lower-right corner of <a data-type="xref" href="#learnjava6-CHP-12-FIG-27">Figure 12-27</a> can be set up like this:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">tossButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Toss"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gamePane</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">tossButton</code><code class="p">,</code><code class="w"> </code><code class="n">buildConstraints</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code><code class="mi">2</code><code class="p">,</code><code class="mi">2</code><code class="p">,</code><code class="mi">1</code><code class="p">));</code><code class="w"/></pre>&#13;
&#13;
<p>Much cleaner! We simply continue creating our components and placing them on the correct row and column, with the appropriate spans. In the end we have a reasonably interesting set of components laid out in a single container.</p>&#13;
&#13;
<p>As with other sections in this chapter, we don’t have time to cover every layout manager, or even every feature of the layout managers we do discuss. Be sure to check the Java documentation and try creating a few dummy apps to play with the different layouts. As a starting point, <code>BoxLayout</code> is a nice upgrade to the grid idea, and <code>GroupLayout</code> can produce data-entry forms. For now, though, we’re going to move on. Time to get all these components “hooked up” and responding to all the typing and clicking and button pushing—actions that are encoded in Java as events.<a data-primary="" data-startref="ix_contain_gui" data-type="indexterm" id="id2388"/><a data-primary="" data-startref="ix_apps_contain" data-type="indexterm" id="id2389"/><a data-primary="" data-startref="ix_contain_layout" data-type="indexterm" id="id2390"/><a data-primary="" data-startref="ix_layout_man" data-type="indexterm" id="id2391"/><a data-primary="" data-startref="ix_grid_bag_layout" data-type="indexterm" id="id2392"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Events" data-type="sect1"><div class="sect1" id="learnjava6-CHP-12-SECT-3">&#13;
<h1>Events</h1>&#13;
&#13;
<p>As <a data-primary="events" data-type="indexterm" id="ix_events_ch12"/><a data-primary="listener interface, event handling" data-type="indexterm" id="ix_listen_event"/><a data-primary="desktop applications" data-secondary="events" data-type="indexterm" id="ix_apps_event"/>discussed in <a data-type="xref" href="#learnjava6-CHP-12-SECT-1.2">“Model View Controller Architecture”</a>, the model and view elements of MVC designs are straightforward. But what about the controller aspect? In Swing (and Java more generally), interaction between users and components is communicated via events. An <em>event</em> contains general information, such as when the interaction occurred, as well as information specific to the event type, such as the point on your screen where you clicked your mouse, or which key you typed on your keyboard. A <em>listener</em> (or <em>handler</em>) picks up the message and can respond in some useful way. Connecting components to listeners is what allows users to control your application.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mouse Events" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-3.1">&#13;
<h2>Mouse Events</h2>&#13;
&#13;
<p>The easiest way to get <a data-primary="mouse events" data-type="indexterm" id="ix_mouse_event"/><a data-primary="events" data-secondary="mouse" data-type="indexterm" id="ix_event_mouse"/>started is just to generate and handle an event. Let’s follow in the footsteps of our first, quick applications with a <code>HelloMouse</code> application and focus on handling mouse events. When we click our mouse, we’ll use that click event to determine the position of our <code>JLabel</code>. (This will require removing the layout manager, by the way. We want to set the coordinates of our label manually.)</p>&#13;
&#13;
<p>As you look at the source code for this example, pay attention to a few particular items, noted with the numbered callouts:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="c1">// filename: ch12/examples/HelloMouse.java</code><code class="w">&#13;
</code><code class="kn">package</code><code class="w"> </code><code class="nn">ch10.examples</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w">&#13;
</code><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w">&#13;
</code><code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.MouseEvent</code><code class="p">;</code><code class="w">&#13;
</code><code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.MouseListener</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="kd">public</code><code class="w"> </code><code class="kd">class</code><code> </code><code class="nc">HelloMouse</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">JFrame</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">MouseListener</code><code class="w"> </code><code class="p">{</code><a class="co" href="#callout_desktop_applications_CO2-1" id="co_desktop_applications_CO2-1"><img alt="1" src="assets/1.png"/></a><code class="w">&#13;
</code><code class="w">  </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">HelloMouse</code><code class="p">(</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">&#13;
</code><code class="w">    </code><code class="kd">super</code><code class="p">(</code><code class="s">"</code><code class="s">MouseEvent Demo</code><code class="s">"</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="c1">// remove the layout manager</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">setLayout</code><code class="p">(</code><code class="kc">null</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">100</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"</code><code class="s">Hello, Mouse!</code><code class="s">"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">YELLOW</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">100</code><code class="p">,</code><code class="mi">20</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setLocation</code><code class="p">(</code><code class="mi">100</code><code class="p">,</code><code class="mi">100</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">add</code><code class="p">(</code><code class="n">label</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">getContentPane</code><code class="p">(</code><code class="p">)</code><code class="p">.</code><code class="na">addMouseListener</code><code class="p">(</code><code class="k">this</code><code class="p">)</code><code class="p">;</code><code class="w"> </code><a class="co" href="#callout_desktop_applications_CO2-4" id="co_desktop_applications_CO2-2"><img alt="4" src="assets/4.png"/></a><code class="w">&#13;
</code><code class="w">  </code><code class="p">}</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseClicked</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><a class="co" href="#callout_desktop_applications_CO2-2" id="co_desktop_applications_CO2-3"><img alt="2" src="assets/2.png"/></a><code class="w">&#13;
</code><code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setLocation</code><code class="p">(</code><code class="n">e</code><code class="p">.</code><code class="na">getX</code><code class="p">(</code><code class="p">)</code><code class="p">,</code><code class="w"> </code><code class="n">e</code><code class="p">.</code><code class="na">getY</code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">  </code><code class="p">}</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mousePressed</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">}</code><code class="w"> </code><a class="co" href="#callout_desktop_applications_CO2-3" id="co_desktop_applications_CO2-4"><img alt="3" src="assets/3.png"/></a><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseReleased</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">}</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseEntered</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">}</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseExited</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">}</code><code class="w">&#13;
</code><code class="w">&#13;
</code><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[</code><code class="o">]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">HelloMouse</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">HelloMouse</code><code class="p">(</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">)</code><code class="p">;</code><code class="w">&#13;
</code><code class="w">  </code><code class="p">}</code><code class="w">&#13;
</code><code class="p">}</code></pre>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_desktop_applications_CO2-1" id="callout_desktop_applications_CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>As you click, Java picks up low-level events from your hardware (computer, mouse, keyboard) and hands them to an appropriate listener. Listeners are interfaces. You can make special classes just to implement the interface, or you can implement listeners as part of your main application class, like we did here. Where you choose to handle events really depends on what actions you need to take in response to them. You’ll see a number of examples of both approaches throughout the rest of this book.</p></dd>&#13;
<dt><a class="co" href="#co_desktop_applications_CO2-3" id="callout_desktop_applications_CO2-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We <a data-primary="desktop applications" data-secondary="frames and windows (JFrame)" data-type="indexterm" id="id2393"/><a data-primary="JFrame" data-type="indexterm" id="id2394"/><a data-primary="mouseClicked() method, MouseListener" data-type="indexterm" id="id2395"/><a data-primary="MouseEvent class" data-type="indexterm" id="id2396"/><a data-primary="MouseListener interface" data-type="indexterm" id="id2397"/>implemented the <code>MouseListener</code> interface in addition to extending <code>JFrame</code>. We had to provide a body for every method listed in <code>MouseListener</code>, but we do our real work in <code>mouseClicked()</code>. This method takes the coordinates of the click from the <code>event</code> object and uses them to change the position of the label. The <code>MouseEvent</code> class contains a wealth of information about the event: when it occurred, which component it occurred on, which mouse button was involved, the (x,y) coordinate where the event occurred, and so on. Try printing some of that information in some of the unimplemented methods, such as <code>mouseDown()</code>.</p></dd>&#13;
<dt><a class="co" href="#co_desktop_applications_CO2-4" id="callout_desktop_applications_CO2-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We added quite a few methods for other types of mouse events that we didn’t use. That’s common with lower-level events, such as mouse and keyboard events. The listener interfaces are designed to give you a central collecting point for related events. You have to implement every method in the interface, but you can respond to the particular events you care about and leave the other methods empty.</p></dd>&#13;
<dt><a class="co" href="#co_desktop_applications_CO2-2" id="callout_desktop_applications_CO2-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>The other <a data-primary="addMouseListener() method" data-type="indexterm" id="id2398"/><a data-primary="getContentPane() method, MouseListener" data-type="indexterm" id="id2399"/>critical bit of new code is the call to <code>addMouseListener()</code> for our content pane. The syntax may look a little odd, but it’s a standard approach. Using <code>getContentPane()</code> says “this is the component generating events,” and using <code>this</code> as the argument says “this is the class receiving (handling) the events.” In this example, the events from the frame’s content pane will be delivered back to the same class, which is where we put all of the mouse-handling code.</p></dd>&#13;
</dl>&#13;
&#13;
<p>Go ahead and run the application. You’ll get a variation on the familiar “Hello, World” graphical application, shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-28">Figure 12-28</a>. The friendly message should follow your mouse as you click around.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-28">&#13;
<img alt="ljv6 1228" src="assets/ljv6_1228.png"/>&#13;
<h6><span class="label">Figure 12-28. </span>Using a <code>MouseEvent</code> to position a label</h6>&#13;
</div></figure>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mouse adapters" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-3.1.1">&#13;
<h3>Mouse adapters</h3>&#13;
&#13;
<p>If you want to try the <a data-primary="MouseAdapter class" data-type="indexterm" id="id2400"/>helper-class approach, you could add a separate class to the file and implement <code>MouseListener</code> in that class. If so, you can take advantage of a shortcut Swing provides for many listeners. The <code>MouseAdapter</code> class is a simple implementation of the <code>MouseListener</code> interface, with empty methods written for every event. When you <code>extend</code> this class, you override only the methods you care about. That makes for a clean, concise handler:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="c1">// filename: ch12/examples/HelloMouseHelper.java</code><code class="w"/>&#13;
<code class="kn">package</code><code class="w"> </code><code class="nn">ch12.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.MouseEvent</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.MouseAdapter</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloMouseHelper</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"MouseEvent Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="kc">null</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">300</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Mouse!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setOpaque</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setBackground</code><code class="p">(</code><code class="n">Color</code><code class="p">.</code><code class="na">YELLOW</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">100</code><code class="p">,</code><code class="mi">20</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">label</code><code class="p">.</code><code class="na">setLocation</code><code class="p">(</code><code class="mi">100</code><code class="p">,</code><code class="mi">100</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">LabelMover</code><code class="w"> </code><code class="n">mover</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">LabelMover</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">getContentPane</code><code class="p">().</code><code class="na">addMouseListener</code><code class="p">(</code><code class="n">mover</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="cm">/**</code>&#13;
<code class="cm"> * Helper class to move a label to the position of a mouse click.</code>&#13;
<code class="cm"> * Recall from Chapter 5 that secondary classes included in the same</code>&#13;
<code class="cm"> * public class must not be public themselves. They can be protected,</code>&#13;
<code class="cm"> * file as private, or package private (with no qualifier).</code>&#13;
<code class="cm"> */</code><code class="w"/>&#13;
<code class="kd">class</code> <code class="nc">LabelMover</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">MouseAdapter</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">JLabel</code><code class="w"> </code><code class="n">labelToMove</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">LabelMover</code><code class="p">(</code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">labelToMove</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">label</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseClicked</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">labelToMove</code><code class="p">.</code><code class="na">setLocation</code><code class="p">(</code><code class="n">e</code><code class="p">.</code><code class="na">getX</code><code class="p">(),</code><code class="w"> </code><code class="n">e</code><code class="p">.</code><code class="na">getY</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Remember that helper classes need to have a reference to every object they touch. We passed our label to the constructor of our adapter. That’s a popular way to establish the necessary connections, but you could certainly add the required access later—as long as the handler has a reference to every object it needs before it starts receiving events.<a data-primary="" data-startref="ix_event_mouse" data-type="indexterm" id="id2401"/><a data-primary="" data-startref="ix_mouse_event" data-type="indexterm" id="id2402"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Action Events" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-3.2">&#13;
<h2>Action Events</h2>&#13;
&#13;
<p>While low-level <a data-primary="components, GUI" data-secondary="buttons" data-type="indexterm" id="ix_comp_gui_button2"/><a data-primary="events" data-secondary="action" data-type="indexterm" id="ix_event_act"/><a data-primary="ActionEvent interface" data-type="indexterm" id="ix_action_event_inter"/><a data-primary="action events" data-type="indexterm" id="ix_action_event"/><a data-primary="desktop applications" data-secondary="buttons (JButton)" data-type="indexterm" id="id2403"/><a data-primary="JButton class" data-type="indexterm" id="id2404"/>mouse and keyboard events are available on just about every Swing component, they can be a little tedious. Most UI libraries provide higher-level events that are simpler to think about. Swing is no exception. The <code>JButton</code> class, for example, supports an <code>ActionEvent</code> that lets you know the button has been clicked. Most of the time this is exactly what you want. But the mouse events are still available if you need some special behavior, such as reacting to clicks from different mouse buttons or distinguishing between a long and a short press on a touch screen.</p>&#13;
&#13;
<p>A popular way to demonstrate the <a data-primary="buttons" data-type="indexterm" id="ix_button_act_event"/>button click event is to build a simple counter, like the one you see in <a data-type="xref" href="#learnjava6-CHP-12-FIG-29">Figure 12-29</a>. Each time you click the button, the program updates the label. This simple proof of concept shows that you can receive and respond to UI events. Let’s see the wiring required for this demo:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch12.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.ActionEvent</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.ActionListener</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">ActionDemo1</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">JFrame</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">ActionListener</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">counterValue</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">JLabel</code><code class="w"> </code><code class="n">counterLabel</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">ActionDemo1</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">super</code><code class="p">(</code><code class="s">"ActionEvent Counter Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">180</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">counterLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Count: 0"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">add</code><code class="p">(</code><code class="n">counterLabel</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">incrementer</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Increment"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">incrementer</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">add</code><code class="p">(</code><code class="n">incrementer</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">actionPerformed</code><code class="p">(</code><code class="n">ActionEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">counterValue</code><code class="o">++</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">counterLabel</code><code class="p">.</code><code class="na">setText</code><code class="p">(</code><code class="s">"Count: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">counterValue</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">ActionDemo1</code><code class="w"> </code><code class="n">demo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">ActionDemo1</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">demo</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-29">&#13;
<img alt="ljv6 1229" src="assets/ljv6_1229.png"/>&#13;
<h6><span class="label">Figure 12-29. </span>Using <code>ActionEvent</code> to increment a counter</h6>&#13;
</div></figure>&#13;
&#13;
<p>We update a <a data-primary="actionPerformed() method, ActionListener" data-type="indexterm" id="id2405"/><a data-primary="ActionListener interface" data-type="indexterm" id="ix_act_listen_inter"/>simple counter variable and display the result inside the <code>actionPerformed()</code> method, which is where <code>ActionListener</code> objects receive their events. We used the direct listener implementation approach, but we could just as easily have created a helper class as we did with the <code>LabelMover</code> example in <a data-type="xref" href="#learnjava6-CHP-12-SECT-3.1">“Mouse Events”</a>.</p>&#13;
&#13;
<p>Action events are straightforward; they don’t have as many details available as mouse events, but they do carry a “command” property. The command in question is just an arbitrary string. It doesn’t mean anything to Java, but you can customize this property for your own use. For buttons, Java defaults to using the text of the button’s label. <a data-primary="components, GUI" data-secondary="text fields" data-type="indexterm" id="id2406"/><a data-primary="JTextField" data-type="indexterm" id="id2407"/><a data-primary="text fields, GUI" data-type="indexterm" id="id2408"/>The <code>JTextField</code> class also generates an action event if you press the Return key while typing in the text field. In this case, however, the text currently in the field is used for the command. <a data-type="xref" href="#learnjava6-CHP-12-FIG-30">Figure 12-30</a> shows how to hook up a button and a text field to a label.</p>&#13;
&#13;
<figure class="width-50"><div class="figure" id="learnjava6-CHP-12-FIG-30">&#13;
<img alt="ljv6 1230" src="assets/ljv6_1230.png"/>&#13;
<h6><span class="label">Figure 12-30. </span>Using <code>ActionEvent</code>s from different sources</h6>&#13;
</div></figure>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">ActionDemo2</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"ActionListener Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">180</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Results go here"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">ActionCommandHelper</code><code class="w"> </code><code class="n">helper</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">ActionCommandHelper</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">simpleButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Button"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">simpleButton</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="n">helper</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JTextField</code><code class="w"> </code><code class="n">simpleField</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextField</code><code class="p">(</code><code class="mi">10</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">simpleField</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="n">helper</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">simpleButton</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">simpleField</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="cm">/**</code>&#13;
<code class="cm"> * Helper class to show the command property of any ActionEvent in a given label.</code>&#13;
<code class="cm"> */</code><code class="w"/>&#13;
<code class="kd">class</code> <code class="nc">ActionCommandHelper</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">ActionListener</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">JLabel</code><code class="w"> </code><code class="n">resultLabel</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">ActionCommandHelper</code><code class="p">(</code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">resultLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">label</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">actionPerformed</code><code class="p">(</code><code class="n">ActionEvent</code><code class="w"> </code><code class="n">ae</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">resultLabel</code><code class="p">.</code><code class="na">setText</code><code class="p">(</code><code class="n">ae</code><code class="p">.</code><code class="na">getActionCommand</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Notice we used one <code>ActionListener</code> object to handle the events for <em>both</em> the button and the text field. This is a great feature of Swing’s listener approach to handling events: any component that generates a given type of event can report to any listener that receives that type. Sometimes your event handlers are unique and you’ll build a separate handler for each component. But many applications offer multiple ways to accomplish the same task. You can often handle those different input sources with a single listener. And the less code you have, the less that can go wrong!<a data-primary="" data-startref="ix_action_event" data-type="indexterm" id="id2409"/><a data-primary="" data-startref="ix_action_event_inter" data-type="indexterm" id="id2410"/><a data-primary="" data-startref="ix_button_act_event" data-type="indexterm" id="id2411"/><a data-primary="" data-startref="ix_comp_gui_button2" data-type="indexterm" id="id2412"/><a data-primary="" data-startref="ix_event_act" data-type="indexterm" id="id2413"/><a data-primary="" data-startref="ix_act_listen_inter" data-type="indexterm" id="id2414"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Change Events" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-3.3">&#13;
<h2>Change Events</h2>&#13;
&#13;
<p>Another <a data-primary="components, GUI" data-secondary="sliders" data-type="indexterm" id="id2415"/><a data-primary="desktop applications" data-secondary="sliders (JSlider)" data-type="indexterm" id="id2416"/><a data-primary="JSlider" data-type="indexterm" id="id2417"/><a data-primary="sliders, GUI component" data-type="indexterm" id="id2418"/><a data-primary="ChangeEvent" data-type="indexterm" id="id2419"/><a data-primary="events" data-secondary="change" data-type="indexterm" id="id2420"/>event type that appears in several Swing components is <code>ChangeEvent</code>. This is a simple event that lets you know something has, well, changed. The <code>JSlider</code> class uses this mechanism to report changes to the position of the slider. The <code>ChangeEvent</code> class has a reference to the component that changed (the event’s <em>source</em>) but no details on what might have changed within that component. It’s up to you to go ask the component for those details. That listen-then-query process might seem tedious, but it does allow for efficient notifications that updates are necessary, without creating hundreds of classes with thousands of methods to cover all the event variations that might come up.</p>&#13;
&#13;
<p>We won’t <a data-primary="ChangeListener" data-type="indexterm" id="id2421"/>reproduce the entire application here, but let’s take a look at how the <code>AppleToss</code> class uses <code>ChangeListener</code> to map the aiming slider to our physicist:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="c1">// file: ch12/examples/game/AppleToss.java</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">gamePane</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">buildAngleControl</code><code class="p">(),</code><code class="w"> </code><code class="n">buildConstraints</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="mi">1</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// other setup stuff ...</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="kd">private</code><code class="w"> </code><code class="n">JSlider</code><code class="w"> </code><code class="nf">buildAngleControl</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="c1">// Our aim can range from 0 to 180 degrees</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">JSlider</code><code class="w"> </code><code class="n">slider</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JSlider</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="mi">180</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">      </code><code class="c1">// but trigonometric 0 is on the right side, not the left</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">slider</code><code class="p">.</code><code class="na">setInverted</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">      </code><code class="c1">// Any time the slider value changes, update the player</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">slider</code><code class="p">.</code><code class="na">addChangeListener</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">ChangeListener</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">stateChanged</code><code class="p">(</code><code class="n">ChangeEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">          </code><code class="n">player1</code><code class="p">.</code><code class="na">setAimingAngle</code><code class="p">((</code><code class="kt">float</code><code class="p">)</code><code class="n">slider</code><code class="p">.</code><code class="na">getValue</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">          </code><code class="n">field</code><code class="p">.</code><code class="na">repaint</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">        </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">});</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">return</code><code class="w"> </code><code class="n">slider</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this snippet, we use a factory pattern to create our slider and return it for use in the <code>add()</code> method of our <code>gamePane</code> container. We create a simple anonymous inner class. Changing our aiming slider has one effect, and there is only one way to aim the apple. Since there is no possibility of class reuse, we chose an anonymous inner class. There is nothing wrong with creating a complete helper class and passing it the <code>player1</code> and <code>field</code> elements as arguments to a constructor or initialization method, but you will find the approach used above quite often in the wild.</p>&#13;
&#13;
<p>We want to <a data-primary="abstract methods" data-type="indexterm" id="id2422"/>point out one other option for handling simple events like <code>ChangeEvent</code> and <code>ActionEvent</code>. The listeners for these events have a single abstract method. Does that phrase ring a bell? That’s how Oracle describes its functional interfaces. So we can use a lambda!</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// And now, any time the slider value changes, we should update</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">slider</code><code class="p">.</code><code class="na">addChangeListener</code><code class="p">(</code><code class="n">e</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">player1</code><code class="p">.</code><code class="na">setAimingAngle</code><code class="p">((</code><code class="kt">float</code><code class="p">)</code><code class="n">slider</code><code class="p">.</code><code class="na">getValue</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">field</code><code class="p">.</code><code class="na">repaint</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">});</code><code class="w"/></pre>&#13;
&#13;
<p>Unfortunately, many <a data-primary="lambda expressions (lambdas)" data-secondary="in event code" data-secondary-sortas="event code" data-type="indexterm" id="id2423"/>listeners handle a spectrum of related events. You can’t use a lambda with any listener interface that has more than one method. But lambdas work with buttons and menu items, so they can still play a big role in your graphical application if you find them appealing.</p>&#13;
&#13;
<p>Our <code>Widget</code> isn’t really good for trying event-related code in <em>jshell</em>. While you certainly can write an anonymous inner class or a multiline lambda at a command line, it can be tedious and prone to errors that are not easy to fix from that same command line. It’s usually simpler to write small, focused demo apps, like many of the examples in this chapter. While we encourage you to fire up the apple tossing game to play with the slider shown in the code above, you should also try your hand at a few &#13;
<span class="keep-together">original apps</span>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Other Events" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-3.4">&#13;
<h2>Other Events</h2>&#13;
&#13;
<p>There are <a data-primary="java.awt.event package" data-type="indexterm" id="id2424"/><a data-primary="javax.swing.event package" data-type="indexterm" id="id2425"/>dozens of other events and listeners spread across the <code>java.awt.event</code> and <code>javax.swing.event</code> packages. It’s worth peeking at the documentation just to get a sense of the other types of events you might run into. <a data-type="xref" href="#learnjava6-CHP-12-TABLE-2">Table 12-2</a> shows the events and listeners associated with the components we’ve discussed so far in this chapter, as well as a few that are worth checking out as you work more with Swing.</p>&#13;
<table id="learnjava6-CHP-12-TABLE-2">&#13;
<caption><span class="label">Table 12-2. </span>Swing and AWT events and associated listeners</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>S/A</th>&#13;
<th>Event class</th>&#13;
<th>Listener interface</th>&#13;
<th>Generating components</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>A</p></td>&#13;
<td><p><code>ActionEvent</code></p></td>&#13;
<td><p><code>ActionListener</code></p></td>&#13;
<td><p><code>JButton</code>, <code>JMenuItem</code>, <code>JTextField</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>S</p></td>&#13;
<td><p><code>ChangeEvent</code></p></td>&#13;
<td><p><code>ChangeListener</code></p></td>&#13;
<td><p><code>JSlider</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>A</p></td>&#13;
<td><p><code>ItemEvent</code></p></td>&#13;
<td><p><code>ItemListener</code></p></td>&#13;
<td><p><code>JCheckBox</code>, <code>JRadioButton</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>A</p></td>&#13;
<td><p><code>KeyEvent</code></p></td>&#13;
<td><p><code>KeyListener</code></p></td>&#13;
<td><p>Descendants of <code>Component</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>S</p></td>&#13;
<td><p><code>ListSelectionEvent</code></p></td>&#13;
<td><p><code>ListSelectionListener</code></p></td>&#13;
<td><p><code>JList</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>A</p></td>&#13;
<td><p><code>MouseEvent</code></p></td>&#13;
<td><p><code>MouseListener</code></p></td>&#13;
<td><p>Descendants of <code>Component</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>A</p></td>&#13;
<td><p><code>MouseMotionEvent</code></p></td>&#13;
<td><p><code>MouseMotionListener</code></p></td>&#13;
<td><p>Descendants of <code>Component</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
<tfoot>&#13;
<tr>&#13;
<td colspan="4"><p>AWT events (A) from <code>java.awt.event</code>, Swing events (S) from <code>javax.swing.event</code></p></td>&#13;
</tr>&#13;
</tfoot>&#13;
</table>&#13;
&#13;
<p>If you’re unsure what events a particular component supports, check its documentation for methods that look like <code>addXYZListener()</code>. Whatever stands in for <code>XYZ</code> is a clue about where else in the documentation to look. Recall that our slider uses <code>addChangeListener()</code>. So that <code>XYZ</code> is <code>Change</code> in this case. You can infer the event name (<code>ChangeEvent</code>) and the listener interface (<code>ChangeListener</code>) from that clue. Once you have the documentation for the listener, try implementing every method and simply printing which event is reported. You can learn a lot about how the various Swing components react to keyboard and mouse events this way.<a data-primary="" data-startref="ix_apps_event" data-type="indexterm" id="id2426"/><a data-primary="" data-startref="ix_events_ch12" data-type="indexterm" id="id2427"/><a data-primary="" data-startref="ix_listen_event" data-type="indexterm" id="id2428"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Threading Considerations" data-type="sect1"><div class="sect1" id="learnjava6-CHP-12-SECT-4">&#13;
<h1>Threading Considerations</h1>&#13;
&#13;
<p>If you have <a data-primary="threads" data-secondary="and desktop applications" data-secondary-sortas="desktop applications" data-type="indexterm" id="ix_thread_apps"/><a data-primary="desktop applications" data-secondary="threading considerations" data-type="indexterm" id="ix_apps_thread"/>read any of the JDK documentation on Swing as you’ve been working through this chapter, you may have come across a warning that Swing components are not thread-safe. As you learned in <a data-type="xref" href="ch09.html#learnjava6-CHP-9">Chapter 9</a>, Java supports <a data-primary="multithreading" data-type="indexterm" id="id2429"/><a data-primary="threads" data-secondary="multithreading" data-type="indexterm" id="id2430"/>multiple threads of execution to take advantage of modern computer processing power. Multithreaded applications run the risk of allowing two threads to fight over the same resource or update the same variable at the same time but with different values. Not knowing if your data is correct can severely decrease your ability to debug a program or even just trust its output. For Swing components, this warning reminds programmers that their UI elements could be subject to this type of corruption.</p>&#13;
&#13;
<p>To help <a data-primary="event dispatch thread (event queue)" data-type="indexterm" id="id2431"/>maintain a consistent UI, Swing encourages you to update your components on the AWT <em>event dispatch thread</em>. This is the thread that naturally handles things like button clicks. If you update a component in response to an event (such as our counter button and label in <a data-type="xref" href="#learnjava6-CHP-12-SECT-3.2">“Action Events”</a>), you are all set. The idea is that if every other thread in your application sends UI updates to the sole event dispatch thread, no component can be adversely affected by simultaneous, possibly conflicting changes.</p>&#13;
&#13;
<p>A common example of threading in graphical applications is the animated spinner that sits on your screen while you wait for a large file to download. But what if you get impatient? What if it seems like the download has failed but the spinner is still going? <a data-primary="threads" data-secondary="background" data-type="indexterm" id="id2432"/><a data-primary="background threads" data-type="indexterm" id="id2433"/>If your long-running task is using the event dispatch thread, your user won’t be able to click a Cancel button or take any action at all. Long-running tasks should be handled by separate threads that can run in the background, leaving your application responsive and available. But then how do we update the UI when that background thread finishes? Swing has a helper class ready for you.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="SwingUtilities and Component Updates" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-4.1">&#13;
<h2>SwingUtilities and Component Updates</h2>&#13;
&#13;
<p>You can <a data-primary="SwingUtilities class" data-type="indexterm" id="ix_swing_util"/>use the <code>SwingUtilities</code> class from any thread to perform updates to your UI components in a safe, stable manner. There are two static methods you can use to communicate with your UI:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>invokeAndWait()</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>invokeLater()</code></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>As their names imply, the first method runs some UI update code and makes the current thread wait for that update to finish before continuing. The second method hands off some UI update code to the event dispatch thread and then immediately resumes executing on the current thread. (The event dispatch thread is sometimes called the <em>event dispatch queue</em>. You can append events or updates and the event dispatch thread will get to them in roughly the order they were added, like in a queue.) <a data-primary="invokeAndWait() method, SwingUtilities" data-type="indexterm" id="id2434"/>Which one you use really depends on whether your background thread needs to know the state of the UI before continuing. For example, if you are adding a new button to your interface, you might want to use <code>invokeAndWait()</code> so that by the time your background thread continues, it can be sure that future updates will actually have a button to update.</p>&#13;
&#13;
<p>If you aren’t as <a data-primary="invokeLater() method, SwingUtilities" data-type="indexterm" id="id2435"/>concerned about when something gets updated, but still want it to be handled safely by the dispatch thread, <code>invokeLater()</code> is perfect. Think about updating a progress bar as a large file is downloading. Your code might fire off several updates as more and more of the download completes. You don’t need to wait for those graphical updates to finish before resuming your download. If a progress update gets delayed or runs very close to a second update, there’s no real harm. But you don’t want a busy graphical interface to interrupt your download—especially if the server is sensitive to pauses.</p>&#13;
&#13;
<p>We’ll see several examples of this type of network/UI interaction in <a data-type="xref" href="ch13.html#learnjava6-CHP-13">Chapter 13</a>, but let’s fake some network traffic and update a small label to show off <code>SwingUtilities</code>. We can set up a Start button that will update a status label with a simple percentage display and kick off a background thread that sleeps for one second, then increments the progress. Each time the thread wakes up, it will update the label using <code>invokeLater()</code> to correctly set the label’s text. First, let’s set up our demo:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch12.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">ProgressDemo</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"SwingUtilities 'invoke' Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">180</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Download Progress Goes Here!"</code><code class="p">,</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Thread</code><code class="w"> </code><code class="n">pretender</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Thread</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">ProgressPretender</code><code class="p">(</code><code class="n">label</code><code class="p">));</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JButton</code><code class="w"> </code><code class="n">simpleButton</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JButton</code><code class="p">(</code><code class="s">"Start"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">simpleButton</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="n">e</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">simpleButton</code><code class="p">.</code><code class="na">setEnabled</code><code class="p">(</code><code class="kc">false</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">pretender</code><code class="p">.</code><code class="na">start</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">});</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">checkLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Can you still type?"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JTextField</code><code class="w"> </code><code class="n">checkField</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JTextField</code><code class="p">(</code><code class="mi">10</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">label</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">simpleButton</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">checkLabel</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">checkField</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">frame</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Most of this should look familiar, but look at how we create our thread. <a data-primary="ActionListener interface" data-type="indexterm" id="id2436"/>We pass a <code>new ProgressPretender()</code> as the argument to our <code>Thread</code> constructor. We could have broken that call into separate parts, but since we do not refer directly to our <code>ProgressPretender</code> object again, we can stick with this tidier, denser approach. We <em>do</em> refer to the thread itself, however, so we make a proper variable for it. We can then start our thread running in the <code>ActionListener</code> for our button. We also disable our Start button at that point. We don’t want the user trying to (re)start a thread that is already running!</p>&#13;
&#13;
<p>We added a text field for you to type in. While the progress is being updated, your application should continue responding to user input like typing. Try it! The text field isn’t connected to anything, but you should be able to enter and delete text while watching the progress counter slowly climb up, as shown in <a data-type="xref" href="#learnjava6-CHP-12-FIG-35">Figure 12-31</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-35">&#13;
<img alt="ljv6 1231" src="assets/ljv6_1231.png"/>&#13;
<h6><span class="label">Figure 12-31. </span>Thread-safe updates to a progress label</h6>&#13;
</div></figure>&#13;
&#13;
<p>So how did we update that label without locking up the application? Let’s look at the <code>ProgressPretender</code> class and inspect the <code>run()</code> method:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch12.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">class</code> <code class="nc">ProgressPretender</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">Runnable</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">progress</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">ProgressPretender</code><code class="p">(</code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">.</code><code class="na">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">label</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">progress</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">run</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">while</code><code class="w"> </code><code class="p">(</code><code class="n">progress</code><code class="w"> </code><code class="o">&lt;=</code><code class="w"> </code><code class="mi">100</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">SwingUtilities</code><code class="p">.</code><code class="na">invokeLater</code><code class="p">(</code><code class="w"/>&#13;
<code class="w">        </code><code class="p">()</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="n">label</code><code class="p">.</code><code class="na">setText</code><code class="p">(</code><code class="n">progress</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">"%"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">try</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">Thread</code><code class="p">.</code><code class="na">sleep</code><code class="p">(</code><code class="mi">1000</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">}</code><code class="w"> </code><code class="k">catch</code><code class="w"> </code><code class="p">(</code><code class="n">InterruptedException</code><code class="w"> </code><code class="n">ie</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">System</code><code class="p">.</code><code class="na">err</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Someone interrupted us. Skipping download."</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">        </code><code class="k">break</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">progress</code><code class="o">++</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this class, we store the label passed to our constructor so we know where to display our updated progress. The <code>run()</code> method has three basic steps: 1) update the label, 2) sleep for 1,000 milliseconds, and 3) increment our progress.</p>&#13;
&#13;
<p>In step 1, the lambda argument we pass to <code>invokeLater()</code> is based on the <code>Runnable</code> interface in <a data-type="xref" href="ch09.html#learnjava6-CHP-9">Chapter 9</a>. We could have used an inner class or an anonymous inner class, but for such a simple task, a lambda is perfect. The lambda body updates the label with our current progress value. The event dispatch thread will execute the lambda. This is the magic that leaves the text field responsive even though our “progress” thread is sleeping most of the time.</p>&#13;
&#13;
<p>Step 2 is standard-issue thread sleeping. The <code>sleep()</code> method knows it can be interrupted, so the compiler will make sure you supply a <code>try/catch</code> block like we’ve done above. There are many ways to handle the interruption, but in this case we chose to simply <code>break</code> out of the loop.</p>&#13;
&#13;
<p>Finally, we increment our progress counter and start the whole process over. Once we hit 100, the loop ends and our progress label should stop changing. If you wait patiently, you’ll see that final value. The app itself should remain active, though. You can still type in the text field. Our download is complete and all is well with the world!<a data-primary="" data-startref="ix_swing_util" data-type="indexterm" id="id2437"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Timers" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-4.2">&#13;
<h2>Timers</h2>&#13;
&#13;
<p>The Swing library includes a <a data-primary="timers, threading considerations" data-type="indexterm" id="ix_timers_threading"/><a data-primary="javax.swing package" data-secondary="Timer" data-type="indexterm" id="ix_javax_timer"/><a data-primary="Timer class, javax.swing" data-type="indexterm" id="ix_timer_swing"/>timer that is designed to work in the UI space. The <code>javax.swing.Timer</code> class is fairly straightforward. It waits a specified period of time and then fires off an action event (the same type of event as clicking a button). It can fire that action once or repeatedly. You’ll find many reasons to use timers with graphical applications. Besides providing an alternative way to drive an animation loop, you might want to automatically cancel some action, like loading a network resource if it is taking too long. Conversely, you might put up a little “please wait” spinner or dialog to let the user know the operation is ongoing. You might want to take down a dialog prompt if the user doesn’t respond within a specified time span. Swing’s <code>Timer</code> can handle all of these scenarios.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Animation with Timer" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-4.2.1">&#13;
<h3>Animation with Timer</h3>&#13;
&#13;
<p>Let’s <a data-primary="animation" data-type="indexterm" id="ix_animate_timer"/>modify our flying apples from <a data-type="xref" href="ch09.html#learnjava6-CHP-9-SECT-1.3">“Revisiting Animation with Threads”</a> and try implementing the animation with an instance of <code>Timer</code>. The <code>Timer</code> class takes care of that detail for us. We can still use our <code>step()</code> method in the <code>Apple</code> class from our first pass at <span class="keep-together">animation.</span> We just need to alter the start method and keep a suitable variable around for the timer:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">STEP</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">40</code><code class="p">;</code><code class="w">  </code><code class="c1">// frame duration in milliseconds</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">Timer</code><code class="w"> </code><code class="n">animationTimer</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// other member declarations ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">startAnimation</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">animationTimer</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">animationTimer</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Timer</code><code class="p">(</code><code class="n">STEP</code><code class="p">,</code><code class="w"> </code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">animationTimer</code><code class="p">.</code><code class="na">setActionCommand</code><code class="p">(</code><code class="s">"repaint"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">animationTimer</code><code class="p">.</code><code class="na">setRepeats</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">animationTimer</code><code class="p">.</code><code class="na">start</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="o">!</code><code class="n">animationTimer</code><code class="p">.</code><code class="na">isRunning</code><code class="p">())</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">animationTimer</code><code class="p">.</code><code class="na">restart</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// other methods ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">actionPerformed</code><code class="p">(</code><code class="n">ActionEvent</code><code class="w"> </code><code class="n">event</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">animating</code><code class="w"> </code><code class="o">&amp;&amp;</code><code class="w"> </code><code class="n">event</code><code class="p">.</code><code class="na">getActionCommand</code><code class="p">().</code><code class="na">equals</code><code class="p">(</code><code class="s">"repaint"</code><code class="p">))</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Timer stepping "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">apples</code><code class="p">.</code><code class="na">size</code><code class="p">()</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">" apples"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">for</code><code class="w"> </code><code class="p">(</code><code class="n">Apple</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="n">apples</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">a</code><code class="p">.</code><code class="na">step</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">detectCollisions</code><code class="p">(</code><code class="n">a</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">repaint</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">cullFallenApples</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>There are two nice <a data-primary="ActionListener interface" data-type="indexterm" id="id2438"/>things about this approach. It’s definitely easier to read because we are not responsible for the pauses between actions. We create the <code>Timer</code> by passing to the constructor the time interval between events and an <code>ActionListener</code> to receive the events—our <code>Field</code> class in this case. We give the timer a simple but unique action command, make it a repeating timer, and start it up!</p>&#13;
&#13;
<p>The other <a data-primary="event dispatch thread (event queue)" data-type="indexterm" id="id2439"/><a data-primary="actionPerformed() method, ActionListener" data-type="indexterm" id="id2440"/>nice thing is specific to Swing and graphical applications: <code>javax.swing.Timer</code> fires its action events <em>on the event dispatch thread</em>. You do not need to wrap any of your response in <code>invokeAndWait()</code> or <code>invokeLater()</code>. Just put your timer-based code in the <code>actionPerformed()</code> method of an attached listener and you are good to go!</p>&#13;
&#13;
<p>Because several <a data-primary="ActionEvent interface" data-type="indexterm" id="id2441"/>components generate <code>ActionEvent</code> objects, we did take a little precaution against collisions by setting the <code>actionCommand</code> attribute for our timer. This step is not strictly necessary in our case, but it leaves room for the <code>Field</code> class to handle other events down the road without breaking our animation.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Other Timer uses" data-type="sect3"><div class="sect3" id="learnjava6-CHP-12-SECT-4.2.2">&#13;
<h3>Other Timer uses</h3>&#13;
&#13;
<p>Mature, polished applications have a variety of small moments where it helps to have a one-time timer. Our apple game is simple by comparison to most commercial apps or games, but even here we can add a little “realism” with a timer: after tossing an apple, we can pause before allowing the physicist to fire another apple. Maybe the physicist has to bend down and grab another apple from a bucket before aiming or tossing. This kind of delay is another perfect spot for a <code>Timer</code>.</p>&#13;
&#13;
<p>We can add this pause to the bit of code in the <code>Field</code> class where we toss the apple:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">startTossFromPlayer</code><code class="p">(</code><code class="n">Physicist</code><code class="w"> </code><code class="n">physicist</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="o">!</code><code class="n">animating</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Starting animation!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">animating</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">startAnimation</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">animating</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="c1">// Check to make sure we have an apple to toss</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">physicist</code><code class="p">.</code><code class="na">aimingApple</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">Apple</code><code class="w"> </code><code class="n">apple</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">physicist</code><code class="p">.</code><code class="na">takeApple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">apple</code><code class="p">.</code><code class="na">toss</code><code class="p">(</code><code class="n">physicist</code><code class="p">.</code><code class="na">aimingAngle</code><code class="p">,</code><code class="w"> </code><code class="n">physicist</code><code class="p">.</code><code class="na">aimingForce</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">apples</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">apple</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">Timer</code><code class="w"> </code><code class="n">appleLoader</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Timer</code><code class="p">(</code><code class="mi">800</code><code class="p">,</code><code class="w"> </code><code class="n">physicist</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">appleLoader</code><code class="p">.</code><code class="na">setActionCommand</code><code class="p">(</code><code class="s">"New Apple"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">appleLoader</code><code class="p">.</code><code class="na">setRepeats</code><code class="p">(</code><code class="kc">false</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">appleLoader</code><code class="p">.</code><code class="na">start</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Notice this time that we set the timer to run only once with the <code>setRepeats(false)</code> call. This means that after a little less than a second, a single event will be fired off to our physicist. The <code>Physicist</code> class, in turn, needs to add the <code>implements Action</code>&#13;
<span class="keep-together"><code>Listener</code></span> portion to the class definition and include an appropriate <code>actionPerformed()</code> function, like so:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="c1">// other imports ...</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.ActionEvent</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.ActionListener</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Physicist</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">ActionListener</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// Current Physicist stuff ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// New event handler for getting a new apple</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">actionPerformed</code><code class="p">(</code><code class="n">ActionEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">e</code><code class="p">.</code><code class="na">getActionCommand</code><code class="p">().</code><code class="na">equals</code><code class="p">(</code><code class="s">"New Apple"</code><code class="p">))</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">getNewApple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">field</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="n">field</code><code class="p">.</code><code class="na">repaint</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Using <code>Timer</code> isn’t the only way to accomplish such tasks, but in Swing, the combination of efficient timed events and automatic use of the event dispatch thread make it worth considering. If nothing else, it makes prototyping easy. You can always come back and refactor your application to use custom threading code, if needed.<a data-primary="" data-startref="ix_apps_thread" data-type="indexterm" id="id2442"/><a data-primary="" data-startref="ix_thread_apps" data-type="indexterm" id="id2443"/><a data-primary="" data-startref="ix_javax_timer" data-type="indexterm" id="id2444"/><a data-primary="" data-startref="ix_timer_swing" data-type="indexterm" id="id2445"/><a data-primary="" data-startref="ix_animate_timer" data-type="indexterm" id="id2446"/><a data-primary="" data-startref="ix_timers_threading" data-type="indexterm" id="id2447"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="But Wait, There’s More" data-type="sect1"><div class="sect1" id="learnjava6-CHP-12-SECT-5">&#13;
<h1>But Wait, There’s More</h1>&#13;
&#13;
<p>As we noted at the <a data-primary="Java 2D Graphics (Knudsen)" data-type="indexterm" id="id2448"/><a data-primary="Knudsen, Jonathan" data-type="indexterm" id="id2449"/>beginning of the chapter, there are many, many more discussions and topics and explorations available in the world of Java graphical applications. Java has an entire package devoted to storing <a href="https://oreil.ly/Vrbfz">user preferences</a>, for example. And O’Reilly has an entire book by Jonathan Knudsen devoted to <a href="https://oreil.ly/4xYdN"><em>Java 2D Graphics</em></a>. We’ll leave it to you to do that exploring but wanted to go through at least a few key topics worth focusing on first if you have plans for a desktop app.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Menus" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-5.1">&#13;
<h2>Menus</h2>&#13;
&#13;
<p>While not <a data-primary="desktop applications" data-secondary="menus" data-type="indexterm" id="id2450"/><a data-primary="menus, GUI" data-type="indexterm" id="id2451"/><a data-primary="JCheckboxMenuItem class" data-type="indexterm" id="id2452"/><a data-primary="JMenu class" data-type="indexterm" id="id2453"/><a data-primary="JMenuBar class" data-type="indexterm" id="id2454"/><a data-primary="JMenuItem class" data-type="indexterm" id="id2455"/><a data-primary="JRadioButtonMenuItem class" data-type="indexterm" id="id2456"/>technically required, most desktop applications have an application-wide menu of common tasks, such as saving changed files or setting preferences. Apps with specific features, like spreadsheets, might have menus for sorting the data in a column or selection. The <code>JMenu</code>, <code>JMenuBar</code>, and <code>JMenuItem</code> classes help you add this functionality to your Swing apps. Menus go inside a menu bar, and menu items go inside menus. Swing has three prebuilt menu item classes: <code>JMenuItem</code> for basic menu entries, <code>JCheckBoxMenuItem</code> for option items, and <code>JRadioButtonMenuItem</code> for grouped menu items like the currently selected font or color theme. The <code>JMenu</code> class is itself a valid menu item so you can build nested menus. <code>JMenuItem</code> behaves like a button (as do its radio and checkbox compatriots), and you can catch menu events using the same listeners.</p>&#13;
&#13;
<p><a data-type="xref" href="#learnjava6-CHP-12-FIG-36">Figure 12-32</a> shows an example of a simple menu bar populated with some menus and items.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-36">&#13;
<img alt="ljv6 1232" src="assets/ljv6_1232.png"/>&#13;
<h6><span class="label">Figure 12-32. </span><code>JMenu</code> and <code>JMenuItem</code> on macOS and Linux</h6>&#13;
</div></figure>&#13;
&#13;
<p>Here’s the source code for this demonstration:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch12.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.ActionEvent</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.ActionListener</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">MenuDemo</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">JFrame</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">ActionListener</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">JLabel</code><code class="w"> </code><code class="n">resultsLabel</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">MenuDemo</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">super</code><code class="p">(</code><code class="s">"JMenu Demo"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setLayout</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">FlowLayout</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">180</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">resultsLabel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Click a menu item!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">add</code><code class="p">(</code><code class="n">resultsLabel</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Now let's create a couple menus and populate them</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenu</code><code class="w"> </code><code class="n">fileMenu</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenu</code><code class="p">(</code><code class="s">"File"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenuItem</code><code class="w"> </code><code class="n">saveItem</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenuItem</code><code class="p">(</code><code class="s">"Save"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">saveItem</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">fileMenu</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">saveItem</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenuItem</code><code class="w"> </code><code class="n">quitItem</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenuItem</code><code class="p">(</code><code class="s">"Quit"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">quitItem</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">fileMenu</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">quitItem</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">JMenu</code><code class="w"> </code><code class="n">editMenu</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenu</code><code class="p">(</code><code class="s">"Edit"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenuItem</code><code class="w"> </code><code class="n">cutItem</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenuItem</code><code class="p">(</code><code class="s">"Cut"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">cutItem</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">editMenu</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">cutItem</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenuItem</code><code class="w"> </code><code class="n">copyItem</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenuItem</code><code class="p">(</code><code class="s">"Copy"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">copyItem</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">editMenu</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">copyItem</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenuItem</code><code class="w"> </code><code class="n">pasteItem</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenuItem</code><code class="p">(</code><code class="s">"Paste"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">pasteItem</code><code class="p">.</code><code class="na">addActionListener</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">editMenu</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">pasteItem</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// And finally build a JMenuBar for the application</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JMenuBar</code><code class="w"> </code><code class="n">mainBar</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JMenuBar</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">mainBar</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">fileMenu</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">mainBar</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">editMenu</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setJMenuBar</code><code class="p">(</code><code class="n">mainBar</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">actionPerformed</code><code class="p">(</code><code class="n">ActionEvent</code><code class="w"> </code><code class="n">event</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">resultsLabel</code><code class="p">.</code><code class="na">setText</code><code class="p">(</code><code class="s">"Menu selected: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">event</code><code class="p">.</code><code class="na">getActionCommand</code><code class="p">());</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">args</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">MenuDemo</code><code class="w"> </code><code class="n">demo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">MenuDemo</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">demo</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>We obviously don’t do much with the menu item actions here, but they illustrate how you can start building out the expected parts of a professional application.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="less_space pagebreak-before" data-pdf-bookmark="Modals and Pop-Ups" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-5.2">&#13;
<h2>Modals and Pop-Ups</h2>&#13;
&#13;
<p>Events let the user <a data-primary="pop-up windows, GUI" data-type="indexterm" id="ix_popup_win"/><a data-primary="modals and pop-ups, GUI" data-type="indexterm" id="ix_modal_popup"/><a data-primary="dialog windows, GUI" data-type="indexterm" id="ix_dialogs_gui"/><a data-primary="desktop applications" data-secondary="modals and pop-ups" data-type="indexterm" id="ix_apps_modals"/>get your attention, or at least the attention of some method in your application. But what if you need to get the user’s attention? A popular UI mechanism for this task is the pop-up window. You’ll often hear such a window referred to as a <em>modal</em> or <em>dialog</em> or even <em>modal dialog</em>. The term <em>dialog</em> comes from the fact that these pop-ups present some information to the user and expect—or require—a response. Perhaps this quick question and answer process is not as lofty as a Socratic symposium, but still. The <em>modal</em> name refers to the fact that some of those dialogs that require a response will actually disable the rest of the application—putting it in a restricted mode—until you provide that response. You may have experienced such a dialog yourself in other desktop applications. If your software requires you to stay up-to-date with the latest release, for example, it might “gray out” the application, indicating you can’t use it, and then show you a modal dialog with a button that initiates the update process.</p>&#13;
&#13;
<p>The term <em>pop-up</em> is more general. While you can certainly have modal pop-ups, you can also have plain (“modeless”) pop-ups that do not block you from using the rest of the application. Think of a search dialog in a word-processing application that you can leave available and just scoot off to the side of your main window.</p>&#13;
&#13;
<p>Swing <a data-primary="JDialog class" data-type="indexterm" id="id2457"/><a data-primary="JOptionPane class" data-type="indexterm" id="id2458"/><a data-primary="showConfirmDialog() method, JDialog" data-type="indexterm" id="id2459"/><a data-primary="showInputDialog() method, JDialog" data-type="indexterm" id="id2460"/><a data-primary="showMessageDialog() method, JDialog" data-type="indexterm" id="id2461"/>provides a bare <code>JDialog</code> class that you can use to create custom dialog windows. For typical pop-up interactions with your users, including alerts, confirmations, and input dialogs, the <code>JOptionPane</code> class has some really handy shortcuts. For simple alerts and error messages, you can use the <code>showMessageDialog()</code> call. This type of dialog includes a customizable title, some text, and a button to acknowledge (and dismiss) the pop-up. If you need the user to make a yes-or-no choice, <code>showConfirmDialog()</code> is perfect. And if you need short, text-based answers from the user, you’ll want to use <code>showInputDialog()</code>. <a data-type="xref" href="#learnjava6-CHP-12-FIG-modals">Figure 12-33</a> shows an example of these three dialogs.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-modals">&#13;
<img alt="ljv6 1233" src="assets/ljv6_1233.png"/>&#13;
<h6><span class="label">Figure 12-33. </span>The main variations of JOptionPane pop-up windows</h6>&#13;
</div></figure>&#13;
&#13;
<p>To create a message dialog, you have to supply four arguments. The first argument refers to the frame or window “owning” the pop-up. <code>JOptionPane</code> will attempt to center the dialog over its owner when shown. You can also specify <code>null</code> for this argument, which tells <code>JOptionPane</code> there is no primary window, so center the pop-up on the user’s screen. The second and third arguments are <code>String</code>s for the dialog’s message and title, respectively. The final argument indicates the “type” of pop-up, which mostly affects the icon you see. You can specify several types:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>ERROR_MESSAGE</code>, red Stop icon</p>&#13;
</li>&#13;
<li>&#13;
<p><code>INFORMATION_MESSAGE</code>, Duke<sup><a data-type="noteref" href="ch12.html#id2462" id="id2462-marker">6</a></sup> icon</p>&#13;
</li>&#13;
<li>&#13;
<p><code>WARNING_MESSAGE</code>, yellow triangle icon</p>&#13;
</li>&#13;
<li>&#13;
<p><code>QUESTION_MESSAGE</code>, Duke icon</p>&#13;
</li>&#13;
<li>&#13;
<p><code>PLAIN_MESSAGE</code>, no icon</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Head back to your <em>jshell</em> and try creating a message pop-up. You can use the handy <code>null</code> option for the owner:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; import javax.swing.*&#13;
&#13;
jshell&gt; JOptionPane.showMessageDialog(null, "Hi there", "jshell Alert",&#13;
   ...&gt;   JOptionPane.ERROR_MESSAGE)</pre>&#13;
&#13;
<p>Another common task for pop-ups is verifying the user’s intent. Many applications ask if you’re sure you want to quit or delete something. <code>JOptionPane</code> has you covered. You can try out this confirmation dialog in <em>jshell</em>:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; JOptionPane.showConfirmDialog(null, "Are you sure?")&#13;
$18 ==&gt; 0</pre>&#13;
&#13;
<p>The two-argument version of the <code>showConfirmDialog()</code> method produces a pop-up with Yes, No, and Cancel buttons. You can determine which answer the user selected by keeping the return value (an <code>int</code>). We clicked the Yes button, which returns <code>0</code>, but you don’t have to memorize the return values. <code>JOptionPane</code> has constants covering the various responses:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>YES_OPTION</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>NO_OPTION</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>CANCEL_OPTION</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>OK_OPTION</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>CLOSED_OPTION</code></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p><code>JOptionPane</code> returns the <code>CLOSED_OPTION</code> value if the user closes the dialog using the window controls rather than clicking on any of the available buttons within the dialog. You also have a modicum of control over those buttons. You can use a four-argument version that takes a title and a button choice with one of the following values:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>YES_NO_OPTION</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>OK_CANCEL_OPTION</code></p>&#13;
</li>&#13;
<li>&#13;
<p><code>YES_NO_CANCEL_OPTION</code></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>In most situations, having both a “No” and a “Cancel” in the same dialog confuses users. We recommend using one of the first two options. (The user can always close the dialog using the standard window controls if they do not want to make a selection.) Let’s try creating a Yes/No dialog:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; int answer = JOptionPane.showConfirmDialog(null,&#13;
   ...&gt;   "Are you sure?", "Confirm", JOptionPane.YES_NO_OPTION)&#13;
answer ==&gt; 1&#13;
&#13;
jshell&gt; if (answer == JOptionPane.NO_OPTION)&#13;
   ...&gt;   System.out.println("They declined")&#13;
They declined</pre>&#13;
&#13;
<p>Some pop-ups ask for a quick bit of input. You can use the <code>showInputDialog()</code> method to ask a question and allow the user to type in an answer. That answer (a <code>String</code>) can be stored the same way you keep the confirmation choice. Let’s try one more pop-up in <em>jshell</em>:</p>&#13;
&#13;
<pre class="jshell" data-type="programlisting">jshell&gt; String pin = JOptionPane.showInputDialog(null, "Please enter your PIN:")&#13;
pin ==&gt; "1234"</pre>&#13;
&#13;
<p>Input dialogs are handy for one-off requests, but we don’t recommend them if you have a series of questions to ask the user. You should keep modals confined to quick, infrequent tasks. They interrupt the user—by design. Sometimes that interruption is exactly what you need. If you abuse the user’s attention, however, you’re likely to annoy the user, and they’ll learn to simply ignore every pop-up from your &#13;
<span class="keep-together">application</span>.</p>&#13;
&#13;
<p>The file <em>ch12/examples/ModalDemo.java</em> contains a small application that can create a variety of modal dialogs. Feel free to play around with it and try out the different message types or confirmation button options. And don’t be afraid of modifying these example applications! Sometimes tweaking a simple app and recompiling is easier than trying to type multiline examples into <em>jshell</em>.<a data-primary="" data-startref="ix_apps_modals" data-type="indexterm" id="id2463"/><a data-primary="" data-startref="ix_dialogs_gui" data-type="indexterm" id="id2464"/><a data-primary="" data-startref="ix_modal_popup" data-type="indexterm" id="id2465"/><a data-primary="" data-startref="ix_popup_win" data-type="indexterm" id="id2466"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="less_space pagebreak-before" data-pdf-bookmark="User Interface and User Experience" data-type="sect1"><div class="sect1" id="learnjava6-CHP-12-SECT-6">&#13;
<h1>User Interface and User Experience</h1>&#13;
&#13;
<p>This was a <a data-primary="UI (user interface)" data-seealso="desktop applications; web services" data-type="indexterm" id="id2467"/><a data-primary="user interface (UI)" data-seealso="desktop applications; web services" data-type="indexterm" id="id2468"/>whirlwind tour of some of the more common UI elements for desktop applications, such as <code>JButton</code>, <code>JLabel</code>, and <code>JTextField</code>. We discussed how to arrange those components using layout managers in containers and introduced several other components.</p>&#13;
&#13;
<p>Of course, desktop applications are only part of the story. <a data-type="xref" href="ch13.html#learnjava6-CHP-13">Chapter 13</a> covers networking basics, including getting content from the web and simple client/server applications.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Review Questions" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-6.1">&#13;
<h2>Review Questions</h2>&#13;
<ol>&#13;
<li>&#13;
<p>Which component would you use to display some text to the user?</p>&#13;
</li>&#13;
<li>&#13;
<p>Which component(s) would you use to allow the user to enter text?</p>&#13;
</li>&#13;
<li>&#13;
<p>What event does clicking a button generate?</p>&#13;
</li>&#13;
<li>&#13;
<p>Which listener should you attach to <code>JList</code> if you want to know when the user changes the selected item?</p>&#13;
</li>&#13;
<li>&#13;
<p>What is the default layout manager for <code>JPanel</code>?</p>&#13;
</li>&#13;
<li>&#13;
<p>Which thread is responsible for processing events in Java?</p>&#13;
</li>&#13;
<li>&#13;
<p>What method would you use to update a component like <code>JLabel</code> after a background task completes?</p>&#13;
</li>&#13;
<li>&#13;
<p>What container holds <code>JMenuItem</code> objects?</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Code Exercises" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-6.2">&#13;
<h2>Code Exercises</h2>&#13;
<ol>&#13;
<li>&#13;
<p>Create a calculator interface with buttons and a text display. You can use the starter <code>Calculator</code> class in the <em>ch12/exercises</em> folder. It extends <code>JFrame</code> and implements the <code>ActionListener</code> interface. The display element should go at the top of the calculator and show right-justified text. The buttons should include the digits 0-9, a decimal point, addition, subtraction, multiplication, division, and an “equals” for showing the results. You can see what it should look like in <a data-type="xref" href="#learnjava6-CHP-12-FIG-calc-ui">Figure 12-34</a>.</p>&#13;
<div class="openblock">&#13;
<figure><div class="figure" id="learnjava6-CHP-12-FIG-calc-ui">&#13;
<img alt="ljv6 1234" src="assets/ljv6_1234.png"/>&#13;
<h6><span class="label">Figure 12-34. </span>An example calculator interface</h6>&#13;
</div></figure>&#13;
&#13;
<p>Don’t worry about hooking up the buttons to make the calculator work—yet. We’ll tackle that in the advanced exercise.</p>&#13;
</div>&#13;
</li>&#13;
<li>&#13;
<p>The apple tossing game in the <em>ch12/exercises/game</em> folder has sliders and buttons to aim and toss apples. Right now those apples simply fly in an arc and eventually go outside the bounds of our window. Add the necessary code to catch collisions between an apple and an obstacle, like a tree or a hedge. Your solution should remove both the apple and the obstacle and then refresh the screen.<a data-primary="" data-startref="ix_desktop_apps_ch12" data-type="indexterm" id="id2469"/></p>&#13;
</li>&#13;
&#13;
</ol>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Advanced Exercises" data-type="sect2"><div class="sect2" id="learnjava6-CHP-12-SECT-6.3">&#13;
<h2>Advanced Exercises</h2>&#13;
<ol>&#13;
<li>&#13;
<p>Take the visual shell you created for a calculator in the first code exercise and connect the buttons to make it functional. Clicking number buttons should put the corresponding digit in the display. Clicking an operation button (like addition or division) should store the operation to perform and allow the user to enter a second number. Clicking the “=” button should show the results of the operation.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>This exercise pulls together several discussions from past chapters. Make incremental changes and don’t be afraid to look in <a data-type="xref" href="app02.html#learnjava6-APP-B-SECT-12.2">“Advanced Exercises”</a> for hints on how to proceed.</p>&#13;
</div></section>&#13;
</div></section>&#13;
<div data-type="footnotes"><p data-type="footnote" id="id2307"><sup><a href="ch12.html#id2307-marker">1</a></sup> If you are curious about this topic and want to see behind the curtains of a commercial, desktop Java application, JetBrains publishes the <a href="https://oreil.ly/YleE5">source code</a> for the Community Edition.</p><p data-type="footnote" id="id2309"><sup><a href="ch12.html#id2309-marker">2</a></sup> The <code>javax</code> package prefix was introduced early by Sun to accommodate packages that were distributed with Java but were not “core.” The decision was modestly controversial, but <code>javax</code> has stuck and has been used with other packages as well.</p><p data-type="footnote" id="id2325"><sup><a href="ch12.html#id2325-marker">3</a></sup> You’ll need to start <em>jshell</em> from the top-level directory containing the compiled examples for the book. If you are using IntelliJ IDEA, you can start its terminal and switch directories using <strong><code>cd out/production/LearningJava6e</code></strong>, and then start <em>jshell</em>.</p><p data-type="footnote" id="id2349"><sup><a href="ch12.html#id2349-marker">4</a></sup> As we create Swing components for use in these <em>jshell</em> examples, we’ll be omitting much of the resulting output for the sake of space. <em>jshell</em> prints a lot of information about each component, although it also uses ellipses when things get too extreme. Don’t be alarmed if you see extra details about an element’s attributes while you’re experimenting.</p><p data-type="footnote" id="id2356"><sup><a href="ch12.html#id2356-marker">5</a></sup> We should also note that there are many open source projects with even fancier components for handling things like syntax highlighting in text, various selection helpers, graphs and charts, and composite inputs like date or time pickers.</p><p data-type="footnote" id="id2462"><sup><a href="ch12.html#id2462-marker">6</a></sup> “Duke” is the official Java mascot. You can find out more at <a href="https://oreil.ly/jahxA">the OpenJDK wiki</a>.</p></div></div></section></body></html>