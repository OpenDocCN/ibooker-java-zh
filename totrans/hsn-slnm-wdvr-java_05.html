<html><head></head><body><section data-pdf-bookmark="Chapter 3. WebDriver Fundamentals" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch03">&#13;
<h1><span class="label">Chapter 3. </span>WebDriver Fundamentals</h1>&#13;
&#13;
&#13;
<p>This chapter presents the <a data-primary="Selenium WebDriver API" data-secondary="about" data-type="indexterm" id="idm45849757951456"/>elementary aspects of the Selenium WebDriver API. To that aim, we review first the different ways to create instances of the <code>WebDriver</code> hierarchy (e.g., <code>ChromeDriver</code>, <code>EdgeDriver</code>, <code>FirefoxDriver</code>, etc.). Also, we explore the main methods available in these objects. Among them, locating the different elements in a web page is essential. Thus, you will discover the possible locators, i.e., strategies to find the elements within a web page (called <code>WebElement</code> in the Selenium WebDriver API), such as by tag name, link text, HTML attribute (identifier, name, or class), CSS selector, or XPath. Another critical aspect of the Selenium WebDriver API covered in this chapter is the impersonation of user actions (i.e., automated interactions with web pages using the keyboard and mouse). The last part of this chapter presents the ability to wait for web elements. This feature is critical due to the dynamic and asynchronous nature of web applications.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Basic WebDriver Usage" data-type="sect1"><div class="sect1" id="idm45849757920800">&#13;
<h1>Basic WebDriver Usage</h1>&#13;
&#13;
<p>This section covers <a data-primary="objects" data-secondary="WebDriver" data-type="indexterm" id="ch3_term3"/><a data-primary="Selenium WebDriver API" data-secondary="objects in" data-type="indexterm" id="ch3_term4"/><a data-primary="WebDriver objects" data-type="indexterm" id="ch3_term5"/>three fundamental aspects related to <code>WebDriver</code> objects. First, we review the different ways to create them. Second, we study their basic operations. Finally, we analyze the different ways to dispose of these objects (typically at the end of a test, for closing the browser).</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebDriver Creation" data-type="sect2"><div class="sect2" id="webdriver-creation">&#13;
<h2>WebDriver Creation</h2>&#13;
&#13;
<p>As introduced in <a data-type="xref" href="ch02.html#ch02">Chapter 2</a>, to control browsers with Selenium WebDriver in Java, the first <a data-primary="WebDriver" data-secondary="object creation for" data-type="indexterm" id="ch3_term1"/><a data-primary="Selenium WebDriver API" data-secondary="creation of instances with" data-type="indexterm" id="ch3_term2"/><a data-primary="Java" data-secondary="and creation of instances" data-secondary-sortas="creation of instances" data-type="indexterm" id="idm45849757909664"/>step is to create <code>WebDriver</code> instances. Thus, we <a data-primary="EdgeDriver" data-type="indexterm" id="idm45849757907936"/><a data-primary="Edge" data-secondary="driver for" data-type="indexterm" id="idm45849757907200"/><a data-primary="Firefox" data-secondary="driver for" data-type="indexterm" id="idm45849757906256"/><a data-primary="Chrome" data-secondary="driver for" data-type="indexterm" id="idm45849757905312"/><a data-primary="FirefoxDriver" data-type="indexterm" id="idm45849757904368"/>need to create a <code>ChromeDriver</code> object when using Chrome, <code>EdgeDriver</code> for Edge, <code>FirefoxDriver</code> for Firefox, and so on. The basic way to create instances of these types is to <a data-primary="new operator, Java" data-type="indexterm" id="idm45849757902288"/>use the <code>new</code> operator in Java. For example, we <a data-primary="ChromeDriver" data-type="indexterm" id="idm45849757901040"/>create a <code>ChromeDriver</code> object as follows:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">WebDriver</code> <code class="n">driver</code> <code class="o">=</code> <code class="k">new</code> <code class="n">ChromeDriver</code><code class="o">();</code></pre>&#13;
&#13;
<p>The use of the operator <code>new</code> for creating <code>WebDriver</code> instances is perfectly correct, and you can use it in your tests. Nevertheless, it is worth reviewing other possibilities that can provide additional benefits depending on specific use cases for creating these objects. These alternatives are the WebDriver and the WebDriverManager builders.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebDriver builder" data-type="sect3"><div class="sect3" id="idm45849757895872">&#13;
<h3>WebDriver builder</h3>&#13;
&#13;
<p>The Selenium WebDriver API provides a <a data-primary="builder pattern" data-type="indexterm" id="idm45849757894368"/><a data-primary="builder() method" data-type="indexterm" id="idm45849757893280"/><a data-primary="Selenium WebDriver API" data-secondary="WebDriver builder in" data-type="indexterm" id="ch3_term6"/><a data-primary="WebDriver" data-secondary="builder for" data-type="indexterm" id="ch3_term7"/><a data-primary="WebDriver" data-secondary="and WebDriverManager" data-secondary-sortas="WebDriverManager" data-type="indexterm" id="ch3_term8"/><a data-primary="WebDriverManager" data-secondary="and WebDriver" data-secondary-sortas="WebDriver" data-type="indexterm" id="ch3_term9"/>built-in method following the <em>builder pattern</em> to create <code>WebDriver</code> instances. This feature is accessible through the static method <code>builder()</code> of the <code>RemoteWebDriver</code> class and <a data-primary="fluent APIs" data-type="indexterm" id="idm45849757885376"/><a data-primary="objects" data-secondary="RemoteWebDriver and" data-type="indexterm" id="idm45849757861664"/><a data-primary="RemoteWebDriver class" data-secondary="objects and" data-type="indexterm" id="idm45849757860720"/>provides a fluent API for creating <code>WebDriver</code> objects. <a data-type="xref" href="#webdriver-builder-methods">Table 3-1</a> presents the available methods for this builder. <a data-type="xref" href="#webdriver_builder_skeleton">Example 3-1</a> shows a test skeleton <a data-primary="oneOf() method" data-type="indexterm" id="idm45849757857664"/><a data-primary="test skeletons of builders" data-type="indexterm" id="ch3_term10"/>using the WebDriver builder.</p>&#13;
<table id="webdriver-builder-methods">&#13;
<caption><span class="label">Table 3-1. </span>WebDriver builder methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">oneOf</code><code class="o">(</code><code class="n">Capabilities</code> <code class="n">options</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Browser-specific capabilities</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">addAlternative</code><code class="o">(</code><code class="n">Capabilities</code> <code class="n">options</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Alternative browser-specific capabilities (see <a data-type="xref" href="ch05.html#ch05">Chapter 5</a>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">addMetadata</code><code class="o">(</code><code class="n">String</code> <code class="n">key</code><code class="o">,</code> <code class="n">Object</code> <code class="n">value</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Add custom metadata, typically used for requesting additional features in cloud providers (see <a data-type="xref" href="ch06.html#ch06">Chapter 6</a>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">setCapability</code><code class="o">(</code><code class="n">String</code> <code class="n">capabilityName</code><code class="o">,</code>&#13;
    <code class="n">Object</code> <code class="n">value</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Individual browser-specific capabilities (see <a data-type="xref" href="ch05.html#ch05">Chapter 5</a>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">address</code><code class="o">(</code><code class="n">String</code> <code class="n">uri</code><code class="o">)</code>&#13;
<code class="n">address</code><code class="o">(</code><code class="n">URL</code> <code class="n">url</code><code class="o">)</code>&#13;
<code class="n">address</code><code class="o">(</code><code class="n">URI</code> <code class="n">uri</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Set the address of the remote server (see <a data-type="xref" href="ch06.html#ch06">Chapter 6</a>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">config</code><code class="o">(</code><code class="n">ClientConfig</code> <code class="n">config</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Specific configuration when using a remote server, such as the connection timeout or proxy settings</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">withDriverService</code><code class="o">(</code><code class="n">DriverService</code> <code class="n">service</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Specific configuration for the local driver (e.g., chromedriver), such as its file location, used port, timeout, or arguments</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">build</code><code class="o">()</code></pre></div></td>&#13;
<td><p>Last method in the builder pattern, devoted to creating a <code>WebDriver</code> instance</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p><a data-type="xref" href="ch05.html#ch05">Chapter 5</a> explains the <a data-primary="classes of browsers" data-type="indexterm" id="idm45849757661248"/><a data-primary="browsers" data-secondary="WebDriver hierarchy of classes of" data-type="indexterm" id="idm45849757660544"/><a data-primary="Selenium WebDriver API" data-secondary="hierarchy of classes in" data-type="indexterm" id="idm45849757659632"/>details about <em>browser-specific capabilities</em> (such as <code>ChromeOptions</code>). At this point, we use these classes just <span class="keep-together">to select</span> a browser type (e.g., <code>ChromeOptions</code> for Chrome, <code>Edge​Op⁠tions</code> for Edge, or <code>FirefoxOptions</code> for Firefox).</p>&#13;
</div>&#13;
<div class="pagebreak-before less_space" data-type="example" id="webdriver_builder_skeleton">&#13;
<h5><span class="label">Example 3-1. </span>Test skeleton using the WebDriver builder</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">WebDriverBuilderJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeAll</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setupClass</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">setup</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO1-1" id="co_webdriver_fundamentals_CO1-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">RemoteWebDriver</code><code class="o">.</code><code class="na">builder</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">oneOf</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">ChromeOptions</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO1-2" id="co_webdriver_fundamentals_CO1-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">test</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="c1">// TODO: use variable "driver" to call the Selenium WebDriver API&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO1-1" id="callout_webdriver_fundamentals_CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>As usual, before the actual <code>WebDriver</code> instantiation, we <a data-primary="drivers" data-secondary="WebDriverManager resolution of" data-type="indexterm" id="ch3_term86"/><a data-primary="WebDriverManager" data-secondary="driver resolution by" data-type="indexterm" id="ch3_term87"/>resolve the required driver (chromedriver in this example) using WebDriverManager.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO1-2" id="callout_webdriver_fundamentals_CO1-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We create the <code>WebDriver</code> instance <a data-primary="Chrome" data-secondary="WebDriver instantiation with" data-type="indexterm" id="ch3_term88"/><a data-primary="ChromeOptions" data-type="indexterm" id="idm45849757504064"/><a data-primary="oneOf() method" data-type="indexterm" id="idm45849757503392"/>using the WebDriver builder. Since we want to use Chrome in this test, we use a <code>ChromeOptions</code> object as the capabilities argument (using the method <code>oneOf()</code>).</p></dd>&#13;
</dl>&#13;
&#13;
<p>From a functional point of view, this example works in the same way as the regular <em>hello world</em> tests presented in <a data-type="xref" href="ch02.html#ch02">Chapter 2</a>. Nevertheless, the WebDriver builder API easily allows specifying a different behavior. Consider the following snippet as an example. This <a data-primary="Safari" data-type="indexterm" id="idm45849757457920"/>code changes the setup method and creates a <code>SafariDriver</code> instance. Suppose the instantiation of this object is not possible (typically, when the test is not executed on macOS, and therefore, Safari is not available in the system). In that case, we use Chrome as an alternative browser.</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@BeforeEach</code>&#13;
<code class="kt">void</code> <code class="nf">setup</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">driver</code> <code class="o">=</code> <code class="n">RemoteWebDriver</code><code class="o">.</code><code class="na">builder</code><code class="o">().</code><code class="na">oneOf</code><code class="o">(</code><code class="k">new</code> <code class="n">SafariOptions</code><code class="o">())</code>&#13;
            <code class="o">.</code><code class="na">addAlternative</code><code class="o">(</code><code class="k">new</code> <code class="n">ChromeOptions</code><code class="o">()).</code><code class="na">build</code><code class="o">();</code>&#13;
<code class="o">}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebDriverManager builder" data-type="sect3"><div class="sect3" id="idm45849757440240">&#13;
<h3>WebDriverManager builder</h3>&#13;
&#13;
<p>Another possibility <a data-startref="ch3_term6" data-type="indexterm" id="idm45849757398368"/><a data-startref="ch3_term7" data-type="indexterm" id="idm45849757432048"/><a data-primary="builder, WebDriverManager" data-type="indexterm" id="ch3_term11"/><a data-primary="WebDriverManager" data-secondary="builder utility in" data-type="indexterm" id="ch3_term12"/>to create <code>WebDriver</code> objects is using WebDriverManager. In addition to resolving drivers, as of version 5, WebDriverManager provides a <code>WebDriver</code> builder utility. <a data-type="xref" href="#wdm_builder_skeleton">Example 3-2</a> shows a test skeleton using this builder.</p>&#13;
<div data-type="example" id="wdm_builder_skeleton">&#13;
<h5><span class="label">Example 3-2. </span>Test skeleton using the WebDriverManager builder</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">WdmBuilderJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO2-1" id="co_webdriver_fundamentals_CO2-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">test</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="c1">// TODO: use variable "driver" to call the Selenium WebDriver API&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO2-1" id="callout_webdriver_fundamentals_CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>WebDriverManager resolves the required driver (chromedriver in this case) and creates an instance of the proper <code>WebDriver</code> type (<code>ChromeDriver</code> in this case) in a single line.</p></dd>&#13;
</dl>&#13;
&#13;
<p>This approach has different benefits. First, it enables less verbose tests since the driver resolution and <code>WebDriver</code> instantiation are simultaneous. Second, it allows specifying the browser type (i.e., Chrome, Firefox, etc.) simply by selecting a specific manager (i.e., <code>chromedriver()</code>, <code>firefoxdriver()</code>, etc.). Moreover, we can easily <a data-primary="parameterized managers" data-type="indexterm" id="idm45849755147808"/>parameterize the selection of a manager to create cross-browser tests (see <a data-type="xref" href="ch08.html#ch08">Chapter 8</a>). Finally, the WebDriverManager allows you to specify browser-specific capabilities (see <a data-type="xref" href="ch05.html#ch05">Chapter 5</a>) and effortlessly use browsers in a Docker container (see <a data-type="xref" href="ch06.html#ch06">Chapter 6</a>).</p>&#13;
&#13;
<p>WebDriverManager keeps a reference to <code>WebDriver</code> objects created using this approach. In addition, it <a data-primary="closing WebDriver objects" data-type="indexterm" id="idm45849755112480"/><a data-primary="quitting WebDriver objects" data-type="indexterm" id="idm45849755111760"/>launches a shutdown hook to watch the correct disposal of <code>WebDriver</code> instances. If <code>WebDriver</code> sessions are live when the JVM is shutting down, WebDriverManager quits these browser(s). You can play with this feature by <a data-primary="teardown() method" data-type="indexterm" id="idm45849755110112"/>removing the <code>teardown()</code> method of the example before.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Although WebDriverManager quits the <code>WebDriver</code> objects automatically,  I recommend you do it explicitly in each test. Otherwise, in the typical case of executing a test suite, all browsers remain open until the end of the test suite <a data-startref="ch3_term1" data-type="indexterm" id="idm45849755107344"/><a data-startref="ch3_term2" data-type="indexterm" id="idm45849755106640"/><a data-startref="ch3_term8" data-type="indexterm" id="idm45849755105968"/><a data-startref="ch3_term9" data-type="indexterm" id="idm45849755105296"/><a data-startref="ch3_term10" data-type="indexterm" id="idm45849755104624"/><a data-startref="ch3_term11" data-type="indexterm" id="idm45849755103952"/><a data-startref="ch3_term12" data-type="indexterm" id="idm45849755103280"/><a data-startref="ch3_term86" data-type="indexterm" id="idm45849755102608"/><a data-startref="ch3_term87" data-type="indexterm" id="idm45849755101936"/><a data-startref="ch3_term88" data-type="indexterm" id="idm45849755101264"/>execution.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebDriver Methods" data-type="sect2"><div class="sect2" id="idm45849755100336">&#13;
<h2>WebDriver Methods</h2>&#13;
&#13;
<p>The <code>WebDriver</code> interface provides a <a data-primary="close() method" data-type="indexterm" id="idm45849755097936"/><a data-primary="findElement() method" data-type="indexterm" id="idm45849755097200"/><a data-primary="findElements() method" data-type="indexterm" id="idm45849755096528"/><a data-primary="getCurrentURL() method" data-type="indexterm" id="idm45849755095856"/><a data-primary="get() method" data-type="indexterm" id="idm45849755095184"/><a data-primary="getPageSource() method" data-type="indexterm" id="idm45849755094512"/><a data-primary="getTitle() method" data-type="indexterm" id="idm45849755093840"/><a data-primary="getWindowHandle() method" data-type="indexterm" id="idm45849755093168"/><a data-primary="getWindowHandles() method" data-type="indexterm" id="idm45849755092528"/><a data-primary="manage() method" data-type="indexterm" id="idm45849755091888"/><a data-primary="navigate() method" data-type="indexterm" id="idm45849755091216"/><a data-primary="quit() method" data-type="indexterm" id="idm45849755090544"/><a data-primary="switchTo() method" data-type="indexterm" id="idm45849755089872"/><a data-primary="Selenium WebDriver API" data-secondary="methods of" data-type="indexterm" id="ch3_term13"/>group of methods that are the basis of the Selenium WebDriver API. <a data-type="xref" href="#webdriver-methods">Table 3-2</a> presents a summary of these methods. <a data-type="xref" href="#basic_webdriver_methods">Example 3-3</a> shows a basic test using several of these methods.</p>&#13;
<table id="webdriver-methods">&#13;
<caption><span class="label">Table 3-2. </span>WebDriver methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Return</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">get</code><code class="o">(</code><code class="n">String</code> <code class="n">url</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Load a web page in the current browser.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getCurrentUrl</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the URL currently loaded in the browser.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getTitle</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the title (<code>&lt;title&gt;</code> HTML tag) of the current web page.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">findElement</code><code class="o">(</code><code class="n">By</code> <code class="n">by</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">WebElement</code></pre></div></td>&#13;
<td><p>Find the first <code>WebElement</code> using a given locator in the current web page. In other words, if several elements match the locator, the first one (in the Document Object Model [DOM]) is returned (see <a data-type="xref" href="#location">“Locating WebElements”</a> for further details).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">findElements</code><code class="o">(</code><code class="n">By</code> <code class="n">by</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">List</code><code class="o">&lt;</code><code class="n">WebElement</code><code class="o">&gt;</code></pre></div></td>&#13;
<td><p>Find every <code>WebElement</code> using a given locator in the current web page (see also <a data-type="xref" href="#location">“Locating WebElements”</a>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getPageSource</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the HTML source code of the current web page.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">navigate</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Navigation</code></pre></div></td>&#13;
<td><p>Access the browser history and navigate to a given URL (see <a data-type="xref" href="ch04.html#ch04">Chapter 4</a>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getWindowHandle</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the <em>window handle</em>, i.e., a unique identifier for the open window in the current browser (see <a data-type="xref" href="ch04.html#ch04">Chapter 4</a>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getWindowHandles</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Set</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code></pre></div></td>&#13;
<td><p>Get the set of window handles currently open in the current browser (see also <a data-type="xref" href="ch04.html#ch04">Chapter 4</a>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">switchTo</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">TargetLocator</code></pre></div></td>&#13;
<td><p>Select a frame or window in the current browser (see <a data-type="xref" href="ch04.html#ch04">Chapter 4</a>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">manage</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Options</code></pre></div></td>&#13;
<td><p>Generic utility for managing different aspects of the browser (e.g., browser size and position, cookies, timeouts, or logs).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">close</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Close the current window, quitting the browser if there are no more windows opened.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">quit</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Close all windows and quit the browser.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>From now on, I illustrate the examples <a data-primary="test logic" data-type="indexterm" id="idm45849754556512"/><a data-primary="JUnit 4" data-secondary="examples convention with" data-type="indexterm" id="idm45849754555904"/><a data-primary="JUnit 5" data-secondary="examples convention with" data-type="indexterm" id="idm45849754536608"/><a data-primary="JUnit 5 with Selenium-Jupiter" data-secondary="examples convention with" data-type="indexterm" id="idm45849754535696"/><a data-primary="Selenium-Jupiter" data-secondary="with unit testing frameworks" data-secondary-sortas="unit testing frameworks" data-type="indexterm" id="idm45849754534816"/><a data-primary="TestNG" data-secondary="examples convention with" data-type="indexterm" id="idm45849754515312"/><a data-primary="unit testing frameworks" data-secondary="Selenium-Jupiter with" data-type="indexterm" id="idm45849754514400"/>showing only the test logic. These tests use a <code>WebDriver</code> object created before the test (in the setup method) and closed after the test (in the teardown method). As a convention, I show the JUnit 5 tests in the book (although you can find them also for JUnit 4, Selenium-Jupiter, and TestNG in the examples repository).</p>&#13;
</div>&#13;
<div data-type="example" id="basic_webdriver_methods">&#13;
<h5><span class="label">Example 3-3. </span>Test using several basic methods of the Selenium WebDriver API</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testBasicMethods</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">sutUrl</code><code> </code><code class="o">=</code><code> </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">sutUrl</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO3-1" id="co_webdriver_fundamentals_CO3-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"Hands-On Selenium WebDriver with Java"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO3-2" id="co_webdriver_fundamentals_CO3-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">sutUrl</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO3-3" id="co_webdriver_fundamentals_CO3-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getPageSource</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">containsIgnoringCase</code><code class="o">(</code><code class="s">"&lt;/html&gt;"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO3-4" id="co_webdriver_fundamentals_CO3-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO3-1" id="callout_webdriver_fundamentals_CO3-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We open the practice website.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO3-2" id="callout_webdriver_fundamentals_CO3-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We verify the page title is as expected.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO3-3" id="callout_webdriver_fundamentals_CO3-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We confirm the current URL is still the same.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO3-4" id="callout_webdriver_fundamentals_CO3-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We check that the source HTML of the page <a data-startref="ch3_term13" data-type="indexterm" id="idm45849754419840"/>contains a given tag.</p></dd>&#13;
</dl>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45849754377456">&#13;
<h5>Convention for Test Names and Classes in the Examples Repository</h5>&#13;
<p>For ease of locating tests in the <a data-primary="examples repositories" data-secondary="naming convention for" data-type="indexterm" id="idm45849754375968"/><a data-primary="repositories" data-secondary="for examples" data-secondary-sortas="examples" data-type="indexterm" id="idm45849754374992"/><a data-primary="repositories" data-secondary="naming convention for examples in" data-type="indexterm" id="idm45849754373776"/>examples repository, I follow a naming convention. The name of each presented test always starts with the word <code>test</code> followed by a descriptive label. Then, I use this label as the prefix of the Java class containing the test. For instance, you can find the previous test (called <code>testBasicMethods</code>) in the classes <code>BasicMethodsJUnit4Test</code> (using JUnit 4), <code>BasicMethodsJupiterTest</code> (using JUnit 5), <code>BasicMethodsSelJupTest</code> (using JUnit 5 plus Selenium-Jupiter), and <code>BasicMethodsNGTest</code> (using TestNG).</p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Session Identifier" data-type="sect2"><div class="sect2" id="idm45849754369792">&#13;
<h2>Session Identifier</h2>&#13;
&#13;
<p>Each time we <a data-primary="browser sessions, identifier for" data-type="indexterm" id="idm45849754368432"/><a data-primary="drivers" data-secondary="and browser session identification" data-secondary-sortas="browser session identification" data-type="indexterm" id="idm45849754367376"/><a data-primary="getSessionId() method" data-type="indexterm" id="idm45849754366192"/><a data-primary="sessionId (session identifier)" data-type="indexterm" id="idm45849754365520"/>instantiate a <code>WebDriver</code> object, the underlying driver (e.g., chromedriver, geckodriver, etc.) creates a unique identifier called <em>sessionId</em> to track the browser session. We can use this value in our test to univocally identify a browser session. For that, we need to invoke the method <code>getSessionId()</code> in our driver object. Notice this <a data-primary="objects" data-secondary="RemoteWebDriver and" data-type="indexterm" id="idm45849754363376"/><a data-primary="RemoteWebDriver class" data-secondary="objects and" data-type="indexterm" id="idm45849754362400"/>method is not available in <a data-type="xref" href="#webdriver-methods">Table 3-2</a>, because it belongs to the <code>RemoteWebDriver</code> class. In practice, the types we use to control browsers (e.g., <code>ChromeDriver</code>, <code>FirefoxDriver</code>, etc.) inherit from that class. Therefore, we simply need to cast the <code>WebDriver</code> object to <code>RemoteWebDriver</code> to invoke the <code>getSessionId()</code> method. <a data-type="xref" href="#sessionid">Example 3-4</a> shows a basic test using it.</p>&#13;
<div data-type="example" id="sessionid">&#13;
<h5><span class="label">Example 3-4. </span>Test reading the sessionId</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testSessionId</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">SessionId</code><code> </code><code class="n">sessionId</code><code> </code><code class="o">=</code><code> </code><code class="o">(</code><code class="o">(</code><code class="n">RemoteWebDriver</code><code class="o">)</code><code> </code><code class="n">driver</code><code class="o">)</code><code class="o">.</code><code class="na">getSessionId</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO4-1" id="co_webdriver_fundamentals_CO4-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">sessionId</code><code class="o">)</code><code class="o">.</code><code class="na">isNotNull</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO4-2" id="co_webdriver_fundamentals_CO4-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"The sessionId is {}"</code><code class="o">,</code><code> </code><code class="n">sessionId</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO4-3" id="co_webdriver_fundamentals_CO4-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO4-1" id="callout_webdriver_fundamentals_CO4-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We cast the driver object to <code>RemoteWebDriver</code> and read its sessionId.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO4-2" id="callout_webdriver_fundamentals_CO4-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We verify the sessionId has some value.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO4-3" id="callout_webdriver_fundamentals_CO4-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We log the sessionId on the standard output.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebDriver Disposal" data-type="sect2"><div class="sect2" id="idm45849754291952">&#13;
<h2>WebDriver Disposal</h2>&#13;
&#13;
<p>As you can see in <a data-type="xref" href="#webdriver-methods">Table 3-2</a>, there are <a data-primary="close() method" data-type="indexterm" id="idm45849754251248"/><a data-primary="quit() method" data-type="indexterm" id="idm45849754250544"/><a data-primary="closing WebDriver objects" data-type="indexterm" id="idm45849754249872"/><a data-primary="quitting WebDriver objects" data-type="indexterm" id="idm45849754249232"/><a data-primary="Selenium WebDriver API" data-secondary="quitting versus closing in" data-type="indexterm" id="idm45849754248592"/>two methods to dispose of the <code>WebDriver</code> objects, called <code>close()</code> and <code>quit().</code> As a general rule, I use <code>quit()</code> in the examples since this method closes the browser and every associated window. On the other hand, the method <code>close()</code> terminates only the current window. Therefore, I only use <code>close()</code> in the case of handling different windows (or tabs) in the same browser, and I want to finish some of the windows (or tabs) and still <a data-startref="ch3_term3" data-type="indexterm" id="idm45849754244800"/><a data-startref="ch3_term4" data-type="indexterm" id="idm45849754244096"/><a data-startref="ch3_term5" data-type="indexterm" id="idm45849754243424"/>use the rest.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Locating WebElements" data-type="sect1"><div class="sect1" id="location">&#13;
<h1>Locating WebElements</h1>&#13;
&#13;
<p>One of the most <a data-primary="WebElements, locating" data-secondary="methods for" data-type="indexterm" id="ch3_term19"/>relevant aspects of the Selenium WebDriver API is the ability to interact with the different elements of a web page. These elements are handled by Selenium WebDriver using the interface <code>WebElement</code>, an abstraction for HTML elements. As introduced in <a data-type="xref" href="#webdriver-methods">Table 3-2</a>, there are <a data-primary="findElement() method" data-type="indexterm" id="idm45849754237776"/><a data-primary="findElements() method" data-type="indexterm" id="idm45849754237072"/>two methods to locate <code>WebElement</code> in a given web page. First, the method <code>findElement()</code> returns the first occurrence (if any) of a given node in the Document Object Model (DOM). Second, the method <code>find​Ele⁠ments()</code> returns a list of DOM nodes. Both methods accept a parameter <code>By</code>, which specifies the location strategy.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Document Object Model (DOM)" data-type="sect2"><div class="sect2" id="dom">&#13;
<h2>The Document Object Model (DOM)</h2>&#13;
&#13;
<p>The DOM is a <a data-primary="DOM (Document Object Model)" data-secondary="function and structure of" data-type="indexterm" id="ch3_term14"/><a data-primary="WebElements, locating" data-secondary="DOM structure for" data-type="indexterm" id="ch3_term15"/><a data-primary="HTML" data-secondary="for locating WebElements" data-secondary-sortas="locating WebElements" data-type="indexterm" id="ch3_term16"/><a data-primary="HTML" data-secondary="tags" data-type="indexterm" id="ch3_term17"/><a data-primary="tag name, HTML" data-type="indexterm" id="ch3_term18"/>cross-platform interface that allows representing XML-like documents (e.g., web pages, based on HTML) in a tree structure. <a data-type="xref" href="#basic_html">Example 3-5</a> shows an small web page; the associated DOM tree structure in memory is represented in <a data-type="xref" href="#dom-example">Figure 3-1</a>. As you can see, each HTML tag (e.g., <code>&lt;html&gt;</code>, <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code>, <code>&lt;a&gt;</code>, etc.) produces a node (or element) in the tree. Then, each standard HTML attribute (e.g., <code>charset</code>, <code>href</code>, etc.) produces an equivalent DOM <em>property</em>. Also, the text content of the HTML tags is available in the resulting tree. Languages like JavaScript use DOM methods to access and modify the tree structure. Thanks to this, web pages are dynamic and can change their layout and content in response to user events.</p>&#13;
<div data-type="example" id="basic_html">&#13;
<h5><span class="label">Example 3-5. </span>Basic web page</h5>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="cp">&lt;!DOCTYPE html&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">html</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">head</code><code class="p">&gt;</code>&#13;
  <code class="p">&lt;</code><code class="nt">meta</code> <code class="na">charset</code><code class="o">=</code><code class="s">"utf-8"</code><code class="p">&gt;</code>&#13;
  <code class="p">&lt;</code><code class="nt">title</code><code class="p">&gt;</code>DOM example<code class="p">&lt;/</code><code class="nt">title</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">head</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">body</code><code class="p">&gt;</code>&#13;
  <code class="p">&lt;</code><code class="nt">h1</code><code class="p">&gt;</code>Heading text<code class="p">&lt;/</code><code class="nt">h1</code><code class="p">&gt;</code>&#13;
  <code class="p">&lt;</code><code class="nt">a</code> <code class="na">href</code><code class="o">=</code><code class="s">"#"</code><code class="p">&gt;</code>Link text<code class="p">&lt;/</code><code class="nt">a</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">body</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;/</code><code class="nt">html</code><code class="p">&gt;</code></pre></div>&#13;
&#13;
<figure><div class="figure" id="dom-example">&#13;
<img alt="hosw 0301" src="assets/hosw_0301.png"/>&#13;
<h6><span class="label">Figure 3-1. </span>DOM structure generated from <a data-type="xref" href="#basic_html">Example 3-5</a></h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebElement Methods" data-type="sect2"><div class="sect2" id="idm45849754176624">&#13;
<h2>WebElement Methods</h2>&#13;
&#13;
<p><a data-type="xref" href="#webelement-methods">Table 3-3</a> contains a <a data-startref="ch3_term14" data-type="indexterm" id="idm45849754174400"/><a data-startref="ch3_term15" data-type="indexterm" id="idm45849754173696"/><a data-startref="ch3_term16" data-type="indexterm" id="idm45849754173024"/><a data-startref="ch3_term17" data-type="indexterm" id="idm45849754172352"/><a data-startref="ch3_term18" data-type="indexterm" id="idm45849754171680"/><a data-primary="click() method" data-type="indexterm" id="idm45849754171008"/><a data-primary="sendKeys() method" data-type="indexterm" id="idm45849754170336"/><a data-primary="submit() method" data-type="indexterm" id="idm45849754169664"/>summary of the available methods in the <code>WebElement</code> class. You will find examples of each method in the following parts of this section.</p>&#13;
<table id="webelement-methods">&#13;
<caption><span class="label">Table 3-3. </span>WebElement methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Return</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">click</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Perform a mouse click (i.e., a left-click) in the current element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">submit</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Send a web form (when the current element is a form).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">sendKeys</code><code class="o">(</code><code class="n">CharSequence</code><code class="o">...</code> <code class="n">keys</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Simulate typing with the keyboard (e.g., in input text elements).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">clear</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code></pre></div></td>&#13;
<td><p>Reset the value <a data-primary="clear() method" data-type="indexterm" id="idm45849738898944"/>of an input text element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getTagName</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the tag <a data-primary="getTagName() method" data-type="indexterm" id="idm45849738823264"/>name of the element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getDomProperty</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the value <a data-primary="getDomProperty() method" data-type="indexterm" id="idm45849738754672"/>of a DOM property.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getDomAttribute</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the value of the <a data-primary="getDomAttribute() method" data-type="indexterm" id="idm45849738703104"/>element attribute as declared in its HTML markup.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getAttribute</code><code class="o">(</code><code class="n">String</code> <code class="n">name</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the value of the <a data-primary="getAttribute() method" data-type="indexterm" id="idm45849738657168"/>given HTML attribute (e.g., <code>class</code>) as a <code>String</code>. More precisely, this method attempts to get a meaningful value of the DOM property with the given name if it exists. For instance, for boolean attributes (e.g., <code>readonly</code>), it returns <code>true</code> if it exists or <code>null</code> if not.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getAriaRole</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get element role <a data-primary="getAriaRole() method" data-type="indexterm" id="idm45849738615456"/>as defined on the <a href="https://www.w3.org/TR/wai-aria">W3C WAI-ARIA</a> specification.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getAccessibleName</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get element accessible <a data-primary="getAccessibleName() method" data-type="indexterm" id="idm45849738553856"/>name as defined by WAI-ARIA.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">isSelected</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code></pre></div></td>&#13;
<td><p>Determine if a <a data-primary="isSelected() method" data-type="indexterm" id="idm45849738548288"/>checkbox, option in a select, or radio button is selected.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">isEnabled</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code></pre></div></td>&#13;
<td><p>Determine if an <a data-primary="isEnabled() method" data-type="indexterm" id="idm45849738559472"/>element is enabled or not (e.g., a form field).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">isDisplayed</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code></pre></div></td>&#13;
<td><p>Determine if an <a data-primary="isDisplayed() method" data-type="indexterm" id="idm45849738481808"/>element is visible or not.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getText</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the visible <a data-primary="getText() method" data-type="indexterm" id="idm45849738394800"/>text of the element, including its sub-elements (if any).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getLocation</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Point</code></pre></div></td>&#13;
<td><p>Get the <a data-primary="getLocation() method" data-type="indexterm" id="idm45849738374800"/>position (<em>x</em> and <em>y</em> coordinates) from the top-left corner of the rendered element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getSize</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Dimension</code></pre></div></td>&#13;
<td><p>Get the width <a data-primary="getSize() method" data-type="indexterm" id="idm45849738308032"/>and height of the rendered element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getRect</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">Rectangle</code></pre></div></td>&#13;
<td><p>Get the location <a data-primary="getRect() method" data-type="indexterm" id="idm45849738331664"/>and size of the rendered element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getCssValue</code><code class="o">(</code><code class="n">String</code> <code class="n">propName</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code></pre></div></td>&#13;
<td><p>Get the value <a data-primary="getCssValue() method" data-type="indexterm" id="idm45849738244528"/>of a CSS property of the element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">getShadowRoot</code><code class="o">()</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">SearchContext</code></pre></div></td>&#13;
<td><p>Get the shadow <a data-primary="getShadowRoot() method" data-type="indexterm" id="idm45849738219440"/>root to search in a shadow tree (see <a data-type="xref" href="ch04.html#shadow-dom">“The Shadow DOM”</a>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">findElements</code><code class="o">(</code><code class="n">By</code> <code class="n">by</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">List</code><code class="o">&lt;</code><code class="n">WebElement</code><code class="o">&gt;</code></pre></div></td>&#13;
<td><p>Find all subelements <a data-primary="findElements() method" data-type="indexterm" id="idm45849738127632"/>that match the locator within the current element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">findElement</code><code class="o">(</code><code class="n">By</code> <code class="n">by</code><code class="o">)</code></pre></div></td>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">WebElement</code></pre></div></td>&#13;
<td><p>Find the first subelement <a data-primary="findElement() method" data-type="indexterm" id="idm45849738080720"/>that matches the locator within the current element.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Location Strategies" data-type="sect2"><div class="sect2" id="idm45849754116624">&#13;
<h2>Location Strategies</h2>&#13;
&#13;
<p>Selenium WebDriver <a data-startref="ch3_term19" data-type="indexterm" id="idm45849738078416"/>provides eight basic location strategies, summarized in <a data-type="xref" href="#location-strategies">Table 3-4</a>. In addition, as explained in the next subsections, there are other advanced location strategies, namely, compound and relative locators.</p>&#13;
&#13;
<p>We specify the basic locators using the class <code>By</code> in the Selenium WebDriver API. The following <a data-primary="attributes, HTML" data-type="indexterm" id="ch3_term26"/><a data-primary="class, HTML attribute" data-type="indexterm" id="ch3_term27"/><a data-primary="CSS" data-secondary="selectors" data-type="indexterm" id="idm45849738081520"/><a data-primary="HTML" data-secondary="attributes" data-type="indexterm" id="ch3_term28"/><a data-primary="Id, HTML attribute" data-type="indexterm" id="ch3_term29"/><a data-primary="link text" data-type="indexterm" id="idm45849738057712"/><a data-primary="name, HTML attribute" data-type="indexterm" id="ch3_term31"/><a data-primary="XPath (XML Path Language)" data-type="indexterm" id="idm45849738056096"/><a data-primary="WebElements, locating" data-secondary="CSS selectors for" data-type="indexterm" id="idm45849738055456"/><a data-primary="WebElements, locating" data-secondary="HTML attributes for" data-type="indexterm" id="ch3_term32"/><a data-primary="WebElements, locating" data-secondary="link text for" data-type="indexterm" id="idm45849738053296"/><a data-primary="WebElements, locating" data-secondary="summary of strategies for" data-type="indexterm" id="idm45849738052352"/><a data-primary="WebElements, locating" data-secondary="XPath for" data-type="indexterm" id="idm45849738035072"/>subsections show examples of all these strategies. We use the <a href="https://bonigarcia.dev/selenium-webdriver-java/web-form.html">practice web form</a> to that aim. <a data-type="xref" href="#practice-site-web-form">Figure 3-2</a> shows a screenshot of this form.</p>&#13;
<table id="location-strategies">&#13;
<caption><span class="label">Table 3-4. </span>Summary of the location strategies in Selenium WebDriver</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Locator</th>&#13;
<th>Finds elements based on</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Tag name</p></td>&#13;
<td><p>The name of HTML tag (e.g., <code>a</code>, <code>p</code>, <code>div</code>, <code>img</code>, etc.).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Link text</p></td>&#13;
<td><p>The exact text value displayed by a link (i.e., <code>a</code> HTML tag).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Partial link text</p></td>&#13;
<td><p>The text contained in a link (i.e., <code>a</code> HTML tag).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Name</p></td>&#13;
<td><p>The value of the attribute <code>name</code>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Id</p></td>&#13;
<td><p>The value of the attribute <code>id</code>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Class name</p></td>&#13;
<td><p>The value of the attribute <code>class</code>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>CSS selector</p></td>&#13;
<td><p>Patterns that follow the <a href="https://www.w3.org/TR/selectors">W3C Selectors</a> recommendation. The original aim of CSS patterns is to select element(s) in a web page to apply CSS styles. Selenium WebDriver allows reusing these CSS selectors to find web elements and interact with them.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>XPath</p></td>&#13;
<td><p>Queries that follow the <a href="https://www.w3.org/TR/xpath">XPath</a> (XML Path Language) language. XPath is a W3C standard query language for selecting nodes from an XML-like document (e.g., web pages).</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<figure><div class="figure" id="practice-site-web-form">&#13;
<img alt="hosw 0302" src="assets/hosw_0302.png"/>&#13;
<h6><span class="label">Figure 3-2. </span>Practice web form used in the locator examples</h6>&#13;
</div></figure>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Locating by HTML tag name" data-type="sect3"><div class="sect3" id="idm45849738012128">&#13;
<h3>Locating by HTML tag name</h3>&#13;
&#13;
<p>One of the most <a data-primary="HTML" data-secondary="tags" data-type="indexterm" id="idm45849738010752"/><a data-primary="tag name, HTML" data-type="indexterm" id="ch3_term23"/><a data-primary="WebElements, locating" data-secondary="HTML tag name for" data-type="indexterm" id="ch3_term24"/><a data-primary="HTML" data-secondary="for locating WebElements" data-secondary-sortas="locating WebElements" data-type="indexterm" id="ch3_term25"/>basic strategies for finding web elements is by tag name. <a data-type="xref" href="#by-tagname">Example 3-6</a> shows a test using this strategy. This test locates the text area available in the practice web form, whose HTML markup is the following:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">textarea</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-control"</code> <code class="na">id</code><code class="o">=</code><code class="s">"my-textarea"</code> <code class="na">rows</code><code class="o">=</code><code class="s">"3"</code><code class="p">&gt;&lt;/</code><code class="nt">textarea</code><code class="p">&gt;</code></pre>&#13;
<div data-type="example" id="by-tagname">&#13;
<h5><span class="label">Example 3-6. </span>Test using a locator strategy by tag name</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByTagName</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">textarea</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"textarea"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO5-1" id="co_webdriver_fundamentals_CO5-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textarea</code><code class="o">.</code><code class="na">getDomAttribute</code><code class="o">(</code><code class="s">"rows"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"3"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO5-2" id="co_webdriver_fundamentals_CO5-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO5-1" id="callout_webdriver_fundamentals_CO5-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use <a data-primary="By.tagName() locator" data-type="indexterm" id="idm45849737923888"/><a data-primary="findElement() method" data-type="indexterm" id="idm45849737923152"/>the locator <code>By.tagName("textarea")</code> to find this element. In this case, since this is the only text area declared on the web page, we can be sure that the method <code>findElement()</code> will locate this element.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO5-2" id="callout_webdriver_fundamentals_CO5-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We ensure the attribute <code>rows</code> value is the same as <a data-startref="ch3_term24" data-type="indexterm" id="idm45849737918720"/>defined in the HTML markup.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Locating by HTML attributes (name, id, class)" data-type="sect3"><div class="sect3" id="idm45849737917600">&#13;
<h3>Locating by HTML attributes (name, id, class)</h3>&#13;
&#13;
<p>Another straightforward <a data-primary="myprop attribute" data-type="indexterm" id="ch3_term30"/>location strategy is to find web elements by an HTML attribute, i.e., name, id, or class. Consider the following input text available in the practice web form. Notice that it includes the standard attributes <code>class</code>, <code>name</code>, <code>id</code>, and the nonstandard attribute <code>myprop</code> (included to illustrate the difference between several <code>WebDriver</code> methods). <a data-type="xref" href="#by-html-attr">Example 3-7</a> shows a test using this strategy.</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">input</code> <code class="na">type</code><code class="o">=</code><code class="s">"text"</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-control"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-text"</code> <code class="na">id</code><code class="o">=</code><code class="s">"my-text-id"</code>&#13;
    <code class="na">myprop</code><code class="o">=</code><code class="s">"myvalue"</code><code class="p">&gt;</code></pre>&#13;
<div data-type="example" id="by-html-attr">&#13;
<h5><span class="label">Example 3-7. </span>Test using locators by HTML attributes (name, id, and class)</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByHtmlAttributes</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// By name&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">textByName</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-text"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-1" id="co_webdriver_fundamentals_CO6-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textByName</code><code class="o">.</code><code class="na">isEnabled</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-2" id="co_webdriver_fundamentals_CO6-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// By id&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">textById</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"my-text-id"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-3" id="co_webdriver_fundamentals_CO6-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textById</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"type"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"text"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-4" id="co_webdriver_fundamentals_CO6-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textById</code><code class="o">.</code><code class="na">getDomAttribute</code><code class="o">(</code><code class="s">"type"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"text"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textById</code><code class="o">.</code><code class="na">getDomProperty</code><code class="o">(</code><code class="s">"type"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"text"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textById</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"myprop"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"myvalue"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-5" id="co_webdriver_fundamentals_CO6-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textById</code><code class="o">.</code><code class="na">getDomAttribute</code><code class="o">(</code><code class="s">"myprop"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"myvalue"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">textById</code><code class="o">.</code><code class="na">getDomProperty</code><code class="o">(</code><code class="s">"myprop"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isNull</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// By class name&#13;
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">WebElement</code><code class="o">&gt;</code><code> </code><code class="n">byClassName</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElements</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">className</code><code class="o">(</code><code class="s">"form-control"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-6" id="co_webdriver_fundamentals_CO6-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">byClassName</code><code class="o">.</code><code class="na">size</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isPositive</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-7" id="co_webdriver_fundamentals_CO6-7"><img alt="7" src="assets/7.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">byClassName</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="mi">0</code><code class="o">)</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"name"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"my-text"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO6-8" id="co_webdriver_fundamentals_CO6-8"><img alt="8" src="assets/8.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-1" id="callout_webdriver_fundamentals_CO6-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate the text input by name.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-2" id="callout_webdriver_fundamentals_CO6-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We assert that the element is enabled (i.e., the user can type in it).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-3" id="callout_webdriver_fundamentals_CO6-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We find the same text input element by id.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-4" id="callout_webdriver_fundamentals_CO6-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>This assertion (and the next two) returns the same value since the attribute <code>type</code> is standard, and as previously explained, it becomes a <em>property</em> in the DOM.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-5" id="callout_webdriver_fundamentals_CO6-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>This assertion (and the next two) return different values since the attribute <code>myprop</code> is not standard, and for this reason, it is not available as a DOM property.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-6" id="callout_webdriver_fundamentals_CO6-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>We locate a list of elements by class.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-7" id="callout_webdriver_fundamentals_CO6-7"><img alt="7" src="assets/7.png"/></a></dt>&#13;
<dd><p>We verify the list has more than one element.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO6-8" id="callout_webdriver_fundamentals_CO6-8"><img alt="8" src="assets/8.png"/></a></dt>&#13;
<dd><p>We check that the first element found by class is the same as the input text located <a data-startref="ch3_term27" data-type="indexterm" id="idm45849737517536"/><a data-startref="ch3_term29" data-type="indexterm" id="idm45849737516928"/><a data-startref="ch3_term30" data-type="indexterm" id="idm45849737516320"/><a data-startref="ch3_term31" data-type="indexterm" id="idm45849737515712"/>before.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Locating by link text" data-type="sect3"><div class="sect3" id="idm45849737591344">&#13;
<h3>Locating by link text</h3>&#13;
&#13;
<p>The last basic <a data-primary="link text" data-type="indexterm" id="idm45849737513776"/><a data-primary="WebElements, locating" data-secondary="link text for" data-type="indexterm" id="idm45849737513168"/>locator is by link text. This strategy is twofold: locate by exact and by partial text occurrence. We use a link in the practice web form to illustrate this locator in the following HTML markup. Then, <a data-type="xref" href="#by-link">Example 3-8</a> shows a test using these locators.</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">a</code> <code class="na">href</code><code class="o">=</code><code class="s">"./index.html"</code><code class="p">&gt;</code>Return to index<code class="p">&lt;/</code><code class="nt">a</code><code class="p">&gt;</code></pre>&#13;
<div data-type="example" id="by-link">&#13;
<h5><span class="label">Example 3-8. </span>Test using locators by text link</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByLinkText</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">linkByText</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">linkText</code><code class="o">(</code><code class="s">"Return to index"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO7-1" id="co_webdriver_fundamentals_CO7-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">linkByText</code><code class="o">.</code><code class="na">getTagName</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"a"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO7-2" id="co_webdriver_fundamentals_CO7-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">linkByText</code><code class="o">.</code><code class="na">getCssValue</code><code class="o">(</code><code class="s">"cursor"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"pointer"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO7-3" id="co_webdriver_fundamentals_CO7-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">linkByPartialText</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">partialLinkText</code><code class="o">(</code><code class="s">"index"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO7-4" id="co_webdriver_fundamentals_CO7-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">linkByPartialText</code><code class="o">.</code><code class="na">getLocation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">linkByText</code><code class="o">.</code><code class="na">getLocation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO7-5" id="co_webdriver_fundamentals_CO7-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">linkByPartialText</code><code class="o">.</code><code class="na">getRect</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">linkByText</code><code class="o">.</code><code class="na">getRect</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO7-1" id="callout_webdriver_fundamentals_CO7-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate an element by its full link text.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO7-2" id="callout_webdriver_fundamentals_CO7-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We check its tag name is <code>a</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO7-3" id="callout_webdriver_fundamentals_CO7-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We check its CSS property <code>cursor</code> is <code>pointer</code> (i.e., the style typically used for clickable elements).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO7-4" id="callout_webdriver_fundamentals_CO7-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We find an element by partial link text. This link will be the same as in step 1.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO7-5" id="callout_webdriver_fundamentals_CO7-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We verify both elements share the same <a data-startref="ch3_term25" data-type="indexterm" id="idm45849737296576"/>position and size.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Locating by CSS selectors" data-type="sect3"><div class="sect3" id="idm45849737352736">&#13;
<h3>Locating by CSS selectors</h3>&#13;
&#13;
<p>The strategies we have seen so far are easy to apply but also have some limitations. First, <a data-primary="HTML" data-secondary="tags" data-type="indexterm" id="idm45849737294064"/><a data-primary="tag name, HTML" data-type="indexterm" id="idm45849737293216"/><a data-primary="WebElements, locating" data-secondary="HTML tag name for" data-type="indexterm" id="idm45849737292608"/>locating by tag name can be tricky since it is likely that the same tag will occur many times on a web page. Next, finding elements by HTML attributes (name, id, or class) is a limited approach since these attributes are not always <a data-startref="ch3_term26" data-type="indexterm" id="idm45849737291632"/><a data-startref="ch3_term28" data-type="indexterm" id="idm45849737291024"/><a data-startref="ch3_term32" data-type="indexterm" id="idm45849737290416"/>available. In addition, ids can be autogenerated and volatile between different sessions. Lastly, the <a data-primary="link text" data-type="indexterm" id="idm45849737289568"/><a data-primary="HTML" data-secondary="link text for" data-type="indexterm" id="idm45849737288960"/>location by link text is limited only to links. To overcome these limitations, <a data-primary="CSS" data-secondary="selectors" data-type="indexterm" id="ch3_term33"/><a data-primary="WebElements, locating" data-secondary="CSS selectors for" data-type="indexterm" id="ch3_term34"/>Selenium WebDriver provides two powerful location strategies: CSS selector and XPath.</p>&#13;
&#13;
<p>There are many possibilities for creating CSS selectors. <a data-type="xref" href="#basic-css-selectors">Table 3-5</a> shows a comprehensive summary with the basic CSS selectors.</p>&#13;
<table id="basic-css-selectors">&#13;
<caption><span class="label">Table 3-5. </span>Basic CSS selectors</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Category</th>&#13;
<th>Syntax</th>&#13;
<th>Description</th>&#13;
<th>Example</th>&#13;
<th>Example explanation</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Universal</p></td>&#13;
<td><p><code>*</code></p></td>&#13;
<td><p>Select all elements</p></td>&#13;
<td><p><code>*</code></p></td>&#13;
<td><p>Match all elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Type</p></td>&#13;
<td><p><code>elementName</code></p></td>&#13;
<td><p>Select all elements with a given tag name</p></td>&#13;
<td><p><code>input</code></p></td>&#13;
<td><p>Match all <code>&lt;input&gt;</code> elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Class</p></td>&#13;
<td><p><code>.classname</code></p></td>&#13;
<td><p>Select elements with a given <code>class</code> attribute</p></td>&#13;
<td><p><code>.form-control</code></p></td>&#13;
<td><p>Match all elements with class of <code>form-control</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Id</p></td>&#13;
<td><p><code>#id</code></p></td>&#13;
<td><p>Select elements with a given <code>id</code> attribute</p></td>&#13;
<td><p><code>#my-text-id</code></p></td>&#13;
<td><p>Match all elements with id <span class="keep-together"><code>my-text-id</code></span></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Attribute</p></td>&#13;
<td><p><code>[attr]</code></p></td>&#13;
<td><p>Select elements with a given attribute</p></td>&#13;
<td><p><code>[target]</code></p></td>&#13;
<td><p>Match all elements with a <span class="keep-together"><code>target</code></span> attribute</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>[attr=value]</code></p></td>&#13;
<td><p>Select elements with a given attribute and value</p></td>&#13;
<td><p><code>[target=_blank]</code></p></td>&#13;
<td><p>Match all elements with a <span class="keep-together"><code>target="_blank"</code></span> attribute</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>[attr~=value]</code></p></td>&#13;
<td><p>Select elements with a given attribute containing some text value</p></td>&#13;
<td><p><code>[title~=hands]</code></p></td>&#13;
<td><p>Match all elements with a title attribute containing the word <code>hands</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>[attr|=value]</code></p></td>&#13;
<td><p>Select elements with a given attribute equal to or starting by some value</p></td>&#13;
<td><p><code>[lang|=en]</code></p></td>&#13;
<td><p>Match all elements equal to or starting with <code>en</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>[attr^=value]</code></p></td>&#13;
<td><p>Select elements with a given attribute starting by some value</p></td>&#13;
<td><p><code>a[href^="https"]</code></p></td>&#13;
<td><p>Match all links whose <code>href</code> attribute starts with <code>https</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>[attr$=value]</code></p></td>&#13;
<td><p>Select elements with a given attribute ending by some value</p></td>&#13;
<td><p><code>a[href$=".pdf"]</code></p></td>&#13;
<td><p>Match all links whose <code>href</code> attribute ends with <code>.pdf</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>[attr*=value]</code></p></td>&#13;
<td><p>Select elements with a given attribute value containing some string</p></td>&#13;
<td><p><code>a[href*="github"]</code></p></td>&#13;
<td><p>Match all links whose <code>href</code> attribute contains <code>github</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>The following HTML <a data-primary="hidden input text, locating" data-type="indexterm" id="idm45849737239280"/>excerpt shows the hidden input text available in the practice web form. Then, <a data-type="xref" href="#by-css-basic">Example 3-9</a> illustrates a possible way to locate this element using a CSS selector. One advantage of this locator is that the selector will still work even when changing the attribute <code>name</code> in HTML markup.</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">input</code> <code class="na">type</code><code class="o">=</code><code class="s">"hidden"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-hidden"</code><code class="p">&gt;</code></pre>&#13;
<div data-type="example" id="by-css-basic">&#13;
<h5><span class="label">Example 3-9. </span>Test using a basic locator with CSS selector</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testByCssSelectorBasic</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">WebElement</code><code> </code><code class="n">hidden</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>                </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"input[type=hidden]"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO8-1" id="co_webdriver_fundamentals_CO8-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">hidden</code><code class="o">.</code><code class="na">isDisplayed</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isFalse</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO8-2" id="co_webdriver_fundamentals_CO8-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO8-1" id="callout_webdriver_fundamentals_CO8-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use a CSS selector to locate the hidden input.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO8-2" id="callout_webdriver_fundamentals_CO8-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We check the hidden field is not visible.</p></dd>&#13;
</dl>&#13;
&#13;
<p>There are plenty of possibilities to create advanced CSS selectors. <a data-type="xref" href="#advanced-css-selectors">Table 3-6</a> shows a summary with some of them. The complete reference of CSS selectors is available in the official <a href="https://www.w3.org/TR/selectors">W3C recommendation</a>.</p>&#13;
<table id="advanced-css-selectors">&#13;
<caption><span class="label">Table 3-6. </span>Advanced CSS selectors</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Category</th>&#13;
<th>Syntax</th>&#13;
<th>Description</th>&#13;
<th>Example</th>&#13;
<th>Example explanation</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Grouping</p></td>&#13;
<td><p><code>,</code></p></td>&#13;
<td><p>Group two <a data-primary="grouping CSS selector" data-type="indexterm" id="idm45849737093856"/>(or more) selectors</p></td>&#13;
<td><p><code>div, span</code></p></td>&#13;
<td><p>Match both <code>&lt;span&gt;</code> and <code>&lt;div&gt;</code> elements</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Combinators</p></td>&#13;
<td><p><code>(space)</code></p></td>&#13;
<td><p>Select elements <a data-primary="combinators CSS selector" data-type="indexterm" id="idm45849737089056"/>that are descendants</p></td>&#13;
<td><p><code>div span</code></p></td>&#13;
<td><p>Match all <code>&lt;span&gt;</code> that are inside a <code>&lt;div&gt;</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>A &gt; B</code></p></td>&#13;
<td><p>Select elements that are direct children of another element</p></td>&#13;
<td><p><code>ul &gt; li</code></p></td>&#13;
<td><p>Match all <code>&lt;li&gt;</code> elements nested directly inside to <code>&lt;ul&gt;</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>A ~ B</code></p></td>&#13;
<td><p>Select elements sharing the same parent (i.e., <em>siblings</em>), and the second element follows the first (not necessarily immediately)</p></td>&#13;
<td><p><code>p ~ span</code></p></td>&#13;
<td><p>Match all &lt;span&gt; that follow a &lt;p&gt; (immediately or not)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>A + B</code></p></td>&#13;
<td><p>Sibling elements, and the second element immediately follows the first</p></td>&#13;
<td><p><code>h2 + p</code></p></td>&#13;
<td><p>Match all <code>&lt;p&gt;</code> that immediately follows &lt;h2&gt;</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Pseudo</p></td>&#13;
<td><p><code>:</code></p></td>&#13;
<td><p>Select a CSS <em>pseudoclass</em> (i.e., a special <a data-primary="pseudo CSS selector" data-type="indexterm" id="idm45849737073376"/>state of the selected element)</p></td>&#13;
<td><p><code>a:visited</code></p></td>&#13;
<td><p>Match all already visited links</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>:nth-child(n)</code></p></td>&#13;
<td><p>Select elements based on their position in a group (starting from the beginning)</p></td>&#13;
<td><p><code>p:nth-child(2)</code></p></td>&#13;
<td><p>Match every second <code>&lt;p&gt;</code> child</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><span class="keep-together"><code>:not(selector)</code></span></p></td>&#13;
<td><p>Select elements not matching a given selector</p></td>&#13;
<td><p><code>:not(p)</code></p></td>&#13;
<td><p>Match every element different from <code>&lt;p&gt;</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>:nth-last-child(n)</code></p></td>&#13;
<td><p>Select elements based on their position in a group (starting from the end)</p></td>&#13;
<td><p><code>p:nth-last-child(2)</code></p></td>&#13;
<td><p>Match every second <code>&lt;p&gt;</code> child (counting from the last child)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>::</code></p></td>&#13;
<td><p>Select a CSS <em>pseudoelement</em> (i.e., a specific part of the selected element)</p></td>&#13;
<td><p><code>p::first-line</code></p></td>&#13;
<td><p>Match the first line of all <code>&lt;p&gt;</code> elements</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>Consider the following piece of HTML (as usual, contained in the practice web form). As you can see, there are a <a data-primary="checkboxes" data-type="indexterm" id="idm45849737054800"/>couple of checkboxes: one of them is checked, and the other is not. We can determine which element is checked using the Selenium WebDriver API and CSS selectors. To that aim, <a data-type="xref" href="#by-css-advanced">Example 3-10</a> uses CSS pseudoclass.</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">input</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-check-input"</code> <code class="na">type</code><code class="o">=</code><code class="s">"checkbox"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-check"</code> <code class="na">id</code><code class="o">=</code><code class="s">"my-check-1"</code>&#13;
        <code class="na">checked</code><code class="p">&gt;</code>&#13;
<code class="p">&lt;</code><code class="nt">input</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-check-input"</code> <code class="na">type</code><code class="o">=</code><code class="s">"checkbox"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-check"</code> <code class="na">id</code><code class="o">=</code><code class="s">"my-check-2"</code><code class="p">&gt;</code></pre>&#13;
<div data-type="example" id="by-css-advanced">&#13;
<h5><span class="label">Example 3-10. </span>Test using advanced locators with CSS selectors</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByCssSelectorAdvanced</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">checkbox1</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"[type=checkbox]:checked"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO9-1" id="co_webdriver_fundamentals_CO9-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">checkbox1</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"id"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"my-checkbox-1"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO9-2" id="co_webdriver_fundamentals_CO9-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">checkbox1</code><code class="o">.</code><code class="na">isSelected</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO9-3" id="co_webdriver_fundamentals_CO9-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">checkbox2</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"[type=checkbox]:not(:checked)"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO9-4" id="co_webdriver_fundamentals_CO9-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">checkbox2</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"id"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"my-checkbox-2"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO9-5" id="co_webdriver_fundamentals_CO9-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">checkbox2</code><code class="o">.</code><code class="na">isSelected</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isFalse</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO9-6" id="co_webdriver_fundamentals_CO9-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO9-1" id="callout_webdriver_fundamentals_CO9-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use the pseudoclass <em>checked</em> to locate clicked checkboxes.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO9-2" id="callout_webdriver_fundamentals_CO9-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We check the element id is as expected.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO9-3" id="callout_webdriver_fundamentals_CO9-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We confirm the selected is checked.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO9-4" id="callout_webdriver_fundamentals_CO9-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We use the pseudoclass <em>checked</em> and the operator <em>not</em> to locate default checkboxes.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO9-5" id="callout_webdriver_fundamentals_CO9-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We check the element id is as expected.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO9-6" id="callout_webdriver_fundamentals_CO9-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>We confirm the selected is <a data-startref="ch3_term33" data-type="indexterm" id="idm45849736810048"/><a data-startref="ch3_term34" data-type="indexterm" id="idm45849736809344"/>unchecked.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Locating by XPath" data-type="sect3"><div class="sect3" id="idm45849737295376">&#13;
<h3>Locating by XPath</h3>&#13;
&#13;
<p>XPath (XML Path Language) is a powerful way of <a data-primary="DOM (Document Object Model)" data-secondary="with XPath" data-secondary-sortas="XPath" data-type="indexterm" id="idm45849736806880"/><a data-primary="WebElements, locating" data-secondary="DOM structure for" data-type="indexterm" id="idm45849736805680"/><a data-primary="queries, XPath" data-type="indexterm" id="idm45849736804736"/><a data-primary="WebElements, locating" data-secondary="XPath for" data-type="indexterm" id="ch3_term35"/><a data-primary="XPath (XML Path Language)" data-type="indexterm" id="ch3_term36"/>navigating to the DOM of XML-like documents, such as HTML pages. It includes over two hundred built-in functions to create advanced queries to select nodes. There are <a data-primary="absolute queries" data-type="indexterm" id="idm45849736801760"/>two types of XPath queries. First, <em>absolute</em> queries use the symbol slash (<code>/</code>) to traverse the DOM from the root node. For example, considering the basic HTML page in <a data-type="xref" href="#basic_html">Example 3-5</a>, to select the link element present in this page using this approach, we need the following XPath query:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting">/html/body/a</pre>&#13;
&#13;
<p>Absolute XPath queries are easy to create, but they have a relevant inconvenience: any minimal change in the page layout would make a locator built with this strategy fail. For this reason, as a general rule, the usage of absolute XPaths is <a data-primary="relative queries" data-type="indexterm" id="idm45849736790272"/>discouraged. Instead, <em>relative</em> queries are more convenient.</p>&#13;
&#13;
<p>The general syntax for relative XPath queries is as follows:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting">//tagname[@attribute='value']</pre>&#13;
&#13;
<p><a data-type="xref" href="#by-xpath-basic">Example 3-11</a> shows a test with an XPath locator to <a data-primary="hidden input text, locating" data-type="indexterm" id="idm45849736781152"/>select the hidden field in the practice web.</p>&#13;
<div data-type="example" id="by-xpath-basic">&#13;
<h5><span class="label">Example 3-11. </span>Test using a basic locator with XPath</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByXPathBasic</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">hidden</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//input[@type='hidden']"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO10-1" id="co_webdriver_fundamentals_CO10-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">hidden</code><code class="o">.</code><code class="na">isDisplayed</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isFalse</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO10-2" id="co_webdriver_fundamentals_CO10-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO10-1" id="callout_webdriver_fundamentals_CO10-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate the hidden field in the practice web.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO10-2" id="callout_webdriver_fundamentals_CO10-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We verify this element is not visible to the user.</p></dd>&#13;
</dl>&#13;
&#13;
<p>The real power of XPath comes from its built-in functions. <a data-type="xref" href="#xpath-functions">Table 3-7</a> contains some of the most <a data-primary="attributes function, XPath" data-type="indexterm" id="idm45849736701264"/><a data-primary="axes function, XPath" data-type="indexterm" id="idm45849736700576"/><a data-primary="boolean function, XPath" data-type="indexterm" id="idm45849736699904"/><a data-primary="child nodes function, XPath" data-type="indexterm" id="idm45849736699232"/><a data-primary="text function, XPath" data-type="indexterm" id="idm45849736698544"/>relevant XPath functions. You can find the complete XPath reference in the <a href="https://www.w3.org/TR/xpath">W3C XPath Recommendations</a>.</p>&#13;
<table id="xpath-functions">&#13;
<caption><span class="label">Table 3-7. </span>Summary of relevant XPath built-in functions</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Category</th>&#13;
<th>Syntax</th>&#13;
<th>Description</th>&#13;
<th>Example</th>&#13;
<th>Example explanation</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td rowspan="3"><p>Attributes</p></td>&#13;
<td><p><code>contains(@attr, 'string')</code></p></td>&#13;
<td><p>Check if an attribute contains a string</p></td>&#13;
<td><p><code>//a[contains(@href, 'github')]</code></p></td>&#13;
<td><p>Match links with <code>href</code> containing <code>github</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>starts-with(@attr, 'string')</code></p></td>&#13;
<td><p>Check if an attribute starts  with a string</p></td>&#13;
<td><p><code>//a[starts-with(@href, 'https')]</code></p></td>&#13;
<td><p>Match all links using HTTPS</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>ends-with(@attr, 'string')</code></p></td>&#13;
<td><p>Check if an attribute end with a string</p></td>&#13;
<td><p><code>//a[ends-with(@href, <em>https</em>)]</code></p></td>&#13;
<td><p>Match all links to PDF documents</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Text</p></td>&#13;
<td><p><code>text()='string'</code></p></td>&#13;
<td><p>Locate elements based on text content</p></td>&#13;
<td><p><code>//*[text()=<em>click</em>]</code></p></td>&#13;
<td><p>Match all elements with the text <code>click</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Child nodes</p></td>&#13;
<td><p><code>[index]</code></p></td>&#13;
<td><p>Locate children elements</p></td>&#13;
<td><p><code>//div/*[0]</code></p></td>&#13;
<td><p>First child of a <code>&lt;div&gt;</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Boolean</p></td>&#13;
<td><p><code>or</code></p></td>&#13;
<td><p>Logic operator <em>or</em></p></td>&#13;
<td><p><code>//@type='submit' or @type='reset']</code></p></td>&#13;
<td><p>Match buttons to submit and clear forms</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>and</code></p></td>&#13;
<td><p>Logic operator <em>and</em></p></td>&#13;
<td><p><code>//@type='submit' and @id&#13;
='my-button']</code></p></td>&#13;
<td><p>Match submit buttons with a given id</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>not()</code></p></td>&#13;
<td><p>Logic operator <em>not</em></p></td>&#13;
<td><p><code>//@type='submit' and not(@id&#13;
='my-button')]</code></p></td>&#13;
<td><p>Match submit buttons different to a given id</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Axes (used to locate relative nodes)</p></td>&#13;
<td><p><code>following::item</code></p></td>&#13;
<td><p>Nodes that come after the current one</p></td>&#13;
<td><p><code>//*[@type='text']//following::input</code></p></td>&#13;
<td><p>Match all input fields after the first text input</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>descendant::item</code></p></td>&#13;
<td><p>Select descendant elements (child, etc.) of current node</p></td>&#13;
<td><p><code>//*[@id='my-id']//descendant::a</code></p></td>&#13;
<td><p>Match all descendant links from a given parent node</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>ancestor::item</code></p></td>&#13;
<td><p>Select ancestor elements (parent, etc.) of current node</p></td>&#13;
<td><p><code>//input[@id='my-id']//ancestor::label</code></p></td>&#13;
<td><p>Match all antecedent labels from a given input text</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>child::item</code></p></td>&#13;
<td><p>Select children elements of current node</p></td>&#13;
<td><p><code>//*[@id='my-id']//child::li</code></p></td>&#13;
<td><p>Match all list element under a given node</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>preceding::item</code></p></td>&#13;
<td><p>Select all nodes that come before the current one</p></td>&#13;
<td><p><code>//*[@id='my-id']//preceding::input</code></p></td>&#13;
<td><p>Match all <code>input</code> before a given node</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>following-sibling::item</code></p></td>&#13;
<td><p>Select following nodes that come before the current one</p></td>&#13;
<td><p><code>//*[@id='my-id']//following-sibling::input</code></p></td>&#13;
<td><p>Match the next input before a given node</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td/>&#13;
<td><p><code>parent::item</code></p></td>&#13;
<td><p>Select parent of the current node</p></td>&#13;
<td><p><code>//*[@id='my-id']//parent::div</code></p></td>&#13;
<td><p>Match the parent <code>div</code> element of a given node</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p><a data-type="xref" href="#by-xpath-advanced">Example 3-12</a> shows how to use XPath locators <a data-primary="radio buttons" data-type="indexterm" id="idm45849736601184"/>for the radio buttons available in the practice web form. The HTML markup for these radio buttons is:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="nt">&lt;input</code> <code class="na">class=</code><code class="s">"form-check-input"</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"my-radio"</code> <code class="na">id=</code><code class="s">"my-radio-1"</code>&#13;
        <code class="err">checked</code><code class="nt">&gt;</code>&#13;
<code class="nt">&lt;input</code> <code class="na">class=</code><code class="s">"form-check-input"</code> <code class="na">type=</code><code class="s">"radio"</code> <code class="na">name=</code><code class="s">"my-radio"</code> <code class="na">id=</code><code class="s">"my-radio-2"</code><code class="nt">&gt;</code></pre>&#13;
<div data-type="example" id="by-xpath-advanced">&#13;
<h5><span class="label">Example 3-12. </span>Test using advanced locators with XPath</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByXPathAdvanced</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">radio1</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//*[@type='radio' and @checked]"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO11-1" id="co_webdriver_fundamentals_CO11-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">radio1</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"id"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"my-radio-1"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO11-2" id="co_webdriver_fundamentals_CO11-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">radio1</code><code class="o">.</code><code class="na">isSelected</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO11-3" id="co_webdriver_fundamentals_CO11-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">radio2</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//*[@type='radio' and not(@checked)]"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO11-4" id="co_webdriver_fundamentals_CO11-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">radio2</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"id"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"my-radio-2"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO11-5" id="co_webdriver_fundamentals_CO11-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">radio2</code><code class="o">.</code><code class="na">isSelected</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isFalse</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO11-6" id="co_webdriver_fundamentals_CO11-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO11-1" id="callout_webdriver_fundamentals_CO11-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use XPath to locate the checked radio buttons.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO11-2" id="callout_webdriver_fundamentals_CO11-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We check the element id is as expected.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO11-3" id="callout_webdriver_fundamentals_CO11-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We confirm the selected is checked.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO11-4" id="callout_webdriver_fundamentals_CO11-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We use XPath to locate the unchecked radio buttons.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO11-5" id="callout_webdriver_fundamentals_CO11-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We check the element id is as expected.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO11-6" id="callout_webdriver_fundamentals_CO11-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>We confirm the selected is unchecked.</p></dd>&#13;
</dl>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p><a data-type="xref" href="#what-strategy">“What Strategy Should You Use?”</a> provides a comparison between CSS selectors and XPath and gives some hints for selecting one or another locator <a data-startref="ch3_term35" data-type="indexterm" id="idm45849736366480"/>strategies.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Finding Locators on a Web Page" data-type="sect2"><div class="sect2" id="idm45849738079392">&#13;
<h2>Finding Locators on a Web Page</h2>&#13;
&#13;
<p>As introduced in <a data-type="xref" href="ch01.html#locators">Table 1-4</a> in <a data-type="xref" href="ch01.html#ch01">Chapter 1</a>, there are different tools we can use to help generate locators for our WebDriver tests. This section shows how to use the main features of the <a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="with Chromium" data-secondary-sortas="Chromium" data-type="indexterm" id="idm45849736361808"/><a data-primary="Chromium" data-secondary="Chrome DevTools with" data-type="indexterm" id="idm45849736360576"/><a data-primary="Firefox Developer Tools" data-type="indexterm" id="idm45849736359632"/><a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="locating elements on web page with" data-type="indexterm" id="ch3_term37"/><a data-primary="browsers" data-secondary="developer tools in" data-type="indexterm" id="ch3_term38"/><a data-primary="developer tools, browser" data-type="indexterm" id="ch3_term39"/><a data-primary="WebElements, locating" data-secondary="with browser built-in developer tools" data-secondary-sortas="browser built-in developer tools" data-type="indexterm" id="ch3_term40"/>built-in developer tools in major browsers, i.e., <a href="https://developer.chrome.com/docs/devtools">Chrome DevTools</a> for Chromium-based browsers (e.g., Chrome and Edge) and <a href="https://developer.mozilla.org/en-US/docs/Tools">Firefox Developer Tools</a> (for Firefox).</p>&#13;
&#13;
<p>You can open both of these developer tools by right-clicking on the portion of the web page UI that you want to test and then selecting the option menu <em>Inspect</em>. <a data-type="xref" href="#chrome-devtools">Figure 3-3</a> shows a screenshot of Chrome DevTools placed at the bottom of the browser (you can move it if you want).</p>&#13;
&#13;
<p>Developer tools provide different ways to locate elements in a web page. First, we use the element selector by clicking on the icon (an arrow over a box) in the upper left corner of the developer tools pane. Then, we can move the mouse over the page to highlight each web element and inspect the elements panel to check their markup, attributes, etc.</p>&#13;
&#13;
<figure><div class="figure" id="chrome-devtools">&#13;
<img alt="hosw 0303" src="assets/hosw_0303.png"/>&#13;
<h6><span class="label">Figure 3-3. </span>Use of Chrome DevTools while navigating the practice site</h6>&#13;
</div></figure>&#13;
&#13;
<p>In the same view, we can use the tool to <a data-primary="CSS" data-secondary="selectors" data-type="indexterm" id="idm45849736347920"/>copy its CSS or XPath selector by right-clicking on the element and then selecting the menu option “Copy.” This mechanism allows getting the full CSS or XPath selector. It can be the first approach to generate a locator quickly, although I do not recommend using these locators directly since they tend to be brittle (i.e., linked to the current page layout) and are hard to read.</p>&#13;
&#13;
<p class="pagebreak-before">To create robust CSS or XPath locators, we need to think about the specific characteristics of the web pages we are working with and create a custom selector based on that knowledge. Again, the developer tools can help us in this task. We can press the key combination Ctrl + F to search by string, CSS selector, or XPath in Chrome DevTools. <a data-type="xref" href="#chrome-devtools-search-selector">Figure 3-4</a> shows an example of this feature in action.</p>&#13;
&#13;
<p>Notice we are using the practice web form, and we type the string <code>#my-text-id</code>, which corresponds to the element with a given id using a CSS selector. DevTools found the web element on the page and <a data-startref="ch3_term36" data-type="indexterm" id="idm45849736344496"/>highlighted it.</p>&#13;
&#13;
<figure><div class="figure" id="chrome-devtools-search-selector">&#13;
<img alt="hosw 0304" src="assets/hosw_0304.png"/>&#13;
<h6><span class="label">Figure 3-4. </span>Searching CSS selector in Chrome DevTools</h6>&#13;
</div></figure>&#13;
&#13;
<p>We can <a data-startref="ch3_term37" data-type="indexterm" id="idm45849736341200"/><a data-primary="Firefox Developer Tools" data-type="indexterm" id="idm45849736340464"/>use a similar approach in Firefox. We need to use the console panel and type <code>$$("css-selector")</code> for searching by CSS selector or <code>$x("xpath-query")</code> for XPath queries. <a data-type="xref" href="#firefox-devtools-search-selector">Figure 3-5</a> shows how to locate the first input text element of the practice web form by id, using a CSS selector and an XPath query.</p>&#13;
&#13;
<figure><div class="figure" id="firefox-devtools-search-selector">&#13;
<img alt="hosw 0305" src="assets/hosw_0305.png"/>&#13;
<h6><span class="label">Figure 3-5. </span>Searching CSS selector and XPath in Firefox Developer Tools</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Compound Locators" data-type="sect2"><div class="sect2" id="idm45849736364960">&#13;
<h2>Compound Locators</h2>&#13;
&#13;
<p>The Selenium <a data-startref="ch3_term38" data-type="indexterm" id="idm45849736334352"/><a data-startref="ch3_term39" data-type="indexterm" id="idm45849736333616"/><a data-startref="ch3_term40" data-type="indexterm" id="idm45849736332944"/><a data-primary="compound locators" data-type="indexterm" id="ch3_term42"/><a data-primary="WebElements, locating" data-secondary="compound locators for" data-type="indexterm" id="ch3_term43"/>WebDriver API has several support classes that enable the composition of the different locator types we have seen. These classes are:</p>&#13;
<dl>&#13;
<dt><code>ByIdOrName(String idOrName)</code></dt>&#13;
<dd>&#13;
<p>It seeks by id, <a data-primary="ByIdOrName() class" data-type="indexterm" id="idm45849736328064"/>and if that is not available, it seeks by name.</p>&#13;
</dd>&#13;
<dt><code>ByChained(By... bys)</code></dt>&#13;
<dd>&#13;
<p>It seeks <a data-primary="ByChained() class" data-type="indexterm" id="ch3_term45"/>elements in a sequence (i.e., the second one should appear inside the first one, and so on).</p>&#13;
</dd>&#13;
<dt><code>ByAll(By... bys)</code></dt>&#13;
<dd>&#13;
<p>It seeks elements <a data-primary="ByAll() class" data-type="indexterm" id="ch3_term44"/>that match a number of location strategies (following an <em>and</em> logic condition for these locators).</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#by-id-or-name">Example 3-13</a> shows a test using <code>ByIdOrName</code>. This test looks for the following file-select field available in the practice web form. Notice that this field specifies the attribute <code>name</code> (but not <code>id</code>).</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">input</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-control"</code> <code class="na">type</code><code class="o">=</code><code class="s">"file"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-file"</code><code class="p">&gt;</code></pre>&#13;
<div class="pagebreak-before less_space" data-type="example" id="by-id-or-name">&#13;
<h5><span class="label">Example 3-13. </span>Test using by id or name compound locator</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByIdOrName</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">fileElement</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">ByIdOrName</code><code class="o">(</code><code class="s">"my-file"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO12-1" id="co_webdriver_fundamentals_CO12-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">fileElement</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"id"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isBlank</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO12-2" id="co_webdriver_fundamentals_CO12-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">fileElement</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"name"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isNotBlank</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO12-3" id="co_webdriver_fundamentals_CO12-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO12-1" id="callout_webdriver_fundamentals_CO12-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use a locator by id or name.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO12-2" id="callout_webdriver_fundamentals_CO12-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We check the element has the attribute <code>name</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO12-3" id="callout_webdriver_fundamentals_CO12-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We verify the absence of the attribute <code>name</code> in the same element.</p></dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#by-chained-all">Example 3-14</a> shows two tests illustrating the difference between <code>ByChained</code> and <code>ByAll</code>. Both locators use the practice web form again. If you inspect its source code, you will notice that there are three single  <code>&lt;div class="row"&gt;</code> inside the <code>&lt;form&gt;</code>.</p>&#13;
<div data-type="example" id="by-chained-all">&#13;
<h5><span class="label">Example 3-14. </span>Test using by chained and by all compound locators</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByChained</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">WebElement</code><code class="o">&gt;</code><code> </code><code class="n">rowsInForm</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElements</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="k">new</code><code> </code><code class="nf">ByChained</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"form"</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">className</code><code class="o">(</code><code class="s">"row"</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO13-1" id="co_webdriver_fundamentals_CO13-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">rowsInForm</code><code class="o">.</code><code class="na">size</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="mi">1</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO13-2" id="co_webdriver_fundamentals_CO13-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testByAll</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">WebElement</code><code class="o">&gt;</code><code> </code><code class="n">rowsInForm</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElements</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="k">new</code><code> </code><code class="nf">ByAll</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"form"</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">className</code><code class="o">(</code><code class="s">"row"</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO13-3" id="co_webdriver_fundamentals_CO13-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">rowsInForm</code><code class="o">.</code><code class="na">size</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="mi">5</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO13-4" id="co_webdriver_fundamentals_CO13-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO13-1" id="callout_webdriver_fundamentals_CO13-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use the locator using <code>ByChained</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO13-2" id="callout_webdriver_fundamentals_CO13-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We find one element since only one <code>row</code> element is within the form.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO13-3" id="callout_webdriver_fundamentals_CO13-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We use the locator using <code>ByAll</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO13-4" id="callout_webdriver_fundamentals_CO13-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We find five elements, since the locator matches a <code>&lt;form&gt;</code> element plus four <code>&lt;div class="row"&gt;</code> available on <a data-startref="ch3_term42" data-type="indexterm" id="idm45849735975728"/><a data-startref="ch3_term43" data-type="indexterm" id="idm45849735975120"/><a data-startref="ch3_term44" data-type="indexterm" id="idm45849735974512"/><a data-startref="ch3_term45" data-type="indexterm" id="idm45849735973904"/>the page.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Relative Locators" data-type="sect2"><div class="sect2" id="rel-loc">&#13;
<h2>Relative Locators</h2>&#13;
&#13;
<p>Selenium WebDriver version 4 incorporates a new way to <a data-primary="Selenium WebDriver 4 (version)" data-secondary="relative locators in" data-type="indexterm" id="idm45849735971136"/><a data-primary="relative locators" data-type="indexterm" id="ch3_term46"/><a data-primary="WebElements, locating" data-secondary="by proximity to web element" data-secondary-sortas="proximity to web element" data-type="indexterm" id="ch3_term47"/><a data-primary="WebElements, locating" data-secondary="relative locators for" data-type="indexterm" id="ch3_term48"/>find elements in a web page: <em>relative locators</em>. These new locators aim to find web elements relative to another known element.&#13;
This feature is <a data-primary="box model, CSS" data-type="indexterm" id="idm45849735966208"/><a data-primary="CSS" data-secondary="box model" data-type="indexterm" id="idm45849735965504"/>based on the CSS <em>box model</em>. The model determines that each element of a web document is rendered using a rectangular box. <a data-type="xref" href="#box-model">Figure 3-6</a> shows an example of this box model for a given web element in the practice form.</p>&#13;
&#13;
<figure><div class="figure" id="box-model">&#13;
<img alt="hosw 0306" src="assets/hosw_0306.png"/>&#13;
<h6><span class="label">Figure 3-6. </span>Practice form showing the box model of a web element</h6>&#13;
</div></figure>&#13;
&#13;
<p>Using this box model, the relative locators available in the Selenium WebDriver API allow finding elements in relation to the position of another web element. To this aim, first, we need to locate that web element using the standard location strategies (e.g., by id, name, attribute, etc.). Then, we need to specify the <a data-primary="RelativeBy object" data-type="indexterm" id="idm45849735960656"/><a data-primary="RelativeLocator class" data-type="indexterm" id="idm45849735959952"/>locator type obtained by proximity to the original web element using the static method <code>with</code> of the class <code>RelativeLocator</code>. As a result, we get a <code>RelativeBy</code> object, which extends the abstract class <code>By</code>, used in the standard locator strategies. A <code>RelativeBy</code> object provides the following methods to carry out relative location:</p>&#13;
<dl>&#13;
<dt><code>above()</code></dt>&#13;
<dd>&#13;
<p>Finds element(s) located <a data-primary="above() method" data-type="indexterm" id="idm45849735954768"/>on the top of the original element.</p>&#13;
</dd>&#13;
<dt><code>below()</code></dt>&#13;
<dd>&#13;
<p>Finds element(s) located <a data-primary="below() method" data-type="indexterm" id="idm45849735952432"/>under the original element.</p>&#13;
</dd>&#13;
<dt><code>near()</code></dt>&#13;
<dd>&#13;
<p>Finds element(s) located <a data-primary="near() method" data-type="indexterm" id="idm45849735950096"/>close to the original element. The default distance to consider an element near to some other is one hundred pixels. This locator is overloaded to specify another distance.</p>&#13;
</dd>&#13;
<dt><code>toLeftOf()</code></dt>&#13;
<dd>&#13;
<p>Finds element(s) located <a data-primary="toLeftOf() method" data-type="indexterm" id="idm45849735947808"/>at the left side of the original element.</p>&#13;
</dd>&#13;
<dt><code>toRightOf()</code></dt>&#13;
<dd>&#13;
<p>Finds element(s) located <a data-primary="toRightOf() method" data-type="indexterm" id="idm45849735945456"/>at the right side of the original element.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#relative_locators_examples">Example 3-15</a> shows a basic test using relative locators. Once again, we use the practice web form to illustrate this feature.</p>&#13;
<div data-type="example" id="relative_locators_examples">&#13;
<h5><span class="label">Example 3-15. </span>Test using relative locators</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testRelativeLocators</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">link</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">linkText</code><code class="o">(</code><code class="s">"Return to index"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO14-1" id="co_webdriver_fundamentals_CO14-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">RelativeBy</code><code> </code><code class="n">relativeBy</code><code> </code><code class="o">=</code><code> </code><code class="n">RelativeLocator</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"input"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO14-2" id="co_webdriver_fundamentals_CO14-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">readOnly</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">relativeBy</code><code class="o">.</code><code class="na">above</code><code class="o">(</code><code class="n">link</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO14-3" id="co_webdriver_fundamentals_CO14-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">readOnly</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"name"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="s">"my-readonly"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO14-4" id="co_webdriver_fundamentals_CO14-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO14-1" id="callout_webdriver_fundamentals_CO14-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate the link whose text is <code>Return to index</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO14-2" id="callout_webdriver_fundamentals_CO14-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We specify the relative locator type, which will be by tag name the <code>input</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO14-3" id="callout_webdriver_fundamentals_CO14-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We use a relative locator to find a web element (which should be an <code>input</code> filed) above the original web element (i.e., a link).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO14-4" id="callout_webdriver_fundamentals_CO14-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We verify the element above the reference link is a read-only field (see <a data-type="xref" href="#practice-site-web-form">Figure 3-2</a> to double-check it).</p></dd>&#13;
</dl>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>Relative locators can be helpful for finding elements based on the relative position of other elements. On the other hand, this strategy can be very sensitive to page layout. For example, you need to be careful when using relative locators in responsive pages since the layout can vary <a data-startref="ch3_term46" data-type="indexterm" id="idm45849735800064"/><a data-startref="ch3_term47" data-type="indexterm" id="idm45849735799456"/><a data-startref="ch3_term48" data-type="indexterm" id="idm45849735798848"/>depending on the viewport.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="A challenging example" data-type="sect3"><div class="sect3" id="idm45849735797856">&#13;
<h3>A challenging example</h3>&#13;
&#13;
<p>The examples we have seen so far are reasonably simple. Let’s now look at a more complex use case. A nondefault <a data-primary="date picker example" data-type="indexterm" id="ch3_term49"/><a data-primary="GUI (Graphical User Interface)" data-secondary="with date picker example" data-secondary-sortas="date picker example" data-type="indexterm" id="ch3_term50"/><a data-primary="WebElements, locating" data-secondary="complex example with" data-type="indexterm" id="ch3_term51"/>element in the practice web is the <em>date picker</em>. As its name suggests, this element provides a handy way to select dates using a web GUI. Since the CSS framework used in the practice site is <a href="https://getbootstrap.com">Bootstrap</a>, I implemented the date picker using <a href="https://github.com/uxsolutions/bootstrap-datepicker">bootstrap-datepicker</a>. This date picker is attached to an input field. When the user clicks on this field, a calendar appears on the web page (see <a data-type="xref" href="#date-picker-gui">Figure 3-7</a>). The user can select a given date by clicking the preferred date by navigating to the different days, months, and years.</p>&#13;
&#13;
<figure><div class="figure" id="date-picker-gui">&#13;
<img alt="hosw 0307" src="assets/hosw_0307.png"/>&#13;
<h6><span class="label">Figure 3-7. </span>Date picker in the practice web form</h6>&#13;
</div></figure>&#13;
&#13;
<p>We want to implement an automated test using Selenium WebDriver that selects the current day and month but the previous year by interacting with the date picker GUI. <a data-type="xref" href="#datepiker_example">Example 3-16</a> shows the resulting implementation.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>To follow this example, I recommend you open the practice web form (see URL in the code example) in your browser and use the developer tools to inspect the internal elements of the date picker selector, paying attention to the different selector strategies used.</p>&#13;
</div>&#13;
<div data-type="example" id="datepiker_example">&#13;
<h5><span class="label">Example 3-16. </span>Test interacting with a date picker</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testDatePicker</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Get the current date from the system clock </code><a class="co" href="#callout_webdriver_fundamentals_CO15-1" id="co_webdriver_fundamentals_CO15-1"><img alt="1" src="assets/1.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">LocalDate</code><code> </code><code class="n">today</code><code> </code><code class="o">=</code><code> </code><code class="n">LocalDate</code><code class="o">.</code><code class="na">now</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">currentYear</code><code> </code><code class="o">=</code><code> </code><code class="n">today</code><code class="o">.</code><code class="na">getYear</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">currentDay</code><code> </code><code class="o">=</code><code> </code><code class="n">today</code><code class="o">.</code><code class="na">getDayOfMonth</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Click on the date picker to open the calendar </code><a class="co" href="#callout_webdriver_fundamentals_CO15-2" id="co_webdriver_fundamentals_CO15-2"><img alt="2" src="assets/2.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">datePicker</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-date"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">datePicker</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Click on the current month by searching by text </code><a class="co" href="#callout_webdriver_fundamentals_CO15-3" id="co_webdriver_fundamentals_CO15-3"><img alt="3" src="assets/3.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">monthElement</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code><code class="s">"//th[contains(text(),'%d')]"</code><code class="o">,</code><code> </code><code class="n">currentYear</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">monthElement</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Click on the left arrow using relative locators </code><a class="co" href="#callout_webdriver_fundamentals_CO15-4" id="co_webdriver_fundamentals_CO15-4"><img alt="4" src="assets/4.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">arrowLeft</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="n">RelativeLocator</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"th"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">toRightOf</code><code class="o">(</code><code class="n">monthElement</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">arrowLeft</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Click on the current month of that year </code><a class="co" href="#callout_webdriver_fundamentals_CO15-5" id="co_webdriver_fundamentals_CO15-5"><img alt="5" src="assets/5.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">monthPastYear</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">RelativeLocator</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"span[class$=focused]"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">below</code><code class="o">(</code><code class="n">arrowLeft</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">monthPastYear</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Click on the present day in that month </code><a class="co" href="#callout_webdriver_fundamentals_CO15-6" id="co_webdriver_fundamentals_CO15-6"><img alt="6" src="assets/6.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">dayElement</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"//td[@class='day' and contains(text(),'%d')]"</code><code class="o">,</code><code> </code><code class="n">currentDay</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">dayElement</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Get the final date on the input text </code><a class="co" href="#callout_webdriver_fundamentals_CO15-7" id="co_webdriver_fundamentals_CO15-7"><img alt="7" src="assets/7.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">oneYearBack</code><code> </code><code class="o">=</code><code> </code><code class="n">datePicker</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Final date in date picker: {}"</code><code class="o">,</code><code> </code><code class="n">oneYearBack</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Assert that the expected date is equal to the one selected in the&#13;
</code><code>    </code><code class="c1">// date picker  </code><a class="co" href="#callout_webdriver_fundamentals_CO15-8" id="co_webdriver_fundamentals_CO15-8"><img alt="8" src="assets/8.png"/></a><code class="c1">&#13;
</code><code>    </code><code class="n">LocalDate</code><code> </code><code class="n">previousYear</code><code> </code><code class="o">=</code><code> </code><code class="n">today</code><code class="o">.</code><code class="na">minusYears</code><code class="o">(</code><code class="mi">1</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">DateTimeFormatter</code><code> </code><code class="n">dateFormat</code><code> </code><code class="o">=</code><code> </code><code class="n">DateTimeFormatter</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">ofPattern</code><code class="o">(</code><code class="s">"MM/dd/yyyy"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">expectedDate</code><code> </code><code class="o">=</code><code> </code><code class="n">previousYear</code><code class="o">.</code><code class="na">format</code><code class="o">(</code><code class="n">dateFormat</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Expected date: {}"</code><code class="o">,</code><code> </code><code class="n">expectedDate</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">oneYearBack</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">expectedDate</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-1" id="callout_webdriver_fundamentals_CO15-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Get the current date from the system clock. We use the standard <code>java.time</code> API for this.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-2" id="callout_webdriver_fundamentals_CO15-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>Click on the date picker to open the calendar. We use a locator by name (<code>By.name("my-date")</code>).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-3" id="callout_webdriver_fundamentals_CO15-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>Click on the current month by searching by text. We use an <a data-primary="XPath (XML Path Language)" data-type="indexterm" id="ch3_term52"/><a data-primary="WebElements, locating" data-secondary="XPath for" data-type="indexterm" id="ch3_term53"/>XPath query for this locator. After this step, the rest of the months of the year appear in the date picker GUI.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-4" id="callout_webdriver_fundamentals_CO15-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>Click on the left arrow using relative locators (i.e., right of the month element). After this step, the calendar moves to the previous year.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-5" id="callout_webdriver_fundamentals_CO15-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>Click on the current month of that year. We use a <a data-primary="CSS" data-secondary="selectors" data-type="indexterm" id="ch3_term54"/><a data-primary="WebElements, locating" data-secondary="CSS selectors for" data-type="indexterm" id="ch3_term55"/>CSS selector here.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-6" id="callout_webdriver_fundamentals_CO15-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>Click on the present day in that month. We use an XPath query in this step. After the click, the date is selected, and the value appears in the input text.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-7" id="callout_webdriver_fundamentals_CO15-7"><img alt="7" src="assets/7.png"/></a></dt>&#13;
<dd><p>Get the final date on the input text. We use a basic locator by attribute here.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO15-8" id="callout_webdriver_fundamentals_CO15-8"><img alt="8" src="assets/8.png"/></a></dt>&#13;
<dd><p>Assert that the expected date is equal to the one selected in the date picker. We calculate the expected date using standard Java, and as usual, AssertJ for <a data-startref="ch3_term49" data-type="indexterm" id="idm45849735457664"/><a data-startref="ch3_term50" data-type="indexterm" id="idm45849735456960"/><a data-startref="ch3_term51" data-type="indexterm" id="idm45849735359504"/>the assertion.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What Strategy Should You Use?" data-type="sect2"><div class="sect2" id="what-strategy">&#13;
<h2>What Strategy Should You Use?</h2>&#13;
&#13;
<p>In this section, we <a data-primary="WebElements, locating" data-secondary="guide to selection of strategy for" data-type="indexterm" id="ch3_term56"/>review the different alternatives the Selenium WebDriver API allows for locating elements in a web page. This topic is one of the most fundamental routines for browser automation with Selenium WebDriver. Maybe you are asking yourself: <em>What is the best strategy I should use?</em> As Dr. Alfred Lanning (character in the novel and movie <em>I, Robot</em>) would say: “That, detective, is the right question.” In my opinion, that is a difficult question, and it has no simple answer. In other words, the answer to this question could be “it depends.” This section presents several hints for identifying a suitable locator strategy for common use cases. First, <a data-type="xref" href="#locator-comparison">Table 3-8</a> compares the different locating strategies.</p>&#13;
<table id="locator-comparison">&#13;
<caption><span class="label">Table 3-8. </span>Pros, cons, and typical use cases of the different locating strategies</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Locator</th>&#13;
<th>Pros</th>&#13;
<th>Cons</th>&#13;
<th>Typical use case</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>By attribute (id, name, class)</p></td>&#13;
<td><p>Easy to use</p></td>&#13;
<td><p>These attributes <a data-primary="attributes, HTML" data-type="indexterm" id="idm45849735349040"/><a data-primary="HTML" data-secondary="attributes" data-type="indexterm" id="idm45849735348432"/><a data-primary="WebElements, locating" data-secondary="HTML attributes for" data-type="indexterm" id="idm45849735347584"/>are not always available</p></td>&#13;
<td><p>Elements that define these attributes immutably (i.e., it does not change dynamically)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>By link text (total or partial)</p></td>&#13;
<td><p>Easy to use</p></td>&#13;
<td><p>Only available <a data-primary="link text" data-type="indexterm" id="idm45849735344176"/><a data-primary="WebElements, locating" data-secondary="link text for" data-type="indexterm" id="idm45849735343568"/>for links</p></td>&#13;
<td><p>For text links</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>By tag name</p></td>&#13;
<td><p>Easy to use</p></td>&#13;
<td><p>Hard to select one <a data-primary="tag name, HTML" data-type="indexterm" id="idm45849735340160"/><a data-primary="HTML" data-secondary="tags" data-type="indexterm" id="idm45849735339552"/><a data-primary="WebElements, locating" data-secondary="HTML tag name for" data-type="indexterm" id="idm45849735338704"/>specific element when the tag repeatedly appears on the page</p></td>&#13;
<td><p>When the tag is unique, or the resulting DOM node has a fixed position</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>By CSS selector or by XPath</p></td>&#13;
<td><p>Very powerful</p></td>&#13;
<td><p>It is not easy to write robust selectors</p></td>&#13;
<td><p>For complex locators</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Compound locators</p></td>&#13;
<td><p>Easy way to compose <a data-primary="compound locators" data-type="indexterm" id="idm45849735333008"/><a data-primary="WebElements, locating" data-secondary="compound locators for" data-type="indexterm" id="idm45849735332272"/>existing locators</p></td>&#13;
<td><p>Limited to specific situations</p></td>&#13;
<td><p>When looking for id or name (<code>ByIdOrName</code>), when looking for nested elements (<code>ByChained</code>), and when using several strategies at the same time (<code>ByAll</code>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Relative locators</p></td>&#13;
<td><p>Human language approach</p></td>&#13;
<td><p>It needs to be <a data-primary="relative locators" data-type="indexterm" id="idm45849735326688"/><a data-primary="WebElements, locating" data-secondary="relative locators for" data-type="indexterm" id="idm45849735325952"/>combined with other locators</p></td>&#13;
<td><p>Find element based on the relative position (above, below, near, etc.) of a known element</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>As you can see in this table, <a data-primary="WebElements, locating" data-secondary="CSS selectors versus XPath for" data-type="indexterm" id="idm45849735323616"/>CSS selectors and XPath share the same pros, cons, and use cases. Does it mean these strategies are the same? The answer is no. Both are very powerful and allow the creation of complex locators. Nevertheless, there are relevant distinctions between them. <a data-type="xref" href="#css-xpath-comparison">Table 3-9</a> summarizes these differences.</p>&#13;
<table id="css-xpath-comparison">&#13;
<caption><span class="label">Table 3-9. </span>Some differences between XPath and CSS selector</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>XPath</th>&#13;
<th>CSS selector</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>XPath allows bidirectional location, i.e., the traversal can be from parent to child and vice versa</p></td>&#13;
<td><p>CSS allows one-directional locations, i.e., the traversal is from parent to child only</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>XPath is slower in terms of performance</p></td>&#13;
<td><p>CSS has faster performance than XPath</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>XPath allows the identification of visible text on the screen using the <code>text()</code> function</p></td>&#13;
<td><p>CSS does not allow locating elements by its text content</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>To better illustrate the difference between XPath and CSS selectors, <a data-type="xref" href="#css-xpath-comparison-examples">Table 3-10</a> compares specific locators using both strategies.</p>&#13;
<table id="css-xpath-comparison-examples">&#13;
<caption><span class="label">Table 3-10. </span>Examples comparing XPath and CSS selector</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Locator</th>&#13;
<th>XPath</th>&#13;
<th>CSS selector</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>All elements</p></td>&#13;
<td><p><code>//*</code></p></td>&#13;
<td><p><code>*</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>All <code>&lt;div&gt;</code> elements</p></td>&#13;
<td><p><code>//div</code></p></td>&#13;
<td><p><code>div</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Element by id</p></td>&#13;
<td><p><code>//*[@id='my-id']</code></p></td>&#13;
<td><p><code>#my-id</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Element by class</p></td>&#13;
<td><p><code>//*[contains(@class='my-class')]</code></p></td>&#13;
<td><p><code>.my-class</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Element with attribute</p></td>&#13;
<td><p><code>//*[@attr]</code></p></td>&#13;
<td><p><code>*[attr]</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Find by text in a <code>&lt;div&gt;</code></p></td>&#13;
<td><p><code>//div[text()='search-string']</code></p></td>&#13;
<td><p>Not possible</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>First child of a <code>&lt;div&gt;</code></p></td>&#13;
<td><p><code>//div/*[1]</code></p></td>&#13;
<td><p><code>div&gt;*:first-child</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>All <code>&lt;div&gt;</code> with a link child</p></td>&#13;
<td><p><code>//div[a]</code></p></td>&#13;
<td><p>Not possible</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Next element in a <code>&lt;div&gt;</code></p></td>&#13;
<td><p><code>//div/following-sibling::*[1]</code></p></td>&#13;
<td><p><code>div + *</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Previous element of a <code>&lt;div&gt;</code></p></td>&#13;
<td><p><code>//div/preceding-sibling::*[1]</code></p></td>&#13;
<td><p>Not possible</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>In conclusion, we can see that XPath provides the most general strategy. Nevertheless, there are some cases in which the CSS selectors offer a friendlier syntax (e.g., locating by id or class) and better <a data-startref="ch3_term52" data-type="indexterm" id="idm45849735281216"/><a data-startref="ch3_term53" data-type="indexterm" id="idm45849735280512"/><a data-startref="ch3_term54" data-type="indexterm" id="idm45849735279840"/><a data-startref="ch3_term55" data-type="indexterm" id="idm45849735279168"/><a data-startref="ch3_term56" data-type="indexterm" id="idm45849735278496"/>general performance.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Keyboard Actions" data-type="sect1"><div class="sect1" id="idm45849754242160">&#13;
<h1>Keyboard Actions</h1>&#13;
&#13;
<p>As introduced in <a data-type="xref" href="#webelement-methods">Table 3-3</a>, two main methods in <code>WebDriver</code> objects allow <a data-primary="keyboard actions" data-type="indexterm" id="ch3_term57"/><a data-primary="Selenium WebDriver API" data-secondary="keyboard actions in" data-type="indexterm" id="ch3_term58"/><a data-primary="impersonation, user" data-type="indexterm" id="ch3_term59"/><a data-primary="user impersonation" data-type="indexterm" id="ch3_term60"/><a data-primary="clear() method" data-type="indexterm" id="idm45849735270640"/><a data-primary="sendKeys() method" data-type="indexterm" id="idm45849735269968"/><a data-primary="input devices" data-type="indexterm" id="ch3_term63"/>impersonating keyboard user actions: <code>sendKeys()</code> and <code>clear()</code>. <a data-type="xref" href="#keyboard_basic">Example 3-17</a> shows a test using these methods.</p>&#13;
<div data-type="example" id="keyboard_basic">&#13;
<h5><span class="label">Example 3-17. </span>Test impersonating keyboard events</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testSendKeys</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">inputText</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-text"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO16-1" id="co_webdriver_fundamentals_CO16-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">textValue</code><code> </code><code class="o">=</code><code> </code><code class="s">"Hello World!"</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">inputText</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">textValue</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO16-2" id="co_webdriver_fundamentals_CO16-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">inputText</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">textValue</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO16-3" id="co_webdriver_fundamentals_CO16-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">inputText</code><code class="o">.</code><code class="na">clear</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO16-4" id="co_webdriver_fundamentals_CO16-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">inputText</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEmpty</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO16-5" id="co_webdriver_fundamentals_CO16-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO16-1" id="callout_webdriver_fundamentals_CO16-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use the practice web form to locate the input text named <code>my-text</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO16-2" id="callout_webdriver_fundamentals_CO16-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We simulate a keyboard typing on it using the method <code>sendKeys()</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO16-3" id="callout_webdriver_fundamentals_CO16-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We assess the input value is as expected.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO16-4" id="callout_webdriver_fundamentals_CO16-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We reset its content using <code>clear()</code>.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO16-5" id="callout_webdriver_fundamentals_CO16-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We assess the input value is empty.</p></dd>&#13;
</dl>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45849735156160">&#13;
<h5>Manual Wait in Test Teardown</h5>&#13;
<p>If you inspect the complete code of some tests in the repository example, you will discover a <a data-primary="teardown in testing" data-type="indexterm" id="idm45849735114880"/><a data-primary="Thread.sleep() command" data-type="indexterm" id="idm45849735114176"/>pause in the teardown method using <code>Thread.sleep()</code>. As explained in <a data-type="xref" href="#waiting_strategies">“Waiting Strategies”</a>, this type of wait is usually considered a <em>bad smell</em> (i.e., a characteristic in the source code that can lead to undesirable effects). Nevertheless, I have taken the liberty of using it in some examples for instructional purposes, i.e., to ease the manual inspection of the browser when executing the test locally. I recommend dropping these lines if you plan to reuse the examples in an actual test suite.</p>&#13;
</div></aside>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="File Uploading" data-type="sect2"><div class="sect2" id="idm45849735111488">&#13;
<h2>File Uploading</h2>&#13;
&#13;
<p>There are several <a data-primary="file uploading" data-type="indexterm" id="ch3_term61"/>use cases in which we will need to impersonate keyboard actions when interacting with web pages through Selenium WebDriver. The first one is file uploading. The standard mechanism to upload files for web applications is using <code>&lt;input&gt;</code> elements with <code>type="file"</code>. For instance, the practice web form contains one of these elements:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">input</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-control"</code> <code class="na">type</code><code class="o">=</code><code class="s">"file"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-file"</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>The Selenium WebDriver API <a data-primary="input elements/data" data-type="indexterm" id="ch3_term62"/>does not provide a mechanism to handle file inputs. Instead, we should treat input elements for uploading files as regular text inputs, so we need to simulate the user typing them. In particular, we need to type the <a data-primary="absolute file paths" data-type="indexterm" id="idm45849735101488"/>absolute file path to be uploaded. <a data-type="xref" href="#upload_file">Example 3-18</a> illustrates how.</p>&#13;
<div data-type="example" id="upload_file">&#13;
<h5><span class="label">Example 3-18. </span>Test uploading a file</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testUploadFile</code><code class="o">(</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">IOException</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">initUrl</code><code> </code><code class="o">=</code><code> </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">initUrl</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">inputFile</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-file"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO17-1" id="co_webdriver_fundamentals_CO17-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">Path</code><code> </code><code class="n">tempFile</code><code> </code><code class="o">=</code><code> </code><code class="n">Files</code><code class="o">.</code><code class="na">createTempFile</code><code class="o">(</code><code class="s">"tempfiles"</code><code class="o">,</code><code> </code><code class="s">".tmp"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO17-2" id="co_webdriver_fundamentals_CO17-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">filename</code><code> </code><code class="o">=</code><code> </code><code class="n">tempFile</code><code class="o">.</code><code class="na">toAbsolutePath</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"Using temporal file {} in file uploading"</code><code class="o">,</code><code> </code><code class="n">filename</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">inputFile</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">filename</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO17-3" id="co_webdriver_fundamentals_CO17-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"form"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">submit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO17-4" id="co_webdriver_fundamentals_CO17-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getCurrentUrl</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isNotEqualTo</code><code class="o">(</code><code class="n">initUrl</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO17-5" id="co_webdriver_fundamentals_CO17-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO17-1" id="callout_webdriver_fundamentals_CO17-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate the input field using a by-name strategy.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO17-2" id="callout_webdriver_fundamentals_CO17-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We create a temporal file using standard Java.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO17-3" id="callout_webdriver_fundamentals_CO17-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We type its absolute path to the input field.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO17-4" id="callout_webdriver_fundamentals_CO17-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We submit the form.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO17-5" id="callout_webdriver_fundamentals_CO17-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We verify that the resulting page (defined in <code>action</code> form attribute) is different from the initial web page.</p></dd>&#13;
</dl>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>The file path sent to the input file should correspond to an existing archive in the machine running the test. Otherwise, the <a data-primary="InvalidArgumentException exception" data-type="indexterm" id="idm45849734878336"/><a data-primary="exceptions" data-type="indexterm" id="idm45849734877632"/>test fails with an <code>InvalidArgumentException</code> exception. See <a data-type="xref" href="ch04.html#exceptions">“WebDriver Exceptions”</a> in <a data-type="xref" href="ch05.html#ch05">Chapter 5</a> for further details about exceptions.</p>&#13;
</div>&#13;
&#13;
<p>When uploading a <a data-primary="local file detector" data-type="indexterm" id="idm45849734874192"/><a data-primary="remote browsers" data-secondary="uploading files to" data-type="indexterm" id="idm45849734873456"/>file to a remote browser (as explained in <a data-type="xref" href="ch06.html#ch06">Chapter 6</a>), we need to load the file from the local file system explicitly. The following line shows how to specify a local <a data-startref="ch3_term61" data-type="indexterm" id="idm45849734871392"/>file detector.</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="o">((</code><code class="n">RemoteWebDriver</code><code class="o">)</code> <code class="n">driver</code><code class="o">).</code><code class="na">setFileDetector</code><code class="o">(</code><code class="k">new</code> <code class="n">LocalFileDetector</code><code class="o">());</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Range Sliders" data-type="sect2"><div class="sect2" id="idm45849735111152">&#13;
<h2>Range Sliders</h2>&#13;
&#13;
<p>A similar situation <a data-primary="range sliders" data-type="indexterm" id="idm45849734865376"/><a data-primary="sliders, range" data-type="indexterm" id="idm45849734864640"/>happens with <code>&lt;input type="range"&gt;</code> form fields. These elements allow users to select a number in a range using a graphical slider. You can find an example in the practice web form:</p>&#13;
&#13;
<pre data-code-language="html" data-type="programlisting"><code class="p">&lt;</code><code class="nt">input</code> <code class="na">type</code><code class="o">=</code><code class="s">"range"</code> <code class="na">class</code><code class="o">=</code><code class="s">"form-range"</code> <code class="na">name</code><code class="o">=</code><code class="s">"my-range"</code> <code class="na">min</code><code class="o">=</code><code class="s">"0"</code> <code class="na">max</code><code class="o">=</code><code class="s">"10"</code> <code class="na">step</code><code class="o">=</code><code class="s">"1"</code>&#13;
        <code class="na">value</code><code class="o">=</code><code class="s">"5"</code><code class="p">&gt;</code></pre>&#13;
&#13;
<p>Again, the Selenium WebDriver API does not provide any particular utility to handle these fields. We can interact with them by impersonating keyboard actions with Selenium WebDriver. <a data-type="xref" href="#slider">Example 3-19</a> shows a <a data-primary="form slider" data-type="indexterm" id="idm45849734804240"/>test interaction with these fields.</p>&#13;
<div data-type="example" id="slider">&#13;
<h5><span class="label">Example 3-19. </span>Test selecting a number with a form slider</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testSlider</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">slider</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-range"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">initValue</code><code> </code><code class="o">=</code><code> </code><code class="n">slider</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"The initial value of the slider is {}"</code><code class="o">,</code><code> </code><code class="n">initValue</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code> </code><code class="n">i</code><code> </code><code class="o">&lt;</code><code> </code><code class="mi">5</code><code class="o">;</code><code> </code><code class="n">i</code><code class="o">+</code><code class="o">+</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">slider</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">Keys</code><code class="o">.</code><code class="na">ARROW_RIGHT</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO18-1" id="co_webdriver_fundamentals_CO18-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">String</code><code> </code><code class="n">endValue</code><code> </code><code class="o">=</code><code> </code><code class="n">slider</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">log</code><code class="o">.</code><code class="na">debug</code><code class="o">(</code><code class="s">"The final value of the slider is {}"</code><code class="o">,</code><code> </code><code class="n">endValue</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">initValue</code><code class="o">)</code><code class="o">.</code><code class="na">isNotEqualTo</code><code class="o">(</code><code class="n">endValue</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO18-2" id="co_webdriver_fundamentals_CO18-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO18-1" id="callout_webdriver_fundamentals_CO18-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We send a keyboard key to the range field available in the practice web form. We use the <a data-primary="Keys class" data-type="indexterm" id="idm45849734638224"/>class <code>Keys</code> available in the Selenium WebDriver API to handle special keyboard characters. In particular, we send the right arrow key to the slider, and as a result, it moves to the right (i.e., it increases the selected number within the range).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO18-2" id="callout_webdriver_fundamentals_CO18-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We assert the resulting selected value is different from the one in the original <a data-startref="ch3_term57" data-type="indexterm" id="idm45849734658896"/><a data-startref="ch3_term58" data-type="indexterm" id="idm45849734658192"/><a data-startref="ch3_term62" data-type="indexterm" id="idm45849734657520"/>position.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mouse Actions" data-type="sect1"><div class="sect1" id="idm45849734656464">&#13;
<h1>Mouse Actions</h1>&#13;
&#13;
<p>In addition to the keyboard, the other primary input device for interacting with web applications is the <a data-primary="click() method" data-type="indexterm" id="ch3_term64"/><a data-primary="mouse actions" data-type="indexterm" id="ch3_term65"/><a data-primary="Selenium WebDriver API" data-secondary="mouse actions in" data-type="indexterm" id="ch3_term66"/>computer mouse. First of all, the single-click (also known as left-click or simply <em>click</em>) is impersonated by the Selenium WebDriver API using the method <code>click()</code>, which is one of the methods available per <code>WebElement</code> in Selenium WebDriver. This section shows examples of two typical use cases using this feature: web navigation and interaction with checkboxes and radio buttons in web forms.</p>&#13;
&#13;
<p>Other common mouse actions are <a data-primary="context-click() method" data-type="indexterm" id="idm45849734599600"/><a data-primary="right-click (context-click)" data-type="indexterm" id="idm45849734598992"/>right-clicking (also known as <em>context-click</em>), double-clicking, cursor movement, drag and drop, or mouseover. Selenium WebDriver <a data-primary="Actions class and methods" data-type="indexterm" id="ch3_term67"/>allows impersonating these actions using a helper class called <code>Actions</code>. See the next section for further details. Finally, <a data-primary="JavaScript" data-secondary="for mouse scrolling" data-secondary-sortas="mouse scrolling" data-type="indexterm" id="idm45849734596512"/><a data-primary="scrolling, mouse" data-type="indexterm" id="idm45849734595392"/>scrolling is possible in WebDriver by executing JavaScript. I explain this feature in <a data-type="xref" href="ch04.html#js">“Executing JavaScript”</a>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Web Navigation" data-type="sect2"><div class="sect2" id="idm45849734593792">&#13;
<h2>Web Navigation</h2>&#13;
&#13;
<p><a data-type="xref" href="#basic-navigation">Example 3-20</a> shows a test <a data-primary="WebElements, locating" data-secondary="XPath for" data-type="indexterm" id="idm45849734591760"/><a data-primary="XPath (XML Path Language)" data-type="indexterm" id="idm45849734590784"/><a data-primary="web navigation" data-type="indexterm" id="idm45849734590096"/>implementing automated web navigation with Selenium WebDriver. This test locates links using XPath and clicks on them, invoking the method <code>click()</code>. In the end, it reads the text content of the web page <code>body</code> and verifies it contains an expected string.</p>&#13;
<div data-type="example" id="basic-navigation">&#13;
<h5><span class="label">Example 3-20. </span>Test navigating by clicking on links</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code>&#13;
<code class="kt">void</code> <code class="nf">testNavigation</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">);</code>&#13;
&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//a[text()='Navigation']"</code><code class="o">)).</code><code class="na">click</code><code class="o">();</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//a[text()='Next']"</code><code class="o">)).</code><code class="na">click</code><code class="o">();</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//a[text()='3']"</code><code class="o">)).</code><code class="na">click</code><code class="o">();</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//a[text()='2']"</code><code class="o">)).</code><code class="na">click</code><code class="o">();</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//a[text()='Previous']"</code><code class="o">)).</code><code class="na">click</code><code class="o">();</code>&#13;
&#13;
    <code class="n">String</code> <code class="n">bodyText</code> <code class="o">=</code> <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"body"</code><code class="o">)).</code><code class="na">getText</code><code class="o">();</code>&#13;
    <code class="n">assertThat</code><code class="o">(</code><code class="n">bodyText</code><code class="o">).</code><code class="na">contains</code><code class="o">(</code><code class="s">"Lorem ipsum"</code><code class="o">);</code>&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Checkboxes and Radio Buttons" data-type="sect2"><div class="sect2" id="idm45849734583840">&#13;
<h2>Checkboxes and Radio Buttons</h2>&#13;
&#13;
<p><a data-type="xref" href="#checkbox-radio">Example 3-21</a> shows another <a data-primary="checkboxes" data-type="indexterm" id="idm45849734469888"/><a data-primary="radio buttons" data-type="indexterm" id="idm45849734469184"/><a data-primary="isSelected() method" data-type="indexterm" id="idm45849734468512"/>basic use of the <code>click()</code> method for manipulating checkboxes and radio buttons. To verify the expected state of these elements after the click action, we use an assertion based on the result of the <code>isSelected()</code> method.</p>&#13;
<div data-type="example" id="checkbox-radio">&#13;
<h5><span class="label">Example 3-21. </span>Test interacting with checkboxes and radio buttons</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code>&#13;
<code class="kt">void</code> <code class="nf">testNavigation</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code>&#13;
            <code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">);</code>&#13;
&#13;
    <code class="n">WebElement</code> <code class="n">checkbox2</code> <code class="o">=</code> <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"my-checkbox-2"</code><code class="o">));</code>&#13;
    <code class="n">checkbox2</code><code class="o">.</code><code class="na">click</code><code class="o">();</code>&#13;
    <code class="n">assertThat</code><code class="o">(</code><code class="n">checkbox2</code><code class="o">.</code><code class="na">isSelected</code><code class="o">()).</code><code class="na">isTrue</code><code class="o">();</code>&#13;
&#13;
    <code class="n">WebElement</code> <code class="n">radio2</code> <code class="o">=</code> <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"my-radio-2"</code><code class="o">));</code>&#13;
    <code class="n">radio2</code><code class="o">.</code><code class="na">click</code><code class="o">();</code>&#13;
    <code class="n">assertThat</code><code class="o">(</code><code class="n">radio2</code><code class="o">.</code><code class="na">isSelected</code><code class="o">()).</code><code class="na">isTrue</code><code class="o">();</code>&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="User Gestures" data-type="sect1"><div class="sect1" id="user-gestures">&#13;
<h1>User Gestures</h1>&#13;
&#13;
<p>Selenium WebDriver <a data-startref="ch3_term59" data-type="indexterm" id="idm45849734399760"/><a data-startref="ch3_term60" data-type="indexterm" id="idm45849734398640"/><a data-startref="ch3_term63" data-type="indexterm" id="idm45849734397968"/><a data-startref="ch3_term64" data-type="indexterm" id="idm45849734397296"/><a data-startref="ch3_term65" data-type="indexterm" id="idm45849734396624"/><a data-startref="ch3_term66" data-type="indexterm" id="idm45849734395952"/>provides the class <code>Actions</code>, a powerful asset to automate different user actions, both for keyboard and mouse. This <a data-primary="builder pattern" data-type="indexterm" id="idm45849734394624"/><a data-primary="build() method" data-type="indexterm" id="idm45849734393920"/><a data-primary="methods, chaining" data-type="indexterm" id="idm45849734393248"/><a data-primary="user gestures" data-type="indexterm" id="ch3_term68"/><a data-primary="Selenium WebDriver API" data-secondary="user gestures in" data-type="indexterm" id="ch3_term69"/>class follows the <em>builder</em> pattern. This way, you can chain several methods (i.e., different actions) and perform all of them at the end by calling <code>build()</code>. <a data-type="xref" href="#actions-methods">Table 3-11</a> summarizes the public methods <span class="keep-together">available</span> in this class. We review these methods through examples in the following <span class="keep-together">subsections</span>.</p>&#13;
<table class="pagebreak-before less_space" id="actions-methods">&#13;
<caption><span class="label">Table 3-11. </span>Actions methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">keyDown</code><code class="o">(</code><code class="n">CharSequence</code> <code class="n">key</code><code class="o">)</code>&#13;
<code class="n">keyDown</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">,</code>&#13;
    <code class="n">CharSequence</code> <code class="n">key</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Send a single <a data-primary="keyDown() method" data-type="indexterm" id="idm45849734302832"/>key (it could be a special character using the class <code>Keys</code>) in the current position (or a given element). The key remains pressed until calling to <code>keyUp()</code>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">keyUp</code><code class="o">(</code><code class="n">CharSequence</code> <code class="n">key</code><code class="o">)</code>&#13;
<code class="n">keyUp</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">,</code>&#13;
    <code class="n">CharSequence</code> <code class="n">key</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Release a key previously pressed with <code>keyDown()</code>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">sendKeys</code><code class="o">(</code><code class="n">CharSequence</code><code class="o">...</code> <code class="n">keys</code><code class="o">)</code>&#13;
<code class="n">sendKeys</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">,</code>&#13;
    <code class="n">CharSequence</code><code class="o">...</code> <code class="n">keys</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Send a key <a data-primary="sendKeys() method" data-type="indexterm" id="idm45849734232160"/>sequence in the current position (or a given element). This method is different from <code>WebElement#sendKeys(CharSequence...)</code> in two ways: 1) Modifier keys (e.g., <code>Keys.CONTROL</code>, <code>Keys.SHIFT</code>) are not released explicitly. 2) There is no refocus on the element, so <code>Keys.TAB</code> should work.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">clickAndHold</code><code class="o">()</code>&#13;
<code class="n">clickAndHold</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Click without <a data-primary="clickAndHold() method" data-type="indexterm" id="idm45849734222272"/>releasing the current position (or the middle of a given element).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">release</code><code class="o">()</code>&#13;
<code class="n">release</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Release the left-click mouse button previously pressed with <code>clickAndHold()</code>.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">click</code><code class="o">()</code>&#13;
<code class="n">click</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Click on the <a data-primary="click() method" data-type="indexterm" id="idm45849734161312"/>current position (or a given element).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">doubleClick</code><code class="o">()</code>&#13;
<code class="n">doubleClick</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Double-click on the current position (or element).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">contextClick</code><code class="o">()</code>&#13;
<code class="n">contextClick</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Right-click on the current position (or element).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">moveToElement</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code>&#13;
<code class="n">moveToElement</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">target</code><code class="o">,</code>&#13;
    <code class="kt">int</code> <code class="n">xOffset</code><code class="o">,</code> <code class="kt">int</code> <code class="n">yOffset</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Move mouse cursor to the middle (or shifted to a given offset) of a given element.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">moveByOffset</code><code class="o">(</code><code class="kt">int</code> <code class="n">xOffset</code><code class="o">,</code>&#13;
    <code class="kt">int</code> <code class="n">yOffset</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Move the mouse <a data-primary="moveByOffset() method" data-type="indexterm" id="idm45849734034960"/>from its current position (<code>0,0</code> by default) by the given offset.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">dragAndDrop</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">source</code><code class="o">,</code>&#13;
    <code class="n">WebElement</code> <code class="n">target</code><code class="o">)</code>&#13;
<code class="n">dragAndDropBy</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">source</code><code class="o">,</code>&#13;
    <code class="kt">int</code> <code class="n">xOffset</code><code class="o">,</code> <code class="kt">int</code> <code class="n">yOffset</code><code class="o">)</code>&#13;
<code class="n">dragAndDropBy</code><code class="o">(</code><code class="n">WebElement</code> <code class="n">source</code><code class="o">,</code>&#13;
    <code class="kt">int</code> <code class="n">xOffset</code><code class="o">,</code> <code class="kt">int</code> <code class="n">yOffset</code><code class="o">)</code></pre></div></td>&#13;
<td><p>This action <a data-primary="dragAndDropBy() method" data-type="indexterm" id="idm45849735840176"/><a data-primary="dragAndDrop() method" data-type="indexterm" id="idm45849733962192"/>consists of three steps: 1) Click and hold at the middle (or shifted by a given offset) of the source element location. 2) Move the mouse to the target element location. 3) Release the mouse click.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">pause</code><code class="o">(</code><code class="kt">long</code> <code class="n">pause</code><code class="o">)</code>&#13;
<code class="n">pause</code><code class="o">(</code><code class="n">Duration</code> <code class="n">duration</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Perform a pause <a data-primary="pause() method" data-type="indexterm" id="idm45849733918128"/>in the actions chain (in milliseconds or using a Java <code>Duration</code>).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">build</code><code class="o">()</code></pre></div></td>&#13;
<td><p>Generate a composite <a data-primary="build() method" data-type="indexterm" id="idm45849733912208"/>action containing all previous actions.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">perform</code><code class="o">()</code></pre></div></td>&#13;
<td><p>Execute the <a data-primary="perform() method" data-type="indexterm" id="idm45849733856288"/>composite action.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Right-Click and Double-Click" data-type="sect2"><div class="sect2" id="idm45849733855408">&#13;
<h2>Right-Click and Double-Click</h2>&#13;
&#13;
<p>You can find a demo page using <a data-primary="context-click() method" data-type="indexterm" id="ch3_term70"/><a data-primary="doubleClick() method" data-type="indexterm" id="ch3_term71"/><a data-primary="right-click (context-click)" data-type="indexterm" id="ch3_term72"/>three dropdown menus on the practice site (see <a data-type="xref" href="#dropdown-menus">Figure 3-8</a>). On this page, the first dropdown menu appears when clicking on its button, the second one uses the right-click, and the third one requires a double-click. <a data-type="xref" href="#right_double_click">Example 3-22</a> shows a test using this page to impersonate user gestures through the WebDriver class <code>Actions</code>.</p>&#13;
&#13;
<figure><div class="figure" id="dropdown-menus">&#13;
<img alt="hosw 0308" src="assets/hosw_0308.png"/>&#13;
<h6><span class="label">Figure 3-8. </span>Practice web page with dropdown menus</h6>&#13;
</div></figure>&#13;
<div data-type="example" id="right_double_click">&#13;
<h5><span class="label">Example 3-22. </span>Test using context and double-click</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testContextAndDoubleClick</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/dropdown-menu.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Actions</code><code> </code><code class="n">actions</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Actions</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">dropdown2</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"my-dropdown-2"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">contextClick</code><code class="o">(</code><code class="n">dropdown2</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO19-1" id="co_webdriver_fundamentals_CO19-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">contextMenu2</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"context-menu-2"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">contextMenu2</code><code class="o">.</code><code class="na">isDisplayed</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO19-2" id="co_webdriver_fundamentals_CO19-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">dropdown3</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"my-dropdown-3"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">doubleClick</code><code class="o">(</code><code class="n">dropdown3</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO19-3" id="co_webdriver_fundamentals_CO19-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">contextMenu3</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"context-menu-3"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">contextMenu3</code><code class="o">.</code><code class="na">isDisplayed</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO19-4" id="co_webdriver_fundamentals_CO19-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO19-1" id="callout_webdriver_fundamentals_CO19-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use <code>contextClick()</code> in the middle dropdown menu.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO19-2" id="callout_webdriver_fundamentals_CO19-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We verify the middle menu is correctly displayed.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO19-3" id="callout_webdriver_fundamentals_CO19-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We use <code>doubleClick()</code> in the right dropdown menu.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO19-4" id="callout_webdriver_fundamentals_CO19-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We verify the right menu is <a data-startref="ch3_term70" data-type="indexterm" id="idm45849733682368"/><a data-startref="ch3_term71" data-type="indexterm" id="idm45849733681664"/><a data-startref="ch3_term72" data-type="indexterm" id="idm45849733680992"/>correctly displayed.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mouseover" data-type="sect2"><div class="sect2" id="idm45849733667712">&#13;
<h2>Mouseover</h2>&#13;
&#13;
<p>The second example <a data-primary="mouseover" data-type="indexterm" id="ch3_term73"/>handling <code>Actions</code> uses a sample web page implementing a mouseover. This page displays four images. Each one shows a text label below the image when the mouse pointer is over. <a data-type="xref" href="#mouse-over-java">Example 3-23</a> contains a test that uses this page. <a data-type="xref" href="#mouse-over">Figure 3-9</a> shows this page when the mouse is over the first picture.</p>&#13;
<div data-type="example" id="mouse-over-java">&#13;
<h5><span class="label">Example 3-23. </span>Test using mouseover</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testMouseOver</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/mouse-over.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Actions</code><code> </code><code class="n">actions</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Actions</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code><code> </code><code class="n">imageList</code><code> </code><code class="o">=</code><code> </code><code class="n">Arrays</code><code class="o">.</code><code class="na">asList</code><code class="o">(</code><code class="s">"compass"</code><code class="o">,</code><code> </code><code class="s">"calendar"</code><code class="o">,</code><code> </code><code class="s">"award"</code><code class="o">,</code><code>&#13;
</code><code>            </code><code class="s">"landscape"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">imageName</code><code> </code><code class="o">:</code><code> </code><code class="n">imageList</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO20-1" id="co_webdriver_fundamentals_CO20-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="n">String</code><code> </code><code class="n">xpath</code><code> </code><code class="o">=</code><code> </code><code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code><code class="s">"//img[@src='img/%s.png']"</code><code class="o">,</code><code> </code><code class="n">imageName</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">WebElement</code><code> </code><code class="n">image</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="n">xpath</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO20-2" id="co_webdriver_fundamentals_CO20-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="n">actions</code><code class="o">.</code><code class="na">moveToElement</code><code class="o">(</code><code class="n">image</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO20-3" id="co_webdriver_fundamentals_CO20-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">WebElement</code><code> </code><code class="n">caption</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="n">RelativeLocator</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"div"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">near</code><code class="o">(</code><code class="n">image</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO20-4" id="co_webdriver_fundamentals_CO20-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">caption</code><code class="o">.</code><code class="na">getText</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">containsIgnoringCase</code><code class="o">(</code><code class="n">imageName</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO20-5" id="co_webdriver_fundamentals_CO20-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO20-1" id="callout_webdriver_fundamentals_CO20-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We iterate a string list to locate the four images of the page.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO20-2" id="callout_webdriver_fundamentals_CO20-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use <a data-primary="XPath (XML Path Language)" data-type="indexterm" id="idm45849733455616"/><a data-primary="WebElements, locating" data-secondary="XPath for" data-type="indexterm" id="idm45849733454912"/>XPath to find each <code>&lt;img&gt;</code> web element.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO20-3" id="callout_webdriver_fundamentals_CO20-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We use <code>moveToElement()</code> to <a data-primary="moveToElement() method" data-type="indexterm" id="idm45849733450464"/>move the mouse pointer to the middle of each image.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO20-4" id="callout_webdriver_fundamentals_CO20-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We use <a data-primary="relative locators" data-type="indexterm" id="idm45849733384768"/><a data-primary="WebElements, locating" data-secondary="relative locators for" data-type="indexterm" id="idm45849733384160"/>relative locators to find the displayed label.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO20-5" id="callout_webdriver_fundamentals_CO20-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We use <a data-primary="assertions" data-type="indexterm" id="idm45849733380960"/>assertions to verify that the text is as expected.</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="mouse-over">&#13;
<img alt="hosw 0309" src="assets/hosw_0309.png"/>&#13;
<h6><span class="label">Figure 3-9. </span>Practice web page with mouse-over images</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Drag and Drop" data-type="sect2"><div class="sect2" id="idm45849733378320">&#13;
<h2>Drag and Drop</h2>&#13;
&#13;
<p><a data-type="xref" href="#drag-and-drop-java">Example 3-24</a> illustrates <a data-startref="ch3_term73" data-type="indexterm" id="idm45849733376112"/><a data-primary="drag and drop" data-type="indexterm" id="ch3_term74"/>the use of drag and drop. This test uses the practice web shown in <a data-type="xref" href="#drag-and-drop">Figure 3-10</a>.</p>&#13;
<div data-type="example" id="drag-and-drop-java">&#13;
<h5><span class="label">Example 3-24. </span>Test using drag and drop</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testDragAndDrop</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/drag-and-drop.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Actions</code><code> </code><code class="n">actions</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Actions</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">draggable</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"draggable"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO21-1" id="co_webdriver_fundamentals_CO21-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">offset</code><code> </code><code class="o">=</code><code> </code><code class="mi">100</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Point</code><code> </code><code class="n">initLocation</code><code> </code><code class="o">=</code><code> </code><code class="n">draggable</code><code class="o">.</code><code class="na">getLocation</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">dragAndDropBy</code><code class="o">(</code><code class="n">draggable</code><code class="o">,</code><code> </code><code class="n">offset</code><code class="o">,</code><code> </code><code class="mi">0</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">dragAndDropBy</code><code class="o">(</code><code class="n">draggable</code><code class="o">,</code><code> </code><code class="mi">0</code><code class="o">,</code><code> </code><code class="n">offset</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">dragAndDropBy</code><code class="o">(</code><code class="n">draggable</code><code class="o">,</code><code> </code><code class="o">-</code><code class="n">offset</code><code class="o">,</code><code> </code><code class="mi">0</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">dragAndDropBy</code><code class="o">(</code><code class="n">draggable</code><code class="o">,</code><code> </code><code class="mi">0</code><code class="o">,</code><code> </code><code class="o">-</code><code class="n">offset</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO21-2" id="co_webdriver_fundamentals_CO21-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">initLocation</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">draggable</code><code class="o">.</code><code class="na">getLocation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO21-3" id="co_webdriver_fundamentals_CO21-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">target</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"target"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO21-4" id="co_webdriver_fundamentals_CO21-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">dragAndDrop</code><code class="o">(</code><code class="n">draggable</code><code class="o">,</code><code> </code><code class="n">target</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO21-5" id="co_webdriver_fundamentals_CO21-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">target</code><code class="o">.</code><code class="na">getLocation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">draggable</code><code class="o">.</code><code class="na">getLocation</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO21-6" id="co_webdriver_fundamentals_CO21-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO21-1" id="callout_webdriver_fundamentals_CO21-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate the <em>draggable</em> element.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO21-2" id="callout_webdriver_fundamentals_CO21-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use <code>dragAndDropBy()</code> to move <a data-primary="dragAndDropBy() method" data-type="indexterm" id="idm45849733163328"/>this element a fixed number of pixels (<code>100</code>) four times (right, bottom, left, and up).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO21-3" id="callout_webdriver_fundamentals_CO21-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We assert the element position is the same as the beginning.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO21-4" id="callout_webdriver_fundamentals_CO21-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We find a second element (not draggable this time).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO21-5" id="callout_webdriver_fundamentals_CO21-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We use <code>dragAndDrop()</code> to move <a data-primary="dragAndDrop() method" data-type="indexterm" id="idm45849733106848"/>the draggable element to the second one.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO21-6" id="callout_webdriver_fundamentals_CO21-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>We assert the position of both elements is the same.</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="drag-and-drop">&#13;
<img alt="hosw 0310" src="assets/hosw_0310.png"/>&#13;
<h6><span class="label">Figure 3-10. </span>Practice web page with a draggable element</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Click and Hold" data-type="sect2"><div class="sect2" id="idm45849733102256">&#13;
<h2>Click and Hold</h2>&#13;
&#13;
<p>The following <a data-startref="ch3_term74" data-type="indexterm" id="idm45849733100880"/><a data-primary="click and hold" data-type="indexterm" id="ch3_term75"/>example shows complex user gestures, including click and hold. To that aim, we practice with the web page in <a data-type="xref" href="#draw-in-canvas">Figure 3-11</a>.</p>&#13;
&#13;
<figure><div class="figure" id="draw-in-canvas">&#13;
<img alt="hosw 0311" src="assets/hosw_0311.png"/>&#13;
<h6><span class="label">Figure 3-11. </span>Practice web page with a drawable canvas</h6>&#13;
</div></figure>&#13;
&#13;
<p>This page uses an open source JavaScript library called <a href="https://github.com/szimek/signature_pad">Signature Pad</a> to draw signatures in HTML canvas using the mouse. <a data-type="xref" href="#draw-in-canvas-java">Example 3-25</a> shows a test using it.</p>&#13;
<div data-type="example" id="draw-in-canvas-java">&#13;
<h5><span class="label">Example 3-25. </span>Test drawing a circumference on a canvas</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testClickAndHold</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/draw-in-canvas.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Actions</code><code> </code><code class="n">actions</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Actions</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">canvas</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">tagName</code><code class="o">(</code><code class="s">"canvas"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO22-1" id="co_webdriver_fundamentals_CO22-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">moveToElement</code><code class="o">(</code><code class="n">canvas</code><code class="o">)</code><code class="o">.</code><code class="na">clickAndHold</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO22-2" id="co_webdriver_fundamentals_CO22-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">numPoints</code><code> </code><code class="o">=</code><code> </code><code class="mi">10</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">radius</code><code> </code><code class="o">=</code><code> </code><code class="mi">30</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="k">for</code><code> </code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code class="o">;</code><code> </code><code class="n">i</code><code> </code><code class="o">&lt;</code><code class="o">=</code><code> </code><code class="n">numPoints</code><code class="o">;</code><code> </code><code class="n">i</code><code class="o">+</code><code class="o">+</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO22-3" id="co_webdriver_fundamentals_CO22-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="kt">double</code><code> </code><code class="n">angle</code><code> </code><code class="o">=</code><code> </code><code class="n">Math</code><code class="o">.</code><code class="na">toRadians</code><code class="o">(</code><code class="mi">360</code><code> </code><code class="o">*</code><code> </code><code class="n">i</code><code> </code><code class="o">/</code><code> </code><code class="n">numPoints</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="kt">double</code><code> </code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">Math</code><code class="o">.</code><code class="na">sin</code><code class="o">(</code><code class="n">angle</code><code class="o">)</code><code> </code><code class="o">*</code><code> </code><code class="n">radius</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="kt">double</code><code> </code><code class="n">y</code><code> </code><code class="o">=</code><code> </code><code class="n">Math</code><code class="o">.</code><code class="na">cos</code><code class="o">(</code><code class="n">angle</code><code class="o">)</code><code> </code><code class="o">*</code><code> </code><code class="n">radius</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">actions</code><code class="o">.</code><code class="na">moveByOffset</code><code class="o">(</code><code class="o">(</code><code class="kt">int</code><code class="o">)</code><code> </code><code class="n">x</code><code class="o">,</code><code> </code><code class="o">(</code><code class="kt">int</code><code class="o">)</code><code> </code><code class="n">y</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO22-4" id="co_webdriver_fundamentals_CO22-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">release</code><code class="o">(</code><code class="n">canvas</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO22-5" id="co_webdriver_fundamentals_CO22-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO22-1" id="callout_webdriver_fundamentals_CO22-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate <a data-primary="circumference, drawing" data-type="indexterm" id="idm45849732895744"/><a data-primary="HTML" data-secondary="tags" data-type="indexterm" id="idm45849732895008"/><a data-primary="tag name, HTML" data-type="indexterm" id="idm45849732894064"/><a data-primary="WebElements, locating" data-secondary="HTML tag name for" data-type="indexterm" id="idm45849732893392"/>the canvas by tag name.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO22-2" id="callout_webdriver_fundamentals_CO22-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We move the <a data-primary="clickAndHold() method" data-type="indexterm" id="idm45849732916048"/><a data-primary="moveToElement() method" data-type="indexterm" id="idm45849732915312"/>mouse to this element with <code>moveToElement()</code> and then add the action <code>clickAndHold()</code> (for drawing into the canvas) to the actions pipeline.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO22-3" id="callout_webdriver_fundamentals_CO22-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We iterate using a fixed number of points, using the equation to find the points in a circumference.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO22-4" id="callout_webdriver_fundamentals_CO22-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We use the circumference points (<code>x</code> and <code>y</code>) to move the <a data-primary="moveByOffset() method" data-type="indexterm" id="idm45849732841088"/>mouse by offset (<code>moveByOffset()</code>). Since the click is held from the previous step, the resulting compound action will move the mouse while the click button is pressed.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO22-5" id="callout_webdriver_fundamentals_CO22-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We release the click, build the action, and carry out the whole chain. As a result, a circumference should appear on the <a data-startref="ch3_term75" data-type="indexterm" id="idm45849732837744"/>canvas.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Copy and Paste" data-type="sect2"><div class="sect2" id="idm45849732898336">&#13;
<h2>Copy and Paste</h2>&#13;
&#13;
<p>This last example for user gestures automates a <a data-primary="copy and paste" data-type="indexterm" id="ch3_term76"/><a data-primary="paste, copy and" data-type="indexterm" id="ch3_term77"/>pervasive user action: copy and paste using the keyboard. Here, we use the web form available on the practice website. <a data-type="xref" href="#copy_paste">Example 3-26</a> shows a test impersonating copy and paste.</p>&#13;
<div data-type="example" id="copy_paste">&#13;
<h5><span class="label">Example 3-26. </span>Test impersonating copy and paste</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testCopyAndPaste</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/web-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Actions</code><code> </code><code class="n">actions</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">Actions</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">inputText</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-text"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO23-1" id="co_webdriver_fundamentals_CO23-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">textarea</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">name</code><code class="o">(</code><code class="s">"my-textarea"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">Keys</code><code> </code><code class="n">modifier</code><code> </code><code class="o">=</code><code> </code><code class="n">SystemUtils</code><code class="o">.</code><code class="na">IS_OS_MAC</code><code> </code><code class="o">?</code><code> </code><code class="n">Keys</code><code class="o">.</code><code class="na">COMMAND</code><code> </code><code class="o">:</code><code> </code><code class="n">Keys</code><code class="o">.</code><code class="na">CONTROL</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO23-2" id="co_webdriver_fundamentals_CO23-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">actions</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">inputText</code><code class="o">,</code><code> </code><code class="s">"hello world"</code><code class="o">)</code><code class="o">.</code><code class="na">keyDown</code><code class="o">(</code><code class="n">modifier</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">inputText</code><code class="o">,</code><code> </code><code class="s">"a"</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">inputText</code><code class="o">,</code><code> </code><code class="s">"c"</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">textarea</code><code class="o">,</code><code> </code><code class="s">"v"</code><code class="o">)</code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">perform</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO23-3" id="co_webdriver_fundamentals_CO23-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">inputText</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">isEqualTo</code><code class="o">(</code><code class="n">textarea</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"value"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO23-4" id="co_webdriver_fundamentals_CO23-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO23-1" id="callout_webdriver_fundamentals_CO23-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We locate two web elements: an input text and a text area.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO23-2" id="callout_webdriver_fundamentals_CO23-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use a modifier key for sending the combination Ctrl + C for copying (in Windows and Linux) or Cmd + C for copying (in macOS). To this aim, <a data-primary="SystemUtils class" data-type="indexterm" id="idm45849732687040"/>we use the class <code>SystemUtils</code>, available in the open source library <a href="https://commons.apache.org/proper/commons-io">Apache Commons IO</a> (this dependency is used transitively in the Maven/Gradle project).</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO23-3" id="callout_webdriver_fundamentals_CO23-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We implement the <a data-primary="keyDown() method" data-type="indexterm" id="idm45849732682752"/><a data-primary="sendKeys() method" data-type="indexterm" id="idm45849732682016"/>actions chain composed of the following steps:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Send the char sequence <code>hello world</code> to the input text.</p>&#13;
</li>&#13;
<li>&#13;
<p>Press the key modifier (Ctrl or Cmd, depending on the operating system). Remember that this key remains pressed until we explicitly release it.</p>&#13;
</li>&#13;
<li>&#13;
<p>We send the key <code>a</code> to the input text. Since the modifier is active, the resulting combination is Ctrl + A (or Cmd + A), and as a result, all the text present in the input text is selected.</p>&#13;
</li>&#13;
<li>&#13;
<p>We send the key <code>c</code> to the input text. Again, since the modifier is active, the combination is Ctrl + C (or Cmd + C), and the input text is copied to the <span class="keep-together">clipboard</span>.</p>&#13;
</li>&#13;
<li>&#13;
<p>We send the key <code>v</code> to the text area. This means sending Ctrl + V (or Cmd + V), and the clipboard content is pasted to the text area.</p>&#13;
</li>&#13;
&#13;
</ol></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO23-4" id="callout_webdriver_fundamentals_CO23-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We assert the content of both elements (input text and text area) is the same at the end of <a data-startref="ch3_term67" data-type="indexterm" id="idm45849732609344"/><a data-startref="ch3_term68" data-type="indexterm" id="idm45849732608640"/><a data-startref="ch3_term69" data-type="indexterm" id="idm45849732607968"/><a data-startref="ch3_term76" data-type="indexterm" id="idm45849732607296"/><a data-startref="ch3_term77" data-type="indexterm" id="idm45849732606624"/>the text.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Waiting Strategies" data-type="sect1"><div class="sect1" id="waiting_strategies">&#13;
<h1>Waiting Strategies</h1>&#13;
&#13;
<p>Web applications are <a data-primary="Selenium WebDriver API" data-secondary="waiting strategies in" data-type="indexterm" id="ch3_term78"/><a data-primary="waiting strategies" data-type="indexterm" id="ch3_term79"/>client-server distributed services in which the clients are the web browsers and the <a data-primary="latency, network" data-type="indexterm" id="idm45849732601536"/><a data-primary="network latency" data-type="indexterm" id="idm45849732600864"/>web servers are usually remote hosts. The intermediate network latency could affect the reliability of a WebDriver test. For instance, in the case of high-latency networks or overloaded servers, a slow response might negatively affect the expected conditions of WebDriver tests. In addition, modern web applications tend to be dynamic and asynchronous. Nowadays, <a data-primary="JavaScript" data-secondary="network latency and" data-type="indexterm" id="idm45849732600064"/>JavaScript allows executing nonblocking (i.e., asynchronous) operations using different mechanisms, such as callbacks, promises, or async/await. In addition, we can retrieve data from other servers asynchronously, for example, using AJAX (Asynchronous JavaScript and XML) or REST (REpresentational State Transfer) services.</p>&#13;
&#13;
<p>All in all, it is of paramount importance to have mechanisms pause and wait for certain conditions in our WebDriver tests. For this reason, the Selenium WebDriver API provides different waiting assets. The three principal waiting strategies are <em>implicit</em>, <em>explicit</em>, and <em>fluent</em> waits. The following subsections explain and show examples.</p>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>For waiting in Java, you <a data-primary="Thread.sleep() command" data-type="indexterm" id="idm45849732596288"/>might think about including <code>Thread.sleep()</code> commands in your code. On the one hand, it is a simple solution, but on the other hand, it is considered a <em>bad smell</em> (i.e., a weak sign) that could lead to unreliable tests (since the delay conditions can change). As a general rule, I strongly discourage you from using it. Instead, consider using the aforementioned wait strategies.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Implicit Wait" data-type="sect2"><div class="sect2" id="implicit_wait">&#13;
<h2>Implicit Wait</h2>&#13;
&#13;
<p>The first waiting strategy <a data-primary="implicit waits" data-type="indexterm" id="ch3_term80"/>provided by Selenium WebDriver is called <em>implicit</em>. This mechanism allows <a data-primary="exceptions" data-type="indexterm" id="idm45849732591008"/>specifying an amount of time before throwing an exception when finding an element. By default, this wait has a value of zero seconds (i.e., it does not wait at all). But when we define an implicit wait value, Selenium WebDriver polls the DOM during the implicit wait value when trying to find an element. The poll time is specific to the driver implementation and is frequently less than five hundred ms. If the element is present in the elapsed time, the script continues. Otherwise, it throws an exception.</p>&#13;
&#13;
<p><a data-type="xref" href="#implicit_wait_test">Example 3-27</a> illustrates this strategy. This <a data-primary="loading images, wait time examples with" data-type="indexterm" id="idm45849732589088"/>test uses a practice page (see <a data-type="xref" href="#loading-page">Figure 3-12</a>) that dynamically loads several images into the DOM. Since these images are <span class="keep-together">not available</span> just before the page is loaded, we need to wait for these images to be <span class="keep-together">available</span>.</p>&#13;
&#13;
<figure><div class="figure" id="loading-page">&#13;
<img alt="hosw 0312" src="assets/hosw_0312.png"/>&#13;
<h6><span class="label">Figure 3-12. </span>Practice web page loading images</h6>&#13;
</div></figure>&#13;
<div data-type="example" id="implicit_wait_test">&#13;
<h5><span class="label">Example 3-27. </span>Test using an implicit wait in the “loading images” page</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testImplicitWait</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/loading-images.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">manage</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">timeouts</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">implicitlyWait</code><code class="o">(</code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO24-1" id="co_webdriver_fundamentals_CO24-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">landscape</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"landscape"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO24-2" id="co_webdriver_fundamentals_CO24-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">landscape</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"src"</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">containsIgnoringCase</code><code class="o">(</code><code class="s">"landscape"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO24-1" id="callout_webdriver_fundamentals_CO24-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Before interacting with the elements, we specify an implicit wait strategy. In this case, we set up a timeout of 10 seconds.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO24-2" id="callout_webdriver_fundamentals_CO24-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>In the following calls, we use the Selenium WebDriver API as usual.</p></dd>&#13;
</dl>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>You can play with this feature by dropping the implicit wait from the test (step 1). If you do that, you will <a data-primary="NoSuchElementException exception" data-type="indexterm" id="idm45849732510304"/>notice that the test fails in step 2 due to a <code>NoSuchElementException</code>.</p>&#13;
</div>&#13;
&#13;
<p>Although supported by the Selenium WebDriver API, implicit waits have different inconveniences you need to know. First, an implicit wait only works on finding elements. Second, we cannot customize its behavior since its implementation is <span class="keep-together">driver-specific</span>. Finally, and since implicit waits are applied globally, checking for the absence of web elements usually increases the execution time for the entire script. For these reasons, implicit waits are typically considered bad practice in most cases, and explicit and fluent waits are <a data-startref="ch3_term80" data-type="indexterm" id="idm45849732507808"/>preferred instead.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Explicit Wait" data-type="sect2"><div class="sect2" id="idm45849732506848">&#13;
<h2>Explicit Wait</h2>&#13;
&#13;
<p>The second <a data-primary="explicit waits" data-type="indexterm" id="ch3_term83"/>waiting strategy, called <em>explicit</em>, allows pausing the test execution a maximum amount of time until a specific condition happens. To use this strategy, we <a data-primary="WebDriverWait class" data-type="indexterm" id="ch3_term82"/>need to create an instance of <code>WebDriverWait</code>, using the <code>WebDriver</code> object as the first constructor argument, and an <a data-primary="Duration timeout argument" data-type="indexterm" id="idm45849732461728"/>instance of <code>Duration</code> as the second argument (to specify the timeout).</p>&#13;
&#13;
<p>Selenium WebDriver provides a <a data-primary="ExpectedConditions class" data-type="indexterm" id="ch3_term81"/>comprehensive set of expected conditions using the <code>ExpectedConditions</code> class. These conditions are very readable, and it does not require further explanation to understand their purpose. I recommend you use an autocomplete feature in your favorite IDE to discover all the possibilities. For example, <a data-type="xref" href="#expected-conditions-eclipse">Figure 3-13</a> shows this <a data-primary="Eclipse IDE" data-type="indexterm" id="idm45849732457760"/>list in Eclipse.</p>&#13;
&#13;
<figure><div class="figure" id="expected-conditions-eclipse">&#13;
<img alt="hosw 0313" src="assets/hosw_0313.png"/>&#13;
<h6><span class="label">Figure 3-13. </span>Autocomplete in Eclipse for the ExpectedConditions class</h6>&#13;
</div></figure>&#13;
&#13;
<p><a data-type="xref" href="#explicit_wait">Example 3-28</a> shows a test using an explicit wait. In the example, <a data-primary="presenceOfElementLocated condition" data-type="indexterm" id="idm45849732453760"/>we use the <span class="keep-together"><code>presenceofElementLocated</code></span> condition <a data-primary="loading images, tests of waiting for" data-type="indexterm" id="idm45849732452096"/>to wait until one of the images is available on the practice web page.</p>&#13;
<div data-type="example" id="explicit_wait">&#13;
<h5><span class="label">Example 3-28. </span>Test using an explicit wait in the “loading images” page</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testExplicitWait</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/loading-images.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">WebDriverWait</code><code> </code><code class="n">wait</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">WebDriverWait</code><code class="o">(</code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO25-1" id="co_webdriver_fundamentals_CO25-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">landscape</code><code> </code><code class="o">=</code><code> </code><code class="n">wait</code><code class="o">.</code><code class="na">until</code><code class="o">(</code><code class="n">ExpectedConditions</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">presenceOfElementLocated</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"landscape"</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO25-2" id="co_webdriver_fundamentals_CO25-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">landscape</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"src"</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">containsIgnoringCase</code><code class="o">(</code><code class="s">"landscape"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO25-1" id="callout_webdriver_fundamentals_CO25-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We create the <code>wait</code> instance. In this case, the selected timeout is 10 seconds.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO25-2" id="callout_webdriver_fundamentals_CO25-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We explicitly wait for a given condition (in this case, the presence of a given element) by <a data-primary="until() method" data-type="indexterm" id="idm45849732372416"/>invoking the <code>until()</code> method in the <code>WebDriverWait</code> object. To achieve a more readable statement, you can also statically import this expected condition (<code>presenceOfElementLocated</code>). In this book, I decided to keep the class name (<code>ExpectedConditions</code>) in these conditions to ease the autocomplete feature in IDEs as described before.</p></dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#explicit_wait_2">Example 3-29</a> shows another test using explicit waits. This test uses another practice web page <a data-primary="slow calculator example, wait time with" data-type="indexterm" id="idm45849732368720"/>called “slow calculator,” which contains a GUI of a basic calculator, tuned to wait a configurable time to get the result of basic arithmetic operations (by default, five seconds). <a data-type="xref" href="#slow-calculator">Figure 3-14</a> shows a screenshot of this page.</p>&#13;
<div data-type="example" id="explicit_wait_2">&#13;
<h5><span class="label">Example 3-29. </span>Test using an explicit wait in the “slow calculator” page</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testSlowCalculator</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/slow-calculator.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// 1 + 3&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='1']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO26-1" id="co_webdriver_fundamentals_CO26-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='+']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='3']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">xpath</code><code class="o">(</code><code class="s">"//span[text()='=']"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// ... should be 4, wait for it&#13;
</code><code>    </code><code class="n">WebDriverWait</code><code> </code><code class="n">wait</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">WebDriverWait</code><code class="o">(</code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">wait</code><code class="o">.</code><code class="na">until</code><code class="o">(</code><code class="n">ExpectedConditions</code><code class="o">.</code><code class="na">textToBe</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">className</code><code class="o">(</code><code class="s">"screen"</code><code class="o">)</code><code class="o">,</code><code> </code><code class="s">"4"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO26-2" id="co_webdriver_fundamentals_CO26-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO26-1" id="callout_webdriver_fundamentals_CO26-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use XPath <a data-primary="XPath (XML Path Language)" data-type="indexterm" id="idm45849732185232"/><a data-primary="WebElements, locating" data-secondary="XPath for" data-type="indexterm" id="idm45849732208704"/>locators to click the buttons corresponding to operation 1 + 3.</p></dd>&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO26-2" id="callout_webdriver_fundamentals_CO26-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>Since the test should wait until the result is ready, we explicitly wait for that. In this case, the condition is the text of the element with a class name <code>screen</code> is equal to 4.</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="slow-calculator">&#13;
<img alt="hosw 0314" src="assets/hosw_0314.png"/>&#13;
<h6><span class="label">Figure 3-14. </span>Practice web page with the “slow calculator” demo</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Fluent Wait" data-type="sect2"><div class="sect2" id="idm45849732466608">&#13;
<h2>Fluent Wait</h2>&#13;
&#13;
<p>The last <a data-startref="ch3_term81" data-type="indexterm" id="idm45849732201024"/><a data-startref="ch3_term82" data-type="indexterm" id="idm45849732146864"/><a data-startref="ch3_term83" data-type="indexterm" id="idm45849732146256"/><a data-primary="fluent waits" data-type="indexterm" id="ch3_term84"/>strategy is a <em>fluent</em> wait. This mechanism is a generalization of explicit waits. In other words, we use fluent waits for pausing the test until certain conditions, but in addition, fluent waits provide fine-grained configuration capabilities. <a data-type="xref" href="#fluentwait-methods">Table 3-12</a> summarizes the methods <a data-primary="Duration timeout argument" data-type="indexterm" id="idm45849732143424"/><a data-primary="ignoring() method" data-type="indexterm" id="idm45849732142688"/><a data-primary="pollingEvery() method" data-type="indexterm" id="idm45849732142016"/><a data-primary="until() method" data-type="indexterm" id="idm45849732141344"/><a data-primary="withMessage() method" data-type="indexterm" id="idm45849732140672"/><a data-primary="withTimeout() method" data-type="indexterm" id="idm45849732140000"/><a data-primary="FluentWait class" data-type="indexterm" id="ch3_term85"/>available in <code>FluentWait</code>. As its name suggests, this class provides a fluent API, and therefore, we can chain several invocations in the same line. <a data-type="xref" href="#fluent_wait">Example 3-30</a> shows a test using fluent wait.</p>&#13;
<table id="fluentwait-methods">&#13;
<caption><span class="label">Table 3-12. </span>Fluent wait methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">withTimeout</code><code class="o">(</code><code class="n">Duration</code> <code class="n">timeout</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Timeout using Java <code>Duration</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">pollingEvery</code><code class="o">(</code><code class="n">Duration</code> <code class="n">interval</code><code class="o">)</code></pre></div></td>&#13;
<td><p>How often the condition is evaluated (five hundred ms by default)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">withMessage</code><code class="o">(</code><code class="n">String</code> <code class="n">message</code><code class="o">)</code>&#13;
<code class="n">withMessage</code><code class="o">(</code><code class="n">Supplier</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code> <code class="n">messageSupplier</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Custom error message</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">ignoring</code><code class="o">(</code><code class="n">Class</code><code class="o">&lt;?</code> <code class="kd">extends</code> <code class="n">Throwable</code><code class="o">&gt;</code> <code class="n">exceptionType</code><code class="o">)</code>&#13;
<code class="n">ignoring</code><code class="o">(</code><code class="n">Class</code><code class="o">&lt;?</code> <code class="kd">extends</code> <code class="n">Throwable</code><code class="o">&gt;</code> <code class="n">firstType</code><code class="o">,</code>&#13;
    <code class="n">Class</code><code class="o">&lt;?</code> <code class="kd">extends</code> <code class="n">Throwable</code><code class="o">&gt;</code> <code class="n">secondType</code><code class="o">)</code>&#13;
<code class="n">ignoreAll</code><code class="o">(</code><code class="n">Collection</code><code class="o">&lt;</code><code class="n">Class</code><code class="o">&lt;?</code> <code class="kd">extends</code> <code class="n">Throwable</code><code class="o">&gt;&gt;</code>&#13;
    <code class="n">types</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Ignore specific exceptions while waiting for a condition</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><div>&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">until</code><code class="o">(</code><code class="n">Function</code><code class="o">&lt;?</code> <code class="kd">super</code> <code class="n">T</code><code class="o">,</code> <code class="n">V</code><code class="o">&gt;</code> <code class="n">isTrue</code><code class="o">)</code></pre></div></td>&#13;
<td><p>Expected condition</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<div data-type="example" id="fluent_wait">&#13;
<h5><span class="label">Example 3-30. </span>Test using a fluent wait</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testFluentWait</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/loading-images.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">Wait</code><code class="o">&lt;</code><code class="n">WebDriver</code><code class="o">&gt;</code><code> </code><code class="n">wait</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">FluentWait</code><code class="o">&lt;</code><code class="o">&gt;</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">withTimeout</code><code class="o">(</code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="mi">10</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">pollingEvery</code><code class="o">(</code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="mi">1</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">ignoring</code><code class="o">(</code><code class="n">NoSuchElementException</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_webdriver_fundamentals_CO27-1" id="co_webdriver_fundamentals_CO27-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">landscape</code><code> </code><code class="o">=</code><code> </code><code class="n">wait</code><code class="o">.</code><code class="na">until</code><code class="o">(</code><code class="n">ExpectedConditions</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">presenceOfElementLocated</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"landscape"</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">landscape</code><code class="o">.</code><code class="na">getAttribute</code><code class="o">(</code><code class="s">"src"</code><code class="o">)</code><code class="o">)</code><code>&#13;
</code><code>            </code><code class="o">.</code><code class="na">containsIgnoringCase</code><code class="o">(</code><code class="s">"landscape"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_webdriver_fundamentals_CO27-1" id="callout_webdriver_fundamentals_CO27-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>As you can see, this test is very similar to <a data-type="xref" href="#explicit_wait">Example 3-28</a>, although using a <code>FluentWait</code> instance, we can specify additional characteristics. In this case, we change the poll time to one second.</p></dd>&#13;
</dl>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>The <a data-primary="WebDriverWait class" data-type="indexterm" id="idm45849731844624"/>class <code>WebDriverWait</code> (presented in the previous subsection) extends the generic class <code>FluentWait</code>. Thus, you can use all the methods shown in <a data-type="xref" href="#fluentwait-methods">Table 3-12</a> for explicit waits <a data-startref="ch3_term84" data-type="indexterm" id="idm45849731842096"/><a data-startref="ch3_term85" data-type="indexterm" id="idm45849731841392"/>too.</p>&#13;
</div>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45849731840464">&#13;
<h5>Related Features in Selenium WebDriver</h5>&#13;
<p>In addition to the previously introduced waiting strategies, there are other complementary characteristics in Selenium WebDriver you should be aware of:</p>&#13;
<dl>&#13;
<dt>Loading strategies</dt>&#13;
<dd>&#13;
<p>Selenium <a data-primary="loading strategies, web page" data-type="indexterm" id="idm45849731791536"/><a data-primary="web pages" data-secondary="loading strategies of" data-type="indexterm" id="idm45849731790928"/>WebDriver allows specifying different approaches for page loading. This feature is accessible through browser-specific capabilities (e.g., using <span class="keep-together"><code>ChromeOptions</code></span>, <code>FirefoxOptions</code>, etc.). For this reason, I explain this feature in <a data-type="xref" href="ch05.html#loading_strategies">“Page Loading Strategies”</a>.</p>&#13;
</dd>&#13;
<dt>Timeouts</dt>&#13;
<dd>&#13;
<p>Selenium WebDriver <a data-primary="timeouts" data-type="indexterm" id="idm45849731786768"/>allows specifying the maximum elapsed time for page and script loading. I explain this feature in <a data-type="xref" href="ch04.html#timeouts">“Timeouts”</a>.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Summary and Outlook" data-type="sect1"><div class="sect1" id="idm45849731784352">&#13;
<h1>Summary and Outlook</h1>&#13;
&#13;
<p>This chapter <a data-startref="ch3_term78" data-type="indexterm" id="idm45849731782800"/><a data-startref="ch3_term79" data-type="indexterm" id="idm45849731782096"/>presented the foundations of the Selenium WebDriver API. First, you learned how to create and shut down <code>WebDriver</code> instances. These objects represent a browser controlled with Selenium WebDriver. This way, we use an instance of <code>ChromeDriver</code> for Chrome, <code>FirefoxDriver</code> for Firefox, etc. Second, you <a data-primary="WebElements, locating" data-secondary="summary of strategies for" data-type="indexterm" id="idm45849731779760"/>looked at <code>Web​Ele⁠ment</code>, a class representing different web page elements (e.g., links, images, form fields, etc.). Selenium WebDriver provides several strategies to locate web elements: by HTML attribute (id, name, or class), tag name, link text (complete or partial), CSS selector, and XPath. We also looked at a <a data-primary="Selenium WebDriver 4 (version)" data-secondary="relative locators in" data-type="indexterm" id="idm45849731778272"/>brand-new strategy of Selenium WebDriver 4 called relative locators. Then, we covered user actions’ impersonation, using the keyboard and the mouse. You can use these actions from simple actions (e.g., clicking a link, filling a text input, etc.) to complex user gestures (e.g., drag and drop, click and hover, etc.). Finally, we examined the ability to wait in Selenium WebDriver tests. This feature is critical due to the current distributed, dynamic, and asynchronous nature of web applications. There are three main wait strategies in Selenium WebDriver: implicit (specify a general timeout to wait for elements), explicit (pause test execution until a given condition), and fluent (extension of an explicit wait with some fine-grained setup).</p>&#13;
&#13;
<p>The next chapter continues digging into the Selenium WebDriver API. In particular, <a data-type="xref" href="ch04.html#ch04">Chapter 4</a> reviews those interoperable features in different browsers (Chrome, Edge, Firefox, etc.). Among these features, you will discover how to execute JavaScript, specify event listeners, configure timeouts for page and script loading, manage the browser history, make screenshots, manipulate cookies, manipulate dropdown lists (i.e., selects and data lists), handle window targets (i.e., tabs, frames, and iframes) and dialog boxes (i.e., alerts, prompts, confirmation, and modal pop-ups), use web storage, and understand the WebDriver exceptions.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>