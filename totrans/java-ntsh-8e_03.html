<html><head></head><body>
<div id="sbo-rt-content"><section data-nutshell-tab="Java Syntax" data-pdf-bookmark="Chapter 2. Java Syntax from the Ground Up" data-type="chapter" epub:type="chapter"><div class="chapter" id="javanut8-CHP-2">
<h1><span class="label">Chapter 2. </span>Java Syntax from the Ground Up</h1>
<p><a data-primary="syntax, Java" data-type="indexterm" id="ix_ch02-asciidoc0"/>This chapter is fairly dense but should provide a comprehensive introduction to Java syntax.
It is written primarily for readers who are new to the language but have
some previous programming experience. Determined novices with no prior
programming experience may also find it useful. If you already know
Java, you should find it a useful language reference. The chapter
includes some comparisons of Java to JavaScript, C, and C++ for the benefit of
programmers coming from those languages.</p>
<p>This chapter documents the syntax of Java programs by starting at the
very lowest level of Java syntax and building from there, moving on to
increasingly higher orders of structure. It covers:</p>
<ul>
<li>
<p>The characters used to write Java programs and the encoding of those <span class="keep-together">characters</span>.</p>
</li>
<li>
<p>Literal values, identifiers, and other tokens that comprise a Java program.</p>
</li>
<li>
<p>The data types that Java can manipulate.</p>
</li>
<li>
<p>The operators used in Java to group individual tokens into larger expressions.</p>
</li>
<li>
<p>Statements, which group expressions and other statements to form logical chunks of Java code.</p>
</li>
<li>
<p>Methods, which are named collections of Java statements that can be invoked by other Java code.</p>
</li>
<li>
<p>Classes, which are collections of methods and fields. Classes are the central program element in Java and form the basis for object-oriented programming. <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a> is devoted entirely to a discussion of classes and objects.</p>
</li>
</ul>
<ul class="pagebreak-before">
<li>
<p>Packages, which are collections of related classes.</p>
</li>
<li>
<p>Java programs, which consist of one or more interacting classes that may be drawn from one or more packages.</p>
</li>
</ul>
<p>The syntax of most programming languages is complex, and Java is no
exception. In general, it is not possible to document all elements of a
language without referring to other elements that have not yet been
discussed. For example, it is not really possible to explain in a
meaningful way the operators and statements supported by Java without
referring to objects. But it is also not possible to document objects
thoroughly without referring to the operators and statements of the
language. The process of learning Java, or any language, is therefore an
iterative one.</p>
<section data-pdf-bookmark="Java Programs from the Top Down" data-type="sect1"><div class="sect1" id="idm45927768149520">
<h1>Java Programs from the Top Down</h1>
<p><a data-primary="Java programs" data-secondary="contents of" data-type="indexterm" id="idm45927768148064"/><a data-primary="syntax, Java" data-secondary="overview of Java program" data-type="indexterm" id="idm45927768146928"/>Before we begin our bottom-up exploration of Java syntax, let’s take a
moment for a top-down overview of a Java program. <a data-primary="compilation units" data-type="indexterm" id="idm45927768145840"/>Java programs consist
of one or more files, or <em>compilation units</em>, of Java source code. Near
the end of the chapter, we describe the structure of a Java file and
explain how to compile and run a Java program. <a data-primary="import declarations" data-type="indexterm" id="idm45927768144496"/><a data-primary="package declarations" data-type="indexterm" id="idm45927768143792"/>Each compilation unit
begins with an optional <code>package</code> declaration followed by zero or more
<code>import</code> declarations. These declarations specify the namespace within
which the compilation unit will define names and the namespaces from
which the compilation unit imports names. We’ll see <code>package</code> and
<code>import</code> again later in this chapter in
<a data-type="xref" href="#javanut8-CHP-2-SECT-10">“Packages and the Java Namespace”</a>.</p>
<p><a data-primary="reference types" data-type="indexterm" id="idm45927768140288"/>The optional <code>package</code> and <code>import</code> declarations are followed by zero or
more reference type definitions. We will meet the full variety of
possible reference types in Chapters <a data-type="xref" data-xrefstyle="select:labelnumber" href="ch03.xhtml#javanut8-CHP-3">3</a> and
<a data-type="xref" data-xrefstyle="select:labelnumber" href="ch04.xhtml#javanut8-CHP-4">4</a>, but for now, we should note that these are most often either <code>class</code> or <code>interface</code> definitions.</p>
<p>Within the definition of a reference type, we will encounter <em>members</em>
such as <em>fields</em>, <em>methods</em>, and <em>constructors</em>. Methods are the most
important kind of member. Methods are blocks of Java code composed of
<em>statements</em>.</p>
<p>With these basic terms defined, let’s start by approaching a Java
program from the bottom up by examining the basic units of syntax—often
referred to as <em>lexical tokens</em>.</p>
</div></section>
<section data-pdf-bookmark="Lexical Structure" data-type="sect1"><div class="sect1" id="idm45927768549840">
<h1>Lexical Structure</h1>
<p><a data-primary="Java programs" data-secondary="lexical structure of" data-type="indexterm" id="ix_ch02-asciidoc1"/><a data-primary="lexical structure" data-secondary="of Java program" data-secondary-sortas="Java program" data-type="indexterm" id="ix_ch02-asciidoc2"/><a data-primary="syntax, Java" data-secondary="lexical structure of Java program" data-type="indexterm" id="ix_ch02-asciidoc3"/>This section explains the lexical structure of a Java program. It
starts with a discussion of the Unicode character set in which Java
programs are written. It then covers the tokens that comprise a Java
program, explaining comments, identifiers, reserved words, literals, and
so on.</p>
<section data-pdf-bookmark="The Unicode Character Set" data-type="sect2"><div class="sect2" id="idm45927768544192">
<h2>The Unicode Character Set</h2>
<p><a data-primary="character sets" data-type="indexterm" id="idm45927768543056"/><a data-primary="lexical structure" data-secondary="Unicode character set" data-type="indexterm" id="idm45927768542352"/><a data-primary="syntax, Java" data-secondary="Unicode character set" data-type="indexterm" id="idm45927768541408"/><a data-primary="Unicode character set" data-type="indexterm" id="idm45927768540464"/>Java programs are written using Unicode. You can use Unicode
characters anywhere in a Java program, including comments and
identifiers such as variable names. Unlike the 7-bit ASCII character
set, which is useful only for English, and the 8-bit ISO Latin-1
character set, which is useful only for major Western European
languages, the Unicode character set can represent virtually every
written language in common use on the planet.</p>
<div data-type="tip"><h6>Tip</h6>
<p><a data-primary="escape sequences" data-secondary="Unicode characters" data-type="indexterm" id="idm45927768538816"/>If you do not use a Unicode-enabled text editor, or if you do not want
to force other programmers who view or edit your code to use a
Unicode-enabled editor, you can embed Unicode characters into your Java
programs using the special Unicode escape sequence <code>\u<em>xxxx</em></code>—that is, a backslash and a lowercase u, followed by four hexadecimal
characters. For example, <code>\u0020</code> is the space character, and <code>\u03c0</code>
is the character π.</p>
</div>
<p>Java has invested a large amount of time and engineering effort in
ensuring that its Unicode support is first class. If your business
application needs to deal with global users, especially in non-Western
markets, then the Java platform is a great choice.
Java also has support for multiple encodings and character sets, in case applications need to interact with non-Java applications that do not speak Unicode.</p>
</div></section>
<section data-pdf-bookmark="Case Sensitivity and Whitespace" data-type="sect2"><div class="sect2" id="idm45927768535264">
<h2>Case Sensitivity and Whitespace</h2>
<p><a data-primary="case sensitivity" data-type="indexterm" id="idm45927768534048"/><a data-primary="lexical structure" data-secondary="case sensitivity" data-type="indexterm" id="idm45927768533184"/><a data-primary="lexical structure" data-secondary="whitespace" data-type="indexterm" id="idm45927768532240"/><a data-primary="syntax, Java" data-secondary="case sensitivity" data-type="indexterm" id="idm45927768531296"/><a data-primary="syntax, Java" data-secondary="whitespace" data-type="indexterm" id="idm45927768530352"/><a data-primary="whitespace" data-type="indexterm" id="idm45927768529408"/>Java is a case-sensitive language. Its keywords are written in
lowercase and must always be used that way. That is, <code>While</code> and <code>WHILE</code>
are not the same as the <code>while</code> keyword. Similarly, if you declare a
variable named <code>i</code> in your program, you may not refer to it as <code>I</code>.</p>
<div data-type="tip"><h6>Tip</h6>
<p>In general, relying on case sensitivity to distinguish identifiers is a
terrible idea. The more similar identifiers there are, the more difficult the code is to read and understand. Do not use it in your own code, and in particular never
give an identifier the same name as a keyword but differently cased.</p>
</div>
<p>Java ignores spaces, tabs, newlines, and other whitespace, except when they
appear within quoted characters and string literals. Programmers typically use
whitespace to format and indent their code for easy readability, but it has no
influence on the program’s behavior as indents do in Python. You will see common
indentation conventions in this book’s code examples.</p>
</div></section>
<section data-pdf-bookmark="Comments" data-type="sect2"><div class="sect2" id="idm45927768524560">
<h2>Comments</h2>
<p><a data-primary="comments, in Java programs" data-type="indexterm" id="idm45927768523120"/><a data-primary="lexical structure" data-secondary="comments" data-type="indexterm" id="idm45927768522400"/><a data-primary="syntax, Java" data-secondary="comments" data-type="indexterm" id="idm45927768521456"/>Comments are natural-language text intended for human readers of a
program. They are ignored by the Java compiler. Java supports three
types of comments. <a data-primary="/ (slash)" data-secondary="// in single-line comments" data-type="indexterm" id="idm45927768520384"/>The first type is a single-line comment, which
begins with the characters <code>//</code> and continues until the end of the
current line. For example:</p>
<pre class="pre" data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w">   </code><code class="c1">// Initialize the loop variable</code><code class="w"/></pre>
<p><a data-primary="/ (slash)" data-secondary="/* */ in multiline comments" data-type="indexterm" id="idm45927773527792"/><a data-primary="* (asterisk)" data-secondary="in multiline comments" data-secondary-sortas="multiline comments" data-type="indexterm" id="idm45927773526720"/>The second kind of comment is a multiline comment. It begins with the
characters <code>/*</code> and continues, over any number of lines, until the
characters <code>*/</code>. Any text between the <code>/*</code> and the <code>*/</code> is ignored by
<code>javac</code>. Although this style of comment is typically used for multiline
comments, it also can be used for single-line comments. This type of
comment cannot be nested (i.e., one <code>/* */</code> comment cannot appear within
another). When writing multiline comments, programmers often use extra
<code>*</code> characters to make the comments stand out. Here is a typical
multiline comment:</p>
<pre data-code-language="java" data-type="programlisting"><code class="cm">/*</code>
<code class="cm"> * First, establish a connection to the server.</code>
<code class="cm"> * If the connection attempt fails, quit right away.</code>
<code class="cm"> */</code><code class="w"/></pre>
<p><a data-primary="/ (slash)" data-secondary="/** */ in doc comments" data-type="indexterm" id="idm45927766506832"/><a data-primary="doc comments" data-type="indexterm" id="idm45927773513840"/>The third type of comment is a special case of the second. If a comment
begins with <code>/**</code>, it is regarded as a special <em>doc comment</em>. Like
regular multiline comments, doc comments end with <code>*/</code> and cannot be
nested. When you write a Java class you expect other programmers to use,
provide doc comments to embed documentation about the class and each of its
methods directly into the source code. <a data-primary="javadoc" data-type="indexterm" id="idm45927766501616"/>A program named <code>javadoc</code>
extracts these comments and processes them to create online
documentation for your class. A doc comment can contain HTML tags and
can use additional syntax understood by <code>javadoc</code>. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="cm">/**</code>
<code class="cm"> * Upload a file to a web server.</code>
<code class="cm"> *</code>
<code class="cm"> * @param file The file to upload.</code>
<code class="cm"> * @return &lt;tt&gt;true&lt;/tt&gt; on success,</code>
<code class="cm"> *         &lt;tt&gt;false&lt;/tt&gt; on failure.</code>
<code class="cm"> * @author David Flanagan</code>
<code class="cm"> */</code><code class="w"/></pre>
<p>See <a data-type="xref" href="ch07.xhtml#javanut8-CHP-7">Chapter 7</a> for more information on the doc comment syntax and <a data-type="xref" href="ch13.xhtml#javanut8-CHP-13">Chapter 13</a> for more information on the <code>javadoc</code> program.</p>
<p>Comments may appear between any tokens of a Java program but may not
appear within a token. In particular, comments may not appear within
double-quoted string literals. A comment within a string literal simply
becomes a literal part of that string.</p>
</div></section>
<section data-pdf-bookmark="Reserved Words" data-type="sect2"><div class="sect2" id="idm45927773828544">
<h2>Reserved Words</h2>
<p><a data-primary="lexical structure" data-secondary="reserved words" data-type="indexterm" id="idm45927773850144"/><a data-primary="reserved words" data-type="indexterm" id="idm45927773849136"/><a data-primary="syntax, Java" data-secondary="reserved words" data-type="indexterm" id="idm45927773848464"/>The following words are reserved in Java (they are part of the syntax
of the language and may not be used to name variables, classes, and so
forth):</p>
<pre data-type="programlisting">abstract   const      final        int         public        throw
assert     continue   finally      interface   return        throws
boolean    default    float        long        short         transient
break      do         for          native      static        true
byte       double     goto         new         strictfp      try
case       else       if           null        super         void
catch      enum       implements   package     switch        volatile
char       extends    import       private     synchronized  while
class      false      instanceof   protected   this
_ (underscore)</pre>
<p>Of these, <code>true</code>, <code>false,</code> and <code>null</code> are technically literals.</p>
<p>Note that <code>const</code> and <code>goto</code> are reserved but aren’t actually used in
the language and that <code>interface</code> has an additional variant
form—<code>@interface</code>, which is used when defining types known as
annotations. Some of the reserved words (notably <code>final</code> and <code>default</code>)
have a variety of meanings depending on context.</p>
<p>Other keywords exist that are not reserved in general and are known as
<em>contextual keywords</em>.</p>
<pre data-type="programlisting">exports      opens      requires     uses
module       permits    sealed       var
non-sealed   provides   to           with
open         record     transitive   yield</pre>
<p><code>var</code> indicates a local variable that should be type-inferred. <code>sealed</code>,
<code>non-sealed</code>, and <code>record</code> are used when defining classes,
which we’ll meet in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>. <code>yield</code> appears within
<code>switch</code> expressions we’ll meet later in this chapter, while the remaining
contextual keywords deal with modules, the syntax and use of which are
covered in <a data-type="xref" href="ch12.xhtml#javanut8-CHP-12">Chapter 12</a>.</p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>Using contextual keywords as variable names, while allowed for compatibility, is
discouraged. <code>var var = "var";</code> may be a valid statement, but it is a valid statement
that ought to be viewed with suspicion.</p>
</div>
</div></section>
<section data-pdf-bookmark="Identifiers" data-type="sect2"><div class="sect2" id="idm45927768498208">
<h2>Identifiers</h2>
<p><a data-primary="identifiers" data-type="indexterm" id="idm45927768496736"/><a data-primary="lexical structure" data-secondary="identifiers" data-type="indexterm" id="idm45927768496032"/><a data-primary="syntax, Java" data-secondary="identifiers" data-type="indexterm" id="idm45927768495088"/>An <em>identifier</em> is simply a name given to some part of a Java program,
such as a class, a method within a class, or a variable declared within
a method. Identifiers may be of any length and may contain letters and
digits drawn from the entire Unicode character set. An identifier may
not begin with a digit.</p>
<p><a data-primary="currency symbols in identifiers" data-type="indexterm" id="idm45927768493312"/>In general, identifiers may not contain punctuation characters.
Exceptions include the dollar sign (<code>$</code>) as well as other Unicode currency symbols such as <code>£</code> and <code>¥</code>.</p>
<div data-type="tip"><h6>Tip</h6>
<p>Currency symbols are intended for use in automatically generated source
code, such as code produced by <code>javac</code>. By avoiding the use of currency
symbols in your own identifiers, you don’t have to worry about
collisions with automatically generated identifiers.</p>
</div>
<p><a data-primary="_ (underscore)" data-type="indexterm" id="idm45927768489008"/>The ASCII underscore (<code>_</code>) also deserves special mention.
Originally, the underscore could be freely used as an identifier or part of one.
However, in recent versions of Java, including Java 17, the underscore may not be used as an identifier.</p>
<p>The underscore character can still appear in a Java identifier, but it is no longer legal as a complete identifier by itself.
This is to support an expected forthcoming language feature whereby the underscore will acquire a special new syntactic 
<span class="keep-together">meaning</span>.</p>
<p><a data-primary="camel case" data-type="indexterm" id="idm45927768486336"/>The usual Java convention is to name variables using <em>camel case</em>.
This means that the first letter of a variable should be lowercase but that the first letter of any other words in the identifier should be uppercase.</p>
<p><a data-primary="isJavaIdentifierPart(): Character" data-type="indexterm" id="idm45927768484832"/><a data-primary="isJavaIdentifierStart(): Character" data-type="indexterm" id="idm45927768484160"/>Formally, the characters allowed at the beginning of and within an
identifier are defined by the methods <code>isJavaIdentifierStart()</code> and
<code>isJavaIdentifierPart()</code> of the class <code>java.lang.Character</code>.</p>
<p>The following are examples of legal identifiers:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">i</code><code class="w">    </code><code class="n">x1</code><code class="w">    </code><code class="n">theCurrentTime</code><code class="w">    </code><code class="n">current</code><code class="w">    </code><code class="n">獺</code><code class="w"/></pre>
<p><a data-primary="Kanji character (in Java identifier)" data-type="indexterm" id="idm45927773023168"/><a data-primary="UTF-8 identifier" data-type="indexterm" id="idm45927773022560"/>Note in particular the example of a UTF-8 identifier, <code>獺</code>. This is the
Kanji character for “otter” and is perfectly legal as a Java identifier.
The use of non-ASCII identifiers is unusual in programs predominantly
written by Westerners, but it is sometimes seen.</p>
</div></section>
<section data-pdf-bookmark="Literals" data-type="sect2"><div class="sect2" id="idm45927768497584">
<h2>Literals</h2>
<p><a data-primary="lexical structure" data-secondary="literals" data-type="indexterm" id="idm45927768477104"/><a data-primary="literals" data-type="indexterm" id="idm45927768475904"/><a data-primary="syntax, Java" data-secondary="literals" data-type="indexterm" id="idm45927768475232"/>Literals are sequences of source characters that directly represent constant values that appear as is in Java source code.
<a data-primary="&quot; (quotes, double)" data-secondary="literals in" data-type="indexterm" id="idm45927773052320"/><a data-primary="' (quotes, single)" data-secondary="literals in" data-type="indexterm" id="idm45927773051376"/>They include integer and floating-point numbers, single characters within
single quotes, strings of characters within double quotes, and the
reserved words <code>true</code>, <code>false</code>, and <code>null</code>. For example, the following are all literals:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">1</code><code class="w">    </code><code class="mf">1.0</code><code class="w">    </code><code class="sc">'1'</code><code class="w">    </code><code class="mi">1L</code><code class="w">    </code><code class="s">"one"</code><code class="w">    </code><code class="kc">true</code><code class="w">    </code><code class="kc">false</code><code class="w">    </code><code class="kc">null</code><code class="w"/></pre>
<p>The syntax for expressing numeric, character, and string literals is
detailed in <a data-type="xref" href="#javanut8-CHP-2-SECT-3">“Primitive Data Types”</a>.</p>
</div></section>
<section data-pdf-bookmark="Punctuation" data-type="sect2"><div class="sect2" id="idm45927773069328">
<h2>Punctuation</h2>
<p><a data-primary="lexical structure" data-secondary="punctuation" data-type="indexterm" id="idm45927773101664"/><a data-primary="punctuation characters as tokens" data-type="indexterm" id="idm45927773100464"/><a data-primary="syntax, Java" data-secondary="punctuation" data-type="indexterm" id="idm45927773099824"/>Java also uses a number of punctuation characters as tokens. The Java
Language Specification divides these characters (somewhat arbitrarily) into two categories, separators and operators. The 12
<a data-primary=", (comma) separators (tokens)" data-type="indexterm" id="idm45927773098752"/><a data-primary=":: (colons) separators (tokens)" data-type="indexterm" id="idm45927773098112"/><a data-primary=". (dot)" data-secondary="separators (tokens)" data-type="indexterm" id="idm45927773097472"/><a data-primary="() (parentheses)" data-secondary="separators (tokens)" data-type="indexterm" id="idm45927773096528"/><a data-primary="@ (at sign)" data-secondary="separators (tokens)" data-type="indexterm" id="idm45927773095584"/><a data-primary="{ } (curly braces)" data-secondary="separators (tokens)" data-type="indexterm" id="idm45927773094640"/><a data-primary="; (semicolon)" data-secondary="separators (tokens)" data-type="indexterm" id="idm45927773093696"/><a data-primary="… (ellipses)" data-secondary="separators (tokens)" data-type="indexterm" id="idm45927773092752"/><a data-primary="separators" data-type="indexterm" id="idm45927773091808"/>separators are:</p>
<table>
<tbody>
<tr>
<td><p><code>(   )</code></p></td>
<td><p><code>{   }</code></p></td>
<td><p><code>[   ]</code></p></td>
<td/>
</tr>
<tr>
<td><p><code>...</code></p></td>
<td><p><code>@</code></p></td>
<td><p><code>::</code></p></td>
<td/>
</tr>
<tr>
<td><p><code>;</code></p></td>
<td><p><code>,</code></p></td>
<td><p><code>.</code></p></td>
<td/>
</tr>
</tbody>
</table>
<p><a data-primary="operators" data-type="indexterm" id="idm45927764868800"/>The operators are:</p>
<table>
<tbody>
<tr>
<td><p><code>+</code></p></td>
<td><p><code>—</code></p></td>
<td><p><code>*</code></p></td>
<td><p><code>/</code></p></td>
<td><p><code>%</code></p></td>
<td><p><code>&amp;</code></p></td>
<td><p><code>|</code></p></td>
<td><p><code>^</code></p></td>
<td><p><code>&lt;&lt;</code></p></td>
<td><p><code>&gt;&gt;</code></p></td>
<td><p><code>&gt;&gt;&gt;</code></p></td>
</tr>
<tr>
<td><p><code>+=</code></p></td>
<td><p><code>-=</code></p></td>
<td><p><code>*=</code></p></td>
<td><p><code>/=</code></p></td>
<td><p><code>%=</code></p></td>
<td><p><code>&amp;=</code></p></td>
<td><p><code>|=</code></p></td>
<td><p><code>^=</code></p></td>
<td><p><code>&lt;&lt;=</code></p></td>
<td><p><code>&gt;&gt;=</code></p></td>
<td><p><code>&gt;&gt;&gt;=</code></p></td>
</tr>
<tr>
<td><p><code>=</code></p></td>
<td><p><code>==</code></p></td>
<td><p><code>!=</code></p></td>
<td><p><code>&lt;</code></p></td>
<td><p><code>&lt;=</code></p></td>
<td><p><code>&gt;</code></p></td>
<td><p><code>&gt;=</code></p></td>
<td/>
<td/>
<td/>
<td/>
</tr>
<tr>
<td><p><code>!</code></p></td>
<td><p><code>~</code></p></td>
<td><p><code>&amp;&amp;</code></p></td>
<td><p>||</p></td>
<td><p><code>++</code></p></td>
<td><p><code>--</code></p></td>
<td><p><code>?</code></p></td>
<td><p><code>:</code></p></td>
<td><p><code>-&gt;</code></p></td>
<td/>
<td/>
</tr>
</tbody>
</table>
<p>We’ll see separators throughout the book and will cover each operator
individually in <a data-type="xref" href="#javanut8-CHP-2-SECT-4">“Expressions and Operators”</a>.<a data-startref="ix_ch02-asciidoc3" data-type="indexterm" id="idm45927764835376"/><a data-startref="ix_ch02-asciidoc2" data-type="indexterm" id="idm45927764834672"/><a data-startref="ix_ch02-asciidoc1" data-type="indexterm" id="idm45927764834000"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Primitive Data Types" data-type="sect1"><div class="sect1" id="javanut8-CHP-2-SECT-3">
<h1>Primitive Data Types</h1>
<p><a data-primary="data types" data-secondary="primitive" data-type="indexterm" id="ix_ch02-asciidoc4"/><a data-primary="primitive types" data-type="indexterm" id="ix_ch02-asciidoc5"/><a data-primary="syntax, Java" data-secondary="primitive data types" data-type="indexterm" id="ix_ch02-asciidoc6"/>Java supports eight basic data types known as <em>primitive types</em> as described in <a data-type="xref" href="#javanut8-CHP-2-TABLE-1">Table 2-1</a>.
The primitive types include a boolean type, a character type, four integer types, and two floating-point types.
The four integer types and the two floating-point types differ in the number of bits that represent them and therefore in the range of numbers they can represent.
Note that the size of these types is the notional size in the Java language.
Different JVM implementations may use more actual space to hold these values due to padding, alignment, and the like.</p>
<table id="javanut8-CHP-2-TABLE-1">
<caption><span class="label">Table 2-1. </span>Java primitive data types</caption>
<thead>
<tr>
<th>Type</th>
<th>Contains</th>
<th>Default</th>
<th>Size</th>
<th>Range</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>boolean</code></p></td>
<td><p><code>true</code> or <code>false</code></p></td>
<td><p><code>false</code></p></td>
<td><p>1 bit</p></td>
<td><p>NA</p></td>
</tr>
<tr>
<td><p><code>char</code></p></td>
<td><p>Unicode character</p></td>
<td><p><code>\u0000</code></p></td>
<td><p>16 bits</p></td>
<td><p><code>\u0000</code> to <code>\uFFFF</code></p></td>
</tr>
<tr>
<td><p><code>byte</code></p></td>
<td><p>Signed integer</p></td>
<td><p>0</p></td>
<td><p>8 bits</p></td>
<td><p>–128 to 127</p></td>
</tr>
<tr>
<td><p><code>short</code></p></td>
<td><p>Signed integer</p></td>
<td><p>0</p></td>
<td><p>16 bits</p></td>
<td><p>–32768 to 32767</p></td>
</tr>
<tr>
<td><p><code>int</code></p></td>
<td><p>Signed integer</p></td>
<td><p>0</p></td>
<td><p>32 bits</p></td>
<td><p>–2147483648 to 2147483647</p></td>
</tr>
<tr>
<td><p><code>long</code></p></td>
<td><p>Signed integer</p></td>
<td><p>0</p></td>
<td><p>64 bits</p></td>
<td><p>–9223372036854775808 to
9223372036854775807</p></td>
</tr>
<tr>
<td><p><code>float</code></p></td>
<td><p>IEEE 754 floating point</p></td>
<td><p>0.0</p></td>
<td><p>32 bits</p></td>
<td><p>1.4E–45 to
3.4028235E+38</p></td>
</tr>
<tr>
<td><p><code>double</code></p></td>
<td><p>IEEE 754 floating point</p></td>
<td><p>0.0</p></td>
<td><p>64 bits</p></td>
<td><p>4.9E–324 to
1.7976931348623157E+308</p></td>
</tr>
</tbody>
</table>
<p>The next section summarizes these primitive data types. In addition to
these primitive types, Java supports nonprimitive data types known as
reference types, which are introduced in <a data-type="xref" href="#javanut8-CHP-2-SECT-9">“Reference Types”</a>.</p>
<section data-pdf-bookmark="The boolean Type" data-type="sect2"><div class="sect2" id="idm45927773346144">
<h2>The boolean Type</h2>
<p><a data-primary="boolean type" data-type="indexterm" id="idm45927773344704"/><a data-primary="data types" data-secondary="boolean types" data-type="indexterm" id="idm45927773344000"/><a data-primary="primitive types" data-secondary="boolean" data-type="indexterm" id="idm45927773343056"/>The <code>boolean</code> type represents truth values.
This type has only two possible values, representing the two Boolean states: on or off, yes or no, true or false.
Java reserves the words <code>true</code> and <code>false</code> to represent these two Boolean values.</p>
<p>Programmers coming to Java from other languages (especially JavaScript, Python,
or C) should note that Java is much stricter about its Boolean values than
other languages; in particular, a <code>boolean</code> is neither an integral nor an
object type, and incompatible values cannot be used in place of a
<code>boolean</code>. In other words, you cannot take shortcuts such as the
following in Java:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Object</code><code class="w"> </code><code class="n">o</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Object</code><code class="p">();</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>

<code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">o</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">     </code><code class="c1">// Invalid!</code><code class="w"/>
<code class="w">  </code><code class="k">while</code><code class="p">(</code><code class="n">i</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="c1">//...</code><code class="w"/>
<code class="w">  </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>Instead, Java forces you to write cleaner code by explicitly stating the
comparisons you want:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">o</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">  </code><code class="k">while</code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>
<code class="w">  </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The char Type" data-type="sect2"><div class="sect2" id="idm45927773569456">
<h2>The char Type</h2>
<p><a data-primary="char type" data-type="indexterm" id="idm45927764788944"/><a data-primary="data types" data-secondary="char types" data-type="indexterm" id="idm45927764788240"/><a data-primary="primitive types" data-secondary="char" data-type="indexterm" id="idm45927764787296"/>The <code>char</code> type represents Unicode characters. Java has a slightly
unique approach to representing characters—<code>javac</code> accepts identifiers
and literals as UTF-8 (a variable-width encoding) in input.
<a data-primary="Latin-1 character set" data-type="indexterm" id="idm45927764811296"/>However, internally, Java represents chars in a fixed-width encoding—​either a 16-bit encoding (before Java 9) or as ISO-8859-1 (an 8-bit encoding, used for Western European languages, also called Latin-1) if possible (Java 9 and later).</p>
<p>This distinction between external and internal representation does not normally need to concern the developer. <a data-primary="' (quotes, single)" data-secondary="enclosing character literals" data-type="indexterm" id="idm45927764809952"/>In most cases, all that is required is to remember the rule that to include a character literal in a Java program, simply place it between single quotes (apostrophes):</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">char</code><code class="w"> </code><code class="n">c</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="sc">'A'</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="' (quotes, single)" data-secondary="escaping in char literals" data-type="indexterm" id="idm45927764803392"/><a data-primary="escape sequences" data-secondary="Unicode characters" data-type="indexterm" id="idm45927764802320"/>You
can, of course, use Unicode characters as character literals with the <code>\u</code>
Unicode escape sequence. In addition, Java supports a number of other escape
sequences that make it easy both to represent commonly used nonprinting <a data-primary="ASCII escape sequences" data-type="indexterm" id="idm45927768425072"/>ASCII
characters, such as <code>newline,</code> and to escape certain punctuation characters that
have special meaning in Java. <a data-primary="\\ (backslash)" data-type="indexterm" id="idm45927768423856"/><a data-primary="char type" data-secondary="escape characters in char literals" data-type="indexterm" id="idm45927768423152"/><a data-primary="escape sequences" data-secondary="in char literals" data-secondary-sortas="char literals" data-type="indexterm" id="idm45927768422240"/>For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">char</code><code class="w"> </code><code class="n">tab</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="sc">'\t'</code><code class="p">,</code><code class="w"> </code><code class="n">nul</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="err">'\</code><code class="mo">000</code><code class="err">'</code><code class="p">,</code><code class="w"> </code><code class="n">aleph</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="sc">'\u05D0'</code><code class="p">,</code><code class="w"> </code><code class="n">backslash</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="sc">'\\'</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="&quot; (quotes, double)" data-secondary="escaping in char literals" data-type="indexterm" id="idm45927769252816"/><a data-primary="\ (backslash)" data-type="indexterm" id="idm45927769241792"/><a data-primary="\b (escape sequence for backspace)" data-primary-sortas="b" data-type="indexterm" id="idm45927769241184"/><a data-primary="\f (form feed) escape sequence" data-primary-sortas="f" data-type="indexterm" id="idm45927769240272"/><a data-primary="\n (newlines, escaping)" data-primary-sortas="n" data-type="indexterm" id="idm45927769239360"/><a data-primary="\r (carriage return) escape sequence" data-primary-sortas="r" data-type="indexterm" id="idm45927769238416"/><a data-primary="\t (tab)" data-primary-sortas="t" data-type="indexterm" id="idm45927769237504"/><a data-primary="Unicode character set" data-secondary="escaping in char literals" data-type="indexterm" id="idm45927765899728"/><a data-type="xref" href="#javanut8-CHP-2-TABLE-2">Table 2-2</a> lists the escape characters that can be used in <code>char</code> literals. These characters can also be used in string literals, which are covered in the next section.</p>
<table id="javanut8-CHP-2-TABLE-2">
<caption><span class="label">Table 2-2. </span>Java escape characters</caption>
<thead>
<tr>
<th>Escape sequence</th>
<th>Character value</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><code>\b</code></p></td>
<td><p>Backspace</p></td>
</tr>
<tr>
<td><p><code>\t</code></p></td>
<td><p>Horizontal tab</p></td>
</tr>
<tr>
<td><p><code>\n</code></p></td>
<td><p>Newline</p></td>
</tr>
<tr>
<td><p><code>\f</code></p></td>
<td><p>Form feed</p></td>
</tr>
<tr>
<td><p><code>\r</code></p></td>
<td><p>Carriage return</p></td>
</tr>
<tr>
<td><p><code>\</code>"</p></td>
<td><p>Double quote</p></td>
</tr>
<tr>
<td><p><code>\</code>'</p></td>
<td><p>Single quote</p></td>
</tr>
<tr>
<td><p><code>\\</code></p></td>
<td><p>Backslash</p></td>
</tr>
<tr>
<td><p><code>\<em>xxx</em></code></p></td>
<td><p>The Latin-1 character with the encoding
<em><code>xxx</code></em>, where <em><code>xxx</code></em> is an octal (base 8) number between 000 and 377.
The forms <em><code>\x</code></em> and <em><code>\xx</code></em> are also legal, as in <em><code>\0</code></em>, but are
not recommended because they can cause difficulties in string constants where
the escape sequence is followed by a regular digit. This form is generally
discouraged in favor of the <code>\uXXXX</code> form.</p></td>
</tr>
<tr>
<td><p><code>\u<em>xxxx</em></code></p></td>
<td><p>The Unicode character with encoding <em><code>xxxx</code></em>, where
<em><code>xxxx</code></em> is four hexadecimal digits. Unicode escapes can appear anywhere
in a Java program, not only in character and string literals.</p></td>
</tr>
</tbody>
</table>
<p><a data-primary="char type" data-secondary="conversion to other primitive types" data-type="indexterm" id="idm45927765871328"/><code>char</code> values can be converted to and from the various integral types,
and the <code>char</code> data type is a 16-bit integral type. Unlike <code>byte</code>,
<code>short</code>, <code>int</code>, and <code>long</code>, however, <code>char</code> is an unsigned type and may receive values only in the range 0 to 65535.
<a data-primary="char type" data-secondary="Character class, static method" data-type="indexterm" id="idm45927765866976"/>The

<span class="keep-together"><code>Character</code></span> class defines a number of useful <code>static</code> methods for
working with characters, including <code>isDigit()</code>, <code>isJavaLetter()</code>,
<code>isLowerCase()</code>, and <code>toUpperCase()</code>.</p>
<p><a data-primary="Unicode character set" data-type="indexterm" id="idm45927765862864"/>The Java language and its <code>char</code> type were designed with Unicode in
mind. The Unicode standard is evolving, however, and each new version of
Java adopts a new version of Unicode. Java 11 uses Unicode 10.0.0 and Java 17
uses Unicode 13.0.</p>
<p><a data-primary="Unicode character set" data-secondary="supplementary characters" data-type="indexterm" id="idm45927765861424"/>A complication in recent Unicode releases is the introduction of characters whose encodings, or
<em>codepoints</em>, do not fit in 16 bits. These supplementary characters,
which are mostly infrequently used Han (Chinese) ideographs, occupy 21
bits and cannot be represented in a single <code>char</code> value. <a data-primary="char type" data-secondary="surrogate pair, Unicode supplementary characters" data-type="indexterm" id="idm45927765859248"/><a data-primary="surrogate pairs (Unicode supplementary characters)" data-type="indexterm" id="idm45927765858272"/>Instead, you
must use an <code>int</code> value to hold the codepoint of a supplementary
character, or you must encode it into a so-called “surrogate pair” of
two <code>char</code> values.</p>
<p>Unless you commonly write programs that use Asian languages, you are
unlikely to encounter any supplementary characters. If you do anticipate
having to process characters that do not fit into a <code>char</code>, methods have
been added to the <code>Character</code>, <code>String</code>, and related classes for working
with text using <code>int</code> codepoints.</p>
<section data-pdf-bookmark="String literals" data-type="sect3"><div class="sect3" id="idm45927765854496">
<h3>String literals</h3>
<p><a data-primary="primitive types" data-secondary="String literals" data-type="indexterm" id="idm45927765853024"/><a data-primary="string literals" data-type="indexterm" id="idm45927765851888"/><a data-primary="String type, String literals vs." data-type="indexterm" id="idm45927765851216"/><a data-primary="strings" data-secondary="String class" data-type="indexterm" id="idm45927765850528"/>In addition to the <code>char</code> type, Java also has a data type for working
with strings of text (usually simply called <em>strings</em>). The <code>String</code>
type is a class, however, and is not one of the primitive types of the
language. Because strings are so commonly used, though, Java does have
syntax for including string values literally in a program. <a data-primary="&quot; (quotes, double)" data-secondary="enclosing string literals" data-type="indexterm" id="idm45927765848064"/><a data-primary="' (quotes, single)" data-secondary="in string literals" data-secondary-sortas="string literals" data-type="indexterm" id="idm45927765847072"/>A <code>String</code>
literal consists of arbitrary text within double quotes (as opposed to
the single quotes for <code>char</code> literals). For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="s">"Hello World"</code><code class="w"/>
<code class="s">"'This' is a string!"</code><code class="w"/></pre>
<p><a data-primary="&quot;&quot;&quot; (quotes, double), enclosing text blocks" data-type="indexterm" id="idm45927770704672"/><a data-primary="text blocks" data-type="indexterm" id="idm45927770703840"/>Recent versions of Java also introduced a multiline string literal syntax
called <em>text blocks</em>. A text block begins with a <code>"""</code> and a newline and ends
when another sequence of <code>"""</code> is seen. These are handled entirely by the
<code>javac</code> compiler and result in identical string literals to normal <code>"</code> strings
in bytecode.</p>
<pre data-code-language="java" data-type="programlisting"><code class="s">"""</code>
<code class="s">Multi-line text blocks</code>
<code class="s">Can use "double quotes" without escaping</code>
<code class="s">"""</code><code class="w"/></pre>
<p><a data-primary="escape sequences" data-secondary="in string literals" data-secondary-sortas="string literals" data-type="indexterm" id="idm45927770659184"/>String literals can contain any of the escape sequences that can appear
as <code>char</code> literals (see <a data-type="xref" href="#javanut8-CHP-2-TABLE-2">Table 2-2</a>). Use
the <code>\</code>" sequence to include a double quote within a standard <code>String</code> literal.
Text blocks allow such escape sequences but do not require them for newlines or
double quotes.</p>
<p>Because <code>String</code> is a reference type, string literals are described in
more detail later in this chapter in <a data-type="xref" href="#javanut8-CHP-2-SECT-7.5">“String literals”</a>.
<a data-type="xref" href="ch09.xhtml#javanut8-CHP-9">Chapter 9</a> contains more details on some of the
ways you can work with <code>String</code> objects in Java.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="Integer Types" data-type="sect2"><div class="sect2" id="idm45927764789664">
<h2>Integer Types</h2>
<p><a data-primary="data types" data-secondary="integer types" data-type="indexterm" id="ix_ch02-asciidoc7"/><a data-primary="integer types" data-type="indexterm" id="ix_ch02-asciidoc8"/><a data-primary="primitive types" data-secondary="integer types" data-type="indexterm" id="ix_ch02-asciidoc9"/>The <a data-primary="byte type" data-type="indexterm" id="idm45927770684160"/><a data-primary="int type" data-type="indexterm" id="idm45927770683456"/><a data-primary="long type" data-type="indexterm" id="idm45927770682784"/><a data-primary="short type" data-type="indexterm" id="idm45927770682112"/>integer types in Java are <code>byte</code>, <code>short</code>, <code>int</code>, and <code>long</code>. As
shown in <a data-type="xref" href="#javanut8-CHP-2-TABLE-1">Table 2-1</a>, these four types
differ only in the number of bits and, therefore, in the range of
numbers each type can represent. All integral types represent signed
numbers; there is no <code>unsigned</code> keyword as there is in C and C++.</p>
<p>Literals for each of these types are written exactly as you would
expect: as a sequence of decimal digits, optionally preceded by a minus
sign.<sup><a data-type="noteref" href="ch02.xhtml#idm45927772106240" id="idm45927772106240-marker">1</a></sup>
<a data-primary="integer literals" data-type="indexterm" id="idm45927772105424"/>Digits in any of these literals may be separated by an underscore (<code>_</code>) for
better readability. Here are some legal integer literals:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">0</code><code class="w"/>
<code class="mi">1</code><code class="w"/>
<code class="mi">123</code><code class="w"/>
<code class="mi">9_000</code><code class="w"/>
<code class="o">-</code><code class="mi">42000</code><code class="w"/></pre>
<p><a data-primary="int type" data-secondary="32-bit int values" data-type="indexterm" id="idm45927772068352"/><a data-primary="long type" data-secondary="64-bit long values" data-type="indexterm" id="idm45927772067280"/>Integer literals are 32-bit values (and so are taken to be the Java type <code>int</code>) unless they end with the character <code>L</code> or <code>l</code>, in which case they are 64-bit values (and are understood to be the Java type <code>long</code>):</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">1234</code><code class="w">        </code><code class="c1">// An int value</code><code class="w"/>
<code class="mi">1234L</code><code class="w">       </code><code class="c1">// A long value</code><code class="w"/>
<code class="mh">0xffL</code><code class="w">       </code><code class="c1">// Another long value</code><code class="w"/></pre>
<p>Integer literals can also be expressed in hexadecimal, binary, or octal
notation. A literal that begins with <code>0x</code> or <code>0X</code> is taken as a
hexadecimal number, using the letters <code>A</code> to <code>F</code> (or <code>a</code> to <code>f</code>) as the
additional digits required for base-16 numbers.</p>
<p>Integer binary literals start with <code>0b</code> and may, of course, feature only
the digits 1 or 0. Use of the underscore separator in binary literals is
very common, as binary literals can be very long.</p>
<p>Java also supports octal (base-8) integer literals. These literals begin
with a leading <code>0</code> and cannot include the digits 8 or 9. They are not
often used and should be avoided unless needed. Legal hexadecimal,
binary, and octal literals include:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mh">0xff</code><code class="w">              </code><code class="c1">// Decimal 255, expressed in hexadecimal</code><code class="w"/>
<code class="mo">0377</code><code class="w">              </code><code class="c1">// The same number, expressed in octal (base 8)</code><code class="w"/>
<code class="mb">0b0010_1111</code><code class="w">       </code><code class="c1">// Decimal 47, expressed in binary</code><code class="w"/>
<code class="mh">0xCAFEBABE</code><code class="w">        </code><code class="c1">// A magic number used to identify Java class files</code><code class="w"/></pre>
<p><a data-primary="integer types" data-secondary="integer arithmetic" data-type="indexterm" id="idm45927766018400"/><a data-primary="integer types" data-secondary="integer overflow" data-type="indexterm" id="idm45927766017552"/><a data-primary="overflow, integer arithmetic and" data-type="indexterm" id="idm45927766016640"/><a data-primary="underflow, integer arithmetic and" data-type="indexterm" id="idm45927766033024"/>Integer arithmetic in Java never produces an overflow or an underflow
when you exceed the range of a given integer type. Instead, numbers just
wrap around. For example, let’s look at an overflow:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">byte</code><code class="w"> </code><code class="n">b1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">127</code><code class="p">,</code><code class="w"> </code><code class="n">b2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">        </code><code class="c1">// Largest byte is 127</code><code class="w"/>
<code class="kt">byte</code><code class="w"> </code><code class="n">sum</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">byte</code><code class="p">)(</code><code class="n">b1</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">b2</code><code class="p">);</code><code class="w">   </code><code class="c1">// Sum wraps to -128, the smallest byte</code><code class="w"/></pre>
<p>and the corresponding underflow behavior:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">byte</code><code class="w"> </code><code class="n">b3</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">-</code><code class="mi">128</code><code class="p">,</code><code class="w"> </code><code class="n">b4</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">5</code><code class="p">;</code><code class="w">        </code><code class="c1">// Smallest byte is -128</code><code class="w"/>
<code class="kt">byte</code><code class="w"> </code><code class="n">sum2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">byte</code><code class="p">)(</code><code class="n">b3</code><code class="w"> </code><code class="o">-</code><code class="w"> </code><code class="n">b4</code><code class="p">);</code><code class="w">   </code><code class="c1">// Sum wraps to a large byte value, 123</code><code class="w"/></pre>
<p>Neither the Java compiler nor the Java interpreter warns you in any way
when this occurs. When doing integer arithmetic, you simply must ensure
that the type you are using has a sufficient range for the purposes you
intend. <a data-primary="int type" data-secondary="Integer class" data-type="indexterm" id="idm45927768126192"/><a data-primary="long type" data-secondary="Long class" data-type="indexterm" id="idm45927768125344"/>Integer <a data-primary="ArithmeticException" data-type="indexterm" id="idm45927768124304"/>division by zero and modulo by
zero are illegal and cause an <code>ArithmeticException</code> to be thrown. (We’ll see
more about exceptions soon in <a data-type="xref" href="#javanut8-CHP-2-SECT-6.3">“Checked and Unchecked Exceptions”</a>).</p>
<p><a data-primary="byte type" data-secondary="Byte class" data-type="indexterm" id="idm45927765476112"/><a data-primary="integer types" data-secondary="wrapper classes" data-type="indexterm" id="idm45927765474736"/>Each integer type has a
corresponding wrapper class: <code>Byte</code>, <code>Short</code>, <code>Integer</code>, and <code>Long</code>.
<a data-primary="MAX_VALUE constant" data-secondary="integer type wrapper classes" data-type="indexterm" id="idm45927765471936"/><a data-primary="MIN_VALUE constant" data-secondary="integer type wrapper classes" data-type="indexterm" id="idm45927765470960"/>Each of these classes defines
<code>MIN_VALUE</code> and <code>MAX_VALUE</code> constants that describe the range of the type. <a data-primary="valueOf()" data-type="indexterm" id="idm45927765469088"/>Each
class also provides a static <code>valueOf()</code> method that is strongly preferred for
creating an instance of the wrapper class from a primitive value. While the
wrapper classes have plain constructors that take the primitives, they are
deprecated and should be avoided.
<a data-primary="strings" data-secondary="converting to integer values" data-type="indexterm" id="idm45927765467872"/>The wrapper classes also define useful
static methods, such as <code>Byte.parseByte()</code> and <code>Integer.parseInt()</code>, for
converting strings to integer <span class="keep-together">values</span>.<a data-startref="ix_ch02-asciidoc9" data-type="indexterm" id="idm45927768116880"/><a data-startref="ix_ch02-asciidoc8" data-type="indexterm" id="idm45927768116144"/><a data-startref="ix_ch02-asciidoc7" data-type="indexterm" id="idm45927768115472"/></p>
</div></section>
<section data-pdf-bookmark="Floating-Point Types" data-type="sect2"><div class="sect2" id="idm45927765475584">
<h2>Floating-Point Types</h2>
<p><a data-primary="data types" data-secondary="floating-point types" data-type="indexterm" id="ix_ch02-asciidoc10"/><a data-primary="floating-point types" data-type="indexterm" id="ix_ch02-asciidoc11"/><a data-primary="primitive types" data-secondary="floating-point types" data-type="indexterm" id="ix_ch02-asciidoc12"/>Real <a data-primary="double type" data-type="indexterm" id="idm45927768109600"/><a data-primary="floating-point types" data-secondary="double type" data-type="indexterm" id="idm45927768108896"/><a data-primary="floating-point types" data-secondary="float type" data-type="indexterm" id="idm45927768107952"/>numbers in Java are represented by the <code>float</code> and <code>double</code> data
types. As shown in <a data-type="xref" href="#javanut8-CHP-2-TABLE-1">Table 2-1</a>, <code>float</code> is
a 32-bit, single-precision, floating-point value, and <code>double</code> is a
64-bit, double-precision, floating-point value. Both types adhere to
the IEEE 754-1985 standard, which specifies both the format of the
numbers and the behavior of arithmetic for the numbers.</p>
<p>Floating-point values can be included literally in a Java program as an
optional string of digits, followed by a decimal point and another
string of digits. Here are some examples:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mf">123.45</code><code class="w"/>
<code class="mf">0.0</code><code class="w"/>
<code class="mf">.01</code><code class="w"/></pre>
<p><a data-primary="exponential notation" data-type="indexterm" id="idm45927768099392"/><a data-primary="floating-point types" data-secondary="floating-point literals" data-type="indexterm" id="idm45927768098784"/><a data-primary="scientific notation" data-type="indexterm" id="idm45927768097936"/>Floating-point literals can also use exponential, or scientific,
notation, in which a number is followed by the letter <code>e</code> or <code>E</code> (for
exponent) and another number. This second number represents the power of
10 by which the first number is multiplied. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mf">1.2345E02</code><code class="w">    </code><code class="c1">// 1.2345 * 10^2 or 123.45</code><code class="w"/>
<code class="mf">1e-6</code><code class="w">         </code><code class="c1">// 1 * 10^-6 or 0.000001</code><code class="w"/>
<code class="mf">6.02e23</code><code class="w">      </code><code class="c1">// Avogadro's Number: 6.02 * 10^23</code><code class="w"/></pre>
<p>Floating-point literals are <code>double</code> values by default. To include a
<code>float</code> value literally in a program, follow the number with <code>f</code> or <code>F</code>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">double</code><code class="w"> </code><code class="n">d</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">6.02E23</code><code class="p">;</code><code class="w"/>
<code class="kt">float</code><code class="w"> </code><code class="n">f</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">6.02e23f</code><code class="p">;</code><code class="w"/></pre>
<p>Floating-point literals cannot be expressed in hexadecimal, binary, or
octal notation.</p>
<aside class="pagebreak-before less_space" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45927769193312">
<h5>Floating-Point Representations</h5>
<p><a data-primary="floating-point types" data-secondary="as approximations" data-secondary-sortas="approximations" data-type="indexterm" id="idm45927769154768"/>Most real numbers, by their very nature, cannot be represented exactly
in any finite number of bits. Thus, it is important to remember that
<code>float</code> and <code>double</code> values are only approximations of the numbers they
are meant to represent. A <code>float</code> is a 32-bit approximation, which
results in at least six significant decimal digits, and a <code>double</code> is a
64-bit approximation, which results in at least 15 significant digits.
In <a data-type="xref" href="ch09.xhtml#javanut8-CHP-9">Chapter 9</a>, we will cover floating-point
representations in more detail.</p>
</div></aside>
<p><a data-primary="negative infinity" data-type="indexterm" id="idm45927769162848"/><a data-primary="positive infinity" data-type="indexterm" id="idm45927769161920"/>In addition to representing ordinary numbers, the <code>float</code> and <code>double</code>
types can also represent four special values: positive and negative
infinity, zero, and NaN. The infinity values result when a
floating-point computation produces a value that overflows the
representable range of a <code>float</code> or <code>double</code>.</p>
<p>When a floating-point computation underflows the representable range of a <code>float</code> or a <code>double</code>, a zero value results.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>We can imagine repeatedly dividing the double value <code>1.0</code> by <code>2.0</code> (e.g., in a <code>while</code> loop). In mathematics, no matter how often we perform the division, the result will never become equal to zero. However, in a floating-point representation, after enough divisions, the result will eventually be so small as to be indistinguishable from zero.</p>
</div>
<p><a data-primary="0 (zero)" data-secondary="negative and positive zero" data-type="indexterm" id="idm45927766488688"/><a data-primary="0 (zero)" data-secondary="represented by float and double types" data-type="indexterm" id="idm45927766487744"/><a data-primary="negative zero" data-type="indexterm" id="idm45927766486832"/><a data-primary="positive zero" data-type="indexterm" id="idm45927766486160"/><a data-primary="zero (0)" data-secondary="positive and negative zero" data-type="indexterm" id="idm45927766485488"/><a data-primary="zero (0)" data-secondary="represented by float and double types" data-type="indexterm" id="idm45927766484576"/>The Java floating-point types make a distinction between positive
zero and negative zero, depending on the direction from which the
underflow occurred. In practice, positive and negative zero behave
pretty much the same. Finally, the last special floating-point value is
NaN, which stands for “Not a Number.” The NaN value results when an
illegal floating-point operation, such as 0.0/0.0, is performed. Here
are examples of statements that result in these special values:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">double</code><code class="w"> </code><code class="n">inf</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0</code><code class="o">/</code><code class="mf">0.0</code><code class="p">;</code><code class="w">             </code><code class="c1">// Infinity</code><code class="w"/>
<code class="kt">double</code><code class="w"> </code><code class="n">neginf</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">-</code><code class="mf">1.0</code><code class="o">/</code><code class="mf">0.0</code><code class="p">;</code><code class="w">         </code><code class="c1">// Negative infinity</code><code class="w"/>
<code class="kt">double</code><code class="w"> </code><code class="n">negzero</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">-</code><code class="mf">1.0</code><code class="o">/</code><code class="n">inf</code><code class="p">;</code><code class="w">        </code><code class="c1">// Negative zero</code><code class="w"/>
<code class="kt">double</code><code class="w"> </code><code class="n">NaN</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">0.0</code><code class="o">/</code><code class="mf">0.0</code><code class="p">;</code><code class="w">             </code><code class="c1">// Not a Number</code><code class="w"/></pre>
<p><a data-primary="double type" data-secondary="Double class" data-type="indexterm" id="idm45927766095776"/><a data-primary="floating-point types" data-secondary="Double class" data-type="indexterm" id="idm45927766144928"/><a data-primary="floating-point types" data-secondary="Float class" data-type="indexterm" id="idm45927766144016"/>The <code>float</code> and <code>double</code> primitive types have corresponding classes,
named <code>Float</code> and <code>Double</code>. <a data-primary="MAX_VALUE constant" data-secondary="Float and Double classes" data-type="indexterm" id="idm45927766465872"/><a data-primary="MIN_VALUE constant" data-secondary="Float and Double classes" data-type="indexterm" id="idm45927766464896"/><a data-primary="NaN (Not a number)" data-type="indexterm" id="idm45927766463984"/><a data-primary="NEGATIVE_INFINITY constant, Float and Double classes" data-type="indexterm" id="idm45927766463312"/><a data-primary="POSITIVE_INFINITY constant, Float and Double classes" data-type="indexterm" id="idm45927766462672"/>Each of these classes defines the following useful
constants: <code>MIN_VALUE</code>, <code>MAX_VALUE</code>, <code>NEGATIVE_INFINITY</code>, <code>POSITIVE_INFINITY</code>,
and <code>NaN</code>. <a data-primary="floating-point types" data-secondary="wrapper classes" data-type="indexterm" id="idm45927766459728"/><a data-primary="valueOf()" data-type="indexterm" id="idm45927766458720"/>Much like the integer wrapper classes, the floating-point wrappers
also have a static <code>valueOf()</code> for constructing instances.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><a data-primary="floating-point types" data-secondary="floating-point arithmetic" data-type="indexterm" id="idm45927766456944"/>Java floating-point types can handle overflow to infinity and underflow to zero and have a special NaN value. This means floating-point arithmetic never throws exceptions, even when performing illegal operations, like dividing zero by zero or taking the square root of a negative number.</p>
</div>
<p>The infinite floating-point values behave as you would expect. Adding
or subtracting any finite value to or from infinity, for example, yields
infinity. Negative zero behaves almost identically to positive zero,
and, in fact, <a data-primary="equality operator (==)" data-type="indexterm" id="idm45927766455136"/>the <code>==</code> equality operator reports that negative zero is
equal to positive zero. One way to distinguish negative zero from
positive, or regular, zero is to divide by it: <code>1.0/0.0</code> yields positive
infinity, but <code>1.0</code> divided by negative zero yields negative infinity.
Finally, because NaN is Not a Number, the <code>==</code> operator says that it is
not equal to any other number, including itself!</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">double</code><code class="w"> </code><code class="n">NaN</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">0.0</code><code class="o">/</code><code class="mf">0.0</code><code class="p">;</code><code class="w">             </code><code class="c1">// Not a Number</code><code class="w"/>
<code class="n">NaN</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">NaN</code><code class="p">;</code><code class="w">                       </code><code class="c1">// false</code><code class="w"/>
<code class="n">Double</code><code class="p">.</code><code class="na">isNaN</code><code class="p">(</code><code class="n">NaN</code><code class="p">);</code><code class="w">                </code><code class="c1">// true</code><code class="w"/></pre>
<p>To check whether a <code>float</code> or <code>double</code> value is NaN, you must use the <code>Float.isNaN()</code> and <code>Double.isNaN()</code> methods.<a data-startref="ix_ch02-asciidoc12" data-type="indexterm" id="idm45927768056416"/><a data-startref="ix_ch02-asciidoc11" data-type="indexterm" id="idm45927768055680"/><a data-startref="ix_ch02-asciidoc10" data-type="indexterm" id="idm45927768055008"/></p>
</div></section>
<section data-pdf-bookmark="Primitive Type Conversions" data-type="sect2"><div class="sect2" id="idm45927768114016">
<h2>Primitive Type Conversions</h2>
<p><a data-primary="byte type" data-secondary="conversions to other primitive types" data-type="indexterm" id="idm45927768053264"/><a data-primary="char type" data-secondary="conversion to and from integer and floating-point types" data-type="indexterm" id="idm45927768050576"/><a data-primary="data types" data-secondary="conversions" data-type="indexterm" id="idm45927768049664"/><a data-primary="floating-point types" data-secondary="conversions" data-type="indexterm" id="idm45927768048720"/><a data-primary="integer types" data-secondary="conversions" data-type="indexterm" id="idm45927768047776"/><a data-primary="primitive types" data-secondary="conversions between" data-type="indexterm" id="idm45927768046832"/><a data-primary="syntax, Java" data-secondary="primitive type conversions" data-type="indexterm" id="idm45927768045888"/>Java allows conversions between integer values and floating-point
values. In addition, because every character corresponds to a number in
the Unicode encoding, <code>char</code> values can be converted to and from the
integer and floating-point types. <a data-primary="boolean type" data-secondary="no conversions to other primitive types" data-type="indexterm" id="idm45927768044464"/>In fact, <code>boolean</code> is the only
primitive type that cannot be converted to or from another primitive
type in Java.</p>
<p><a data-primary="widening conversions" data-type="indexterm" id="idm45927768042576"/>There are two basic types of conversions. A <em>widening conversion</em>
occurs when a value of one type is converted to a wider type—one that
has a larger range of legal values. <a data-primary="int type" data-secondary="conversions to other primitive types" data-type="indexterm" id="idm45927768041008"/>For example, Java performs widening
conversions automatically when you assign an <code>int</code> literal to a
<code>double</code> variable or a <code>char</code> literal to an <code>int</code> variable.</p>
<p><a data-primary="narrowing conversions" data-type="indexterm" id="idm45927768038016"/>Narrowing conversions are another matter, however. A <em>narrowing
conversion</em> occurs when a value is converted to a type that is not wider
than it is. Narrowing conversions are not always safe: it is reasonable
to convert the integer value 13 to a <code>byte</code>, for example, but it is not
reasonable to convert 13,000 to a <code>byte</code>, because <code>byte</code> can hold only
numbers between –128 and 127. Because you can lose data in a narrowing
conversion, <code>javac</code> complains when you attempt any narrowing
conversion, even if the value being converted would in fact fit in the
narrower range of the specified type:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">13</code><code class="p">;</code><code class="w"/>
<code class="c1">// byte b = i;    // Incompatible types: possible lossy conversion</code><code class="w"/>
<code class="w">                  </code><code class="c1">// from int to byte</code><code class="w"/></pre>
<p class="pagebreak-before">The one exception to this rule is that you can assign an integer literal
(an <code>int</code> value) to a <code>byte</code> or <code>short</code> variable if the literal falls
within the range of the variable.</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">byte</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">13</code><code class="p">;</code><code class="w"/></pre>
<p>If you need to perform a narrowing conversion and are confident you can
do so without losing data or precision, you can force Java to perform
the conversion using a language construct known as a <em>cast</em>. Perform a
cast by placing the name of the desired type in parentheses before the
value to be converted. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">13</code><code class="p">;</code><code class="w"/>
<code class="kt">byte</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">byte</code><code class="p">)</code><code class="w"> </code><code class="n">i</code><code class="p">;</code><code class="w">   </code><code class="c1">// Force the int to be converted to a byte</code><code class="w"/>
<code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">int</code><code class="p">)</code><code class="w"> </code><code class="mf">13.456</code><code class="p">;</code><code class="w">    </code><code class="c1">// Force this double literal to the int 13</code><code class="w"/></pre>
<p><a data-primary="casts" data-type="indexterm" id="idm45927768821728"/><a data-primary="casts" data-secondary="of primitive types" data-secondary-sortas="primitive types" data-type="indexterm" id="idm45927768633488"/><a data-primary="floating-point types" data-secondary="conversions" data-type="indexterm" id="idm45927768632336"/><a data-primary="long type" data-secondary="conversions between char values and" data-type="indexterm" id="idm45927768658912"/><a data-primary="Math class" data-secondary="static methods for rounding" data-type="indexterm" id="idm45927768658000"/><a data-primary="rounding numbers" data-type="indexterm" id="idm45927768657088"/>Casts of primitive types are most often used to convert floating-point
values to integers. When you do this, the fractional part of the
floating-point value is simply truncated (i.e., the floating-point value
is rounded toward zero, not toward the nearest integer). The static
methods <code>Math.round()</code>, <code>Math.floor()</code>, and <code>Math.ceil()</code> perform other
types of rounding.</p>
<p>The <code>char</code> type acts like an integer type in most ways, so a <code>char</code>
value can be used anywhere an <code>int</code> or <code>long</code> value is required. Recall, however, that the <code>char</code> type is <em>unsigned</em>, so it behaves
differently than the <code>short</code> type, even though both are 16 bits wide:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">short</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">short</code><code class="p">)</code><code class="w"> </code><code class="mh">0xffff</code><code class="p">;</code><code class="w"> </code><code class="c1">// These bits represent the number -1</code><code class="w"/>
<code class="kt">char</code><code class="w"> </code><code class="n">c</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="sc">'\uffff'</code><code class="p">;</code><code class="w">        </code><code class="c1">// The same bits, as a Unicode character</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">i1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">s</code><code class="p">;</code><code class="w">               </code><code class="c1">// Converting the short to an int yields -1</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">i2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">c</code><code class="p">;</code><code class="w">               </code><code class="c1">// Converting the char to an int yields 65535</code><code class="w"/></pre>
<p><a data-type="xref" href="#javanut8-CHP-2-TABLE-3">Table 2-3</a> shows which primitive types can
be converted to which other types and how the conversion is performed.
The letter N in the table means that the conversion cannot be performed.
<a data-primary="widening conversions" data-type="indexterm" id="idm45927766910256"/>The letter Y means that the conversion is a widening conversion and is
therefore performed automatically and implicitly by Java. The letter C
means that the conversion is a narrowing conversion and requires an
explicit cast.</p>
<p>Finally, the notation Y* means that the conversion is an automatic
widening conversion, but some of the least significant digits of
the value may be lost in the conversion. This can happen when you are converting
an <code>int</code> or <code>long</code> to a floating-point type—see the table for details.
The floating-point types have a larger range than the integer types, so
any <code>int</code> or <code>long</code> can be represented by a <code>float</code> or <code>double</code>.
However, the floating-point types are approximations of numbers and
cannot always hold as many significant digits as the integer types (see
<a data-type="xref" href="ch09.xhtml#javanut8-CHP-9">Chapter 9</a> for some more detail about floating-point numbers).<a data-startref="ix_ch02-asciidoc6" data-type="indexterm" id="idm45927768586720"/><a data-startref="ix_ch02-asciidoc5" data-type="indexterm" id="idm45927768586048"/><a data-startref="ix_ch02-asciidoc4" data-type="indexterm" id="idm45927768585376"/></p>
<table class="pagebreak-before" id="javanut8-CHP-2-TABLE-3">
<caption><span class="label">Table 2-3. </span>Java primitive type conversions</caption>
<thead>
<tr>
<th> </th>
<th>Convert to:</th>
<th> </th>
<th> </th>
<th> </th>
<th> </th>
<th> </th>
<th> </th>
<th> </th>
</tr>
<tr>
<th>Convert from:</th>
<th><code>boolean</code></th>
<th><code>byte</code></th>
<th><code>short</code></th>
<th><code>char</code></th>
<th><code>int</code></th>
<th><code>long</code></th>
<th><code>float</code></th>
<th><code>double</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>
<p><code>boolean</code></p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>N</p>
</td>
</tr>
<tr>
<td>
<p><code>byte</code></p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
</tr>
<tr>
<td>
<p><code>short</code></p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
</tr>
<tr>
<td>
<p><code>char</code></p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y</p>
</td>
</tr>
<tr>
<td>
<p><code>int</code></p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Y</p>
</td>
<td>
<p>Y*</p>
</td>
<td>
<p>Y</p>
</td>
</tr>
<tr>
<td>
<p><code>long</code></p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Y*</p>
</td>
<td>
<p>Y*</p>
</td>
</tr>
<tr>
<td>
<p><code>float</code></p>
</td>
<td>
<p>N</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>C</p>
</td>
<td>
<p>-</p>
</td>
<td>
<p>Y</p>
</td>
</tr>
<tr>
<td><code>double</code></td>
<td>N</td>
<td>C</td>
<td>C</td>
<td>C</td>
<td>C</td>
<td>C</td>
<td>C</td>
<td>-</td>
</tr>
</tbody>
</table>
</div></section>
</div></section>
<section data-pdf-bookmark="Expressions and Operators" data-type="sect1"><div class="sect1" id="javanut8-CHP-2-SECT-4">
<h1>Expressions and Operators</h1>
<p><a data-primary="expressions" data-type="indexterm" id="ix_ch02-asciidoc13"/><a data-primary="expressions" data-secondary="operators and" data-type="indexterm" id="ix_ch02-asciidoc14"/><a data-primary="operators" data-type="indexterm" id="ix_ch02-asciidoc15"/><a data-primary="syntax, Java" data-secondary="expressions and operators" data-type="indexterm" id="ix_ch02-asciidoc16"/><a data-primary="syntax, Java" data-secondary="operators" data-type="indexterm" id="ix_ch02-asciidoc17"/>So far in this chapter, we’ve learned about the primitive types that
Java programs can manipulate and seen how to include primitive values as
<em>literals</em> in a Java program. We’ve also used <em>variables</em> as symbolic
names that represent, or hold, values. These literals and variables are
the tokens out of which Java programs are built.</p>
<p><a data-primary="expressions" data-secondary="defined" data-type="indexterm" id="idm45927766602576"/>An <em>expression</em> is the next higher level of structure in a Java
program. The Java interpreter <em>evaluates</em> an expression to compute its
value. <a data-primary="primary expressions" data-type="indexterm" id="idm45927766600640"/>The very simplest expressions are called <em>primary expressions</em>
and consist of literals and variables. So, for example, the following
are all expressions:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mf">1.7</code><code class="w">         </code><code class="c1">// A floating-point literal</code><code class="w"/>
<code class="kc">true</code><code class="w">        </code><code class="c1">// A Boolean literal</code><code class="w"/>
<code class="n">sum</code><code class="w">         </code><code class="c1">// A variable</code><code class="w"/></pre>
<p>When the Java interpreter evaluates a literal expression, the resulting
value is the literal itself. When the interpreter evaluates a variable
expression, the resulting value is the value stored in the variable.</p>
<p>Primary expressions are not very interesting. More complex expressions
are made by using <em>operators</em> to combine primary expressions. For
example, the following expression uses the assignment operator to
combine two primary expressions—a variable and a floating-point
literal—into an assignment expression:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">sum</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.7</code><code class="w"/></pre>
<p>But operators are used not just with primary expressions; they also can
be used with expressions at any level of complexity. The following are
all legal expressions:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">sum</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">2</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">3</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="mf">1.2</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="p">(</code><code class="mi">4</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">8</code><code class="p">)</code><code class="o">/</code><code class="mf">3.0</code><code class="w"/>
<code class="n">sum</code><code class="o">/</code><code class="n">Math</code><code class="p">.</code><code class="na">sqrt</code><code class="p">(</code><code class="mf">3.0</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="mf">1.234</code><code class="p">)</code><code class="w"/>
<code class="p">(</code><code class="kt">int</code><code class="p">)(</code><code class="n">sum</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">33</code><code class="p">)</code><code class="w"/></pre>
<section data-pdf-bookmark="Operator Summary" data-type="sect2"><div class="sect2" id="idm45927768295008">
<h2>Operator Summary</h2>
<p>The kinds of expressions you can write in a programming language depend
entirely on the set of operators available to you. Java has a wealth of
operators, but to work effectively with them, you must understand two important
concepts: <em>precedence</em> and <em>associativity</em>.
These concepts—and the operators themselves—are explained in more detail
in the following sections.</p>
<section data-pdf-bookmark="Precedence" data-type="sect3"><div class="sect3" id="idm45927768329216">
<h3>Precedence</h3>
<p><a data-primary="operators" data-secondary="precedence of" data-type="indexterm" id="idm45927768327776"/><a data-primary="precedence, operator" data-type="indexterm" id="idm45927768326800"/>The P column of <a data-type="xref" href="#javanut8-CHP-2-TABLE-4">Table 2-4</a> specifies the <em>precedence</em> of each operator. Precedence specifies the order in which
operations are performed. Operations that have higher precedence are
performed before those with lower precedence. For example, consider this
expression:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">c</code><code class="w"/></pre>
<p>The multiplication operator has higher precedence than the addition
operator, so <code>a</code> is added to the product of <code>b</code> and <code>c</code>, just as we
expect from elementary mathematics. Operator precedence can be thought
of as a measure of how tightly operators bind to their operands. The
higher the number, the more tightly they bind.</p>
<p><a data-primary="() (parentheses)" data-secondary="overriding operator precedence" data-type="indexterm" id="idm45927768318384"/>Default operator precedence can be overridden through the use of
parentheses that explicitly specify the order of operations. The
previous expression can be rewritten to specify that the addition should
be performed before the multiplication:</p>
<pre data-code-language="java" data-type="programlisting"><code class="p">(</code><code class="n">a</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">b</code><code class="p">)</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">c</code><code class="w"/></pre>
<p><a data-primary="C/C++" data-secondary="operator precedence" data-type="indexterm" id="idm45927768261360"/>The default operator precedence in Java was chosen for compatibility
with C; the designers of C chose this precedence so that most
expressions can be written naturally without parentheses. Only
a few common Java idioms require parentheses. Examples
include:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Class cast combined with member access</code><code class="w"/>
<code class="p">((</code><code class="n">Integer</code><code class="p">)</code><code class="w"> </code><code class="n">o</code><code class="p">).</code><code class="na">intValue</code><code class="p">();</code><code class="w"/>

<code class="c1">// Assignment combined with comparison</code><code class="w"/>
<code class="k">while</code><code class="p">((</code><code class="n">line</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">in</code><code class="p">.</code><code class="na">readLine</code><code class="p">())</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/>

<code class="c1">// Bitwise operators combined with comparison</code><code class="w"/>
<code class="k">if</code><code class="w"> </code><code class="p">((</code><code class="n">flags</code><code class="w"> </code><code class="o">&amp;</code><code class="w"> </code><code class="p">(</code><code class="n">PUBLIC</code><code class="w"> </code><code class="o">|</code><code class="w"> </code><code class="n">PROTECTED</code><code class="p">))</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="Associativity" data-type="sect3"><div class="sect3" id="idm45927768195968">
<h3>Associativity</h3>
<p><a data-primary="associativity" data-type="indexterm" id="idm45927765983440"/><a data-primary="operators" data-secondary="associativity" data-type="indexterm" id="idm45927765982736"/>Associativity is a property of operators that defines how to evaluate
expressions that would otherwise be ambiguous. This is particularly
important when an expression involves several operators that have the
same precedence.</p>
<p>Most operators are left-to-right associative, which means that the
operations are performed from left to right. <a data-primary="unary operators" data-secondary="associativity" data-type="indexterm" id="idm45927765981152"/>The assignment and unary
operators, however, have right-to-left associativity. The A column of
<a data-type="xref" href="#javanut8-CHP-2-TABLE-4">Table 2-4</a> specifies the associativity of
each operator or group of operators. The value L means left to right,
and R means right to left.</p>
<p>The additive operators are all left-to-right associative, so the
expression <code>a+b-c</code> is evaluated from left to right: <code>(a+b)-c</code>. Unary
operators and assignment operators are evaluated from right to left.
Consider this complex expression:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="n">c</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">-~</code><code class="n">d</code><code class="w"/></pre>
<p>This is evaluated as follows:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="n">b</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="p">(</code><code class="n">c</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">-</code><code class="p">(</code><code class="o">~</code><code class="n">d</code><code class="p">)))</code><code class="w"/></pre>
<p>As with operator precedence, operator associativity establishes a
default order of evaluation for an expression. This default order can be
overridden through the use of parentheses. However, the default operator
associativity in Java has been chosen to yield a natural expression
syntax.</p>
</div></section>
<section data-pdf-bookmark="Operator summary table" data-type="sect3"><div class="sect3" id="idm45927770620640">
<h3>Operator summary table</h3>
<p><a data-primary="bitwise operators" data-type="indexterm" id="idm45927770619600"/><a data-primary="- (minus sign)" data-secondary="-- (decrement) operator" data-type="indexterm" id="idm45927770618128"/><a data-primary="- (minus sign)" data-secondary="-= (subtract assignment) operator" data-type="indexterm" id="idm45927770617296"/><a data-primary="- (minus sign)" data-secondary="subtraction operator" data-type="indexterm" id="idm45927770616384"/><a data-primary="- (minus sign)" data-secondary="unary minus operator" data-type="indexterm" id="idm45927770603056"/><a data-primary="-&gt; (lambda arrow) operator" data-type="indexterm" id="idm45927770602112"/><a data-primary="! (exclamation point)" data-secondary="!= (not equal to) operator" data-type="indexterm" id="idm45927770601472"/><a data-primary="! (exclamation point)" data-secondary="boolean NOT operator" data-type="indexterm" id="idm45927770600560"/><a data-primary="? (question mark)" data-secondary="? : (conditional) operator" data-type="indexterm" id="idm45927770599616"/><a data-primary=". (dot)" data-secondary="object member access operator" data-type="indexterm" id="idm45927770598704"/><a data-primary="() (parentheses)" data-secondary="cast operator" data-type="indexterm" id="idm45927770597792"/><a data-primary="() (parentheses)" data-secondary="method invocation operator" data-type="indexterm" id="idm45927770596848"/><a data-primary="[ ] (brackets)" data-secondary="array access operator" data-type="indexterm" id="idm45927770595936"/><a data-primary="/ (slash)" data-secondary="/= (divide assignment) operator" data-type="indexterm" id="idm45927770594992"/><a data-primary="/ (slash)" data-secondary="division operator" data-type="indexterm" id="idm45927770594080"/><a data-primary="| (vertical bar)" data-secondary="|| (conditional OR) operator" data-type="indexterm" id="idm45927770593136"/><a data-primary="| (vertical bar)" data-secondary="|= (bitwise OR assignment) operator" data-type="indexterm" id="idm45927770592224"/><a data-primary="| (vertical bar)" data-secondary="bitwise OR operator" data-type="indexterm" id="idm45927770591264"/><a data-primary="| (vertical bar)" data-secondary="boolean OR operator" data-type="indexterm" id="idm45927770590320"/><a data-primary="~ (tilde), bitwise complement operator" data-type="indexterm" id="idm45927770589376"/><a data-primary="% (percent sign)" data-secondary="%= (modulo assignment) operator" data-type="indexterm" id="idm45927770588688"/><a data-primary="% (percent sign)" data-secondary="modulo operator" data-type="indexterm" id="idm45927770587728"/><a data-primary="&amp; (ampersand)" data-secondary="&amp;&amp; (conditional AND) operator" data-type="indexterm" id="idm45927770586784"/><a data-primary="&amp; (ampersand)" data-secondary="&amp;= (bitwise AND assignment) operator" data-type="indexterm" id="idm45927770585824"/><a data-primary="&amp; (ampersand)" data-secondary="bitwise AND operator" data-type="indexterm" id="idm45927770584864"/><a data-primary="&amp; (ampersand)" data-secondary="boolean AND operator" data-type="indexterm" id="idm45927770583920"/><a data-primary="* (asterisk)" data-secondary="* = (multiply assignment) operator" data-type="indexterm" id="idm45927770582976"/><a data-primary="* (asterisk)" data-secondary="multiplication operator" data-type="indexterm" id="idm45927770582016"/><a data-primary="+ (plus sign)" data-secondary="++ (increment) operator" data-type="indexterm" id="idm45927770581072"/><a data-primary="+ (plus sign)" data-secondary="+= (add assignment) operator" data-type="indexterm" id="idm45927770580128"/><a data-primary="+ (plus sign)" data-secondary="addition operator" data-type="indexterm" id="idm45927770579168"/><a data-primary="+ (plus sign)" data-secondary="string concatenation operator" data-type="indexterm" id="idm45927770578224"/><a data-primary="+ (plus sign)" data-secondary="unary plus operator" data-type="indexterm" id="idm45927770577264"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt; (less than) operator" data-type="indexterm" id="idm45927770576320"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt;&lt; (signed left shift) operator" data-type="indexterm" id="idm45927770575376"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt;&lt;= (left shift assignment) operator" data-type="indexterm" id="idm45927770574416"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt;= (less than or equal to) operator" data-type="indexterm" id="idm45927770573456"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt; (greater than) operator" data-type="indexterm" id="idm45927770572496"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;= (greater than or equal to) operator" data-type="indexterm" id="idm45927770571536"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt; (signed right shift) operator" data-type="indexterm" id="idm45927770570576"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt;= (right shift assignment) operator" data-type="indexterm" id="idm45927770569616"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt;&gt; (unsigned right shift) operator" data-type="indexterm" id="idm45927770568656"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt;&gt;= (unsigned right shift assignment) operator" data-type="indexterm" id="idm45927770567696"/><a data-primary="= (equals sign)" data-secondary="== (equal to) operator" data-type="indexterm" id="idm45927770566784"/><a data-primary="= (equals sign)" data-secondary="assignment operator" data-type="indexterm" id="idm45927770565840"/><a data-primary="^ (caret)" data-secondary="bitwise XOR operator" data-type="indexterm" id="idm45927770564896"/><a data-primary="^ (caret)" data-secondary="boolean XOR operator" data-type="indexterm" id="idm45927770563952"/><a data-primary="instanceof operator" data-type="indexterm" id="idm45927770563008"/><a data-primary="new operator" data-type="indexterm" id="idm45927770562336"/><a data-primary="operators" data-secondary="summary table" data-type="indexterm" id="idm45927770561664"/><a data-type="xref" href="#javanut8-CHP-2-TABLE-4">Table 2-4</a> summarizes the operators available in Java. The P and A columns of the table specify the precedence and associativity of each group of related operators, respectively. The table is ordered from highest precedence to lowest. Use this table as a quick reference for operators (especially their precedence) when required.</p>
<table id="javanut8-CHP-2-TABLE-4">
<caption><span class="label">Table 2-4. </span>Java operators</caption>
<thead>
<tr>
<th>P</th>
<th>A</th>
<th>Operator</th>
<th>Operand type(s)</th>
<th>Operation performed</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>16</p></td>
<td><p>L</p></td>
<td><p>.</p></td>
<td><p>object, member</p></td>
<td><p>Object member access</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>[ ]</code></p></td>
<td><p>array, int</p></td>
<td><p>Array element access</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>( <em>args</em> )</code></p></td>
<td><p>method, arglist</p></td>
<td><p>Method invocation</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>++</code>, <code>--</code></p></td>
<td><p>variable</p></td>
<td><p>Post-increment, post-decrement</p></td>
</tr>
<tr>
<td><p>15</p></td>
<td><p>R</p></td>
<td><p><code>++</code>, <code>--</code></p></td>
<td><p>variable</p></td>
<td><p>Pre-increment, pre-decrement</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>+</code>, <code>-</code></p></td>
<td><p>number</p></td>
<td><p>Unary plus, unary minus</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>~</code></p></td>
<td><p>integer</p></td>
<td><p>Bitwise complement</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>!</code></p></td>
<td><p>boolean</p></td>
<td><p>Boolean NOT</p></td>
</tr>
<tr>
<td><p>14</p></td>
<td><p>R</p></td>
<td><p><code>new</code></p></td>
<td><p>class, arglist</p></td>
<td><p>Object creation</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>( <em>type</em> )</code></p></td>
<td><p>type, any</p></td>
<td><p>Cast (type conversion)</p></td>
</tr>
<tr>
<td><p>13</p></td>
<td><p>L</p></td>
<td><p><code>*</code>, <code>/</code>, <code>%</code></p></td>
<td><p>number, number</p></td>
<td><p>Multiplication, division, remainder</p></td>
</tr>
<tr>
<td><p>12</p></td>
<td><p>L</p></td>
<td><p><code>+</code>, <code>-</code></p></td>
<td><p>number, number</p></td>
<td><p>Addition, subtraction</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>+</code></p></td>
<td><p>string, any</p></td>
<td><p>String concatenation</p></td>
</tr>
<tr>
<td><p>11</p></td>
<td><p>L</p></td>
<td><p><code>&lt;&lt;</code></p></td>
<td><p>integer, integer</p></td>
<td><p>Left shift</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>&gt;&gt;</code></p></td>
<td><p>integer, integer</p></td>
<td><p>Right shift with sign extension</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>&gt;&gt;&gt;</code></p></td>
<td><p>integer, integer</p></td>
<td><p>Right shift with zero extension</p></td>
</tr>
<tr>
<td><p>10</p></td>
<td><p>L</p></td>
<td><p><code>&lt;</code>, <code>&lt;=</code></p></td>
<td><p>number, number</p></td>
<td><p>Less than, less than or equal</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>&gt;</code>, <code>&gt;=</code></p></td>
<td><p>number, number</p></td>
<td><p>Greater than, greater than or equal</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>instanceof</code></p></td>
<td><p>reference, type</p></td>
<td><p>Type comparison</p></td>
</tr>
<tr>
<td><p>9</p></td>
<td><p>L</p></td>
<td><p><code>==</code></p></td>
<td><p>primitive, primitive</p></td>
<td><p>Equal (have identical values)</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>!=</code></p></td>
<td><p>primitive, primitive</p></td>
<td><p>Not equal (have different values)</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>==</code></p></td>
<td><p>reference, reference</p></td>
<td><p>Equal (refer to same object)</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>!=</code></p></td>
<td><p>reference, reference</p></td>
<td><p>Not equal (refer to different objects)</p></td>
</tr>
<tr>
<td><p>8</p></td>
<td><p>L</p></td>
<td><p><code>&amp;</code></p></td>
<td><p>integer, integer</p></td>
<td><p>Bitwise AND</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>&amp;</code></p></td>
<td><p>boolean, boolean</p></td>
<td><p>Boolean AND</p></td>
</tr>
<tr>
<td><p>7</p></td>
<td><p>L</p></td>
<td><p><code>^</code></p></td>
<td><p>integer, integer</p></td>
<td><p>Bitwise XOR</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>^</code></p></td>
<td><p>boolean, boolean</p></td>
<td><p>Boolean XOR</p></td>
</tr>
<tr>
<td><p>6</p></td>
<td><p>L</p></td>
<td><p><code>ǀ</code></p></td>
<td><p>integer, integer</p></td>
<td><p>Bitwise OR</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>ǀ</code></p></td>
<td><p>boolean, boolean</p></td>
<td><p>Boolean OR</p></td>
</tr>
<tr>
<td><p>5</p></td>
<td><p>L</p></td>
<td><p><code>&amp;&amp;</code></p></td>
<td><p>boolean, boolean</p></td>
<td><p>Conditional AND</p></td>
</tr>
<tr>
<td><p>4</p></td>
<td><p>L</p></td>
<td><p><code>ǀǀ</code></p></td>
<td><p>boolean, boolean</p></td>
<td><p>Conditional OR</p></td>
</tr>
<tr>
<td><p>3</p></td>
<td><p>R</p></td>
<td><p><code>? :</code></p></td>
<td><p>boolean, any</p></td>
<td><p>Conditional (ternary) operator</p></td>
</tr>
<tr>
<td><p>2</p></td>
<td><p>R</p></td>
<td><p><code>=</code></p></td>
<td><p>variable, any</p></td>
<td><p>Assignment</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>*=</code>, <code>/=</code>, <code>%=</code>,</p></td>
<td><p>variable, any</p></td>
<td><p>Assignment with operation</p></td>
</tr>
<tr>
<td/>
<td/>
<td><p><code>+=</code>, <code>-=</code>, <code>&lt;&lt;=</code>,</p></td>
<td/>
<td/>
</tr>
<tr>
<td/>
<td/>
<td><p><code>&gt;&gt;=</code>, <code>&gt;&gt;&gt;=</code>,</p></td>
<td/>
<td/>
</tr>
<tr>
<td/>
<td/>
<td><p><code>&amp;=</code>, <code>^=</code>, <code>ǀ=</code></p></td>
<td/>
<td/>
</tr>
<tr>
<td><p>1</p></td>
<td><p>R</p></td>
<td><p><code>→</code></p></td>
<td><p>arglist, method body</p></td>
<td><p>lambda expression</p></td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Operand number and type" data-type="sect3"><div class="sect3" id="idm45927770555008">
<h3>Operand number and type</h3>
<p><a data-primary="data types" data-secondary="of operands" data-secondary-sortas="operands" data-type="indexterm" id="idm45927772127472"/><a data-primary="operand, number and type of" data-type="indexterm" id="idm45927772126224"/><a data-primary="operators" data-secondary="operand number and type" data-type="indexterm" id="idm45927772125584"/>The fourth column of <a data-type="xref" href="#javanut8-CHP-2-TABLE-4">Table 2-4</a> specifies
the number and type of the operands expected by each operator. Some
operators operate on only one operand; these are called unary operators.
<a data-primary="- (minus sign)" data-secondary="unary minus operator" data-type="indexterm" id="idm45927772123680"/><a data-primary="unary operators" data-type="indexterm" id="idm45927772122736"/>For example, the unary minus operator changes the sign of a single
number:</p>
<pre data-code-language="java" data-type="programlisting"><code class="o">-</code><code class="n">n</code><code class="w">             </code><code class="c1">// The unary minus operator</code><code class="w"/></pre>
<p><a data-primary="binary operators" data-type="indexterm" id="idm45927768791008"/>Most operators, however, are binary operators that operate on two
operand values. <a data-primary="- (minus sign)" data-secondary="subtraction operator" data-type="indexterm" id="idm45927768790272"/>The <code>–</code> operator actually comes in both forms:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="w"> </code><code class="err">–</code><code class="w"> </code><code class="n">b</code><code class="w">          </code><code class="c1">// The subtraction operator is a binary operator</code><code class="w"/></pre>
<p><a data-primary="? (question mark)" data-secondary="? : (conditional) operator" data-type="indexterm" id="idm45927768787328"/>Java also defines one ternary operator, often called the conditional
operator. It is like an <code>if</code> statement inside an expression. Its three
operands are separated by a question mark and a colon; the second and
third operands must be convertible to the same type:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">x</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">?</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="n">y</code><code class="w">  </code><code class="c1">// Ternary expression; evaluates to larger of x and y</code><code class="w"/></pre>
<p>In addition to expecting a certain number of operands, each operator
also expects particular types of operands. The fourth column of the
table lists the operand types. Some of the codes used in that column
require further explanation:</p>
<dl>
<dt>Number</dt>
<dd>
<p>An integer, floating-point value, or character (i.e., any primitive
type except <code>boolean</code>). Auto-unboxing (see
<a data-type="xref" href="#javanut8-CHP-2-SECT-9.4">“Boxing and Unboxing Conversions”</a>) means that
the wrapper classes (such as <code>Character</code>, <code>Integer</code>, and <code>Double</code>) for
these types can be used in this context as well.</p>
</dd>
<dt>Integer</dt>
<dd>
<p><a data-primary="byte type" data-type="indexterm" id="idm45927768690992"/><a data-primary="char type" data-type="indexterm" id="idm45927768690288"/><a data-primary="short type" data-type="indexterm" id="idm45927768689616"/>A <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code>, or <code>char</code> value (<code>long</code> values are
not allowed for the array access operator <code>[ ]</code>). With auto-unboxing,
<code>Byte</code>, <code>Short</code>, <code>Integer</code>, <code>Long</code>, and <code>Character</code> values are also
allowed.</p>
</dd>
<dt>Reference</dt>
<dd>
<p>An object or array.</p>
</dd>
<dt>Variable</dt>
<dd>
<p>A variable or anything else, such as an array element, to which a
value can be assigned.</p>
</dd>
</dl>
</div></section>
<section data-pdf-bookmark="Return type" data-type="sect3"><div class="sect3" id="idm45927768723248">
<h3>Return type</h3>
<p><a data-primary="floating-point types" data-secondary="return type for operators" data-type="indexterm" id="idm45927768722048"/><a data-primary="operators" data-secondary="return type" data-type="indexterm" id="idm45927768720704"/><a data-primary="return types" data-secondary="for operators" data-secondary-sortas="operators" data-type="indexterm" id="idm45927768719760"/>Just as every operator expects its operands to be of specific types,
each operator produces a value of a specific type. <a data-primary="double type" data-secondary="return type for operators" data-type="indexterm" id="idm45927768718416"/><a data-primary="floating-point types" data-secondary="double type" data-type="indexterm" id="idm45927768717504"/>The arithmetic,
increment and decrement, bitwise, and shift operators return a <code>double</code>
if at least one of the operands is a <code>double</code>. <a data-primary="floating-point types" data-secondary="float type" data-type="indexterm" id="idm45927768715632"/>They return a <code>float</code>
if at least one of the operands is a <code>float</code>. <a data-primary="long type" data-secondary="return type for operators" data-type="indexterm" id="idm45927768713664"/>They return a <code>long</code> if
at least one of the operands is a <code>long</code>. <a data-primary="int type" data-secondary="return type for operators" data-type="indexterm" id="idm45927768711680"/>Otherwise, they return an
<code>int</code>, even if both operands are <code>byte</code>, <code>short</code>, or <code>char</code> types that
are narrower than <code>int</code>.</p>
<p><a data-primary="boolean type" data-secondary="operator return values" data-type="indexterm" id="idm45927768708272"/>The comparison, equality, and Boolean operators always return <code>boolean</code>
values. Each assignment operator returns whatever value it assigned,
which is of a type compatible with the variable on the left side of the
expression. The conditional operator returns the value of its second or
third argument (which must both be convertible to the same type).</p>
</div></section>
<section data-pdf-bookmark="Side effects" data-type="sect3"><div class="sect3" id="idm45927773225376">
<h3>Side effects</h3>
<p><a data-primary="operators" data-secondary="side effects" data-type="indexterm" id="idm45927773224176"/><a data-primary="side effects" data-secondary="operators" data-type="indexterm" id="idm45927773223200"/>Every operator computes a value based on one or more operand values.
Some operators, however, have <em>side effects</em> in addition to their basic
evaluation. If an expression contains side effects, evaluating it
changes the state of a Java program in such a way that evaluating the
expression again may yield a different result.</p>
<p><a data-primary="+ (plus sign)" data-secondary="++ (increment) operator" data-type="indexterm" id="idm45927773221344"/><a data-primary="increment operator (++)" data-type="indexterm" id="idm45927773220144"/>For example, the <code>++</code> increment operator has the side effect of
incrementing a variable. The expression <code>++a</code> increments the variable
<code>a</code> and returns the newly incremented value. If this expression is
evaluated again, the value will be different. The various assignment
operators also have side effects. For example, the expression <code>a*=2</code> can
also be written as <code>a=a*2</code>. The value of the expression is the value of
<code>a</code> multiplied by 2, but the expression has the side effect of storing
that value back 
<span class="keep-together">into <code>a</code></span>.</p>
<p><a data-primary="() (parentheses)" data-secondary="method invocation operator" data-type="indexterm" id="idm45927773215680"/><a data-primary="method invocation operator (( ))" data-type="indexterm" id="idm45927773214512"/>The method invocation operator <code>()</code> has side effects if the invoked
method has side effects. Some methods, such as <code>Math.sqrt()</code>, simply
compute and return a value without side effects of any kind. Typically,
however, methods do have side effects. <a data-primary="new operator" data-type="indexterm" id="idm45927773212896"/>Finally, the <code>new</code> operator has
the profound side effect of creating a new object.</p>
</div></section>
<section data-pdf-bookmark="Order of evaluation" data-type="sect3"><div class="sect3" id="idm45927773211520">
<h3>Order of evaluation</h3>
<p><a data-primary="evaluation of expressions" data-secondary="order of evaluation" data-type="indexterm" id="idm45927773210320"/><a data-primary="operators" data-secondary="order of evaluation" data-type="indexterm" id="idm45927773209152"/>When the Java interpreter evaluates an expression, it performs the
various operations in an order specified by the parentheses in the
expression, the precedence of the operators, and the associativity of
the operators. Before any operation is performed, however, the
interpreter first evaluates the operands of the operator. <a data-primary="? (question mark)" data-secondary="? : (conditional) operator" data-type="indexterm" id="idm45927773208080"/><a data-primary="| (vertical bar)" data-secondary="|| (conditional OR) operator" data-type="indexterm" id="idm45927773207120"/><a data-primary="&amp; (ampersand)" data-secondary="&amp;&amp; (conditional AND) operator" data-type="indexterm" id="idm45927773206160"/>(The
exceptions are the <code>&amp;&amp;</code>, <code>||</code>, and <code>?</code>: operators, which do not
always evaluate all their operands.) The interpreter always evaluates
operands in order from left to right. This matters if any of the
operands are expressions that contain side effects. Consider this code,
for example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">v</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">++</code><code class="n">a</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="o">++</code><code class="n">a</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="o">++</code><code class="n">a</code><code class="p">;</code><code class="w"/></pre>
<p>Although the multiplication is performed before the addition, the
operands of the <code>+</code> operator are evaluated first. As the operand of <code>++</code>
are both <code>++a</code>, these are evaluated to <code>3</code> and <code>4</code>, and so the expression
evaluates to <code>3 + 4 * 5</code>, or <code>23</code>.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="Arithmetic Operators" data-type="sect2"><div class="sect2" id="idm45927773168544">
<h2>Arithmetic Operators</h2>
<p><a data-primary="arithmetic operators" data-type="indexterm" id="idm45927773167312"/><a data-primary="operators" data-secondary="arithmetic" data-type="indexterm" id="idm45927773166608"/>The arithmetic operators can be used with integers, floating-point
numbers, and even characters (i.e., they can be used with any primitive
type other than <code>boolean</code>). <a data-primary="floating-point types" data-secondary="floating-point arithmetic" data-type="indexterm" id="idm45927773165152"/><a data-primary="integer types" data-secondary="integer arithmetic" data-type="indexterm" id="idm45927773164176"/>If either of the operands is a
floating-point number, floating-point arithmetic is used; otherwise,
integer arithmetic is used. This matters because integer arithmetic and
floating-point arithmetic differ in the way division is performed and in
the way underflows and overflows are handled, for example. The
arithmetic operators are:</p>
<dl>
<dt><em>Addition</em> (<code>+</code>)</dt>
<dd>
<p><a data-primary="+ (plus sign)" data-secondary="addition operator" data-type="indexterm" id="idm45927773136800"/><a data-primary="addition operator (+)" data-type="indexterm" id="idm45927773135824"/>The <code>+</code> operator adds two numbers. As we’ll see shortly, the <code>+</code> operator can also be used to concatenate strings. If either operand of <code>+</code> is a string, the other one is converted to a string as well. Be sure to use parentheses when you want to combine addition with concatenation. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Total: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">3</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">4</code><code class="p">);</code><code class="w">   </code><code class="c1">// Prints "Total: 34", not 7!</code><code class="w"/></pre>
<p>The <code>+</code> operator can also be used in unary form to express a positive number, such as <code>+42</code>.</p>
</dd>
<dt><em>Subtraction</em> (<code>-</code>)</dt>
<dd>
<p><a data-primary="- (minus sign)" data-secondary="subtraction operator" data-type="indexterm" id="idm45927773127904"/><a data-primary="subtraction operator (-)" data-type="indexterm" id="idm45927773008896"/>When the <code>-</code> operator is used as a binary operator, it subtracts its second operand from its first. For example, <code>7-3</code> evaluates to <code>4</code>. The <code>-</code> operator can also perform unary negation.</p>
</dd>
<dt><em>Multiplication</em> (<code>*</code>)</dt>
<dd>
<p><a data-primary="* (asterisk)" data-secondary="multiplication operator" data-type="indexterm" id="idm45927773004496"/><a data-primary="multiplication operator (*)" data-type="indexterm" id="idm45927773003520"/>The <code>*</code> operator multiplies its two operands. For example, <code>7*3</code> evaluates to <code>21</code>.</p>
</dd>
<dt><em>Division</em> (<code>/</code>)</dt>
<dd>
<p><a data-primary="/ (slash)" data-secondary="division operator" data-type="indexterm" id="idm45927772999520"/><a data-primary="division operator" data-type="indexterm" id="idm45927772998384"/>The <code>/</code> operator divides its first operand by its second. If both operands are integers, the result is an integer, and any remainder is lost. If either operand is a floating-point value, however, the result is a floating-point value. When you divide two integers, division by zero throws an <code>ArithmeticException</code>. <a data-primary="0 (zero)" data-secondary="division by zero" data-type="indexterm" id="idm45927772996752"/><a data-primary="floating-point types" data-secondary="division by zero" data-type="indexterm" id="idm45927772995744"/><a data-primary="infinity" data-secondary="division by zero" data-type="indexterm" id="idm45927772994800"/><a data-primary="NaN (Not a number)" data-secondary="floating-point calculations, division by zero" data-type="indexterm" id="idm45927772993856"/><a data-primary="zero (0)" data-secondary="division by zero" data-type="indexterm" id="idm45927772992944"/>For floating-point calculations, however, division by zero simply yields an infinite result or <code>NaN</code>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">7</code><code class="o">/</code><code class="mi">3</code><code class="w">          </code><code class="c1">// Evaluates to 2</code><code class="w"/>
<code class="mi">7</code><code class="o">/</code><code class="mf">3.0f</code><code class="w">       </code><code class="c1">// Evaluates to 2.333333f</code><code class="w"/>
<code class="mi">7</code><code class="o">/</code><code class="mi">0</code><code class="w">          </code><code class="c1">// Throws an ArithmeticException</code><code class="w"/>
<code class="mi">7</code><code class="o">/</code><code class="mf">0.0</code><code class="w">        </code><code class="c1">// Evaluates to positive infinity</code><code class="w"/>
<code class="mf">0.0</code><code class="o">/</code><code class="mf">0.0</code><code class="w">      </code><code class="c1">// Evaluates to NaN</code><code class="w"/></pre>
</dd>
<dt><em>Modulo</em> (<code>%</code>)</dt>
<dd>
<p><a data-primary="% (percent sign)" data-secondary="modulo operator" data-type="indexterm" id="idm45927772950048"/><a data-primary="modulo operator (%)" data-type="indexterm" id="idm45927772948672"/>The <code>%</code> operator computes the first operand modulo the second operand (i.e., it returns the remainder when the first operand is divided by the second operand an integral number of times). For example, <code>7%3</code> is <code>1</code>. The sign of the result is the same as the sign of the first operand. While the modulo operator is typically used with integer operands, it also works for floating-point values. For example, <code>4.3%2.1</code> evaluates to <code>0.1</code>. When you are operating with integers, trying to compute a value modulo zero causes an <code>ArithmeticException</code>. <a data-primary="infinity" data-secondary="modulo operator (%) and" data-type="indexterm" id="idm45927772945008"/><a data-primary="NaN (Not a number)" data-secondary="modulo operator (%) and" data-type="indexterm" id="idm45927772944000"/>When you are working with floating-point values, anything modulo <code>0.0</code> evaluates to <code>NaN</code>, as does infinity modulo anything.</p>
</dd>
<dt><em>Unary minus</em> (<code>-</code>)</dt>
<dd>
<p><a data-primary="- (minus sign)" data-secondary="unary minus operator" data-type="indexterm" id="idm45927772940560"/><a data-primary="unary operators" data-secondary="unary minus (-) operator" data-type="indexterm" id="idm45927772939584"/>When the <code>-</code> operator is used as a unary operator—that is, before a single operand—it performs unary negation. In other words, it converts a positive value to an equivalently negative value, and vice versa.</p>
</dd>
</dl>
</div></section>
<section data-pdf-bookmark="String Concatenation Operator" data-type="sect2"><div class="sect2" id="idm45927772937872">
<h2>String Concatenation Operator</h2>
<p><a data-primary="+ (plus sign)" data-secondary="+= (add assignment) operator" data-type="indexterm" id="idm45927772936464"/><a data-primary="+ (plus sign)" data-secondary="string concatenation operator" data-type="indexterm" id="idm45927772935360"/><a data-primary="operators" data-secondary="string concatenation" data-type="indexterm" id="idm45927772934448"/><a data-primary="string concatenation operator (+)" data-type="indexterm" id="idm45927772933504"/>In addition to adding numbers, the <code>+</code> operator (and the related <code>+=</code>
operator) also concatenates, or joins, strings. If either of the
operands to <code>+</code> is a string, the operator converts the other operand to
a string. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Prints "Quotient: 2.3333333"</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Quotient: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">7</code><code class="o">/</code><code class="mf">3.0f</code><code class="p">);</code><code class="w"/></pre>
<p>As a result, you must be careful to put any addition expressions in
parentheses when combining them with string concatenation. If you do
not, the addition operator is interpreted as a concatenation operator.</p>
<p><a data-primary="primitive types" data-secondary="conversions to strings" data-type="indexterm" id="idm45927767095504"/><a data-primary="strings" data-secondary="conversions for all primitive types" data-type="indexterm" id="idm45927767094432"/><a data-primary="toString()" data-type="indexterm" id="idm45927767093520"/>Java has built-in string conversions for all primitive types. An object is converted to a string by invoking its <code>toString()</code> method. Some classes define custom <code>toString()</code> methods so that objects of that class can easily be converted to 
<span class="keep-together">strings in</span> this way.
Sadly not all classes return friendly results when converted to strings.
For example, the built-in <code>toString()</code> for an array doesn’t return a useful
string representation of its contents, only information about the array object
itself.</p>
</div></section>
<section data-pdf-bookmark="Increment and Decrement Operators" data-type="sect2"><div class="sect2" id="idm45927767090560">
<h2>Increment and Decrement Operators</h2>
<p><a data-primary="+ (plus sign)" data-secondary="++ (increment) operator" data-type="indexterm" id="idm45927772876256"/><a data-primary="increment operator (++)" data-type="indexterm" id="idm45927772875168"/><a data-primary="operators" data-secondary="increment/decrement" data-type="indexterm" id="idm45927772874496"/>The <code>++</code> operator increments its single operand, which must be a
variable, an element of an array, or a field of an object, by 1. The
behavior of this operator depends on its position relative to the
operand. <a data-primary="pre-increment operator (++)" data-type="indexterm" id="idm45927772873008"/>When used before the operand, where it is known as the
<em>pre-increment</em> operator, it increments the operand and evaluates to
the incremented value of that operand. <a data-primary="post-increment operator (++)" data-type="indexterm" id="idm45927772871712"/>When used after the operand,
where it is known as the <em>post-increment</em> operator, it increments its
operand but evaluates to the value of that operand before it was
incremented.</p>
<p>For example, the following code sets both <code>i</code> and <code>j</code> to 2:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>
<code class="n">j</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">++</code><code class="n">i</code><code class="p">;</code><code class="w"/></pre>
<p>But these lines set <code>i</code> to 2 and <code>j</code> to 1:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>
<code class="n">j</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="- (minus sign)" data-secondary="-- (decrement) operator" data-type="indexterm" id="idm45927767034688"/><a data-primary="arrays" data-secondary="as operand type" data-secondary-sortas="operand type" data-type="indexterm" id="idm45927767033616"/><a data-primary="decrement operator (--)" data-type="indexterm" id="idm45927767032432"/><a data-primary="objects" data-secondary="as operand type" data-secondary-sortas="operand type" data-type="indexterm" id="idm45927767031760"/><a data-primary="post-decrement operator (--)" data-type="indexterm" id="idm45927767030544"/><a data-primary="pre-decrement operator (--)" data-type="indexterm" id="idm45927767006944"/>Similarly, the <code>--</code> operator decrements its single numeric operand,
which must be a variable, an element of an array, or a field of an
object, by one. Like the <code>++</code> operator, the behavior of <code>--</code> depends on
its position relative to the operand. When used before the operand, it
decrements the operand and returns the decremented value. When used
after the operand, it decrements the operand but returns the
<em>undecremented</em> value.</p>
<p>The expressions <code>x++</code> and <code>x--</code> are equivalent to <code>x = x + 1</code> and <code>x = x - 1</code>,
respectively, except that when you are using the increment and decrement
operators, <code>x</code> is evaluated only once. If <code>x</code> is itself an expression
with side effects, this makes a big difference.
For example, these two expressions are not equivalent, as the second form increments <code>i</code> twice:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]++</code><code class="p">;</code><code class="w">             </code><code class="c1">// Increments an element of an array</code><code class="w"/>

<code class="c1">// Adds 1 to an array element and stores new value in another element</code><code class="w"/>
<code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/></pre>
<p>These operators, in both prefix and postfix forms, are most commonly used to increment or decrement the counter that controls a loop.
However, an increasing number of programmers prefer to avoid using the increment and decrement operators altogether, preferring to use explicit code.
This view is motivated by the large number of bugs that have, historically, been caused by incorrect usage of the operators.</p>
</div></section>
<section data-pdf-bookmark="Comparison Operators" data-type="sect2"><div class="sect2" id="idm45927772877072">
<h2>Comparison Operators</h2>
<p><a data-primary="comparison operators" data-type="indexterm" id="idm45927766972992"/><a data-primary="operators" data-secondary="comparison" data-type="indexterm" id="idm45927766972128"/>The comparison operators consist of the equality operators that test
values for equality or inequality and the relational operators used
with ordered types (numbers and characters) to test for greater than and
less than relationships. <a data-primary="boolean type" data-secondary="operator return values" data-type="indexterm" id="idm45927766967600"/><a data-primary="if statements" data-type="indexterm" id="idm45927766966656"/>Both types of operators yield a <code>boolean</code>
result, so they are typically used with <code>if</code> statements, the ternary conditional
operator, <a data-primary="while loops, comparison operators in" data-type="indexterm" id="idm45927766965056"/>or <code>while</code> and <code>for</code> loops to make branching and looping decisions.
For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">o</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">...;</code><code class="w">           </code><code class="c1">// The not equals operator</code><code class="w"/>
<code class="k">while</code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">a</code><code class="p">.</code><code class="na">length</code><code class="p">)</code><code class="w"> </code><code class="p">...;</code><code class="w">      </code><code class="c1">// The less than operator</code><code class="w"/></pre>
<p>Java provides the following equality operators:</p>
<dl>
<dt><em>Equals</em> (<code>==</code>)</dt>
<dd>
<p><a data-primary="= (equals sign)" data-secondary="== (equal to) operator" data-type="indexterm" id="idm45927770826064"/><a data-primary="equality operator (==)" data-type="indexterm" id="idm45927770824864"/><a data-primary="primitive types" data-secondary="equals operator (==), testing operand values" data-type="indexterm" id="idm45927770824192"/><a data-primary="reference types" data-secondary="operands, testing with == operator" data-type="indexterm" id="idm45927770823280"/>The <code>==</code> operator evaluates to <code>true</code> if its two operands are equal and <code>false</code> otherwise. With primitive operands, it tests whether the operand values themselves are identical. For operands of reference types, however, it tests whether the operands refer to the same object or array. In other words, it does not test the equality of two distinct objects or arrays. In particular, note that you cannot test two distinct strings for equality with this operator.</p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>If you experiment comparing strings via <code>==</code> you may see results that suggest
it works properly. This is a side effect of Java’s internal caching of strings,
known as <em>interning</em>. The only reliable way to compare strings (or any other
reference type for that matter) for equality is the <code>equals()</code> method.</p>
<p>The same applies with primitive wrapper classes, so <code>new Integer(1) != new
Integer(1)</code>, while the preferred <code>Integer.valueOf(1) == Integer.valueOf(1)</code> does. The
lesson is clearly that looking at equality on any nonprimitive type should be done
with <code>equals()</code>. More discussion of object equality can be found in
<a data-type="xref" href="ch05.xhtml#javanut8-CHP-5-SECT-2-2">“equals()”</a>.</p>
</div>
<p>If <code>==</code> is used to compare two numeric or character operands that are
not of the same type, the narrower operand is converted to the type of
the wider operand before the comparison is done. For example, when you are
comparing a <code>short</code> to a <code>float</code>, the <code>short</code> is first converted to a
<code>float</code> before the comparison is performed. For floating-point
numbers, the special negative zero value tests equal to the regular,
positive zero value. <a data-primary="floating-point types" data-secondary="testing if value is NaN" data-type="indexterm" id="idm45927770812272"/><a data-primary="NaN (Not a number)" data-secondary="equality tests of" data-type="indexterm" id="idm45927770811296"/>Also, the special <code>NaN</code> (Not a Number) value is
not equal to any other number, including itself. <a data-primary="isNan()" data-type="indexterm" id="idm45927770809808"/>To test whether a
floating-point value is <code>NaN</code>, use the <code>Float.isNan()</code> or
<code>Double.isNan()</code> method.</p>
</dd>
<dt><em>Not equals</em> (<code>!=</code>)</dt>
<dd>
<p><a data-primary="! (exclamation point)" data-secondary="!= (not equal to) operator" data-type="indexterm" id="idm45927770806160"/><a data-primary="not equals operator (!=)" data-type="indexterm" id="idm45927770805024"/>The <code>!=</code> operator is exactly the opposite of the <code>==</code> operator. It evaluates to <code>true</code> if its two primitive operands have different values or if its two reference operands refer to different objects or arrays. Otherwise, it evaluates to <code>false</code>.</p>
</dd>
</dl>
<p>The relational operators can be used with numbers and characters but not with <code>boolean</code> values, objects, or arrays because those types are not ordered.</p>
<p><a data-primary="relational operators" data-type="indexterm" id="idm45927770801248"/>Java provides the following relational operators:</p>
<dl>
<dt><em>Less than</em> (<code>&lt;</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt; (less than) operator" data-type="indexterm" id="idm45927770798048"/><a data-primary="less than operator (&lt;)" data-type="indexterm" id="idm45927770797072"/>Evaluates to <code>true</code> if the first operand is less than the second.</p>
</dd>
<dt><em>Less than or equal</em> (<code>&lt;=</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt;= (less than or equal to) operator" data-type="indexterm" id="idm45927770793872"/><a data-primary="less than or equal to operator (&lt;=)" data-type="indexterm" id="idm45927770792928"/>Evaluates to <code>true</code> if the first operand is less than or equal to the second.</p>
</dd>
<dt><em>Greater than</em> (<code>&gt;</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt; (greater than) operator" data-type="indexterm" id="idm45927770789824"/><a data-primary="greater than operator (&gt;)" data-type="indexterm" id="idm45927770788880"/>Evaluates to <code>true</code> if the first operand is greater than the second.</p>
</dd>
<dt><em>Greater than or equal</em> (<code>&gt;=</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;= (greater than or equal to) operator" data-type="indexterm" id="idm45927770785712"/><a data-primary="greater than or equal to operator (&gt;=)" data-type="indexterm" id="idm45927770784720"/>Evaluates to <code>true</code> if the first operand is greater than or equal to the second.</p>
</dd>
</dl>
</div></section>
<section data-pdf-bookmark="Boolean Operators" data-type="sect2"><div class="sect2" id="idm45927770783232">
<h2>Boolean Operators</h2>
<p><a data-primary="Boolean operators" data-type="indexterm" id="ix_ch02-asciidoc18"/><a data-primary="logical operators" data-type="indexterm" id="ix_ch02-asciidoc19"/><a data-primary="operators" data-secondary="Boolean" data-type="indexterm" id="ix_ch02-asciidoc20"/>As we’ve just seen, the comparison operators compare their operands
and yield a <code>boolean</code> result, which is often used in branching and
looping statements. In order to make branching and looping decisions
based on conditions more interesting than a single comparison, you can
use the Boolean (or logical) operators to combine multiple comparison
expressions into a single, more complex expression. The Boolean
operators require their operands to be <code>boolean</code> values and they
evaluate to <code>boolean</code> values. The operators are:</p>
<dl>
<dt><em>Conditional AND</em> (<code>&amp;&amp;</code>)</dt>
<dd>
<p><a data-primary="&amp; (ampersand)" data-secondary="&amp;&amp; (conditional AND) operator" data-type="indexterm" id="idm45927770774832"/><a data-primary="conditional AND operator (&amp;&amp;)" data-type="indexterm" id="idm45927770773664"/>This operator performs a Boolean AND operation on its operands. It evaluates to <code>true</code> if and only if both its operands are <code>true</code>. If either or both operands are <code>false</code>, it evaluates to <code>false</code>. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="w"> </code><code class="o">&amp;&amp;</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">3</code><code class="p">)</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="c1">// If both comparisons are true</code><code class="w"/></pre>
<p>This operator (and all the Boolean operators except the unary <code>!</code>
operator) have a lower precedence than the comparison operators. Thus,
it is perfectly legal to write a line of code like the one just shown.
However, some programmers prefer to use parentheses to make the order
of evaluation explicit:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">((</code><code class="n">x</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">)</code><code class="w"> </code><code class="o">&amp;&amp;</code><code class="w"> </code><code class="p">(</code><code class="n">y</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">3</code><code class="p">))</code><code class="w"> </code><code class="p">...</code><code class="w"/></pre>
<p>You should use whichever style you find easier to read.</p>
<p>This operator is called a conditional AND because it conditionally
evaluates its second operand. If the first operand evaluates to
<code>false</code>, the value of the expression is <code>false</code>, regardless of the
value of the second operand. Therefore, to increase efficiency, the
<a data-primary="evaluation of expressions" data-secondary="shortcutting" data-type="indexterm" id="idm45927770764688"/>Java interpreter takes a shortcut and skips the second operand. The
second operand is not guaranteed to be evaluated, so you must use
caution when using this operator with expressions that have side
effects. On the other hand, the conditional nature of this operator
allows us to write Java expressions such as the following:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">data</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="w"> </code><code class="o">&amp;&amp;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">data</code><code class="p">.</code><code class="na">length</code><code class="w"> </code><code class="o">&amp;&amp;</code><code class="w"> </code><code class="n">data</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="o">-</code><code class="mi">1</code><code class="p">)</code><code class="w"/>
<code class="w">    </code><code class="p">...</code><code class="w"/></pre>
<p>The second and third comparisons in this expression would cause errors
if the first or second comparisons evaluated to <code>false</code>. Fortunately,
we don’t have to worry about this because of the conditional behavior
of the <code>&amp;&amp;</code> operator.</p>
</dd>
<dt><em>Conditional OR</em> (<code>||</code>)</dt>
<dd>
<p><a data-primary="| (vertical bar)" data-secondary="|| (conditional OR) operator" data-type="indexterm" id="idm45927771534416"/>This operator performs a Boolean OR operation on its two <code>boolean</code> operands. It evaluates to <code>true</code> if either or both of its operands are <code>true</code>. If both operands are <code>false</code>, it evaluates to <code>false</code>. Like the <code>&amp;&amp;</code> operator, <code>||</code> does not always evaluate its second operand. If the first operand evaluates to <code>true</code>, the value of the expression is <code>true</code>, regardless of the value of the second operand. Thus, the operator simply skips the second operand in that case.</p>
</dd>
<dt><em>Boolean NOT</em> (<code>!</code>)</dt>
<dd>
<p><a data-primary="! (exclamation point)" data-secondary="boolean NOT operator" data-type="indexterm" id="idm45927771527360"/><a data-primary="NOT operator" data-secondary="boolean NOT (!)" data-type="indexterm" id="idm45927771526160"/>This unary operator changes the <code>boolean</code> value of its operand. If applied to a <code>true</code> value, it evaluates to <code>false</code>, and if applied to a <code>false</code> value, it evaluates to <code>true</code>. It is useful in expressions like these:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="o">!</code><code class="n">found</code><code class="p">)</code><code class="w"> </code><code class="p">...</code><code class="w">          </code><code class="c1">// found is a boolean declared somewhere</code><code class="w"/>
<code class="k">while</code><code class="w"> </code><code class="p">(</code><code class="o">!</code><code class="n">c</code><code class="p">.</code><code class="na">isEmpty</code><code class="p">())</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="c1">// The isEmpty() method returns a boolean</code><code class="w"/></pre>
<p>Because <code>!</code> is a unary operator, it has a high precedence and often
must be used with parentheses:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="o">!</code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">&amp;&amp;</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="n">z</code><code class="p">))</code><code class="w"/></pre>
</dd>
<dt><em>Boolean AND</em> (<code>&amp;</code>)</dt>
<dd>
<p><a data-primary="&amp; (ampersand)" data-secondary="boolean AND operator" data-type="indexterm" id="idm45927766816288"/>When used with <code>boolean</code> operands, the <code>&amp;</code> operator behaves like the <code>&amp;&amp;</code> operator, except that it always evaluates both operands, regardless of the value of the first operand. This operator is almost always used as a bitwise operator with integer operands, however, and many Java programmers would not even recognize its use with <code>boolean</code> operands as legal Java code.</p>
</dd>
<dt><em>Boolean OR</em> (<code>|</code>)</dt>
<dd>
<p><a data-primary="| (vertical bar)" data-secondary="boolean OR operator" data-type="indexterm" id="idm45927766799248"/>This operator performs a Boolean OR operation on its two <code>boolean</code> operands. It is like the <code>||</code> operator, except that it always evaluates both operands, even if the first one is <code>true</code>. The <code>|</code> operator is almost always used as a bitwise operator on integer operands; its use with <code>boolean</code> operands is very rare.</p>
</dd>
<dt><em>Boolean XOR</em> (<code>^</code>)</dt>
<dd>
<p><a data-primary="^ (caret)" data-secondary="boolean XOR operator" data-type="indexterm" id="idm45927766793904"/><a data-primary="XOR operator" data-secondary="boolean XOR (^)" data-type="indexterm" id="idm45927766792528"/>When used with <code>boolean</code> operands, this operator computes the exclusive OR (XOR) of its operands. It evaluates to <code>true</code> if exactly one of the two operands is <code>true</code>. In other words, it evaluates to <code>false</code> if both operands are <code>false</code> or if both operands are <code>true</code>. Unlike the <code>&amp;&amp;</code> and <code>||</code> operators, this one must always evaluate both operands. The <code>^</code> operator is much more commonly used as a bitwise operator on integer operands. With <code>boolean</code> operands, this operator is equivalent to the <code>!=</code> operator.<a data-startref="ix_ch02-asciidoc20" data-type="indexterm" id="idm45927766786672"/><a data-startref="ix_ch02-asciidoc19" data-type="indexterm" id="idm45927766785936"/><a data-startref="ix_ch02-asciidoc18" data-type="indexterm" id="idm45927766785264"/></p>
</dd>
</dl>
</div></section>
<section data-pdf-bookmark="Bitwise and Shift Operators" data-type="sect2"><div class="sect2" id="idm45927770776800">
<h2>Bitwise and Shift Operators</h2>
<p><a data-primary="bitwise operators" data-type="indexterm" id="ix_ch02-asciidoc21"/><a data-primary="operators" data-secondary="bitwise" data-type="indexterm" id="ix_ch02-asciidoc22"/>The bitwise and shift operators are low-level operators that
manipulate the individual bits that make up an integer value. The
bitwise operators are not commonly used in modern Java except for
low-level work (e.g., network programming). They are used for testing
and setting individual flag bits in a value. To understand
their behavior, you must understand binary (base-2) numbers and the
two’s complement format used to represent negative integers.</p>
<p>You cannot use these operators with floating-point, <code>boolean</code>, array, or
object operands. When used with <code>boolean</code> operands, the <code>&amp;</code>, <code>|</code>, and
<code>^</code> operators perform a different operation, as described in the
previous section.</p>
<p>If either of the arguments to a bitwise operator is a <code>long</code>, the result
is a <code>long</code>. Otherwise, the result is an <code>int</code>. If the left operand of a
shift operator is a <code>long</code>, the result is a <code>long</code>; otherwise, the
result is an <code>int</code>. The operators are:</p>
<dl>
<dt><em>Bitwise complement</em> (<code>~</code>)</dt>
<dd>
<p><a data-primary="~ (tilde), bitwise complement operator" data-type="indexterm" id="idm45927766772704"/><a data-primary="NOT operator" data-secondary="bitwise NOT (~)" data-type="indexterm" id="idm45927766771984"/>The unary <code>~</code> operator is known as the bitwise complement, or bitwise NOT, operator. It inverts each bit of its single operand, converting 1s to 0s and 0s to 1s. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">byte</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="o">~</code><code class="mi">12</code><code class="p">;</code><code class="w">           </code><code class="c1">// ~00001100 =  =&gt; 11110011 or -13 decimal</code><code class="w"/>
<code class="n">flags</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">flags</code><code class="w"> </code><code class="o">&amp;</code><code class="w"> </code><code class="o">~</code><code class="n">f</code><code class="p">;</code><code class="w">     </code><code class="c1">// Clear flag f in a set of flags</code><code class="w"/></pre>
</dd>
<dt><em>Bitwise AND</em> (<code>&amp;</code>)</dt>
<dd>
<p><a data-primary="&amp; (ampersand)" data-secondary="bitwise AND operator" data-type="indexterm" id="idm45927766734768"/>This operator combines its two integer operands by performing a Boolean AND operation on their individual bits. The result has a bit set only if the corresponding bit is set in both operands. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">10</code><code class="w"> </code><code class="o">&amp;</code><code class="w"> </code><code class="mi">7</code><code class="w">                   </code><code class="c1">// 00001010 &amp; 00000111 =  =&gt; 00000010 or 2</code><code class="w"/>
<code class="k">if</code><code class="w"> </code><code class="p">((</code><code class="n">flags</code><code class="w"> </code><code class="o">&amp;</code><code class="w"> </code><code class="n">f</code><code class="p">)</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w">    </code><code class="c1">// Test whether flag f is set</code><code class="w"/></pre>
<p>When used with <code>boolean</code> operands, <code>&amp;</code> is the infrequently used
Boolean AND operator described earlier.</p>
</dd>
<dt><em>Bitwise OR</em> (<code>|</code>)</dt>
<dd>
<p><a data-primary="| (vertical bar)" data-secondary="bitwise OR operator" data-type="indexterm" id="idm45927766667904"/>This operator combines its two integer operands by performing a Boolean OR operation on their individual bits. The result has a bit set if the corresponding bit is set in either or both of the operands. It has a zero bit only where both corresponding operand bits are zero. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">10</code><code class="w"> </code><code class="o">|</code><code class="w"> </code><code class="mi">7</code><code class="w">                   </code><code class="c1">// 00001010 | 00000111 =  =&gt; 00001111 or 15</code><code class="w"/>
<code class="n">flags</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">flags</code><code class="w"> </code><code class="o">|</code><code class="w"> </code><code class="n">f</code><code class="p">;</code><code class="w">       </code><code class="c1">// Set flag f</code><code class="w"/></pre>
<p>When used with <code>boolean</code> operands, <code>|</code> is the infrequently used
Boolean OR operator described earlier.</p>
</dd>
<dt><em>Bitwise XOR</em> (<code>^</code>)</dt>
<dd>
<p><a data-primary="^ (caret)" data-secondary="?= (bitwise XOR assignment) operator" data-type="indexterm" id="idm45927766386480"/><a data-primary="^ (caret)" data-secondary="bitwise XOR operator" data-type="indexterm" id="idm45927766385536"/><a data-primary="XOR operator" data-secondary="bitwise XOR (^)" data-type="indexterm" id="idm45927766384592"/>This operator combines its two integer operands by performing a Boolean XOR (exclusive OR) operation on their individual bits. The result has a bit set if the corresponding bits in the two operands are different. If the corresponding operand bits are both 1s or both 0s, the result bit is a 0. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">10</code><code class="w"> </code><code class="o">^</code><code class="w"> </code><code class="mi">7</code><code class="w">               </code><code class="c1">// 00001010 ^ 00000111 =  =&gt; 00001101 or 13</code><code class="w"/></pre>
<p>When used with <code>boolean</code> operands, <code>^</code> is the seldom used Boolean
XOR <span class="keep-together">operator</span>.<a data-startref="ix_ch02-asciidoc22" data-type="indexterm" id="idm45927766377840"/><a data-startref="ix_ch02-asciidoc21" data-type="indexterm" id="idm45927766377104"/></p>
</dd>
<dt><em>Left shift</em> (<code>&lt;&lt;</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt;&lt; (left shift) operator" data-type="indexterm" id="idm45927766355072"/><a data-primary="left shift operator (&lt;&lt;)" data-type="indexterm" id="idm45927766353936"/><a data-primary="operators" data-secondary="shift" data-type="indexterm" id="idm45927766353296"/><a data-primary="shift operators" data-type="indexterm" id="idm45927766352352"/>The <code>&lt;&lt;</code> operator shifts the bits of the left operand left by the number of places specified by the right operand. High-order bits of the left operand are lost, and zero bits are shifted in from the right. Shifting an integer left by <em>n</em> places is equivalent to multiplying that number by 2<sup><em>n</em></sup>. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">10</code><code class="w"> </code><code class="o">&lt;&lt;</code><code class="w"> </code><code class="mi">1</code><code class="w">    </code><code class="c1">// 0b00001010 &lt;&lt; 1 = 00010100 = 20 = 10*2</code><code class="w"/>
<code class="mi">7</code><code class="w"> </code><code class="o">&lt;&lt;</code><code class="w"> </code><code class="mi">3</code><code class="w">     </code><code class="c1">// 0b00000111 &lt;&lt; 3 = 00111000 = 56 = 7*8</code><code class="w"/>
<code class="o">-</code><code class="mi">1</code><code class="w"> </code><code class="o">&lt;&lt;</code><code class="w"> </code><code class="mi">2</code><code class="w">    </code><code class="c1">// 0xFFFFFFFF &lt;&lt; 2 = 0xFFFFFFFC = -4 = -1*4</code><code class="w"/>
<code class="w">           </code><code class="c1">// 0xFFFF_FFFC == 0b1111_1111_1111_1111_1111_1111_1111_1100</code><code class="w"/></pre>
<p>If the left operand is a <code>long</code>, the right operand should be between 0
and 63. Otherwise, the left operand is taken to be an <code>int</code>, and the
right operand should be between 0 and 31. If either of these ranges is
exceeded, you may see unintuitive wrapping behavior from these operators.</p>
</dd>
<dt><em>Signed right shift</em> (<code>&gt;&gt;</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt; (signed right shift) operator" data-type="indexterm" id="idm45927766297680"/><a data-primary="right shift operators" data-type="indexterm" id="idm45927766296736"/>The <code>&gt;&gt;</code> operator shifts the bits of the left operand to the right by the number of places specified by the right operand. The low-order bits of the left operand are shifted away and are lost. The high-order bits shifted in are the same as the original high-order bit of the left operand. In other words, if the left operand is positive, 0s are shifted into the high-order bits. If the left operand is negative, 1s are shifted in instead. This technique is known as <em>sign extension</em>; it is used to preserve the sign of the left operand. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mi">10</code><code class="w"> </code><code class="o">&gt;&gt;</code><code class="w"> </code><code class="mi">1</code><code class="w">      </code><code class="c1">// 00001010 &gt;&gt; 1 = 00000101 = 5 = 10/2</code><code class="w"/>
<code class="mi">27</code><code class="w"> </code><code class="o">&gt;&gt;</code><code class="w"> </code><code class="mi">3</code><code class="w">      </code><code class="c1">// 00011011 &gt;&gt; 3 = 00000011 = 3 = 27/8</code><code class="w"/>
<code class="o">-</code><code class="mi">50</code><code class="w"> </code><code class="o">&gt;&gt;</code><code class="w"> </code><code class="mi">2</code><code class="w">     </code><code class="c1">// 11001110 &gt;&gt; 2 = 11110011 = -13 != -50/4</code><code class="w"/></pre>
<p>If the left operand is positive and the right operand is <em>n</em>, the <code>&gt;&gt;</code>
operator is the same as integer division by 2<sup><em>n</em></sup>.</p>
</dd>
<dt><em>Unsigned right shift</em> (<code>&gt;&gt;&gt;</code>)</dt>
<dd>
<p><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt;&gt; (unsigned right shift) operator" data-type="indexterm" id="idm45927766288624"/>This operator is like the <code>&gt;&gt;</code> operator, except that it always shifts zeros into the high-order bits of the result, regardless of the sign of the lefthand operand. <a data-primary="zero extension" data-type="indexterm" id="idm45927766244736"/>This technique is called <em>zero extension</em>; it is appropriate when the left operand is being treated as an unsigned value (despite the fact that Java integer types are all signed). These are examples:</p>
<pre data-code-language="java" data-type="programlisting"><code class="mh">0xff</code><code class="w"> </code><code class="o">&gt;&gt;&gt;</code><code class="w"> </code><code class="mi">4</code><code class="w">    </code><code class="c1">// 11111111 &gt;&gt;&gt; 4 = 00001111 = 15  = 255/16</code><code class="w"/>
<code class="o">-</code><code class="mi">50</code><code class="w"> </code><code class="o">&gt;&gt;&gt;</code><code class="w"> </code><code class="mi">2</code><code class="w">     </code><code class="c1">// 0xFFFFFFCE &gt;&gt;&gt; 2 = 0x3FFFFFF3 = 1073741811</code><code class="w"/></pre>
</dd>
</dl>
</div></section>
<section data-pdf-bookmark="Assignment Operators" data-type="sect2"><div class="sect2" id="idm45927766774448">
<h2>Assignment Operators</h2>
<p><a data-primary="assignment operators" data-type="indexterm" id="ix_ch02-asciidoc23"/><a data-primary="operators" data-secondary="assignment" data-type="indexterm" id="ix_ch02-asciidoc24"/>The assignment operators store, or assign, a value into a piece of the computer’s memory--<a data-primary="storage location" data-type="indexterm" id="idm45927766189872"/>often referred to as a <em>storage location</em>.
The left operand must evaluate to an appropriate local variable, array element, or object field.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><a data-primary="lvalue" data-type="indexterm" id="idm45927766185616"/>The lefthand side of an assignment expression is sometimes called an <code><em>lvalue</em></code>. In Java it must refer to some assignable storage (i.e., memory that can be written to).</p>
</div>
<p><a data-primary="rvalue" data-type="indexterm" id="idm45927766183744"/>The righthand side (the <code><em>rvalue</em></code>) can be any value of a type compatible with the variable.
An assignment expression evaluates to the value that is assigned to the variable.
More importantly, however, the expression has the side effect of actually performing the assignment—​storing the <code>rvalue</code> in the <code>lvalue</code>.</p>
<div data-type="tip"><h6>Tip</h6>
<p>Unlike all other binary operators, the assignment operators are right-associative, which means that the assignments in <code>a=b=c</code> are performed right to left, as follows: <code>a=(b=c)</code>.</p>
</div>
<p><a data-primary="= (equals sign)" data-secondary="= (assignment) operator, confusion with == (equal to) operator" data-type="indexterm" id="idm45927769478560"/><a data-primary="= (equals sign)" data-secondary="assignment operator" data-type="indexterm" id="idm45927769477616"/><a data-primary="equality operator (==)" data-secondary="confusion with = (assignment) operator" data-type="indexterm" id="idm45927769476672"/>The basic assignment operator is <code>=</code>. Do not confuse it with the
equality operator, <code>==</code>. To keep these two operators distinct,
we recommend that you read <code>=</code> as “is assigned the value.”</p>
<p>In addition to this simple assignment operator, Java also defines 11
other operators that combine assignment with the 5 arithmetic operators
and the 6 bitwise and shift operators. <a data-primary="+ (plus sign)" data-secondary="+= (add assignment) operator" data-type="indexterm" id="idm45927769473776"/>For example, the <code>+=</code> operator reads the value of the left variable, adds the value of the right
operand to it, stores the sum back into the left variable as a side
effect, and returns the sum as the value of the expression. Thus, the
expression <code>x+=2</code> is almost the same as <code>x=x+2</code>. The difference between
these two expressions is that when you use the <code>+=</code> operator, the left
operand is evaluated only once. This makes a difference when that
operand has a side effect. Consider the following two expressions, which
are not equivalent:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w"/>
<code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w"/></pre>
<p>The general form of these combination assignment operators is:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">lvalue</code><code class="w"> </code><code class="n">op</code><code class="o">=</code><code class="w"> </code><code class="n">rvalue</code><code class="w"/></pre>
<p>This is equivalent (unless there are side effects in <code>lvalue</code>) to:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">lvalue</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">lvalue</code><code class="w"> </code><code class="n">op</code><code class="w"> </code><code class="n">rvalue</code><code class="w"/></pre>
<p><a data-primary="- (minus sign)" data-secondary="-= (subtract assignment) operator" data-type="indexterm" id="idm45927769394352"/><a data-primary="/ (slash)" data-secondary="/= (divide assignment) operator" data-type="indexterm" id="idm45927769393504"/><a data-primary="| (vertical bar)" data-secondary="|= (bitwise OR assignment) operator" data-type="indexterm" id="idm45927769392656"/><a data-primary="% (percent sign)" data-secondary="%= (modulo assignment) operator" data-type="indexterm" id="idm45927769367360"/><a data-primary="&amp; (ampersand)" data-secondary="&amp;= (bitwise AND assignment) operator" data-type="indexterm" id="idm45927769366448"/><a data-primary="* (asterisk)" data-secondary="* = (multiply assignment) operator" data-type="indexterm" id="idm45927769365536"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&lt;&lt;= (left shift assignment) operator" data-type="indexterm" id="idm45927769364624"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt;= (right shift assignment) operator" data-type="indexterm" id="idm45927769363664"/><a data-primary="&lt; &gt; (angle brackets)" data-secondary="&gt;&gt;&gt;= (unsigned right shift assignment) operator" data-type="indexterm" id="idm45927769362704"/>The available operators are:</p>
<pre data-code-language="java" data-type="programlisting"><code class="o">+=</code><code class="w">    </code><code class="o">-=</code><code class="w">    </code><code class="o">*=</code><code class="w">    </code><code class="o">/=</code><code class="w">    </code><code class="o">%=</code><code class="w">    </code><code class="c1">// Arithmetic operators plus assignment</code><code class="w"/>

<code class="o">&amp;=</code><code class="w">    </code><code class="o">|=</code><code class="w">    </code><code class="o">^=</code><code class="w">                </code><code class="c1">// Bitwise operators plus assignment</code><code class="w"/>

<code class="o">&lt;&lt;=</code><code class="w">   </code><code class="o">&gt;&gt;=</code><code class="w">   </code><code class="o">&gt;&gt;&gt;=</code><code class="w">              </code><code class="c1">// Shift operators plus assignment</code><code class="w"/></pre>
<p><a data-primary="boolean type" data-secondary="using +=, -=, &amp;=, and |= to work with boolean flags" data-type="indexterm" id="idm45927769285184"/>The most commonly used operators are <code>+=</code> and <code>-=</code>, although <code>&amp;=</code>
and <code>|=</code> can also be useful when you are working with <code>boolean</code> or bitwise flags. For
example:<a data-startref="ix_ch02-asciidoc24" data-type="indexterm" id="idm45927769306672"/><a data-startref="ix_ch02-asciidoc23" data-type="indexterm" id="idm45927769305968"/></p>
<pre data-code-language="java" data-type="programlisting"><code class="n">i</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w">          </code><code class="c1">// Increment a loop counter by 2</code><code class="w"/>
<code class="n">c</code><code class="w"> </code><code class="o">-=</code><code class="w"> </code><code class="mi">5</code><code class="p">;</code><code class="w">          </code><code class="c1">// Decrement a counter by 5</code><code class="w"/>
<code class="n">flags</code><code class="w"> </code><code class="o">|=</code><code class="w"> </code><code class="n">f</code><code class="p">;</code><code class="w">      </code><code class="c1">// Set a flag f in an integer set of flags</code><code class="w"/>
<code class="n">flags</code><code class="w"> </code><code class="o">&amp;=</code><code class="w"> </code><code class="o">~</code><code class="n">f</code><code class="p">;</code><code class="w">     </code><code class="c1">// Clear a flag f in an integer set of flags</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The Conditional Operator" data-type="sect2"><div class="sect2" id="idm45927769281472">
<h2>The Conditional Operator</h2>
<p><a data-primary="? (question mark)" data-secondary="? : (conditional) operator" data-type="indexterm" id="idm45927770483600"/><a data-primary="conditional operator (? :)" data-type="indexterm" id="idm45927770482464"/><a data-primary="if/else statements" data-secondary="conditional operator (? :) as version of" data-type="indexterm" id="idm45927770481824"/><a data-primary="operators" data-secondary="conditional" data-type="indexterm" id="idm45927770480912"/>The conditional operator <code>?</code>: is a somewhat obscure ternary
(three-operand) operator inherited from C. It allows you to embed a
conditional within an expression. You can think of it as the operator
version of the <code>if/else</code> statement. The first and second operands of
the conditional operator are separated by a question mark (<code>?</code>), while
the second and third operands are separated by a colon (:). The first
operand must evaluate to a <code>boolean</code> value. The second and third
operands can be of any type, but they must be convertible to the same
type.</p>
<p>The conditional operator starts by evaluating its first operand. If it
is <code>true</code>, the operator evaluates its second operand and uses that as
the value of the expression. On the other hand, if the first operand is
<code>false</code>, the conditional operator evaluates and returns its third
operand. The conditional operator never evaluates both its second and
third operand, so be careful when using expressions with side effects
with this operator. Examples of this operator are:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">max</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="n">y</code><code class="p">)</code><code class="w"> </code><code class="o">?</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">name</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="n">value</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="o">?</code><code class="w"> </code><code class="n">value</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="s">"unknown"</code><code class="p">;</code><code class="w"/></pre>
<p>Note that the <code>?</code>: operator has lower precedence than all other
operators except the assignment operators, so parentheses are not
usually necessary around the operands of this operator. Many programmers
find conditional expressions easier to read if the first operand is
placed within parentheses, however. This is especially true because the
conditional <code>if</code> statement always has its conditional expression written
within parentheses.</p>
</div></section>
<section data-pdf-bookmark="The instanceof Operator" data-type="sect2"><div class="sect2" id="idm45927770415824">
<h2>The instanceof Operator</h2>
<p><a data-primary="data types" data-secondary="instanceof operator" data-type="indexterm" id="idm45927770414448"/><a data-primary="instanceof operator" data-type="indexterm" id="idm45927770413472"/><a data-primary="operators" data-secondary="instanceof" data-type="indexterm" id="idm45927770412800"/>The <code>instanceof</code> operator is intimately bound up with objects and the
operation of the Java type system. If this is your first look at Java,
it may be preferable to skim this definition and return to this section
after you have a decent grasp of Java’s objects.</p>
<p><a data-primary="arrays" data-secondary="as operand type" data-secondary-sortas="operand type" data-type="indexterm" id="idm45927770404480"/><a data-primary="objects" data-secondary="as operand type" data-secondary-sortas="operand type" data-type="indexterm" id="idm45927770402992"/><a data-primary="reference types" data-secondary="as operand type" data-secondary-sortas="operand type" data-type="indexterm" id="idm45927770401776"/><code>instanceof</code> requires an object or array value as its left operand and
the name of a reference type as its right operand. In its basic form, it evaluates to
<code>true</code> if the object or array is an <em>instance</em> of the specified type; it
returns <code>false</code> otherwise. If the left operand is <code>null</code>, <code>instanceof</code>
always evaluates to <code>false</code>. If an <code>instanceof</code> expression evaluates to
<code>true</code>, it means that you can safely cast and assign the left operand to
a variable of the type of the right operand.</p>
<p>The <code>instanceof</code> operator can be used only with reference types and
objects, not primitive types and values. Examples of <code>instanceof</code> are:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// True: all strings are instances of String</code><code class="w"/>
<code class="s">"string"</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="n">String</code><code class="w"/>
<code class="c1">// True: strings are also instances of Object</code><code class="w"/>
<code class="s">""</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="n">Object</code><code class="w"/>
<code class="c1">// False: null is never an instance of anything</code><code class="w"/>
<code class="kc">null</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="n">String</code><code class="w"/>

<code class="n">Object</code><code class="w"> </code><code class="n">o</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="mi">1</code><code class="p">,</code><code class="mi">2</code><code class="p">,</code><code class="mi">3</code><code class="p">};</code><code class="w"/>
<code class="n">o</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w">   </code><code class="c1">// True: the array value is an int array</code><code class="w"/>
<code class="n">o</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="kt">byte</code><code class="o">[]</code><code class="w">  </code><code class="c1">// False: the array value is not a byte array</code><code class="w"/>
<code class="n">o</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="n">Object</code><code class="w">  </code><code class="c1">// True: all arrays are instances of Object</code><code class="w"/>

<code class="c1">// Use instanceof to make sure that it is safe to cast an object</code><code class="w"/>
<code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">object</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="n">Account</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="n">Account</code><code class="p">)</code><code class="w"> </code><code class="n">object</code><code class="p">;</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="Java 17" data-secondary="instanceof and pattern matching" data-type="indexterm" id="idm45927770376208"/><a data-primary="pattern matching" data-type="indexterm" id="idm45927770340624"/>In Java 17 <code>instanceof</code> has an extended form known as  <em>pattern matching</em>. The
final example above demonstrates a common pattern-checking <code>instanceof</code> and then
casting to the type within a conditional. With pattern matching we can express
this all at once by including a variable after the reference type. If
<code>instanceof</code> sees the type is compatible, the variable is assigned the casted
object.</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">object</code><code class="w"> </code><code class="k">instanceof</code><code class="w"> </code><code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="c1">// variable a is available in this scope</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>This sort of pattern matching is a recent addition in Java. Upcoming
releases are expected to provide more of these sorts of convenience throughout
the language.</p>
<p>Historically using <code>instanceof</code> was discouraged in favor of other more
object-oriented solutions we’ll see in <a data-type="xref" href="ch05.xhtml#javanut8-CHP-5">Chapter 5</a>. Java’s increasing
adoption of pattern matching, though, is changing attitudes about this
operator. <code>instanceof</code> is especially well suited to the common scenarios around
receiving data in unpredictable formats through an API and is often a pragmatic
option these days rather than a last resort.</p>
</div></section>
<section data-pdf-bookmark="Special Operators" data-type="sect2"><div class="sect2" id="idm45927769056032">
<h2>Special Operators</h2>
<p><a data-primary="operators" data-secondary="special" data-type="indexterm" id="ix_ch02-asciidoc25"/><a data-primary="special operators (language constructs)" data-type="indexterm" id="ix_ch02-asciidoc26"/>Java has six language constructs that are sometimes considered
operators and sometimes considered simply part of the basic language
syntax. These “operators” were included in
<a data-type="xref" href="#javanut8-CHP-2-TABLE-4">Table 2-4</a> to show their
precedence relative to the other true operators. The use of these
language constructs is detailed elsewhere in this book, but it is described
briefly here so that you can recognize them in code examples:</p>
<dl>
<dt><em>Member access</em> (<code>.</code>)</dt>
<dd>
<p><a data-primary=". (dot)" data-secondary="member access operator" data-type="indexterm" id="idm45927769049280"/><a data-primary="member access operator (.)" data-type="indexterm" id="idm45927769048144"/>An <em>object</em> is a collection of data and methods that operate on that data; the data fields and methods of an object are called its members. The dot (.) operator accesses these members. If <code>o</code> is an expression that evaluates to an object reference (or a class name), and <code>f</code> is the name of a field of the class, <code>o.f</code> evaluates to the value contained in that field. If <code>m</code> is the name of a method, <code>o.m</code> refers to that method and allows it to be invoked using the <code>()</code> operator shown later.</p>
</dd>
<dt><em>Array element access</em> (<code>[]</code>)</dt>
<dd>
<p><a data-primary="[ ] (brackets)" data-secondary="accessing array elements" data-type="indexterm" id="idm45927769040016"/><a data-primary="arrays" data-secondary="accessing elements" data-type="indexterm" id="idm45927769038672"/>An <em>array</em> is a numbered list of values. Each element of an array can be referred to by its number, or <em>index</em>. The <code>[ ]</code> operator allows you to refer to the individual elements of an array. If <code>a</code> is an array, and <code>i</code> is an expression that evaluates to an <code>int</code>, <code>a[i]</code> refers to one of the elements of <code>a</code>. Unlike other operators that work with integer values, this operator restricts array index values to be of type <code>int</code> or narrower.</p>
</dd>
<dt><em>Method invocation</em> (<code>()</code>)</dt>
<dd>
<p><a data-primary="() (parentheses)" data-secondary="method invocation operator" data-type="indexterm" id="idm45927769031952"/><a data-primary="method invocation operator (( ))" data-type="indexterm" id="idm45927769030608"/>A <em>method</em> is a named collection of Java code that can be run, or <em>invoked</em>, by following the name of the method with zero or more comma-separated expressions contained within parentheses. The values of these expressions are the <em>arguments</em> to the method. The method processes the arguments and optionally returns a value that becomes the value of the method invocation expression. If <code>o.m</code> is a method that expects no arguments, the method can be invoked with <code>o.m()</code>. If the method expects three arguments, for example, it can be invoked with an expression such as <code>o.m(x,y,z)</code>. <code>o</code> is <a data-primary="receiver object" data-type="indexterm" id="idm45927769026784"/><a data-primary="receiver of a method" data-type="indexterm" id="idm45927769026048"/>referred to as the <em>receiver</em> of the method—if <code>o</code> is an object, then it is said to be the <em>receiver object</em>. Before the Java interpreter invokes a method, it evaluates each of the arguments to be passed to the method. These expressions are guaranteed to be evaluated in order from left to right (which matters if any of the arguments have side effects).</p>
</dd>
<dt><em>Lambda expression</em> (<code>-&gt;</code>)</dt>
<dd>
<p><a data-primary="-&gt; (lambda arrow) operator" data-type="indexterm" id="idm45927769022496"/><a data-primary="lambda expressions" data-secondary="defined" data-type="indexterm" id="idm45927769021776"/>A <em>lambda expression</em> is an anonymous collection of executable Java code, essentially a method body. It consists of a method argument list (zero or more comma-separated expressions contained within parentheses) followed by the lambda <em>arrow</em> operator followed by a block of Java code. <a data-primary="{ } (curly braces)" data-secondary="optional for small lambda expressions" data-type="indexterm" id="idm45927769019872"/>If the block of code comprises just a single statement, then the usual curly braces to denote block boundaries can be omitted. If the lambda takes only a single argument, the parentheses around the argument can be omitted.</p>
</dd>
<dt><em>Object creation</em> (<code>new</code>)</dt>
<dd>
<p><a data-primary="constructors" data-secondary="definition of term" data-type="indexterm" id="idm45927769016864"/><a data-primary="new operator" data-type="indexterm" id="idm45927769015888"/><a data-primary="new operator" data-secondary="creating new objects" data-type="indexterm" id="idm45927769015216"/><a data-primary="objects" data-secondary="creation with new operator" data-type="indexterm" id="idm45927769014272"/>In Java, objects are created with the <code>new</code> operator, which is followed by the type of the object to be created and a parenthesized list of arguments to be passed to the object <em>constructor</em>. A constructor is a special block of code that initializes a newly created object, so the object creation syntax is similar to the Java method invocation syntax. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">new</code><code class="w"> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code><code class="p">();</code><code class="w"/>
<code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"Jason"</code><code class="p">,</code><code class="w"> </code><code class="mf">0.0</code><code class="p">,</code><code class="w"> </code><code class="mi">42</code><code class="p">);</code><code class="w"/></pre>
</dd>
<dt><em>Array creation</em> (<code>new</code>)</dt>
<dd>
<p><a data-primary="arrays" data-secondary="creation with new operator" data-type="indexterm" id="idm45927768991376"/><a data-primary="new operator" data-secondary="creating arrays" data-type="indexterm" id="idm45927768990208"/>Arrays are a special case of objects and they too are created with the <code>new</code> operator, with a slightly different syntax. <a data-primary="[ ] (brackets)" data-secondary="after array element type" data-type="indexterm" id="idm45927768985680"/>The keyword is followed by the type of the array to be created and the size of the array encased in square brackets—​for example, as <code>new int[5]</code>. <a data-primary="array literal" data-type="indexterm" id="idm45927768984224"/>In some circumstances, arrays can also be created using the <em>array literal</em> syntax.</p>
</dd>
<dt><em>Type conversion or casting</em> (<code>()</code>)</dt>
<dd>
<p><a data-primary="() (parentheses)" data-secondary="cast operator" data-type="indexterm" id="idm45927768981184"/><a data-primary="casts" data-secondary="() (cast) operator" data-type="indexterm" id="idm45927768980048"/><a data-primary="data types" data-secondary="type conversion or casting with ()" data-type="indexterm" id="idm45927768979104"/><a data-primary="type conversion or casting operator (( ))" data-type="indexterm" id="idm45927768978192"/>As we’ve already seen, parentheses can also be used as an operator to perform narrowing type conversions, or casts. The first operand of this operator is the type to be converted to; it is placed between the parentheses. The second operand is the value to be converted; it follows the parentheses. For example<a data-startref="ix_ch02-asciidoc26" data-type="indexterm" id="idm45927768977424"/><a data-startref="ix_ch02-asciidoc25" data-type="indexterm" id="idm45927768976752"/>:<a data-startref="ix_ch02-asciidoc17" data-type="indexterm" id="idm45927768975952"/><a data-startref="ix_ch02-asciidoc16" data-type="indexterm" id="idm45927768975248"/><a data-startref="ix_ch02-asciidoc15" data-type="indexterm" id="idm45927768974576"/><a data-startref="ix_ch02-asciidoc14" data-type="indexterm" id="idm45927768973904"/><a data-startref="ix_ch02-asciidoc13" data-type="indexterm" id="idm45927768973232"/></p>
<pre data-code-language="java" data-type="programlisting"><code class="p">(</code><code class="kt">byte</code><code class="p">)</code><code class="w"> </code><code class="mi">28</code><code class="w">          </code><code class="c1">// An integer literal cast to a byte type</code><code class="w"/>
<code class="p">(</code><code class="kt">int</code><code class="p">)</code><code class="w"> </code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mf">3.14f</code><code class="p">)</code><code class="w">  </code><code class="c1">// A floating-point sum value cast to an integer</code><code class="w"/>
<code class="p">(</code><code class="n">String</code><code class="p">)</code><code class="n">h</code><code class="p">.</code><code class="na">get</code><code class="p">(</code><code class="n">k</code><code class="p">)</code><code class="w">   </code><code class="c1">// A generic object cast to a string</code><code class="w"/></pre>
</dd>
</dl>
</div></section>
</div></section>
<section data-pdf-bookmark="Statements" data-type="sect1"><div class="sect1" id="idm45927766610400">
<h1>Statements</h1>
<p><a data-primary="statements" data-type="indexterm" id="ix_ch02-asciidoc27"/><a data-primary="syntax, Java" data-secondary="statements" data-type="indexterm" id="ix_ch02-asciidoc28"/>A <em>statement</em> is a basic unit of execution in the Java language—it
expresses a single piece of intent by the programmer. <a data-primary="expressions" data-secondary="statements vs." data-type="indexterm" id="idm45927768895104"/><a data-primary="statements" data-secondary="expressions vs." data-type="indexterm" id="idm45927768894128"/>Unlike
expressions, Java statements do not have a value. <a data-primary="operators" data-secondary="in statements" data-secondary-sortas="statements" data-type="indexterm" id="idm45927768925088"/>Statements also
typically contain expressions and operators (especially assignment
operators) and are frequently executed for the side effects that they
cause.</p>
<p><a data-primary="flow-control statements" data-type="indexterm" id="idm45927768923488"/><a data-primary="statements" data-secondary="defined by Java, summary of" data-type="indexterm" id="idm45927768922784"/>Many of the statements defined by Java are flow-control statements,
such as conditionals and loops, that can alter the default, linear order
of execution in well-defined ways. <a data-type="xref" href="#javanut8-CHP-2-TABLE-5">Table 2-5</a> summarizes the statements defined by Java.</p>
<table id="javanut8-CHP-2-TABLE-5">
<caption><span class="label">Table 2-5. </span><span class="label">Table 2-5. </span>Java statements</caption>
<thead>
<tr>
<th>Statement</th>
<th>Purpose</th>
<th>Syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td><p><em>expression</em></p></td>
<td><p>side effects</p></td>
<td><p><em><code>variable</code></em> <code>=</code> <em><code>expr</code></em> <code>;</code> <em><code>expr</code></em> <code>++;</code>
<em><code>method</code></em> <code>();</code> <code>new</code> <em><code>Type</code></em> <code>( );</code></p></td>
</tr>
<tr>
<td><p><em>compound</em></p></td>
<td><p>group statements</p></td>
<td><p><code>{</code> <em><code>statements</code></em> <code>}</code></p></td>
</tr>
<tr>
<td><p><em>empty</em></p></td>
<td><p>do nothing</p></td>
<td><p><code>;</code></p></td>
</tr>
<tr>
<td><p><em>labeled</em></p></td>
<td><p>name a statement</p></td>
<td><p><em><code>label</code></em> : <em><code>statement</code></em></p></td>
</tr>
<tr>
<td><p><em>variable</em></p></td>
<td><p>declare a variable</p></td>
<td><p><code>[final]</code> <em><code>type</code></em> <em><code>name</code></em> <code>[=</code>
<em><code>value</code></em> <code>]</code> <code>[</code>, <em><code>name</code></em> <code>[=</code> <em><code>value</code></em> <code>]] …;</code></p></td>
</tr>
<tr>
<td><p><code>if</code></p></td>
<td><p>conditional</p></td>
<td><p><code>if (</code> <em><code>expr</code></em> <code>)</code> <em><code>statement</code></em> <code>[ else</code>
<em><code>statement</code></em> <code>]</code></p></td>
</tr>
<tr>
<td><p><code>switch</code></p></td>
<td><p>conditional</p></td>
<td><p><code>switch (</code> <em><code>expr</code></em> <code>) {</code> <code>[ case</code> <em><code>expr</code></em> :
<em><code>statements</code></em> <code>] …</code> <code>[ default</code>: <em><code>statements</code></em> <code>]</code> <code>}</code></p></td>
</tr>
<tr>
<td><p><code>switch</code></p></td>
<td><p>conditional expression</p></td>
<td><p><code>switch (</code> <em><code>expr</code></em> <code>) {</code> <code>[ case</code>
<em><code>expr</code></em> <code>, [</code> <em><code>expr</code></em> <code>…] -&gt;</code> <em><code>expr</code></em> <code>;] …</code>
<code>[ default -&gt;</code> <em><code>expr</code></em> <code>;]</code> <code>}</code></p></td>
</tr>
<tr>
<td><p><code>while</code></p></td>
<td><p>loop</p></td>
<td><p><code>while (</code> <em><code>expr</code></em> <code>)</code> <em><code>statement</code></em></p></td>
</tr>
<tr>
<td><p><code>do</code></p></td>
<td><p>loop</p></td>
<td><p><code>do</code> <em><code>statement</code></em> <code>while (</code> <em><code>expr</code></em> <code>);</code></p></td>
</tr>
<tr>
<td><p><code>for</code></p></td>
<td><p>simplified loop</p></td>
<td><p><code>for (</code> <em><code>init</code></em> <code>;</code> <em><code>test</code></em> <code>;</code> <em><code>increment</code></em>
<code>)</code> <em><code>statement</code></em></p></td>
</tr>
<tr>
<td><p><em>foreach</em></p></td>
<td><p>collection iteration</p></td>
<td><p><code>for (</code> <em><code>variable</code></em> : <em><code>iterable</code></em>
<code>)</code> <em><code>statement</code></em></p></td>
</tr>
<tr>
<td><p><code>break</code></p></td>
<td><p>exit block</p></td>
<td><p><code>break [</code> <em><code>label</code></em> <code>] ;</code></p></td>
</tr>
<tr>
<td><p><code>continue</code></p></td>
<td><p>restart loop</p></td>
<td><p><code>continue [</code> <em><code>label</code></em> <code>] ;</code></p></td>
</tr>
<tr>
<td><p><code>return</code></p></td>
<td><p>end method</p></td>
<td><p><code>return [</code> <em><code>expr</code></em> <code>] ;</code></p></td>
</tr>
<tr>
<td><p><code>synchronized</code></p></td>
<td><p>critical section</p></td>
<td><p><code>synchronized (</code> <em><code>expr</code></em> <code>) {</code>
<em><code>statements</code></em> <code>}</code></p></td>
</tr>
<tr>
<td><p><code>throw</code></p></td>
<td><p>throw exception</p></td>
<td><p><code>throw</code> <em><code>expr</code></em> <code>;</code></p></td>
</tr>
<tr>
<td><p><code>try</code></p></td>
<td><p>handle exception</p></td>
<td><p><code>try {</code> <em><code>statements</code></em> <code>}</code> <code>[ catch (</code>
<em><code>type</code></em> <em><code>name</code></em> <code>) <br/>{</code> <em><code>statements</code></em> <code>} ] …</code> <code>[ finally {</code>
<em><code>statements</code></em> <code>} ]</code></p></td>
</tr>
<tr>
<td><p><code>try</code></p></td>
<td><p>handle exception,
closing resources</p></td>
<td><p><code>try ([</code> <em><code>variable</code></em> <code>=</code>
<em><code>expr</code></em> <code>]) {</code> <em><code>statements</code></em> <code>}</code> <code>[ catch (</code>
<em><code>type</code></em> <em><code>name</code></em> <code>) {</code> <em><code>statements</code></em> <code>} ] …</code> <code>[ finally {</code>
<em><code>statements</code></em> <code>} ]</code></p></td>
</tr>
<tr>
<td><p><code>assert</code></p></td>
<td><p>verify invariant</p></td>
<td><p><code>assert</code> <em><code>invariant</code></em> <code>[</code> <em><code>error</code></em> ];</p></td>
</tr>
</tbody>
</table>
<section data-pdf-bookmark="Expression Statements" data-type="sect2"><div class="sect2" id="idm45927765823744">
<h2>Expression Statements</h2>
<p><a data-primary="expression statement" data-type="indexterm" id="idm45927765716720"/><a data-primary="side effects" data-secondary="expressions having" data-type="indexterm" id="idm45927765716016"/><a data-primary="statements" data-secondary="expression" data-type="indexterm" id="idm45927765715072"/>As we saw earlier in the chapter, certain types of Java expressions
have side effects. In other words, they do not simply evaluate to some
value; they also change the program state in some way. You can use any expression
with side effects as a statement simply by following it with
a semicolon. The legal types of expression statements are assignments,
increments and decrements, method calls, and object creation. For
example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">                             </code><code class="c1">// Assignment</code><code class="w"/>
<code class="n">x</code><code class="w"> </code><code class="o">*=</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w">                            </code><code class="c1">// Assignment with operation</code><code class="w"/>
<code class="n">i</code><code class="o">++</code><code class="p">;</code><code class="w">                               </code><code class="c1">// Post-increment</code><code class="w"/>
<code class="o">--</code><code class="n">c</code><code class="p">;</code><code class="w">                               </code><code class="c1">// Pre-decrement</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"statement"</code><code class="p">);</code><code class="w">   </code><code class="c1">// Method invocation</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="Compound Statements" data-type="sect2"><div class="sect2" id="idm45927765698112">
<h2>Compound Statements</h2>
<p><a data-primary="compound statement" data-type="indexterm" id="idm45927765654704"/><a data-primary="statements" data-secondary="compound" data-type="indexterm" id="idm45927765654032"/>A <em>compound statement</em> is any number and kind of statements grouped
together within curly braces. You can use a compound statement anywhere
a statement is required by Java syntax:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">]++</code><code class="p">;</code><code class="w">           </code><code class="c1">// Body of this loop is a compound statement.</code><code class="w"/>
<code class="w">   </code><code class="n">b</code><code class="o">[</code><code class="n">i</code><code class="o">]--</code><code class="p">;</code><code class="w">           </code><code class="c1">// It consists of two expression statements</code><code class="w"/>
<code class="p">}</code><code class="w">                    </code><code class="c1">// within curly braces.</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The Empty Statement" data-type="sect2"><div class="sect2" id="idm45927765625200">
<h2>The Empty Statement</h2>
<p><a data-primary="; (semicolon)" data-secondary="for empty statements" data-secondary-sortas="empty statements" data-type="indexterm" id="idm45927765613824"/><a data-primary="empty statements" data-type="indexterm" id="idm45927765612608"/><a data-primary="statements" data-secondary="empty" data-type="indexterm" id="idm45927765611936"/>An <em>empty statement</em> in Java is written as a single semicolon. The
empty statement doesn’t do anything, but the syntax is occasionally
useful. For example, you can use it to indicate an empty loop body in a
<code>for</code> loop:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">;</code><code class="w"> </code><code class="n">a</code><code class="o">[</code><code class="n">i</code><code class="o">++]++</code><code class="p">)</code><code class="w">  </code><code class="c1">// Increment array elements</code><code class="w"/>
<code class="w">     </code><code class="cm">/* empty */</code><code class="p">;</code><code class="w">                 </code><code class="c1">// Loop body is empty statement</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="Labeled Statements" data-type="sect2"><div class="sect2" id="idm45927765590128">
<h2>Labeled Statements</h2>
<p><a data-primary="break statements" data-secondary="labels, use of" data-type="indexterm" id="idm45927765585168"/><a data-primary="labeled statements" data-type="indexterm" id="idm45927765584192"/><a data-primary="statements" data-secondary="labeled" data-type="indexterm" id="idm45927765583520"/>A <em>labeled statement</em> is simply a statement that you have given a name
by prepending an identifier and a colon to it. Labels are used by the
<code>break</code> and <code>continue</code> statements. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="nl">rowLoop</code><code class="p">:</code><code class="w"> </code><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">r</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">r</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">rows</code><code class="p">.</code><code class="na">length</code><code class="p">;</code><code class="w"> </code><code class="n">r</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">        </code><code class="c1">// Labeled loop</code><code class="w"/>
<code class="w">   </code><code class="n">colLoop</code><code class="p">:</code><code class="w"> </code><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">c</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">c</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">columns</code><code class="p">.</code><code class="na">length</code><code class="p">;</code><code class="w"> </code><code class="n">c</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">  </code><code class="c1">// Another one</code><code class="w"/>
<code class="w">     </code><code class="k">break</code><code class="w"> </code><code class="n">rowLoop</code><code class="p">;</code><code class="w">                                    </code><code class="c1">// Use a label</code><code class="w"/>
<code class="w">   </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="Local Variable Declaration Statements" data-type="sect2"><div class="sect2" id="idm45927772009120">
<h2>Local Variable Declaration Statements</h2>
<p><a data-primary="local variable declaration statements" data-type="indexterm" id="idm45927771935296"/><a data-primary="local variables" data-type="indexterm" id="idm45927771934656"/><a data-primary="statements" data-secondary="local variable declaration" data-type="indexterm" id="idm45927771933984"/><a data-primary="variable declaration statement" data-type="indexterm" id="idm45927771933072"/><a data-primary="variables" data-secondary="declaring" data-type="indexterm" id="idm45927771932432"/><a data-primary="variables" data-secondary="local variable declaration statements" data-type="indexterm" id="idm45927771931488"/>A <em>local variable</em>, often simply called a variable, is a symbolic
name for a location to store a value that is defined within a method or
compound statement. All variables must be declared before they can be
used; this is done with a variable declaration statement. Because Java
is a statically typed language, a variable declaration specifies the
type of the variable, and only values of that type can be stored in the
variable.</p>
<p>In its simplest form, a variable declaration specifies a variable’s type
and name:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">counter</code><code class="p">;</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="initializers" data-secondary="in variable declarations" data-secondary-sortas="variable declarations" data-type="indexterm" id="idm45927771907424"/>A variable declaration can also include an <em>initializer</em>, an expression
that specifies an initial value for the variable. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">readLine</code><code class="p">();</code><code class="w"/>
<code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">data</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="n">x</code><code class="o">+</code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="n">x</code><code class="o">+</code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="n">x</code><code class="o">+</code><code class="mi">3</code><code class="p">};</code><code class="w"> </code><code class="c1">// Array initializers are discussed later</code><code class="w"/></pre>
<p>The Java compiler does not allow you to use a local variable that has
not been initialized, so it is usually convenient to combine variable
declaration and initialization into a single statement. The initializer
expression need not be a literal value or a constant expression that can
be evaluated by the compiler; it can be an arbitrarily complex
expression whose value is computed when the program is run.</p>
<p>If a variable has an initializer, then the programmer can use a special syntax to ask the compiler to automatically work out the type, if it is possible to do so:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">var</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w">          </code><code class="c1">// type of i inferred as int</code><code class="w"/>
<code class="kd">var</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">readLine</code><code class="p">();</code><code class="w"> </code><code class="c1">// type of s inferred as String</code><code class="w"/></pre>
<p>This can be a useful syntax, but it is potentially harder to read. Our second
example, for instance, requires that you know that the return type of <code>readLine()</code> is
<code>String</code> to know what type will be inferred for <code>s</code>. For this reason, throughout
the text we only use <code>var</code> in examples when the initializer makes the type
completely redundant. As you learn the Java language, this may be a reasonable
policy to follow while you become familiar with the Java type system.</p>
<p>A single variable declaration statement can declare and initialize more
than one variable, but all variables must be of the same explicitly declared type.
Variable names and optional initializers are separated from each other with commas:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="p">,</code><code class="w"> </code><code class="n">j</code><code class="p">,</code><code class="w"> </code><code class="n">k</code><code class="p">;</code><code class="w"/>
<code class="kt">float</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0f</code><code class="p">,</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0f</code><code class="p">;</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">question</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"Really Quit?"</code><code class="p">,</code><code class="w"> </code><code class="n">response</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="final modifier" data-secondary="in variable declaration statements" data-secondary-sortas="variable declaration statements" data-type="indexterm" id="idm45927771748480"/>Variable declaration statements can begin with the <code>final</code> keyword.
This modifier specifies that once an initial value is defined for the
variable, that value is never allowed to change:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">final</code><code class="w"> </code><code class="n">String</code><code class="w"> </code><code class="n">greeting</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">getLocalLanguageGreeting</code><code class="p">();</code><code class="w"/></pre>
<p>We will have more to say about the <code>final</code> keyword later on, especially when
talking about the design of classes and the immutable style of programming.</p>
<p>Java variable declaration statements can
appear anywhere in Java code; they are not restricted to the beginning
of a method or block of code. Local variable declarations can also be
integrated with the <em>initialize</em> portion of a <code>for</code> loop, as we’ll
discuss shortly.</p>
<p><a data-primary="scope, of local variables" data-type="indexterm" id="idm45927771734224"/>Local variables can be used only within the method or block of code in
which they are defined. This is called their <em>scope</em> or <em>lexical
scope</em>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code><code class="w"> </code><code class="nf">method</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w">            </code><code class="c1">// A method definition</code><code class="w"/>
<code class="w">   </code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w">              </code><code class="c1">// Declare variable i</code><code class="w"/>
<code class="w">   </code><code class="k">while</code><code class="w"> </code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">        </code><code class="c1">// i is in scope here</code><code class="w"/>
<code class="w">     </code><code class="kt">int</code><code class="w"> </code><code class="n">j</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w">            </code><code class="c1">// Declare j; the scope of j begins here</code><code class="w"/>
<code class="w">     </code><code class="n">i</code><code class="o">++</code><code class="p">;</code><code class="w">                  </code><code class="c1">// i is in scope here; increment it</code><code class="w"/>
<code class="w">   </code><code class="p">}</code><code class="w">                       </code><code class="c1">// j is no longer in scope;</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">i</code><code class="p">);</code><code class="w">  </code><code class="c1">// i is still in scope here</code><code class="w"/>
<code class="p">}</code><code class="w">                          </code><code class="c1">// The scope of i ends here</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The if/else Statement" data-type="sect2"><div class="sect2" id="idm45927771936144">
<h2>The if/else Statement</h2>
<p><a data-primary="if statements" data-type="indexterm" id="ix_ch02-asciidoc29"/><a data-primary="if/else statements" data-type="indexterm" id="ix_ch02-asciidoc30"/><a data-primary="statements" data-secondary="if/else" data-type="indexterm" id="ix_ch02-asciidoc31"/><a data-primary="statements" data-secondary="switch" data-type="indexterm" id="ix_ch02-asciidoc32"/><a data-primary="switch statements" data-type="indexterm" id="ix_ch02-asciidoc33"/>The <code>if</code> statement is a fundamental control statement that allows Java
to make decisions or, more precisely, to execute statements
conditionally. <a data-primary="expressions" data-secondary="in if statements" data-secondary-sortas="if statements" data-type="indexterm" id="idm45927771346400"/>The <code>if</code> statement has an associated expression and
statement. If the expression evaluates to <code>true</code>, the interpreter
executes the statement. If the expression evaluates to <code>false</code>, the
interpreter skips the statement.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><a data-primary="boolean type" data-secondary="Boolean class" data-type="indexterm" id="idm45927771343024"/>Java allows the expression to be of the wrapper type <code>Boolean</code> instead
of the primitive type <code>boolean</code>. In this case, the wrapper object is
automatically unboxed.</p>
</div>
<p>Here is an example <code>if</code> statement:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">username</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w">         </code><code class="c1">// If username is null,</code><code class="w"/>
<code class="w">   </code><code class="n">username</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"John Doe"</code><code class="p">;</code><code class="w">     </code><code class="c1">// use a default value</code><code class="w"/></pre>
<p><a data-primary="() (parentheses)" data-secondary="enclosing expressions in if statements" data-type="indexterm" id="idm45927771257696"/>Although they look extraneous, the parentheses around the expression are
a required part of the syntax for the <code>if</code> statement. As we already
saw, a block of statements enclosed in curly braces is itself a
statement, so we can write <code>if</code> statements that look like this as well:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">((</code><code class="n">address</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="o">||</code><code class="w"> </code><code class="p">(</code><code class="n">address</code><code class="p">.</code><code class="na">equals</code><code class="p">(</code><code class="s">""</code><code class="p">)))</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">address</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"[undefined]"</code><code class="p">;</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"WARNING: no address specified."</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="else clause" data-type="indexterm" id="idm45927771203536"/><a data-primary="if/else statements" data-secondary="else clause" data-type="indexterm" id="idm45927771186112"/>An <code>if</code> statement can include an optional <code>else</code> keyword that is
followed by a second statement. In this form of the statement, the
expression is evaluated, and, if it is <code>true</code>, the first statement is
executed. Otherwise, the second statement is executed. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">username</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Hello "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">username</code><code class="p">);</code><code class="w"/>
<code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">username</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">askQuestion</code><code class="p">(</code><code class="s">"What is your name?"</code><code class="p">);</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Hello "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">username</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">". Welcome!"</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="if/else statements" data-secondary="nested" data-type="indexterm" id="idm45927771128256"/>When you use nested <code>if/else</code> statements, some caution is required to
ensure that the <code>else</code> clause goes with the appropriate <code>if</code> statement.
Consider the following lines:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">j</code><code class="p">)</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">j</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">k</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"i equals k"</code><code class="p">);</code><code class="w"/>
<code class="k">else</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"i doesn't equal j"</code><code class="p">);</code><code class="w">    </code><code class="c1">// WRONG!!</code><code class="w"/></pre>
<p>In this example, the inner <code>if</code> statement forms the single statement
allowed by the syntax of the outer <code>if</code> statement. Unfortunately, it is
not clear (except from the hint given by the indentation) which <code>if</code> the
<code>else</code> goes with. And in this example, the indentation hint is wrong.
The rule is that an <code>else</code> clause like this is associated with the
nearest <code>if</code> statement. Properly indented, this code looks like this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">j</code><code class="p">)</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">j</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">k</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"i equals k"</code><code class="p">);</code><code class="w"/>
<code class="w">   </code><code class="k">else</code><code class="w"/>
<code class="w">     </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"i doesn't equal j"</code><code class="p">);</code><code class="w">    </code><code class="c1">// WRONG!!</code><code class="w"/></pre>
<p>This is legal code, but it is clearly not what the programmer had in
mind. <a data-primary="{ } (curly braces)" data-secondary="in nested if/else statements" data-secondary-sortas="nested if/else statements" data-type="indexterm" id="idm45927770909280"/>When working with nested <code>if</code> statements, you should use curly
braces to make your code easier to read. Here is a better way to write
the code:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">j</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">j</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">k</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"i equals k"</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"i doesn't equal j"</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<section data-pdf-bookmark="The else if clause" data-type="sect3"><div class="sect3" id="idm45927770950160">
<h3>The else if clause</h3>
<p><a data-primary="else if clause" data-type="indexterm" id="idm45927765419072"/><a data-primary="if/else statements" data-secondary="else if clause" data-type="indexterm" id="idm45927765418144"/>The <code>if/else</code> statement is useful for testing a condition and choosing
between two statements or blocks of code to execute. But what about when
you need to choose between several blocks of code? This is typically
done with an <code>else</code> <code>if</code> clause, which is not really new syntax but a
common idiomatic usage of the standard <code>if/else</code> statement. It looks
like this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">n</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="mi">1</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="c1">// Execute code block #1</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">else</code><code class="w"> </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">n</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="mi">2</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="c1">// Execute code block #2</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">else</code><code class="w"> </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">n</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="mi">3</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="c1">// Execute code block #3</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="c1">// If all else fails, execute block #4</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>There is nothing special about this code. It is just a series of <code>if</code>
statements, where each <code>if</code> is part of the <code>else</code> clause of the previous
statement. Using the <code>else</code> <code>if</code> idiom is preferable to, and more
legible than, writing these statements out in their fully nested form:<a data-startref="ix_ch02-asciidoc33" data-type="indexterm" id="idm45927765354224"/><a data-startref="ix_ch02-asciidoc32" data-type="indexterm" id="idm45927765353520"/><a data-startref="ix_ch02-asciidoc31" data-type="indexterm" id="idm45927765352848"/><a data-startref="ix_ch02-asciidoc30" data-type="indexterm" id="idm45927765352176"/><a data-startref="ix_ch02-asciidoc29" data-type="indexterm" id="idm45927765351504"/></p>
<pre class="pagebreak-before" data-code-language="java" data-type="programlisting"><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">n</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="mi">1</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="c1">// Execute code block #1</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">n</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="mi">2</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="c1">// Execute code block #2</code><code class="w"/>
<code class="w">   </code><code class="p">}</code><code class="w"/>
<code class="w">   </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">n</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="mi">3</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">       </code><code class="c1">// Execute code block #3</code><code class="w"/>
<code class="w">     </code><code class="p">}</code><code class="w"/>
<code class="w">     </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">       </code><code class="c1">// If all else fails, execute block #4</code><code class="w"/>
<code class="w">     </code><code class="p">}</code><code class="w"/>
<code class="w">   </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
</div></section>
</div></section>
<section data-pdf-bookmark="The switch Statement" data-type="sect2"><div class="sect2" id="idm45927771372736">
<h2>The switch Statement</h2>
<p>An <code>if</code> statement causes a branch in the flow of a program’s execution.
You can use multiple <code>if</code> statements, as shown in the previous section,
to perform a multiway branch. This is not always the best solution,
however, especially when all of the branches depend on the value of a
single variable.</p>
<p>In this case, the repeated <code>if</code> statements may seriously hamper readability, especially if the code has been refactored over time or features multiple levels of nested <code>if</code>.</p>
<p><a data-primary="C/C++" data-secondary="switch statement" data-type="indexterm" id="idm45927765206528"/>A better solution is to use a <code>switch</code>
statement, which is inherited from the C programming language. Note, however,
that the syntax of this statement is not nearly as elegant as other parts of
Java. The failure to revisit the design of the feature is widely regarded as a
mistake, one that has been partially addressed in recent versions with an
expression form of <code>switch</code> we’ll examine in a moment. However, that alternative
format won’t erase the long history of <code>switch</code> statements in the language, so
it’s good to come to grips with it.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><a data-primary="expressions" data-secondary="in switch statements" data-secondary-sortas="switch statements" data-type="indexterm" id="idm45927765203216"/>A <code>switch</code> statement starts with an expression whose type is an <code>int</code>,
<code>short</code>, <code>char</code>, <code>byte</code> (or their wrapper type), <code>String</code>, or an enum
(see <a data-type="xref" href="ch04.xhtml#javanut8-CHP-4">Chapter 4</a> for more on enumerated types).</p>
</div>
<p><a data-primary="{ } (curly braces)" data-secondary="in switch statements" data-secondary-sortas="switch statements" data-type="indexterm" id="idm45927765197904"/>This expression is followed by a block of code in curly braces that
contains various entry points that correspond to possible values for the
expression. For example, the following <code>switch</code> statement is equivalent
to the repeated <code>if</code> and <code>else/if</code> statements shown in the previous
section:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">switch</code><code class="p">(</code><code class="n">n</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">case</code><code class="w"> </code><code class="mi">1</code><code class="p">:</code><code class="w">                         </code><code class="c1">// Start here if n == 1</code><code class="w"/>
<code class="w">     </code><code class="c1">// Execute code block #1</code><code class="w"/>
<code class="w">     </code><code class="k">break</code><code class="p">;</code><code class="w">                        </code><code class="c1">// Stop here</code><code class="w"/>
<code class="w">   </code><code class="k">case</code><code class="w"> </code><code class="mi">2</code><code class="p">:</code><code class="w">                         </code><code class="c1">// Start here if n == 2</code><code class="w"/>
<code class="w">     </code><code class="c1">// Execute code block #2</code><code class="w"/>
<code class="w">     </code><code class="k">break</code><code class="p">;</code><code class="w">                        </code><code class="c1">// Stop here</code><code class="w"/>
<code class="w">   </code><code class="k">case</code><code class="w"> </code><code class="mi">3</code><code class="p">:</code><code class="w">                         </code><code class="c1">// Start here if n == 3</code><code class="w"/>
<code class="w">     </code><code class="c1">// Execute code block #3</code><code class="w"/>
<code class="w">     </code><code class="k">break</code><code class="p">;</code><code class="w">                        </code><code class="c1">// Stop here</code><code class="w"/>
<code class="w">   </code><code class="k">default</code><code class="p">:</code><code class="w">                        </code><code class="c1">// If all else fails...</code><code class="w"/>
<code class="w">     </code><code class="c1">// Execute code block #4</code><code class="w"/>
<code class="w">     </code><code class="k">break</code><code class="p">;</code><code class="w">                        </code><code class="c1">// Stop here</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="case labels (switch statements)" data-type="indexterm" id="idm45927765138000"/><a data-primary="switch statements" data-secondary="case labels" data-type="indexterm" id="idm45927765114400"/>As you can see from the example, the various entry points into a
<code>switch</code> statement are labeled either with the keyword <code>case</code>,
<a data-primary="default: label" data-type="indexterm" id="idm45927765112624"/><a data-primary="switch statements" data-secondary="default: label" data-type="indexterm" id="idm45927765111888"/>followed by an integer value and a colon, or with the special <code>default</code>
keyword, followed by a colon. When a <code>switch</code> statement executes, the
interpreter computes the value of the expression in parentheses and then
looks for a <code>case</code> label that matches that value. If it finds one, the
interpreter starts executing the block of code at the first statement
following the <code>case</code> label. If it does not find a <code>case</code> label with a
matching value, the interpreter starts execution at the first statement
following a special-case <code>default</code>: label. Or, if there is no
<code>default</code>: label, the interpreter skips the body of the <code>switch</code>
statement altogether.</p>
<p><a data-primary="break statements" data-secondary="stopping switch statements" data-type="indexterm" id="idm45927765052816"/>Note the use of the <code>break</code> keyword at the end of each <code>case</code> in the
previous code. The <code>break</code> statement is described later in this chapter,
but, in this example, it causes the interpreter to exit the body of the
<code>switch</code> statement. The <code>case</code> clauses in a <code>switch</code> statement specify
only the starting point of the desired code. The individual <code>cases</code> are
not independent blocks of code, and they do not have any implicit ending
point.</p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p><a data-primary="break statements" data-secondary="specifying end of case clauses in switch statements" data-type="indexterm" id="idm45927765047744"/>You must explicitly specify the end of each <code>case</code> with a <code>break</code> or related statement. In the absence of <code>break</code> statements, a <code>switch</code> statement begins executing code at the first statement after the matching <code>case</code> label and continues executing statements until it reaches the end of the block. The <a data-primary="fall-through" data-type="indexterm" id="idm45927765044144"/>control flow will <em>fall through</em> into the next <code>case</code> label and continue executing, rather than exit the block.</p>
</div>
<p>On rare occasions, it is useful to write
code like this that falls through from one <code>case</code> label to the next, but
99% of the time you should be careful to end every <code>case</code> and <code>default</code>
section with a statement that causes the <code>switch</code> statement to stop
executing. <a data-primary="throw statements" data-secondary="stopping switch statements" data-type="indexterm" id="idm45927765040112"/>Normally you use a <code>break</code> statement, but <code>return</code> and
<code>throw</code> also work.</p>
<p><a data-primary="default fall-through" data-type="indexterm" id="idm45927765037536"/>As a consequence of this default fall-through, a <code>switch</code> statement can have more than one <code>case</code> clause labeling the same statement. Consider the <code>switch</code> statement in the following method:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code><code class="w"> </code><code class="nf">parseYesOrNoResponse</code><code class="p">(</code><code class="kt">char</code><code class="w"> </code><code class="n">response</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">switch</code><code class="p">(</code><code class="n">response</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="k">case</code><code class="w"> </code><code class="sc">'y'</code><code class="p">:</code><code class="w"/>
<code class="w">     </code><code class="k">case</code><code class="w"> </code><code class="sc">'Y'</code><code class="p">:</code><code class="w"> </code><code class="k">return</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">     </code><code class="k">case</code><code class="w"> </code><code class="sc">'n'</code><code class="p">:</code><code class="w"/>
<code class="w">     </code><code class="k">case</code><code class="w"> </code><code class="sc">'N'</code><code class="p">:</code><code class="w"> </code><code class="k">return</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="w">     </code><code class="k">default</code><code class="p">:</code><code class="w"/>
<code class="w">       </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"Response must be Y or N"</code><code class="p">);</code><code class="w"/>
<code class="w">   </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="switch statements" data-secondary="restrictions on" data-type="indexterm" id="idm45927765032768"/>The <code>switch</code> statement and its <code>case</code> labels have some important
restrictions. First, the expression associated with a <code>switch</code>
statement must have an appropriate type—either <code>byte</code>, <code>char</code>, <code>short</code>,
<code>int</code> (or their wrappers), or an enum type or a <code>String</code>. The
floating-point and <code>boolean</code> types are not supported, and <a data-primary="long type" data-type="indexterm" id="idm45927764973744"/>neither is
<code>long</code>, even though <code>long</code> is an integer type. Second, the value
associated with each <code>case</code> label must be a constant value or a constant
expression the compiler can evaluate. A <code>case</code> label cannot contain a
runtime expression involving variables or method calls, for example.
<a data-primary="data types" data-secondary="expressions in switch statements" data-type="indexterm" id="idm45927764971104"/><a data-primary="switch statements" data-secondary="data type of expression in" data-type="indexterm" id="idm45927764970160"/>Third, the <code>case</code> label values must be within the range of the data type
used for the <code>switch</code> expression. And finally, it is not legal to have
two or more <code>case</code> labels with the same value or more than one <code>default</code>
label.</p>
<p>With all those caveats, let’s look at how the new <code>switch</code> expression makes
for a cleaner experience.</p>
</div></section>
<section data-pdf-bookmark="The switch Expression" data-type="sect2"><div class="sect2" id="idm45927765274368">
<h2>The switch Expression</h2>
<p><a data-primary="switch expression" data-type="indexterm" id="ix_ch02-asciidoc34"/>A frequent problem with the classic <code>switch</code> statement arises when capturing a
variable value.</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Boolean</code><code class="w"> </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">null</code><code class="p">;</code><code class="w"/>
<code class="k">switch</code><code class="p">(</code><code class="n">input</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"y"</code><code class="p">:</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"Y"</code><code class="p">:</code><code class="w"/>
<code class="w">        </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">        </code><code class="k">break</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"n"</code><code class="p">:</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"N"</code><code class="p">:</code><code class="w"/>
<code class="w">        </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="w">        </code><code class="k">break</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">default</code><code class="p">:</code><code class="w"/>
<code class="w">        </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"Response must be Y or N"</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>For the variable to be available after the <code>switch</code>, it must be declared outside
the statement and provided an initial value. Then each <code>case</code> must be certain
to set the variable. However, we have no guarantees, and in code with more
branches than this simple example, it’s an easy thing to miss and introduce a
bug.</p>
<p>The <code>switch</code> expression is explicitly designed to address these and other
faults. As the name calls out, it’s an <em>expression</em>—one of the
more syntactically complex ones in the language—and as such results in a value.</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code><code class="w"> </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">switch</code><code class="p">(</code><code class="n">input</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"Y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"N"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"n"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">default</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"Y or N"</code><code class="p">);</code><code class="w"/>
<code class="p">};</code><code class="w"/></pre>
<p>Much like the <code>switch</code> statement, each <code>case</code> here evaluates the input against
its value. After an <code>-&gt;</code> you provide the resulting value for the switch
expression as a whole. In this example, we’re assigning that to our variable
<code>yesOrNo</code>, which no longer needs to be the nullable wrapper type.</p>
<p>Our code as written here hides one of the protections that the <code>switch</code>
expressions is giving us. If we remove the <code>default</code> clause, the compiler will
give us an error because the expression cannot always be evaluated fully.</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code><code class="w"> </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">switch</code><code class="p">(</code><code class="n">input</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"Y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"N"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"n"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="p">};</code><code class="w"/>

<code class="c1">// Compiler error:</code><code class="w"/>
<code class="c1">//   the switch expression does not cover all possible input values</code><code class="w"/></pre>
<p>Switch expressions do not fall through like the statement form. To support
multiple values evaluating to the same result, each <code>case</code> can take a comma-separated list of values instead of just a single value.</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code><code class="w"> </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">switch</code><code class="p">(</code><code class="n">input</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"y"</code><code class="p">,</code><code class="w"> </code><code class="s">"Y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"n"</code><code class="p">,</code><code class="w"> </code><code class="s">"N"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">default</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"Y or N"</code><code class="p">);</code><code class="w"/>
<code class="p">};</code><code class="w"/></pre>
<p>Our desired result can’t always be expressed as a single value or method call.
To support that, curly braces may introduce a statement. However, the statement
must end with either <code>yield</code> to exit the switch with a value, or a <code>return</code>
leaving the entire enclosing method.</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code><code class="w"> </code><code class="n">yesOrNo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">switch</code><code class="p">(</code><code class="n">input</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"y"</code><code class="p">,</code><code class="w"> </code><code class="s">"Y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Got it"</code><code class="p">);</code><code class="w"> </code><code class="kd">yield</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"> </code><code class="p">}</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"n"</code><code class="p">,</code><code class="w"> </code><code class="s">"N"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Nope"</code><code class="p">);</code><code class="w"> </code><code class="kd">yield</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"> </code><code class="p">}</code><code class="w"/>
<code class="w">    </code><code class="k">default</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"Y or N"</code><code class="p">);</code><code class="w"/>
<code class="p">};</code><code class="w"/></pre>
<p>And in fact, if we don’t make use of the <code>switch</code> expression result, we can even
use this syntax, with its improved branch checking and safety, purely for
side effects.<a data-startref="ix_ch02-asciidoc34" data-type="indexterm" id="idm45927772451056"/></p>
<pre data-code-language="java" data-type="programlisting"><code class="k">switch</code><code class="p">(</code><code class="n">input</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"y"</code><code class="p">,</code><code class="w"> </code><code class="s">"Y"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Sure"</code><code class="p">);</code><code class="w"/>
<code class="w">    </code><code class="k">case</code><code class="w"> </code><code class="s">"n"</code><code class="p">,</code><code class="w"> </code><code class="s">"N"</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Nope"</code><code class="p">);</code><code class="w"/>
<code class="w">    </code><code class="k">default</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"Y or N"</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The while Statement" data-type="sect2"><div class="sect2" id="idm45927764966608">
<h2>The while Statement</h2>
<p><a data-primary="statements" data-secondary="do/while" data-type="indexterm" id="idm45927772342352"/><a data-primary="statements" data-secondary="while" data-type="indexterm" id="idm45927772341376"/><a data-primary="while statements" data-type="indexterm" id="idm45927772340432"/>The <code>while</code> statement is a basic statement that allows Java to perform
repetitive actions—or, to put it another way, it is one of Java’s
primary <em>looping constructs</em>. It has the following syntax:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">while</code><code class="w"> </code><code class="p">(</code><em><code class="n">expression</code></em><code class="p">)</code><code class="w">
</code><code class="w">  </code><em><code class="n">statement</code></em><code class="w">
</code><code class="w">  </code></pre>
<p><a data-primary="expressions" data-secondary="in while statements" data-secondary-sortas="while statements" data-type="indexterm" id="idm45927772324320"/><a data-primary="while statements" data-secondary="data type of expression in" data-type="indexterm" id="idm45927772322928"/>The <code>while</code> statement works by first evaluating the <em><code>expression</code></em>,
which must result in a <code>boolean</code> or <code>Boolean</code> value. If the value is
<code>false</code>, the interpreter skips the 
<span class="keep-together"><em><code>statement</code></em></span> associated with the
<a data-primary="looping" data-secondary="while statements" data-type="indexterm" id="idm45927772318736"/>loop and moves to the next statement in the program. If it is <code>true</code>,
however, the <em><code>statement</code></em> that forms the body of the loop is executed,
and the <em><code>expression</code></em> is reevaluated. Again, if the value of
<em><code>expression</code></em> is <code>false</code>, the interpreter moves on to the next
statement in the program; otherwise, it executes the <em><code>statement</code></em>
again. This cycle continues while the <em><code>expression</code></em> remains <code>true</code>
(i.e., until it evaluates to <code>false</code>), at which point the <code>while</code>
statement ends, and the interpreter moves on to the next statement. You
can create an infinite loop with the syntax <code>while(true)</code>.</p>
<p>Here is an example <code>while</code> loop that prints the numbers 0 to 9:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>
<code class="k">while</code><code class="w"> </code><code class="p">(</code><code class="n">count</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">count</code><code class="p">);</code><code class="w"/>
<code class="w">   </code><code class="n">count</code><code class="o">++</code><code class="p">;</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>As you can see, the variable <code>count</code> starts off at 0 in this example and
is incremented each time the body of the loop runs. Once the loop has
executed 10 times, the expression becomes <code>false</code> (i.e., <code>count</code> is no
longer less than 10), the <code>while</code> statement finishes, and the Java
interpreter can move to the next statement in the program. <a data-primary="counters for loops, incrementing" data-type="indexterm" id="idm45927770233904"/>Most loops
have a counter variable like <code>count</code>. The variable names <code>i</code>, <code>j</code>, and
<code>k</code> are commonly used as loop counters, although you should use more
descriptive names if it makes your code easier to understand.</p>
</div></section>
<section data-pdf-bookmark="The do Statement" data-type="sect2"><div class="sect2" id="idm45927770231376">
<h2>The do Statement</h2>
<p><a data-primary="do statements" data-type="indexterm" id="idm45927770217696"/><a data-primary="statements" data-secondary="do" data-type="indexterm" id="idm45927770216992"/><a data-primary="while statements" data-secondary="do statements vs." data-type="indexterm" id="idm45927770216048"/>A <code>do</code> loop is much like a <code>while</code> loop, except that the loop
expression is tested at the bottom of the loop rather than at the top.
This means that the body of the loop is always executed at least once.
The syntax is:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">do</code><code class="w">
</code><code class="w">   </code><em><code class="n">statement</code></em><code class="w">
</code><code class="nf">while</code><code class="w"> </code><code class="p">(</code><em><code class="n">expression</code></em><code class="p">)</code><code class="p">;</code><code class="w">
</code></pre>
<p>Notice a couple of differences between the <code>do</code> loop and the more
ordinary <code>while</code> loop. First, the <code>do</code> loop requires both the <code>do</code>
keyword to mark the beginning of the loop and the <code>while</code> keyword to
mark the end and introduce the loop condition. <a data-primary="; (semicolon)" data-secondary="terminating do loops" data-type="indexterm" id="idm45927770195920"/>Also, unlike the <code>while</code>
loop, the <code>do</code> loop is terminated with a semicolon. This is because the
<code>do</code> loop ends with the loop condition rather than simply ending with a
curly brace that marks the end of the loop body. The following <code>do</code> loop
prints the same output as the <code>while</code> loop just discussed:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>
<code class="k">do</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">count</code><code class="p">);</code><code class="w"/>
<code class="w">   </code><code class="n">count</code><code class="o">++</code><code class="p">;</code><code class="w"/>
<code class="p">}</code><code class="w"> </code><code class="k">while</code><code class="p">(</code><code class="n">count</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">);</code><code class="w"/></pre>
<p>The <code>do</code> loop is much less commonly used than its <code>while</code> cousin
because, in practice, it is unusual to encounter a situation where you
are sure you always want a loop to execute at least once.</p>
</div></section>
<section data-pdf-bookmark="The for Statement" data-type="sect2"><div class="sect2" id="idm45927770131808">
<h2>The for Statement</h2>
<p><a data-primary="for statements" data-type="indexterm" id="idm45927770130240"/><a data-primary="statements" data-secondary="for" data-type="indexterm" id="idm45927770129136"/>The <code>for</code> statement provides a looping construct that is often more
convenient than the <code>while</code> and <code>do</code> loops. The <code>for</code> statement takes
advantage of a common looping pattern. <a data-primary="for statements" data-secondary="initialize, test, and update expressions in" data-type="indexterm" id="idm45927770126336"/><a data-primary="initialize expressions (for loops)" data-type="indexterm" id="idm45927770125392"/><a data-primary="looping" data-secondary="for statements" data-secondary-sortas="statements" data-type="indexterm" id="idm45927770124752"/><a data-primary="test expressions (for loops)" data-type="indexterm" id="idm45927770123536"/><a data-primary="update expressions (for loops)" data-type="indexterm" id="idm45927770122896"/>Most loops have a counter, or
state variable of some kind, that is initialized before the loop starts,
tested to determine whether to execute the loop body, and then
incremented or updated somehow at the end of the loop body before the
<a data-primary="expressions" data-secondary="in for loops" data-secondary-sortas="for loops" data-type="indexterm" id="idm45927770122128"/>test expression is evaluated again. The <em><code>initialize</code></em>, <em><code>test</code></em>, and <em><code>update</code></em>
steps are the three crucial manipulations of a loop variable, and the
<code>for</code> statement makes these three steps an explicit part of the loop
syntax:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">for</code><code class="p">(</code><em><code class="n">initialize</code></em><code class="p">;</code><code class="w"> </code><em><code class="n">test</code></em><code class="p">;</code><code class="w"> </code><em><code class="n">update</code></em><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">
</code><code class="w">    </code><em><code class="n">statement</code></em><code class="w">
</code><code class="p">}</code><code class="w">
</code></pre>
<p>This <code>for</code> loop is basically equivalent to the following <code>while</code> loop:</p>
<pre data-code-language="java" data-type="programlisting">
<em><code class="n">initialize</code></em><code class="p">;</code><code class="w">
</code><code class="k">while</code><code class="w"> </code><code class="p">(</code><em><code class="n">test</code></em><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">
</code><code class="w">   </code><em><code class="n">statement</code></em><code class="p">;</code><code class="w">
</code><code class="w">   </code><em><code class="n">update</code></em><code class="p">;</code><code class="w">
</code><code class="p">}</code><code class="w">
</code></pre>
<p>Placing the <em><code>initialize</code></em>, <em><code>test</code></em>, and <em><code>update</code></em> expressions at the top of a <code>for</code> loop makes it especially easy to understand what
the loop is doing, and it prevents mistakes such as forgetting to
initialize or update the loop variable. The interpreter discards the
values of the <em><code>initialize</code></em> and <em><code>update</code></em> expressions, so to be
useful, these expressions must have side effects. <em><code>initialize</code></em> is
typically an assignment expression, while <em><code>update</code></em> is usually an
increment, decrement, or some other assignment.</p>
<p>The following <code>for</code> loop prints the numbers 0 to 9, just as the previous
<code>while</code> and <code>do</code> loops have done:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">count</code><code class="p">;</code><code class="w"/>
<code class="k">for</code><code class="p">(</code><code class="n">count</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="w"> </code><code class="p">;</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="w"> </code><code class="p">;</code><code class="w"> </code><code class="n">count</code><code class="o">++</code><code class="p">)</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">count</code><code class="p">);</code><code class="w"/></pre>
<p>Notice how this syntax places all the important information about the
loop variable on a single line, making it very clear how the loop
executes. Placing the <em><code>update</code></em> expression in the <code>for</code> statement itself
also simplifies the body of the loop to a single statement; we don’t
even need to use curly braces to produce a statement block.</p>
<p>The <code>for</code> loop supports some additional syntax that makes it even more
convenient to use. Because many loops use their loop variables only
within the loop, the <code>for</code> loop allows the <em><code>initialize</code></em> expression to
be a full variable declaration, so that the variable is scoped to the
body of the loop and is not visible outside of it. For <span class="keep-together">example</span>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="w"> </code><code class="p">;</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="w"> </code><code class="p">;</code><code class="w"> </code><code class="n">count</code><code class="o">++</code><code class="p">)</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">count</code><code class="p">);</code><code class="w"/></pre>
<p>Furthermore, the <code>for</code> loop syntax does not restrict you to writing
loops that use only a single variable. Both the <em><code>initialize</code></em> and
<em><code>update</code></em> expressions of a <code>for</code> loop can use a comma to separate
multiple initializations and update expressions. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="n">j</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">10</code><code class="w"> </code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="w"> </code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">,</code><code class="w"> </code><code class="n">j</code><code class="o">--</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="n">sum</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">j</code><code class="p">;</code><code class="w"/></pre>
<p>Even though all the examples so far have counted numbers, <code>for</code> loops
are not restricted to loops that count numbers. <a data-primary="linked lists, iterating through, using for loop" data-type="indexterm" id="idm45927769829968"/>For example, you might
use a <code>for</code> loop to iterate through the elements of a linked list:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="n">Node</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">listHead</code><code class="p">;</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">;</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">n</code><code class="p">.</code><code class="na">nextNode</code><code class="p">())</code><code class="w"/>
<code class="w">   </code><code class="n">process</code><code class="p">(</code><code class="n">n</code><code class="p">);</code><code class="w"/></pre>
<p><a data-primary="infinite loops" data-secondary="creating with syntax while(true)" data-type="indexterm" id="idm45927769785840"/>The <em><code>initialize</code></em>, <em><code>test</code></em>, and <em><code>update</code></em> expressions of a <code>for</code> loop
are all optional; <a data-primary="; (semicolon)" data-secondary="in for loops" data-secondary-sortas="for loops" data-type="indexterm" id="idm45927769774240"/><a data-primary="infinite loops" data-secondary="writing with for(;;)" data-type="indexterm" id="idm45927769772992"/>only the semicolons that separate the expressions are
required. If the <em><code>test</code></em> expression is omitted, it is assumed to be
<code>true</code>. Thus, you can write an infinite loop as <code>for(;;)</code>.</p>
</div></section>
<section data-pdf-bookmark="The foreach Statement" data-type="sect2"><div class="sect2" id="idm45927770131216">
<h2>The foreach Statement</h2>
<p><a data-primary="collections" data-secondary="iterating over with foreach loops" data-type="indexterm" id="idm45927769740416"/><a data-primary="foreach statements" data-type="indexterm" id="idm45927769739472"/><a data-primary="iteration" data-secondary="foreach and" data-type="indexterm" id="idm45927769738800"/><a data-primary="statements" data-secondary="foreach" data-type="indexterm" id="idm45927769737856"/>Java’s <code>for</code> loop works well for primitive types, but it is needlessly
clunky for handling collections of objects. Instead, an alternative
syntax known as a <em>foreach</em> loop is used for handling collections of
objects that need to be looped over.</p>
<p>The foreach loop uses the keyword <code>for</code> followed by an opening
parenthesis, a variable declaration (without initializer), a colon, an
expression, a closing parenthesis, and finally the statement (or block)
that forms the body of the loop:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">for</code><code class="p">(</code><code class="w"> </code><em><code class="n">declaration</code></em><code class="w"> </code><code class="p">:</code><code class="w"> </code><em><code class="n">expression</code></em><code class="w"> </code><code class="p">)</code><code class="w">
</code><code class="w">     </code><em><code class="n">statement</code></em><code class="w">
</code></pre>
<p>Despite its name, the foreach loop does not have a keyword
<code>foreach</code>—instead, it is common to read the colon as “in”—as in “foreach
name in studentNames.”</p>
<p>For the <code>while</code>, <code>do</code>, and <code>for</code> loops, we’ve shown an example that
prints 10 numbers. The foreach loop can do this too, but it needs a collection to iterate over. In order to loop 10 times (to print out 10
numbers), we need an array or other collection with 10 elements. Here’s
code we can use:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// These are the numbers we want to print</code><code class="w"/>
<code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">primes</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="p">,</code><code class="w"> </code><code class="mi">5</code><code class="p">,</code><code class="w"> </code><code class="mi">7</code><code class="p">,</code><code class="w"> </code><code class="mi">11</code><code class="p">,</code><code class="w"> </code><code class="mi">13</code><code class="p">,</code><code class="w"> </code><code class="mi">17</code><code class="p">,</code><code class="w"> </code><code class="mi">19</code><code class="p">,</code><code class="w"> </code><code class="mi">23</code><code class="p">,</code><code class="w"> </code><code class="mi">29</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="c1">// This is the loop that prints them</code><code class="w"/>
<code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="n">primes</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">n</code><code class="p">);</code><code class="w"/></pre>
<section data-pdf-bookmark="What foreach cannot do" data-type="sect3"><div class="sect3" id="idm45927769692032">
<h3>What foreach cannot do</h3>
<p><a data-primary="foreach statements" data-secondary="limitations of" data-type="indexterm" id="idm45927769653856"/><a data-primary="Iterator object, foreach loop and" data-type="indexterm" id="idm45927769652656"/>The foreach is different from the <code>while</code>, <code>for</code>, or <code>do</code> loops, because it
hides the loop counter or <code>Iterator</code> from you. This is a very powerful
idea, as we’ll see when we discuss lambda expressions, but there are
some algorithms that cannot be expressed very naturally with a foreach
loop.</p>
<p>For example, suppose you want to print the elements of an array as a
comma-separated list. To do this, you need to print a comma after every
element of the array except the last, or equivalently, before every
element of the array except the first. With a traditional <code>for</code> loop,
the code might look like this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">words</code><code class="p">.</code><code class="na">length</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">print</code><code class="p">(</code><code class="s">", "</code><code class="p">);</code><code class="w"/>
<code class="w">     </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">print</code><code class="p">(</code><code class="n">words</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>This is a very straightforward task, but you simply cannot do it with
foreach without keeping track of additional state. The problem is that the foreach loop doesn’t give you a loop
counter or any other way to tell if you’re on the first iteration, the
last iteration, or somewhere in between.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>A similar issue exists when you’re using foreach to iterate through the
elements of a collection. Just as a foreach loop over an array has no
way to obtain the array index of the current element, a foreach loop
over a collection has no way to obtain the <code>Iterator</code> object that is
being used to itemize the elements of the collection.</p>
</div>
<p><a data-primary="lists" data-secondary="iterating through using foreach loop" data-type="indexterm" id="idm45927767915136"/>Here are some other things you cannot do with a foreach-style loop:</p>
<ul>
<li>
<p>Iterate backward through the elements of an array or <code>List</code>.</p>
</li>
<li>
<p>Use a single loop counter to access the same-numbered elements of two
distinct arrays.</p>
</li>
<li>
<p>Iterate through the elements of a <code>List</code> using calls to its <code>get()</code>
method rather than calls to its iterator.</p>
</li>
</ul>
</div></section>
</div></section>
<section data-pdf-bookmark="The break Statement" data-type="sect2"><div class="sect2" id="idm45927767909616">
<h2>The break Statement</h2>
<p><a data-primary="break statements" data-type="indexterm" id="idm45927767893104"/><a data-primary="for statements" data-secondary="break statement in" data-type="indexterm" id="idm45927767892176"/><a data-primary="statements" data-secondary="break" data-type="indexterm" id="idm45927767891232"/>A <code>break</code> statement causes the Java interpreter to skip immediately to
the end of a containing statement. We have already seen the <code>break</code>
statement used with the <code>switch</code> statement. <a data-primary="; (semicolon)" data-secondary="in break statements" data-secondary-sortas="break statements" data-type="indexterm" id="idm45927767888912"/>The <code>break</code> statement is
most often written as simply the keyword <code>break</code> followed by a
semicolon:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">break</code><code class="p">;</code><code class="w"/></pre>
<p>When used in this form, it causes the Java interpreter to immediately
exit the innermost containing <code>while</code>, <code>do</code>, <code>for</code>, or <code>switch</code>
statement. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">data</code><code class="p">.</code><code class="na">length</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">data</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">target</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">  </code><code class="c1">// When we find what we're looking for,</code><code class="w"/>
<code class="w">        </code><code class="n">index</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">i</code><code class="p">;</code><code class="w">              </code><code class="c1">// remember where we found it</code><code class="w"/>
<code class="w">        </code><code class="k">break</code><code class="p">;</code><code class="w">                  </code><code class="c1">// and stop looking!</code><code class="w"/>
<code class="w">    </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w">   </code><code class="c1">// The Java interpreter goes here after executing break</code><code class="w"/></pre>
<p><a data-primary="labeled statements" data-type="indexterm" id="idm45927767807056"/>The <code>break</code> statement can also be followed by the name of a containing
labeled statement. When used in this form, <code>break</code> causes the Java
interpreter to immediately exit the named block, which can be any kind
of statement, not just a loop or <code>switch</code>. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="nl">TESTFORNULL</code><code class="p">:</code><code class="w"> </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">data</code><code class="w"> </code><code class="o">!=</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">row</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">row</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">numrows</code><code class="p">;</code><code class="w"> </code><code class="n">row</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">col</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">col</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">numcols</code><code class="p">;</code><code class="w"> </code><code class="n">col</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">       </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">data</code><code class="o">[</code><code class="n">row</code><code class="o">][</code><code class="n">col</code><code class="o">]</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="kc">null</code><code class="p">)</code><code class="w"/>
<code class="w">         </code><code class="k">break</code><code class="w"> </code><code class="n">TESTFORNULL</code><code class="p">;</code><code class="w">           </code><code class="c1">// treat the array as undefined.</code><code class="w"/>
<code class="w">     </code><code class="p">}</code><code class="w"/>
<code class="w">   </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w">  </code><code class="c1">// Java interpreter goes here after executing break TESTFORNULL</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The continue Statement" data-type="sect2"><div class="sect2" id="idm45927767742032">
<h2>The continue Statement</h2>
<p><a data-primary="continue statements" data-type="indexterm" id="idm45927767706112"/><a data-primary="statements" data-secondary="continue" data-type="indexterm" id="idm45927767705184"/>While a <code>break</code> statement exits a loop, a <code>continue</code> statement quits
the current iteration of a loop and starts the next one. <code>continue</code>, in
both its unlabeled and labeled forms, can be used only within a <code>while</code>,
<code>do</code>, or <code>for</code> loop. When used without a label, <code>continue</code> causes the
innermost loop to start a new iteration. When used with a label that is
the name of a containing loop, it causes the named loop to start a new
iteration. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">data</code><code class="p">.</code><code class="na">length</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">  </code><code class="c1">// Loop through data.</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">data</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="o">-</code><code class="mi">1</code><code class="p">)</code><code class="w">                   </code><code class="c1">// If a data value is missing,</code><code class="w"/>
<code class="w">     </code><code class="k">continue</code><code class="p">;</code><code class="w">                          </code><code class="c1">// skip to the next iteration.</code><code class="w"/>
<code class="w">   </code><code class="n">process</code><code class="p">(</code><code class="n">data</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="p">);</code><code class="w">                    </code><code class="c1">// Process the data value.</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><code>while</code>, <code>do</code>, and <code>for</code> loops differ slightly in the way that
<code>continue</code> starts a new <span class="keep-together">iteration</span>:</p>
<ul>
<li>
<p><a data-primary="while statements" data-secondary="continue statement in" data-type="indexterm" id="idm45927767544784"/>With a <code>while</code> loop, the Java interpreter simply returns to the top of
the loop, tests the loop condition again, and, if it evaluates to
<code>true</code>, executes the body of the loop again.</p>
</li>
<li>
<p><a data-primary="do statements" data-type="indexterm" id="idm45927767542112"/>With a <code>do</code> loop, the interpreter jumps to the bottom of the loop,
where it tests the loop condition to decide whether to perform another
iteration of the loop.</p>
</li>
<li>
<p><a data-primary="for statements" data-secondary="continue statement in" data-type="indexterm" id="idm45927767540128"/>With a <code>for</code> loop, the interpreter jumps to the top of the loop,
where it first evaluates the <em><code>update</code></em> expression and then evaluates
the <em><code>test</code></em> expression to decide whether to loop again. As you can see
from the examples, the behavior of a <code>for</code> loop with a <code>continue</code>
statement is different from the behavior of the “basically equivalent”
<code>while</code> loop presented earlier; <em><code>update</code></em> gets evaluated in the <code>for</code>
loop but not in the equivalent <code>while</code> loop.</p>
</li>
</ul>
</div></section>
<section data-pdf-bookmark="The return Statement" data-type="sect2"><div class="sect2" id="idm45927767534240">
<h2>The return Statement</h2>
<p><a data-primary="return statements" data-type="indexterm" id="idm45927767512112"/><a data-primary="statements" data-secondary="return" data-type="indexterm" id="idm45927767511520"/>A <code>return</code> statement tells the Java interpreter to stop executing the
current method. <a data-primary="expressions" data-secondary="following return statements" data-type="indexterm" id="idm45927767510032"/>If the method is declared to return a value, the
<code>return</code> statement must be followed by an expression. The value of the
expression becomes the return value of the method. For example, the
following method computes and returns the square of a number:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">double</code><code class="w"> </code><code class="nf">square</code><code class="p">(</code><code class="kt">double</code><code class="w"> </code><code class="n">x</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">      </code><code class="c1">// A method to compute x squared</code><code class="w"/>
<code class="w">   </code><code class="k">return</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">x</code><code class="p">;</code><code class="w">               </code><code class="c1">// Compute and return a value</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="methods" data-secondary="void" data-type="indexterm" id="idm45927767486688"/><a data-primary="void keyword" data-type="indexterm" id="idm45927767450448"/>Some methods are declared <code>void</code> to indicate that they do not return
any value. The Java interpreter runs methods like this by executing
their statements one by one until it reaches the end of the method.
After executing the last statement, the interpreter returns implicitly.
Sometimes, however, a <code>void</code> method has to return explicitly before
reaching the last statement. In this case, it can use the <code>return</code>
statement by itself, without any expression. For example, the following
method prints, but does not return, the square root of its argument. If
the argument is a negative number, it returns without printing anything:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// A method to print square root of x</code><code class="w"/>
<code class="kt">void</code><code class="w"> </code><code class="nf">printSquareRoot</code><code class="p">(</code><code class="kt">double</code><code class="w"> </code><code class="n">x</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="k">return</code><code class="p">;</code><code class="w">                </code><code class="c1">// If x is negative, return</code><code class="w"/>
<code class="w">   </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">Math</code><code class="p">.</code><code class="na">sqrt</code><code class="p">(</code><code class="n">x</code><code class="p">));</code><code class="w"> </code><code class="c1">// Print the square root of x</code><code class="w"/>
<code class="p">}</code><code class="w">                                    </code><code class="c1">// Method end: return implicitly</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The synchronized Statement" data-type="sect2"><div class="sect2" id="idm45927767366768">
<h2>The synchronized Statement</h2>
<p><a data-primary="statements" data-secondary="synchronized" data-type="indexterm" id="idm45927767403184"/><a data-primary="synchronized statements" data-type="indexterm" id="idm45927767402240"/>Java has always provided support for multithreaded programming. We
cover this in some detail later on (especially in
<a data-type="xref" href="ch06.xhtml#javanut8-CHP-6-SECT-5">“Java’s Support for Concurrency”</a>); <a data-primary="concurrency" data-secondary="synchronize statement" data-type="indexterm" id="idm45927767400512"/>however, be aware
that concurrency is difficult to get right and has a number of
subtleties.</p>
<p>In particular, when working with multiple threads, you must often take
care to prevent multiple threads from modifying an object simultaneously
in a way that might corrupt the object’s state. Java provides the
<code>synchronized</code> statement to help the programmer prevent corruption. The
syntax is:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="kd">synchronized</code><code class="w"> </code><code class="p">(</code><code class="w"> </code><em><code class="n">expression</code></em><code class="w"> </code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w">
</code><code class="w">   </code><em><code class="n">statements</code></em><code class="w">
</code><code class="p">}</code><code class="w">
</code></pre>
<p><a data-primary="expressions" data-secondary="in synchronize statements" data-secondary-sortas="synchronize statements" data-type="indexterm" id="idm45927767356960"/><em><code>expression</code></em> is an expression that must evaluate to an object (including
arrays). <a data-primary="statements section, synchronize statement" data-type="indexterm" id="idm45927767355472"/><em><code>statements</code></em> constitute the code of the section that could
cause damage and must be enclosed in curly braces.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><a data-primary="concurrency primitives" data-type="indexterm" id="idm45927767353392"/><a data-primary="object state" data-type="indexterm" id="idm45927767352688"/>In Java, the protection of object state (i.e., data) is the primary concern of the concurrency primitives. This is unlike some other languages, where the exclusion of threads from <em>critical sections</em> (i.e., code) is the main focus.</p>
</div>
<p>Before executing the statement block, the Java interpreter first obtains
an exclusive lock on the object or array specified by <em><code>expression</code></em>. It
holds the lock until it is finished running the block, then releases it.
While a thread holds the lock on an object, no other thread can obtain
that lock.</p>
<p><a data-primary="methods" data-secondary="synchronized" data-type="indexterm" id="idm45927767350128"/><a data-primary="synchronized keyword" data-type="indexterm" id="idm45927767349152"/>As well as the block form, <code>synchronized</code> can also be used as a method modifier in Java.
When applied to a method, the keyword indicates that the entire method is treated as <code>synchronized</code>.</p>
<p>For a <code>synchronized</code> instance method, Java obtains an exclusive lock on the class instance. (Class and instance methods are discussed in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>.)
It can be thought of as a <code>synchronized (this) { ... }</code> block that covers the entire method.</p>
<p><a data-primary="class methods" data-secondary="static synchronized" data-type="indexterm" id="idm45927767322288"/><a data-primary="static synchronized method" data-type="indexterm" id="idm45927767321312"/>A <code>static synchronized</code> method (a class method) causes Java to obtain an exclusive lock on the class (technically the class object corresponding to the type) before executing the method.</p>
</div></section>
<section data-pdf-bookmark="The throw Statement" data-type="sect2"><div class="sect2" id="idm45927767404032">
<h2>The throw Statement</h2>
<p><a data-primary="exceptions" data-secondary="throwing" data-type="indexterm" id="idm45927767318512"/><a data-primary="statements" data-secondary="throw" data-type="indexterm" id="idm45927767317536"/><a data-primary="throw statements" data-type="indexterm" id="idm45927767316592"/>An <em>exception</em> is a signal that indicates some sort of exceptional
condition or error has occurred. To <em>throw</em> an exception is to signal
an exceptional condition. To <em>catch</em> an exception is to handle it—to
take whatever actions are necessary to recover from it.</p>
<p>In Java, the <code>throw</code> statement is used to throw an exception:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">throw</code><code class="w"> </code><em><code class="n">expression</code></em><code class="p">;</code><code class="w">
</code></pre>
<p><a data-primary="expressions" data-secondary="in throw statements" data-secondary-sortas="throw statements" data-type="indexterm" id="idm45927767308608"/>The <em><code>expression</code></em> must evaluate to an exception object that describes
the exception or error that has occurred. We’ll talk more about types
of exceptions shortly; for now, all you need to know is that an exception:</p>
<ul>
<li>
<p>Is represented by an object</p>
</li>
<li>
<p>Has a type that is a subclass of <code>Exception</code></p>
</li>
<li>
<p>Has a slightly specialized role in Java’s syntax</p>
</li>
<li>
<p>Can be of two different types: <em>checked</em> or <em>unchecked</em></p>
</li>
</ul>
<p>Here is some example code that throws an exception:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="nf">factorial</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="k">throw</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">IllegalArgumentException</code><code class="p">(</code><code class="s">"x must be &gt;= 0"</code><code class="p">);</code><code class="w"/>
<code class="w">   </code><code class="kt">double</code><code class="w"> </code><code class="n">fact</code><code class="p">;</code><code class="w"/>
<code class="w">   </code><code class="k">for</code><code class="p">(</code><code class="n">fact</code><code class="o">=</code><code class="mf">1.0</code><code class="p">;</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"> </code><code class="n">fact</code><code class="w"> </code><code class="o">*=</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="n">x</code><code class="o">--</code><code class="p">)</code><code class="w"/>
<code class="w">     </code><code class="cm">/* empty */</code><code class="w"> </code><code class="p">;</code><code class="w">          </code><code class="c1">// Note use of the empty statement</code><code class="w"/>
<code class="w">   </code><code class="k">return</code><code class="w"> </code><code class="n">fact</code><code class="p">;</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="exception handlers" data-type="indexterm" id="idm45927767249104"/>When the Java interpreter executes a <code>throw</code> statement, it immediately
stops normal program execution and starts looking for an exception
handler that can catch, or handle, the exception. Exception handlers
are written with the <code>try/catch/finally</code> statement, which is described
in the next section. The Java interpreter first looks at the enclosing
block of code to see if it has an associated exception handler. If so,
it exits that block of code and starts running the exception-handling
code associated with the block. After running the exception handler, the
interpreter continues execution at the statement immediately following
the handler code.</p>
<p>If the enclosing block of code does not have an appropriate exception
handler, the interpreter checks the next higher enclosing block of code
in the method. This continues until a handler is found. If the method
does not contain an exception handler that can handle the exception
thrown by the <code>throw</code> statement, the interpreter stops running the
current method and returns to the caller. Now the interpreter starts
looking for an exception handler in the blocks of code of the calling
method. In this way, exceptions propagate up through the lexical
structure of Java methods, up the call stack of the Java interpreter. <a data-primary="main()" data-type="indexterm" id="idm45927767213344"/>If
the exception is never caught, it propagates all the way up to the
<code>main()</code> method of the program. If it is not handled in that method,
the Java interpreter prints an error message, prints a stack trace to
indicate where the exception occurred, and then exits.</p>
</div></section>
<section data-pdf-bookmark="The try/catch/finally Statement" data-type="sect2"><div class="sect2" id="idm45927767211872">
<h2>The try/catch/finally Statement</h2>
<p><a data-primary="statements" data-secondary="try/catch/finally" data-type="indexterm" id="ix_ch02-asciidoc35"/><a data-primary="try/catch/finally statement" data-type="indexterm" id="ix_ch02-asciidoc36"/>Java has two slightly different exception-handling mechanisms. The
classic form is the <code>try/catch/finally</code> statement. <a data-primary="try block" data-type="indexterm" id="idm45927767156800"/>The <code>try</code> clause of
this statement establishes a block of code for exception handling. This
<code>try</code> block is followed by zero or more <code>catch</code> clauses, each of which
is a block of statements designed to handle specific exceptions. Each
<code>catch</code> block can handle more than one different exception—to indicate
that a <code>catch</code> block should handle multiple exceptions, we use the <code>|</code>
symbol to separate the different exceptions a <code>catch</code> block should handle.
The <code>catch</code> clauses are followed by an optional <code>finally</code> block that
contains cleanup code guaranteed to be executed regardless of what happens in the <code>try</code> block.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45927767210064">
<h5>try Block Syntax</h5>
<p><a data-primary="try/catch/finally statement" data-secondary="try block syntax" data-type="indexterm" id="idm45927767150512"/>Both the <code>catch</code> and <code>finally</code> clauses are optional, but every <code>try</code>
block must either declare some automatically managed resources (the
<em>try-with-resources</em> construct we’ll see in <a data-type="xref" href="#javanut8-CHP-2-SECT-5.18">“The try-with-resources Statement”</a>) or be
accompanied by a <code>catch</code>, a <code>finally</code>, or both.
<a data-primary="{ } (curly braces)" data-secondary="in try/catch/finally statements" data-secondary-sortas="try/catch/finally statements" data-type="indexterm" id="idm45927767145568"/>The <code>try</code>, <code>catch</code>, and <code>finally</code> blocks all begin and end with curly braces.
These are a required part of the syntax and cannot be omitted, even if
the clause contains only a single statement.</p>
</div></aside>
<p>The following code illustrates the syntax and purpose of the
<code>try/catch/finally</code> statement:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">try</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="c1">// Normally this code runs from the top of the block to the bottom</code><code class="w"/>
<code class="w">   </code><code class="c1">// without problems. But it can sometimes throw an exception,</code><code class="w"/>
<code class="w">   </code><code class="c1">// either directly with a throw statement or indirectly by calling</code><code class="w"/>
<code class="w">   </code><code class="c1">// a method that throws an exception.</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">catch</code><code class="w"> </code><code class="p">(</code><code class="n">SomeException</code><code class="w"> </code><code class="n">e1</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="c1">// This block contains statements that handle an exception object</code><code class="w"/>
<code class="w">   </code><code class="c1">// of type SomeException or a subclass of that type. Statements in</code><code class="w"/>
<code class="w">   </code><code class="c1">// this block can refer to that exception object by the name e1.</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">catch</code><code class="w"> </code><code class="p">(</code><code class="n">AnotherException</code><code class="w"> </code><code class="o">|</code><code class="w"> </code><code class="n">YetAnotherException</code><code class="w"> </code><code class="n">e2</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="c1">// This block contains statements that handle an exception of</code><code class="w"/>
<code class="w">   </code><code class="c1">// type AnotherException or YetAnotherException, or a subclass of</code><code class="w"/>
<code class="w">   </code><code class="c1">// either of those types. Statements in this block refer to the</code><code class="w"/>
<code class="w">   </code><code class="c1">// exception object they receive by the name e2.</code><code class="w"/>
<code class="p">}</code><code class="w"/>
<code class="k">finally</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">   </code><code class="c1">// This block contains statements that are always executed</code><code class="w"/>
<code class="w">   </code><code class="c1">// after we leave the try clause, regardless of whether we leave it:</code><code class="w"/>
<code class="w">   </code><code class="c1">//   1) normally, after reaching the bottom of the block;</code><code class="w"/>
<code class="w">   </code><code class="c1">//   2) because of a break, continue, or return statement;</code><code class="w"/>
<code class="w">   </code><code class="c1">//   3) with an exception that is handled by a catch clause above;</code><code class="w"/>
<code class="w">   </code><code class="c1">//   4) with an uncaught exception that has not been handled.</code><code class="w"/>
<code class="w">   </code><code class="c1">// If the try clause calls System.exit(), however, the interpreter</code><code class="w"/>
<code class="w">   </code><code class="c1">// exits before the finally clause can be run.</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<section data-pdf-bookmark="try" data-type="sect3"><div class="sect3" id="idm45927767102064">
<h3>try</h3>
<p><a data-primary="try clause" data-type="indexterm" id="idm45927767101056"/><a data-primary="try/catch/finally statement" data-secondary="try clause" data-type="indexterm" id="idm45927754993424"/>The <code>try</code> clause simply establishes a block of code that either has its
exceptions handled or needs special cleanup code to be run when it
terminates for any reason. The <code>try</code> clause by itself doesn’t do
anything interesting; it is the <code>catch</code> and <code>finally</code> clauses that do
the exception-handling and cleanup operations.</p>
</div></section>
<section data-pdf-bookmark="catch" data-type="sect3"><div class="sect3" id="idm45927754990432">
<h3>catch</h3>
<p><a data-primary="catch clause" data-type="indexterm" id="idm45927754989232"/><a data-primary="try/catch/finally statement" data-secondary="catch clause" data-type="indexterm" id="idm45927754988368"/>A <code>try</code> block can be followed by zero or more <code>catch</code> clauses that
specify code to handle various types of exceptions. Each <code>catch</code> clause
is declared with a single argument that specifies the types of
exceptions the clause can handle (possibly using the special <code>|</code> syntax
to indicate that the <code>catch</code> block can handle more than one type of
exception) and also provides a name the clause can use to refer to the
exception object it is currently handling. <a data-primary="Throwable class" data-type="indexterm" id="idm45927754985248"/>Any type that a <code>catch</code> block
wishes to handle must be some subclass of <code>Throwable</code>.</p>
<p>When an exception is thrown, the Java interpreter looks for a <code>catch</code>
clause with an argument that matches the same type as the exception
object or a superclass of that type. The interpreter invokes the first
such <code>catch</code> clause it finds. The code within a <code>catch</code> block should
take whatever action is necessary to cope with the exceptional
condition. If the exception is a <code>java.io.FileNotFoundException</code>, for example, you might handle it by asking the user to check
their spelling and try again.</p>
<p>It is not required to have a <code>catch</code> clause for every possible
exception; in some cases, the correct response is to allow the exception
to propagate up and be caught by the invoking method. In other cases,
such as a programming error signaled by <code>NullPointerException</code>, the
correct response is probably not to catch the exception at all but
allow it to propagate and have the Java interpreter exit with a stack
trace and an error message.</p>
</div></section>
<section data-pdf-bookmark="finally" data-type="sect3"><div class="sect3" id="idm45927754947744">
<h3>finally</h3>
<p><a data-primary="finally clause (try/catch/finally)" data-type="indexterm" id="idm45927754946496"/><a data-primary="try/catch/finally statement" data-secondary="finally clause" data-type="indexterm" id="idm45927754945456"/><a data-primary="try/catch/finally statement" data-secondary="try/finally" data-type="indexterm" id="idm45927754944528"/>The <code>finally</code> clause is generally used to clean up after the code in
the <code>try</code> clause (e.g., close files and shut down network connections).
The <code>finally</code> clause is useful because it is guaranteed to be executed
if any portion of the <code>try</code> block is executed, regardless of how the
code in the <code>try</code> block completes. <a data-primary="System.exit()" data-type="indexterm" id="idm45927754941312"/>In fact, the only way a <code>try</code> clause
can exit without allowing the <code>finally</code> clause to be executed is by
invoking the <code>System.exit()</code> method, which causes the Java interpreter
to stop running.</p>
<p>In the normal case, control reaches the end of the <code>try</code> block and then
proceeds to the <code>finally</code> block, which performs any necessary cleanup.
<a data-primary="break statements" data-type="indexterm" id="idm45927754937952"/><a data-primary="continue statements" data-type="indexterm" id="idm45927754937248"/><a data-primary="return statements" data-type="indexterm" id="idm45927754936576"/>If control leaves the <code>try</code> block because of a <code>return</code>, <code>continue</code>, or
<code>break</code> statement, the <code>finally</code> block is executed before control
transfers to its new destination.</p>
<p>If an exception occurs in the <code>try</code> block and there is an associated
<code>catch</code> block to handle the exception, control transfers first to the
<code>catch</code> block and then to the <code>finally</code> block. If there is no local
<code>catch</code> block to handle the exception, control transfers first to the
<code>finally</code> block, and then propagates up to the nearest containing
<code>catch</code> clause that can handle the exception.</p>
<p><a data-primary="throw statements" data-type="indexterm" id="idm45927754929568"/>If a <code>finally</code> block itself transfers control with a <code>return</code>,
<code>continue</code>, <code>break</code>, or <code>throw</code> statement or by calling a method that
throws an exception, the pending control transfer is abandoned, and this
new transfer is processed. For example, if a <code>finally</code> clause throws an
exception, that exception replaces any exception that was in the process
of being thrown. If a <code>finally</code> clause issues a <code>return</code> statement, the
method returns normally, even if an exception has been thrown and has
not yet been <span class="keep-together">handled</span>.</p>
<p><code>try</code> and <code>finally</code> can be used together without exceptions or any
<code>catch</code> clauses. In this case, the <code>finally</code> block is simply cleanup
code that is guaranteed to be executed, regardless of any <code>break</code>,
<code>continue</code>, or <code>return</code> statements within the <code>try</code> clause.<a data-startref="ix_ch02-asciidoc36" data-type="indexterm" id="idm45927754920032"/><a data-startref="ix_ch02-asciidoc35" data-type="indexterm" id="idm45927754919296"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="The try-with-resources Statement" data-type="sect2"><div class="sect2" id="javanut8-CHP-2-SECT-5.18">
<h2>The try-with-resources Statement</h2>
<p><a data-primary="statements" data-secondary="try-with-resources" data-type="indexterm" id="idm45927754917104"/><a data-primary="try-with-resources (TWR) statements" data-type="indexterm" id="idm45927754916128"/><a data-primary="TWR (try-with-resources) statements" data-type="indexterm" id="idm45927754915440"/>The standard form of a <code>try</code> block is very general, but there is a common set of circumstances that require developers to be very careful when writing <code>catch</code> and <code>finally</code> blocks.
These circumstances are when operating with resources that need to be cleaned up or closed when they are no longer needed.</p>
<p>Java provides a very useful mechanism for automatically closing resources that require cleanup.
This is known as <em>try-with-resources</em>, or TWR. We discuss TWR in detail in <a data-type="xref" href="ch10.xhtml#javanut8-CHP-10-SECT-1">“Classic Java I/O”</a>, but for completeness, let’s introduce the syntax now.
The following example shows how to open a file using the <code>FileInputStream</code> class (which results in an object that will require cleanup):</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">try</code><code class="w"> </code><code class="p">(</code><code class="n">InputStream</code><code class="w"> </code><code class="n">is</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">FileInputStream</code><code class="p">(</code><code class="s">"/Users/ben/details.txt"</code><code class="p">))</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">  </code><code class="c1">// ... process the file</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>This new form of <code>try</code> takes parameters that are all objects that
require cleanup.<sup><a data-type="noteref" href="ch02.xhtml#idm45927754904640" id="idm45927754904640-marker">2</a></sup> These objects are scoped to this <code>try</code> block
and are then cleaned up automatically no matter how this block is
exited. The developer does not need to write any <code>catch</code> or <code>finally</code>
blocks—the Java compiler automatically inserts correct cleanup code.</p>
<p>All new code that deals with resources should be written in the TWR
style—it is considerably less error prone than manually writing <code>catch</code>
blocks and does not suffer from the problems that plague techniques
such as finalization (see <a data-type="xref" href="ch06.xhtml#javanut8-CHP-6-SECT-4">“Finalization”</a> for
details).</p>
</div></section>
<section data-pdf-bookmark="The assert Statement" data-type="sect2"><div class="sect2" id="idm45927754881296">
<h2>The assert Statement</h2>
<p><a data-primary="assert statements" data-type="indexterm" id="ix_ch02-asciidoc37"/><a data-primary="statements" data-secondary="assert" data-type="indexterm" id="ix_ch02-asciidoc38"/>An <code>assert</code> statement is an attempt to provide a capability to verify
design assumptions in Java code. <a data-primary="assertions" data-type="indexterm" id="idm45927754876624"/>An <em>assertion</em> consists of the
<code>assert</code> keyword followed by a boolean expression that the programmer
believes should always evaluate to <code>true</code>. By default, assertions are
not enabled, and the <code>assert</code> statement does not actually do anything.</p>
<p><a data-primary="debugging, using assertions" data-type="indexterm" id="idm45927754873824"/><a data-primary="expressions" data-secondary="in assert statements" data-secondary-sortas="assert statements" data-type="indexterm" id="idm45927754872992"/>It is possible to enable assertions as a debugging tool, however; when
this is done, the <code>assert</code> statement evaluates the expression. If it is
indeed <code>true</code>, <code>assert</code> does nothing. <a data-primary="AssertionError" data-type="indexterm" id="idm45927754870288"/>On the other hand, if the
expression evaluates to <code>false</code>, the assertion fails, and the <code>assert</code>
statement throws a <code>java.lang.AssertionError</code>.</p>
<div data-type="tip"><h6>Tip</h6>
<p><a data-primary="JUnit" data-type="indexterm" id="idm45927754867424"/>Outside of the core JDK libraries, the <code>assert</code> statement is <em>extremely</em>
rarely used. It turns out to be too inflexible for testing most
applications and is not often used by ordinary developers. Instead, developers use ordinary testing libraries, such as JUnit.</p>
</div>
<p>The <code>assert</code> statement may include an optional second expression,
separated from the first by a colon. When assertions are enabled and the
first expression evaluates to <code>false</code>, the value of the second
expression is taken as an error code or error message and is passed to
the <code>AssertionError()</code> constructor. The full syntax of the statement is:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">assert</code><code class="w"> </code><em><code class="n">assertion</code></em><code class="p">;</code><code class="w">
</code></pre>
<p>or:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="k">assert</code><code class="w"> </code><em><code class="n">assertion</code></em><code class="w"> </code><code class="p">:</code><code class="w"> </code><em><code class="n">errorcode</code></em><code class="p">;</code><code class="w">
</code></pre>
<p>To use assertions effectively, you must also be aware of a couple of
fine points. First, remember that your programs will normally run with
assertions disabled and only sometimes with assertions enabled. This
means that you should be careful not to write assertion expressions that
contain side effects.</p>
<div data-type="warning" epub:type="warning"><h6>Warning</h6>
<p>You should never throw <code>AssertionError</code> from your own code, as it may
have unexpected results in future versions of the platform.</p>
</div>
<p>If an <code>AssertionError</code> is thrown, it indicates that one of the
programmer’s assumptions has not held up. This means that the code is
being used outside of the parameters for which it was designed, and it
cannot be expected to work correctly. In short, there is no plausible
way to recover from an <code>AssertionError</code>, and you should not attempt to
catch it (unless you catch it at the top level simply so that you can
display the error in a more user-friendly fashion).</p>
<section data-pdf-bookmark="Enabling assertions" data-type="sect3"><div class="sect3" id="idm45927754805456">
<h3>Enabling assertions</h3>
<p>For efficiency, it does not make sense to test assertions each time
code is executed—<code>assert</code> statements encode assumptions that should
always be true. Thus, by default, assertions are disabled, and <code>assert</code>
statements have no effect. The assertion code remains compiled in the
class files, however, so it can always be enabled for diagnostic or
debugging purposes. You can enable assertions, either across the board
or selectively, with command-line arguments to the Java interpreter.</p>
<p>To enable assertions in all classes except for system classes, use the
<code>-ea</code> argument. To enable assertions in system classes, use <code>-esa</code>. To
enable assertions within a specific class, use <code>-ea</code> followed by a colon
and the class name:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">java</code><code class="w"> </code><code class="o">-</code><code class="n">ea</code><code class="p">:</code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">.</code><code class="na">MergeSort</code><code class="w"> </code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">.</code><code class="na">Test</code><code class="w"/></pre>
<p>To enable assertions for all classes in a package and in all of its
subpackages, follow the <code>-ea</code> argument with a colon, the package name,
and three dots:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">java</code><code class="w"> </code><code class="o">-</code><code class="n">ea</code><code class="p">:</code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">...</code><code class="w"> </code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">.</code><code class="na">Test</code><code class="w"/></pre>
<p>You can disable assertions in the same way, using the <code>-da</code> argument.
For example, to enable assertions throughout a package and then disable
them in a specific class or subpackage, use:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">java</code><code class="w"> </code><code class="o">-</code><code class="n">ea</code><code class="p">:</code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">...</code><code class="w"> </code><code class="o">-</code><code class="n">da</code><code class="p">:</code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">.</code><code class="na">QuickSort</code><code class="w"/>
<code class="n">java</code><code class="w"> </code><code class="o">-</code><code class="n">ea</code><code class="p">:</code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">...</code><code class="w"> </code><code class="o">-</code><code class="n">da</code><code class="p">:</code><code class="n">com</code><code class="p">.</code><code class="na">example</code><code class="p">.</code><code class="na">sorters</code><code class="p">.</code><code class="na">plugins</code><code class="p">..</code><code class="w"/></pre>
<p>Finally, it is possible to control whether or not assertions are enabled
or disabled at classloading time. If you use a custom classloader (see
<a data-type="xref" href="ch11.xhtml#javanut8-CHP-11">Chapter 11</a> for details on custom classloading) in
your program and want to turn on assertions, you may be interested in
these methods<a data-startref="ix_ch02-asciidoc38" data-type="indexterm" id="idm45927754626912"/><a data-startref="ix_ch02-asciidoc37" data-type="indexterm" id="idm45927754626304"/>.<a data-startref="ix_ch02-asciidoc28" data-type="indexterm" id="idm45927754625536"/><a data-startref="ix_ch02-asciidoc27" data-type="indexterm" id="idm45927754624832"/></p>
</div></section>
</div></section>
</div></section>
<section data-pdf-bookmark="Methods" data-type="sect1"><div class="sect1" id="idm45927768898624">
<h1>Methods</h1>
<p><a data-primary="methods" data-type="indexterm" id="ix_ch02-asciidoc39"/><a data-primary="syntax, Java" data-secondary="methods" data-type="indexterm" id="ix_ch02-asciidoc40"/>A <em>method</em> is a named sequence of Java statements that can be invoked
by other Java code. When a method is invoked, it is passed zero or more
values known as <em>arguments</em>. The method performs some computations and,
optionally, returns a value. As described earlier in
<a data-type="xref" href="#javanut8-CHP-2-SECT-4">“Expressions and Operators”</a>, a method invocation is an
expression that is evaluated by the Java interpreter. Because method
invocations can have side effects, however, they also can be used as
expression statements. This section does not discuss method invocation
but instead describes how to define methods.</p>
<section data-pdf-bookmark="Defining Methods" data-type="sect2"><div class="sect2" id="idm45927754619040">
<h2>Defining Methods</h2>
<p><a data-primary="method signature" data-type="indexterm" id="ix_ch02-asciidoc41"/><a data-primary="methods" data-secondary="defining" data-type="indexterm" id="ix_ch02-asciidoc42"/><a data-primary="methods" data-secondary="signature" data-type="indexterm" id="ix_ch02-asciidoc43"/><a data-primary="signature" data-secondary="of method" data-secondary-sortas="method" data-type="indexterm" id="ix_ch02-asciidoc44"/>You <a data-primary="body" data-secondary="of a method" data-secondary-sortas="method" data-type="indexterm" id="idm45927754605376"/><a data-primary="method body" data-type="indexterm" id="idm45927754604224"/>already know how to define the body of a method; it is simply an
arbitrary sequence of statements enclosed within curly braces. What is
more interesting about a method is its <em>signature</em>.<sup><a data-type="noteref" href="ch02.xhtml#idm45927754603040" id="idm45927754603040-marker">3</a></sup> The signature specifies:</p>
<ul>
<li>
<p>The name of the method</p>
</li>
<li>
<p>The number, order, type, and name of the parameters used by the method</p>
</li>
<li>
<p>The type of the value returned by the method</p>
</li>
<li>
<p>The checked exceptions that the method can throw (the signature may
also list unchecked exceptions, but these are not required)</p>
</li>
<li>
<p>Various method modifiers that provide additional information about the
method</p>
</li>
</ul>
<p>A method signature defines everything you need to know about a method
before calling it. It is the method <em>specification</em> and defines the API
for the method. To use the Java platform’s online API
reference, you need to know how to read a method signature. And, to write Java programs, you need to know how to define your own
methods, each of which begins with a method signature.</p>
<p>A method signature looks like this:</p>
<pre data-code-language="java" data-type="programlisting">
<em><code class="n">modifiers</code><code class="w"> </code><code class="n">type</code><code class="w"> </code><code class="nf">name</code></em><code class="w"> </code><code class="p">(</code><em><code class="n">paramlist</code></em><code class="p">)</code><code class="w"> </code><code class="o">[</code><code class="w"> </code><code class="kd">throws</code><code class="w"> </code><code class="n">exceptions</code><code class="w"> </code><code class="o">]</code><code class="w">
</code></pre>
<p>The signature (the method specification) is followed by the method
body (the method implementation), which is simply a sequence of Java
statements enclosed in curly braces. If the method is <em>abstract</em> (see
<a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>), the implementation is omitted, and the
method body is replaced with a single semicolon.</p>
<p><a data-primary="generic methods" data-type="indexterm" id="idm45927754578768"/>The signature of a method may also include type variable
declarations—such methods are known as <em>generic methods</em>. Generic
methods and type variables are discussed in <a data-type="xref" href="ch04.xhtml#javanut8-CHP-4">Chapter 4</a>.</p>
<p>Here are some example method definitions, which begin with the signature
and are followed by the method body:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// This method is passed an array of strings and has no return value.</code><code class="w"/>
<code class="c1">// All Java programs have an entry point with this name and signature.</code><code class="w"/>
<code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">args</code><code class="p">.</code><code class="na">length</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Hello "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">args</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code class="p">);</code><code class="w"/>
<code class="w">     </code><code class="k">else</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Hello world"</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/>

<code class="c1">// This method is passed two double arguments and returns a double.</code><code class="w"/>
<code class="kd">static</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="nf">distanceFromOrigin</code><code class="p">(</code><code class="kt">double</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="n">y</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="k">return</code><code class="w"> </code><code class="n">Math</code><code class="p">.</code><code class="na">sqrt</code><code class="p">(</code><code class="n">x</code><code class="o">*</code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">y</code><code class="o">*</code><code class="n">y</code><code class="p">);</code><code class="w"/>
<code class="p">}</code><code class="w"/>

<code class="c1">// This method is abstract which means it has no body.</code><code class="w"/>
<code class="c1">// Note that it may throw exceptions when invoked.</code><code class="w"/>
<code class="kd">protected</code><code class="w"> </code><code class="kd">abstract</code><code class="w"> </code><code class="n">String</code><code class="w"> </code><code class="nf">readText</code><code class="p">(</code><code class="n">File</code><code class="w"> </code><code class="n">f</code><code class="p">,</code><code class="w"> </code><code class="n">String</code><code class="w"> </code><code class="n">encoding</code><code class="p">)</code><code class="w"/>
<code class="w">    </code><code class="kd">throws</code><code class="w"> </code><code class="n">FileNotFoundException</code><code class="p">,</code><code class="w"> </code><code class="n">UnsupportedEncodingException</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="modifiers" data-secondary="method" data-type="indexterm" id="idm45927754495488"/><a data-primary="return statements" data-type="indexterm" id="idm45927754440832"/><a data-primary="return types" data-secondary="specified by type in method signature" data-type="indexterm" id="idm45927754440192"/><em><code>modifiers</code></em> are zero or more special modifier keywords, separated from
each other by spaces. A method might be declared with the <code>public</code> and
<code>static</code> modifiers, for example. The allowed modifiers and their
meanings are described in the next <span class="keep-together">section</span>.</p>
<p>The <em><code>type</code></em> in a method signature specifies the return type of the
method. <a data-primary="void keyword" data-type="indexterm" id="idm45927754435824"/>If the method does not return a value, <em><code>type</code></em> must be <code>void</code>.
If a method is declared with a non-<code>void</code> return type, it must include
a <code>return</code> statement that returns a value of (or is convertible to) the
declared type.</p>
<p><a data-primary="constructors" data-secondary="definition of term" data-type="indexterm" id="idm45927754433072"/>A <em>constructor</em> is a block of code, similar to a method, that is used to
initialize newly created objects. As we’ll see in
<a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>, constructors are defined in a very
similar way to methods, except that their signatures do not include this
<em><code>type</code></em> specification and must be named the same as the class.</p>
<p><a data-primary="names" data-secondary="of methods" data-secondary-sortas="methods" data-type="indexterm" id="idm45927754429664"/>The <em><code>name</code></em> of a method follows the specification of its modifiers and
type. Method names, like variable names, are Java identifiers and,
like all Java identifiers, may contain letters in any language
represented by the Unicode character set. It is legal, and often quite
useful, to define more than one method with the same name, as long as
each version of the method has a different parameter list. <a data-primary="method overloading" data-type="indexterm" id="idm45927754427712"/>Defining
multiple methods with the same name is called <em>method overloading</em>.</p>
<div data-type="tip"><h6>Tip</h6>
<p>Unlike some other languages, Java does not have anonymous methods.
Instead, Java 8 introduces lambda expressions, which are similar to
anonymous methods, but which the Java runtime automatically converts to
a suitable named method—see <a data-type="xref" href="#javanut8-CHP-2-SECT-7.5a">“Lambda Expressions”</a>
for more details.</p>
</div>
<p><a data-primary="I/O (input/output)" data-secondary="method names" data-type="indexterm" id="idm45927754424272"/><a data-primary="println()" data-type="indexterm" id="idm45927754423296"/><a data-primary="System.out.println()" data-type="indexterm" id="idm45927754422624"/>For example, the <code>System.out.println()</code> method we’ve seen already is
an overloaded method. One method by this name prints a string, and other
methods by the same name print the values of the various primitive
types. The Java compiler decides which method to call based on the type
of the argument passed to the method.</p>
<p><a data-primary="() (parentheses)" data-secondary="enclosing method parameter list" data-type="indexterm" id="idm45927754421120"/><a data-primary="methods" data-secondary="parameter list" data-type="indexterm" id="idm45927754420176"/>When you are defining a method, the name of the method is always
followed by the method’s parameter list, which must be enclosed in
parentheses. The parameter list defines zero or more arguments that are
passed to the method. The parameter specifications, if there are any,
each consist of a type and a name and the specifications are separated from each other by
commas (if there are multiple parameters). When a method is invoked, the
argument values it is passed must match the number, type, and order of
the parameters specified in this method signature line. The values
passed need not have exactly the same type as specified in the
signature, but they must be convertible to those types without casting.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>When a Java method expects no arguments, its parameter list is simply
<code>()</code>, not <code>(void)</code>. Java does not regard <code>void</code> as a type—C and C++
programmers in particular should pay heed.</p>
</div>
<p>Java allows the programmer to define and invoke methods that accept a
variable number of arguments, using a syntax known colloquially as
<em>varargs</em>. Varargs are covered in detail later in this chapter.</p>
<p class="pagebreak-before"><a data-primary="checked exceptions" data-secondary="in throws clause of method signature" data-secondary-sortas="throws clause of method signature" data-type="indexterm" id="idm45927754348880"/><a data-primary="exceptions" data-secondary="checked/unchecked" data-type="indexterm" id="idm45927754347792"/><a data-primary="throw statements" data-secondary="methods using to throw checked exceptions" data-type="indexterm" id="idm45927754346944"/><a data-primary="throws clause (method signature)" data-type="indexterm" id="idm45927754346032"/>The final part of a method signature is the <code>throws</code> clause, which is
used to list the <em>checked exceptions</em> that a method can throw. Checked
exceptions are a category of exception classes that must be listed in
the <code>throws</code> clauses of methods that can throw them.</p>
<p>If a method uses the <code>throw</code> statement to throw a checked exception, the method must declare that it can throw that exception.
The method must also declare that it can throw in the case that it calls some other method that throws a checked exception, and the calling method does not explicitly catch that exception.</p>
<p>If a method can throw one or more checked exceptions, it specifies this by placing the <code>throws</code> keyword after the argument list and following it by the name of the exception class or classes it can throw.
If a method does not throw any checked exceptions, it does not use the
<code>throws</code> keyword. If a method throws more than one type of checked exception,
separate the names of the exception classes from each other with commas.
More on this in a bit.<a data-startref="ix_ch02-asciidoc44" data-type="indexterm" id="idm45927754341888"/><a data-startref="ix_ch02-asciidoc43" data-type="indexterm" id="idm45927754341184"/><a data-startref="ix_ch02-asciidoc42" data-type="indexterm" id="idm45927754340512"/><a data-startref="ix_ch02-asciidoc41" data-type="indexterm" id="idm45927754339840"/></p>
</div></section>
<section data-pdf-bookmark="Method Modifiers" data-type="sect2"><div class="sect2" id="javanut8-CHP-2-SECT-6.2">
<h2>Method Modifiers</h2>
<p><a data-primary="methods" data-secondary="modifiers" data-type="indexterm" id="idm45927754337760"/><a data-primary="modifiers" data-secondary="method" data-type="indexterm" id="idm45927754336784"/>The modifiers of a method consist of zero or more modifier keywords
such as <code>public</code>, <code>static</code>, or <code>abstract</code>. Here is a list of allowed
modifiers and their meanings:</p>
<dl>
<dt><code>abstract</code></dt>
<dd>
<p><a data-primary="; (semicolon)" data-secondary="in abstract methods" data-secondary-sortas="abstract methods" data-type="indexterm" id="idm45927754332704"/><a data-primary="abstract classes" data-type="indexterm" id="idm45927754331232"/><a data-primary="abstract methods" data-type="indexterm" id="idm45927754330560"/>An <code>abstract</code> method is a specification without an implementation. The curly braces and Java statements that would normally comprise the body of the method are replaced with a single semicolon. A class that includes an <code>abstract</code> method must itself be declared <code>abstract</code>. Such a class is incomplete and cannot be instantiated (see <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>).</p>
</dd>
<dt><code>default</code></dt>
<dd>
<p><a data-primary="default methods" data-type="indexterm" id="idm45927754326496"/>A <code>default</code> method may be defined only on an
interface. All classes implementing the interface receive the default method
unless they override it directly. Implementing interfaces in classes is explored
thoroughly in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>.</p>
</dd>
<dt><code>final</code></dt>
<dd>
<p><a data-primary="final modifier" data-secondary="methods" data-type="indexterm" id="idm45927754323104"/>A <code>final</code> method may not be overridden or hidden by a subclass, which makes it amenable to compiler optimizations that are not possible for regular methods. All <code>private</code> methods are implicitly <code>final</code>, as are all methods of any class that is declared <code>final</code>.</p>
</dd>
<dt><code>native</code></dt>
<dd>
<p><a data-primary="C/C++" data-secondary="using native methods to interface Java code to C/C++ libraries" data-type="indexterm" id="idm45927754318928"/><a data-primary="methods" data-secondary="native" data-type="indexterm" id="idm45927754317984"/><a data-primary="native methods" data-type="indexterm" id="idm45927754317040"/>The <code>native</code> modifier specifies that the method implementation is written in some “native” language such as C and is provided externally to the Java program. Like <code>abstract</code> methods, <code>native</code> methods have no body: the curly braces are replaced with a semicolon.</p>
</dd>
</dl>
<aside class="pagebreak-before less_space" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45927754314576">
<h5>Implementing native Methods</h5>
<p><a data-primary="native methods" data-secondary="implementation" data-type="indexterm" id="idm45927754312736"/>When Java was first released, <code>native</code> methods were sometimes used for
efficiency reasons. That is almost never necessary today. Instead,
<code>native</code> methods are used to interface Java code to existing libraries
written in C or C++. <code>native</code> methods are implicitly
platform-dependent, and the procedure for linking the implementation
with the Java class that declares the method is dependent on the
implementation of the Java virtual machine. <code>native</code> methods are not covered in
this book but more information can be found in the <a href="https://oreil.ly/0eYNr">Java Native Interface
Specification</a>.</p>
</div></aside>
<dl>
<dt><code>public</code>, <code>protected</code>, <code>private</code></dt>
<dd>
<p><a data-primary="access modifiers" data-type="indexterm" id="idm45927754306416"/><a data-primary="modifiers" data-secondary="access" data-type="indexterm" id="idm45927754305712"/><a data-primary="private modifier" data-secondary="methods" data-type="indexterm" id="idm45927754304768"/><a data-primary="protected modifier" data-secondary="methods" data-type="indexterm" id="idm45927754303824"/><a data-primary="public modifier" data-secondary="methods" data-type="indexterm" id="idm45927754302880"/>These access modifiers specify whether and where a method can be used outside of the class that defines it. These very important modifiers are explained in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>.</p>
</dd>
<dt><code>static</code></dt>
<dd>
<p><a data-primary="class methods" data-secondary="static modifier" data-type="indexterm" id="idm45927754299696"/><a data-primary="static methods" data-type="indexterm" id="idm45927754298720"/>A method declared <code>static</code> is a <em>class method</em> associated with the class itself rather than with an instance of the class (we cover this in more detail in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>).</p>
</dd>
<dt><code>strictfp</code></dt>
<dd>
<p><a data-primary="floating-point types" data-secondary="strictfp modifier for methods" data-type="indexterm" id="idm45927754294336"/><a data-primary="IEEE-754 floating-point arithmetic standard" data-type="indexterm" id="idm45927754293344"/><a data-primary="Java 17" data-secondary="strictfp modifier" data-type="indexterm" id="idm45927754292576"/><a data-primary="strictfp modifier" data-type="indexterm" id="idm45927754291632"/>The <code>fp</code> in this awkwardly named, rarely used modifier stands for
“floating point.” For performance reasons, in Java 1.2 the language allowed for
subtle deviation from the strict IEEE-754 standard when using certain
floating-point acceleration hardware. The <code>strictfp</code> keyword was added to force
Java to strictly obey the standard. These hardware considerations haven’t been
relevant for many years, so Java 17 returns the default to the IEEE standard.
Use of the <code>strictfp</code> keyword will emit a warning, as it is no longer necessary.</p>
</dd>
<dt><code>synchronized</code></dt>
<dd>
<p><a data-primary="class methods" data-secondary="synchronized modifier" data-type="indexterm" id="idm45927754288320"/><a data-primary="synchronized methods" data-type="indexterm" id="idm45927754287120"/>The <code>synchronized</code> modifier makes a method threadsafe. Before a thread can invoke a <code>synchronized</code> method, it must obtain a lock on the method’s class (for <code>static</code> methods) or on the relevant instance of the class (for non-<code>static</code> methods). This prevents two threads from executing the method at the same time.</p>
</dd>
</dl>
<p>The <code>synchronized</code> modifier is an implementation detail (because methods
can make themselves threadsafe in other ways) and is not formally part
of the method specification or API. Good documentation specifies
explicitly whether a method is threadsafe; you should not rely on the
presence or absence of the <code>synchronized</code> keyword when working with
multithreaded programs.</p>
<div data-type="tip"><h6>Tip</h6>
<p>Annotations are an interesting special case (see
<a data-type="xref" href="ch04.xhtml#javanut8-CHP-4">Chapter 4</a> for more on annotations)—they can be
thought of as a halfway house between a method modifier and additional
supplementary type information.</p>
</div>
</div></section>
<section data-pdf-bookmark="Checked and Unchecked Exceptions" data-type="sect2"><div class="sect2" id="javanut8-CHP-2-SECT-6.3">
<h2>Checked and Unchecked Exceptions</h2>
<p><a data-primary="checked exceptions" data-type="indexterm" id="ix_ch02-asciidoc45"/><a data-primary="exceptions" data-secondary="checked/unchecked" data-type="indexterm" id="ix_ch02-asciidoc46"/><a data-primary="methods" data-secondary="checked/unchecked exceptions" data-type="indexterm" id="ix_ch02-asciidoc47"/>The Java exception-handling scheme distinguishes between two types of
exceptions, known as <em>checked</em> and <em>unchecked</em> exceptions.</p>
<p>The distinction between checked and unchecked exceptions has to do with
the circumstances under which the exceptions could be thrown. Checked
exceptions arise in specific, well-defined circumstances, and very often
are conditions from which the application may be able to partially or
fully recover.</p>
<p>For example, consider some code that might find its configuration file
in one of several possible directories. If we attempt to open the file
from a directory it isn’t present in, then a <code>FileNotFoundException</code>
will be thrown. In our example, we want to catch this exception and move
on to try the next possible location for the file. In other words,
although the file not being present is an exceptional condition, it is
one from which we can recover, and it is an understood and anticipated
failure.</p>
<p><a data-primary="unchecked exceptions" data-type="indexterm" id="idm45927754273440"/>On the other hand, in the Java environment there are a set of failures
that cannot easily be predicted or anticipated, due to such things as
runtime conditions or abuse of library code. There is no good way to
predict an <code>OutOfMemoryError</code>, for example, and any method that uses
objects or arrays can throw a <code>NullPointerException</code> if it is passed an
invalid <code>null</code> argument.</p>
<p>These are the unchecked exceptions—and practically any method can throw
an unchecked exception at essentially any time. They are the Java
environment’s version of Murphy’s law: “Anything that can go wrong, will
go wrong.” Recovery from an unchecked exception is usually very
difficult, if not impossible—simply due to their sheer unpredictability.</p>
<p><a data-primary="Error class" data-type="indexterm" id="idm45927754270576"/><a data-primary="exceptions" data-secondary="Exception class" data-type="indexterm" id="idm45927754269648"/><a data-primary="Throwable objects" data-type="indexterm" id="idm45927754268704"/>To figure out whether an exception is checked or unchecked, remember
that exceptions are <code>Throwable</code> objects and that these fall into
two main categories, specified by the <code>Error</code> and <code>Exception</code>
subclasses. Any exception object that is an <code>Error</code> is unchecked. <a data-primary="RuntimeException" data-type="indexterm" id="idm45927754266064"/>There
is also a subclass of <code>Exception</code> called <code>RuntimeException</code>—and any
subclass of <code>RuntimeException</code> is also an unchecked exception. All other
exceptions are checked exceptions.</p>
<section data-pdf-bookmark="Working with checked exceptions" data-type="sect3"><div class="sect3" id="idm45927754263920">
<h3>Working with checked exceptions</h3>
<p><a data-primary="checked exceptions" data-secondary="working with" data-type="indexterm" id="idm45927754262480"/>Java has different rules for working with checked and unchecked
exceptions. <a data-primary="throws clause (method signature)" data-type="indexterm" id="idm45927754261376"/>If you write a method that throws a checked exception, you
must use a <code>throws</code> clause to declare the exception in the method
signature. The Java compiler checks to make sure you have declared them
in method signatures and produces a compilation error if you have not
(that’s why they’re called “checked exceptions”).</p>
<p>Even if you never throw a checked exception yourself, sometimes you must
use a <code>throws</code> clause to declare a checked exception. If your method
calls a method that can throw a checked exception, you must either
include exception-handling code to handle that exception or use <code>throws</code>
to declare that your method can also throw that exception.</p>
<p><a data-primary="URL class" data-type="indexterm" id="idm45927754258272"/>For example, the following method tries to estimate the size of a web
page—it uses the standard <code>java.net</code> libraries and the class <code>URL</code>
(we’ll meet these in <a data-type="xref" href="ch10.xhtml#javanut8-CHP-10">Chapter 10</a>) to contact the
web page. <a data-primary="IOException objects" data-type="indexterm" id="idm45927754255344"/><a data-primary="java.io.IOException objects" data-type="indexterm" id="idm45927754254672"/>It uses methods and constructors that can throw various types of <code>java.io.IOException</code> objects, so it declares this fact with a
<code>throws</code> clause:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="nf">estimateHomepageSize</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">host</code><code class="p">)</code><code class="w"> </code><code class="kd">throws</code><code class="w"> </code><code class="n">IOException</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="n">URL</code><code class="w"> </code><code class="n">url</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">URL</code><code class="p">(</code><code class="s">"htp://"</code><code class="o">+</code><code class="w"> </code><code class="n">host</code><code class="w"> </code><code class="o">+</code><code class="s">"/"</code><code class="p">);</code><code class="w"/>
<code class="w">    </code><code class="k">try</code><code class="w"> </code><code class="p">(</code><code class="n">InputStream</code><code class="w"> </code><code class="n">in</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">url</code><code class="p">.</code><code class="na">openStream</code><code class="p">())</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">        </code><code class="k">return</code><code class="w"> </code><code class="n">in</code><code class="p">.</code><code class="na">available</code><code class="p">();</code><code class="w"/>
<code class="w">    </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>In fact, the preceding code has a bug: we’ve misspelled the protocol
specifier—there’s no such protocol as <em>htp://</em>. <a data-primary="MalformedURLException" data-type="indexterm" id="idm45927754181584"/>So, the
<code>estimateHomepageSize()</code> method will always fail with a
<code>MalformedURLException</code>.</p>
<p>How do you know if the method you are calling can throw a checked
exception? You can look at its method signature to find out. Or, failing
that, the Java compiler will tell you (by reporting a compilation error)
if you’ve called a method whose exceptions you must handle or declare.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="Variable-Length Argument Lists" data-type="sect2"><div class="sect2" id="idm45927754179440">
<h2>Variable-Length Argument Lists</h2>
<p><a data-primary="methods" data-secondary="variable-length argument lists" data-type="indexterm" id="idm45927754177872"/><a data-primary="varargs (variable-length argument) methods" data-type="indexterm" id="idm45927754176704"/>Methods may be declared to accept, and may be invoked with, variable
numbers of arguments. Such methods are commonly known as <em>varargs</em>
methods. <a data-primary="format()" data-secondary="String class" data-type="indexterm" id="idm45927754175552"/><a data-primary="java.lang.reflect" data-type="indexterm" id="idm45927754174544"/><a data-primary="printf()" data-type="indexterm" id="idm45927754173872"/><a data-primary="Reflection API" data-type="indexterm" id="idm45927754173200"/><a data-primary="System.out.printf()" data-type="indexterm" id="idm45927754172528"/>The “print formatted” method <code>System.out.printf()</code> as well
as the related <code>format()</code> methods of <code>String</code> use varargs, as do a
number of important methods from the Reflection API of
<code>java.lang.reflect</code>.</p>
<p><a data-primary="… (ellipses)" data-secondary="in variable-length argument lists" data-secondary-sortas="variable-length argument lists" data-type="indexterm" id="idm45927754169872"/>To declare a variable-length argument list, follow the type of the
last argument to the method with an ellipsis (<code>...</code>), indicating that
this last argument can be repeated zero or more times. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="nf">max</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">first</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="p">...</code><code class="w"> </code><code class="n">rest</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="cm">/* body omitted for now */</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>Varargs methods are handled purely by the compiler. They operate by
converting the variable number of arguments into an array. To the Java
runtime, the <code>max()</code> method is indistinguishable from this one:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="nf">max</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">first</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">rest</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="cm">/* body omitted for now */</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>To convert a varargs signature to the “real” signature, simply replace
<code>...</code> with <code>[ ]</code>. Remember that only one ellipsis can appear in a
parameter list, and it may only appear on the last parameter in the
list.</p>
<p>Let’s flesh out the <code>max()</code> example a little:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="nf">max</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">first</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="p">...</code><code class="w"> </code><code class="n">rest</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">max</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">first</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="n">rest</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="c1">// legal because rest is actually an array</code><code class="w"/>
<code class="w">        </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">i</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="n">max</code><code class="p">)</code><code class="w"> </code><code class="n">max</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">i</code><code class="p">;</code><code class="w"/>
<code class="w">    </code><code class="p">}</code><code class="w"/>
<code class="w">    </code><code class="k">return</code><code class="w"> </code><code class="n">max</code><code class="p">;</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>This <code>max()</code> method is declared with two arguments. The first is just a
regular <code>int</code> value. The second, however, may be repeated zero or more
times. All of the following are legal invocations of <code>max()</code>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">max</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code><code class="w"/>
<code class="n">max</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">)</code><code class="w"/>
<code class="n">max</code><code class="p">(</code><code class="mi">16</code><code class="p">,</code><code class="w"> </code><code class="mi">8</code><code class="p">,</code><code class="w"> </code><code class="mi">4</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">1</code><code class="p">)</code><code class="w"/></pre>
<p>Because varargs methods are compiled into methods that expect an array
of arguments, invocations of those methods are compiled to include code
that creates and initializes such an array. So the call <code>max(1,2,3)</code> is
compiled to this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">max</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="w"> </code><code class="p">})</code><code class="w"/></pre>
<p>In fact, if you already have method arguments stored in an array, it is
perfectly legal for you to pass them to the method that way, instead of
writing them out individually. You can treat any <code>...</code> argument as if it
were declared as an array. The converse is not true, however: you can use varargs method invocation syntax only when the method is actually
declared as a varargs method using an ellipsis<a data-startref="ix_ch02-asciidoc47" data-type="indexterm" id="idm45927753894192"/><a data-startref="ix_ch02-asciidoc46" data-type="indexterm" id="idm45927753893584"/><a data-startref="ix_ch02-asciidoc45" data-type="indexterm" id="idm45927753892944"/>.<a data-startref="ix_ch02-asciidoc40" data-type="indexterm" id="idm45927753892144"/><a data-startref="ix_ch02-asciidoc39" data-type="indexterm" id="idm45927753891440"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Introduction to Classes and Objects" data-type="sect1"><div class="sect1" id="idm45927754178816">
<h1>Introduction to Classes and Objects</h1>
<p><a data-primary="class(es)" data-type="indexterm" id="ix_ch02-asciidoc48"/><a data-primary="objects" data-secondary="classes and" data-type="indexterm" id="ix_ch02-asciidoc49"/><a data-primary="syntax, Java" data-secondary="classes and objects" data-type="indexterm" id="ix_ch02-asciidoc50"/>Now that we have introduced operators, expressions, statements, and
methods, we can finally talk about classes. A <em>class</em> is a named collection of fields that holds data values and methods that operate on
those values. Classes are just one of five reference types supported by
Java, but they are the most important type. Classes are thoroughly
documented in a chapter of their own (<a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>).
We introduce them here, however, because they are the next higher level
of syntax after methods, and because the rest of this chapter requires a
basic familiarity with the concept of a class and the basic syntax for
defining a class, instantiating it, and using the resulting <em>object</em>.</p>
<p>The most important thing about classes is that they define new data types. For example, you might define a class named <code>Account</code> to represent a bank account that holds a balance. The class would define fields to hold data items such as the balance (perhaps represented as a <code>double</code>), account holder’s name and address (as <code>String</code> instances) and methods to manipulate and operate on the account. The <code>Account</code> class is a new data type.</p>
<p>When discussing data types, it is important to distinguish between the
data type itself and the values the data type represents. <code>char</code> is a
data type: it represents Unicode characters. But a <code>char</code> value
represents a single specific character. A class is a data type; <a data-primary="objects" data-secondary="defining" data-type="indexterm" id="idm45927753833232"/>a class
value is called an <em>object</em>. We use the name class because each class
defines a type (or kind, or species, or class) of objects. The <code>Account</code>
class is a data type that represents bank accounts, while an <code>Account</code>
object represents a single specific account. As you might imagine,
classes and their objects are closely linked. In the sections that
follow, we will discuss both.</p>
<section data-pdf-bookmark="Defining a Class" data-type="sect2"><div class="sect2" id="idm45927753830656">
<h2>Defining a Class</h2>
<p><a data-primary="class(es)" data-secondary="defining" data-type="indexterm" id="idm45927753829216"/>Here is a possible definition of the <code>Account</code> class we have been
discussing:</p>
<pre data-code-language="java" data-type="programlisting"><code class="cm">/** Represents a customer bank account */</code><code class="w"/>
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Account</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">     </code><code class="kd">public</code><code class="w"> </code><code class="n">String</code><code class="w"> </code><code class="n">name</code><code class="p">;</code><code class="w"/>
<code class="w">     </code><code class="kd">public</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="n">balance</code><code class="p">;</code><code class="w"/>
<code class="w">     </code><code class="kd">public</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">accountId</code><code class="p">;</code><code class="w"/>

<code class="w">     </code><code class="c1">// A constructor that initializes the fields</code><code class="w"/>
<code class="w">     </code><code class="kd">public</code><code class="w"> </code><code class="nf">Account</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">name</code><code class="p">,</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="n">openingBalance</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">id</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">         </code><code class="k">this</code><code class="p">.</code><code class="na">name</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">name</code><code class="p">;</code><code class="w"/>
<code class="w">         </code><code class="k">this</code><code class="p">.</code><code class="na">balance</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">openingBalance</code><code class="p">;</code><code class="w"/>
<code class="w">         </code><code class="k">this</code><code class="p">.</code><code class="na">accountId</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">id</code><code class="p">;</code><code class="w"/>
<code class="w">     </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>This class definition is stored in a file named <em>Account.java</em> and
compiled to a file named <em>Account.class</em>, where it is available for use by
Java programs and other classes. This class definition is provided here
for completeness and to provide context, but don’t expect to understand
all the details just yet; most of <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a> is
devoted to the topic of defining classes.</p>
<p>Keep in mind that you don’t have to define every class you want to use
in a Java program. The Java platform includes thousands of predefined
classes that are guaranteed to be available on every computer that runs
that given version of Java.</p>
</div></section>
<section data-pdf-bookmark="Creating an Object" data-type="sect2"><div class="sect2" id="idm45927753756272">
<h2>Creating an Object</h2>
<p><a data-primary="objects" data-secondary="creating" data-type="indexterm" id="idm45927753754864"/>Now that we have defined the <code>Account</code> class as a new data type, we can
use the following line to declare a variable that holds an <code>Account</code>
object:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="p">;</code><code class="w"/></pre>
<p>Declaring a variable to hold an <code>Account</code> object does not create the object
itself, however. To actually create an object, you must use the <code>new</code>
operator. This keyword is followed by the object’s class (i.e., its
type) and an optional argument list in parentheses. These arguments are
passed to the constructor for the class, which initializes internal
fields in the new object:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Declare variable a and store a reference to new Account object</code><code class="w"/>
<code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"Jason Clark"</code><code class="p">,</code><code class="w"> </code><code class="mf">0.0</code><code class="p">,</code><code class="w"> </code><code class="mi">42</code><code class="p">);</code><code class="w"/>

<code class="c1">// Create some other objects as well</code><code class="w"/>
<code class="c1">// An object that represents the current time</code><code class="w"/>
<code class="n">LocalDateTime</code><code class="w"> </code><code class="n">d</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">LocalDateTime</code><code class="p">();</code><code class="w"/>

<code class="c1">// A HashSet object to hold a set of strings</code><code class="w"/>
<code class="n">Set</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code><code class="w"> </code><code class="n">words</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">HashSet</code><code class="o">&lt;&gt;</code><code class="p">();</code><code class="w"/></pre>
<p><a data-primary="new operator" data-secondary="creating new objects" data-type="indexterm" id="idm45927753622160"/>The <code>new</code> keyword is by far the most common way to create objects in
Java. A few other ways are also worth mentioning. First, classes that
meet certain criteria are so important that Java defines special literal
syntax for creating objects of those types (as we discuss later in this
section). Second, Java supports a mechanism that allows
programs to load classes and create instances of those classes
dynamically. See <a data-type="xref" href="ch11.xhtml#javanut8-CHP-11">Chapter 11</a> for more details.
Finally, objects can also be created by deserializing them. <a data-primary="java.io.ObjectInputStream class" data-type="indexterm" id="idm45927753602880"/><a data-primary="ObjectInputStream class" data-type="indexterm" id="idm45927753602240"/>An object
that has had its state saved, or serialized, usually to a file, can be
recreated using the <code>java.io.ObjectInputStream</code> class.</p>
</div></section>
<section data-pdf-bookmark="Using an Object" data-type="sect2"><div class="sect2" id="idm45927753600944">
<h2>Using an Object</h2>
<p><a data-primary="objects" data-secondary="using" data-type="indexterm" id="idm45927753599856"/>Now that we’ve seen how to define classes and instantiate them by
creating objects, we need to look at the Java syntax that allows us to
use those objects. Recall that a class defines a collection of fields
and methods. Each object has its own copies of those fields and has
access to those methods. We use the dot character (.) to access the
named fields and methods of an object. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"Jason"</code><code class="p">,</code><code class="w"> </code><code class="mf">0.0</code><code class="p">,</code><code class="w"> </code><code class="mi">42</code><code class="p">);</code><code class="w">  </code><code class="c1">// Create an object</code><code class="w"/>

<code class="kt">double</code><code class="w"> </code><code class="n">b</code><code class="w">  </code><code class="o">=</code><code class="w"> </code><code class="n">a</code><code class="p">.</code><code class="na">balance</code><code class="p">;</code><code class="w">                 </code><code class="c1">// Read a field of the object</code><code class="w"/>
<code class="n">a</code><code class="p">.</code><code class="na">balance</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">a</code><code class="p">.</code><code class="na">balance</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="mf">10.0</code><code class="p">;</code><code class="w">          </code><code class="c1">// Set the value of a field</code><code class="w"/>

<code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="w">  </code><code class="o">=</code><code class="w"> </code><code class="n">a</code><code class="p">.</code><code class="na">toString</code><code class="p">();</code><code class="w">              </code><code class="c1">// Access a method of the object</code><code class="w"/></pre>
<p>This syntax is very common when programming in object-oriented languages, and
Java is no exception. Note, in particular, the expression <code>a.toString()</code>. This
tells the Java compiler to look up a method named <code>toString</code> (which is defined
by the parent <code>Object</code> class of <code>Account</code>) and use that method to perform a
computation on the object <code>a</code>. We’ll cover the details of this operation in
<a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>.</p>
</div></section>
<section data-pdf-bookmark="Object Literals" data-type="sect2"><div class="sect2" id="idm45927753495344">
<h2>Object Literals</h2>
<p><a data-primary="objects" data-secondary="literals" data-type="indexterm" id="ix_ch02-asciidoc51"/>In our discussion of primitive types, we saw that each primitive type
has a literal syntax for including values of the type literally into the
text of a program. Java also defines a literal syntax for a few special
reference types, as described next.</p>
<section data-pdf-bookmark="String literals" data-type="sect3"><div class="sect3" id="javanut8-CHP-2-SECT-7.5">
<h3>String literals</h3>
<p><a data-primary="string literals" data-type="indexterm" id="idm45927753490560"/><a data-primary="strings" data-secondary="String class" data-type="indexterm" id="idm45927753489856"/>The <code>String</code> class represents text as a string of characters. Because
programs usually communicate with their users through the written word,
the ability to manipulate strings of text is quite important in any
programming language. In Java, strings are objects; the data type used
to represent text is the <code>String</code> class. Modern Java programs usually
use more string data than anything else.</p>
<p>Accordingly, because strings are such a fundamental data type, Java
allows you to include text literally in programs in one of two formats.
<a data-primary="&quot; (quotes, double)" data-secondary="in string literals" data-secondary-sortas="string literals" data-type="indexterm" id="idm45927753487536"/>Traditional strings are placed between double-quote (<code>"</code>) characters, or a newer<a data-primary="&quot;&quot;&quot; (quotes, double), enclosing text blocks" data-type="indexterm" id="idm45927753454128"/><a data-primary="text blocks" data-type="indexterm" id="idm45927753453520"/>
text block form may be used between sequences of three double-quote characters
(<code>"""</code>).</p>
<p>A traditional double-quoted string looks like this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">name</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"David"</code><code class="p">;</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Hello, "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">name</code><code class="p">);</code><code class="w"/></pre>
<p><a data-primary="' (quotes, single)" data-secondary="in char literals" data-secondary-sortas="char literals" data-type="indexterm" id="idm45927753412784"/>Don’t confuse the double-quote characters that surround string literals
with the single-quote (or apostrophe) characters that surround <code>char</code>
literals.</p>
<p><a data-primary="escape sequences" data-secondary="in string literals" data-secondary-sortas="string literals" data-type="indexterm" id="idm45927753431088"/>String literals of either form can contain any of the escape sequences
<code>char</code> literals can (see <a data-type="xref" href="#javanut8-CHP-2-TABLE-2">Table 2-2</a>).
Traditional
double-quoted strings require escape sequences to embed double-quote
characters or newlines. They also must consist of a single line in our Java
code. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">story</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"\t\"How can you stand it?\" he asked sarcastically.\n"</code><code class="p">;</code><code class="w"/></pre>
<p>The primary use for text blocks instead of traditional strings is representing
multi-line strings. Text blocks start with <code>"""</code>, followed by a newline, and end
when a concluding <code>"""</code> is reached.</p>
<p>Along with their support for multiline strings, text blocks also allow us to
use double quotes without escaping. This often makes text blocks much easier to
read, particularly when expressing another programming language (such as SQL or
HTML) in our Java code.</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">html</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"""</code>
<code class="s">              &lt;html&gt;</code>
<code class="s">                &lt;body class="main-body"&gt;</code>
<code class="s">                  ...</code>
<code class="s">                &lt;/body&gt;</code>
<code class="s">              &lt;/html&gt;"""</code><code class="p">;</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">html</code><code class="p">);</code><code class="w"/></pre>
<p>Examining the output from this code reveals one more interesting fact about text
blocks regarding indentation. The above prints with <code>&lt;html&gt;</code> in the first column
of the output with no leading spaces.</p>
<p>The compiler finds the smallest indentation across the lines of our text
block and strips that many leading spaces from each line. If this is not
desired, the placement of the closing <code>"""</code> also participates in choosing the
indent. We could retain the full white space with:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">html</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"""</code>
<code class="s">              &lt;html&gt;</code>
<code class="s">                &lt;body class="main-body"&gt;</code>
<code class="s">                  ...</code>
<code class="s">                &lt;/body&gt;</code>
<code class="s">              &lt;/html&gt;</code>
<code class="s">"""</code><code class="p">;</code><code class="w">  </code><code class="c1">// As smallest indent (0), this leaves the text block as written</code><code class="w"/>

<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">html</code><code class="p">);</code><code class="w"/></pre>
<p>Before text blocks were
<a data-primary="+ (plus sign)" data-secondary="string concatenation operator" data-type="indexterm" id="idm45927753299184"/><a data-primary="string concatenation operator (+)" data-type="indexterm" id="idm45927753298336"/>introduced in Java, it was common to break up string literals for easier reading
using <code>+</code> to concatenate them. Along with existing in many code bases, this
remains a valid technique if your string shouldn’t include newlines.</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// This is illegal</code><code class="w"/>
<code class="c1">// Traditional string literals cannot break across lines.</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"This is a test of the</code>
<code class="s">            emergency broadcast system"</code><code class="p">;</code><code class="w"/>

<code class="c1">// Common before text blocks</code><code class="w"/>
<code class="c1">// Still useful if avoiding newlines in the text</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"This is a test of the "</code><code class="w"> </code><code class="o">+</code><code class="w"/>
<code class="w">           </code><code class="s">"emergency broadcast system"</code><code class="p">;</code><code class="w"/></pre>
<p>Literals, whether traditional or text blocks, are concatenated when your
program is compiled, not when it is run, so you do not need to worry about any
kind of performance penalty.</p>
</div></section>
<section data-pdf-bookmark="Type literals" data-type="sect3"><div class="sect3" id="idm45927753491808">
<h3>Type literals</h3>
<p><a data-primary="Class class" data-type="indexterm" id="idm45927753221904"/><a data-primary="Class object" data-secondary="type literals" data-type="indexterm" id="idm45927753221040"/><a data-primary="type literals" data-type="indexterm" id="idm45927753220096"/>The second type that supports its own special object literal syntax is
the class named <code>Class</code>. Instances of the <code>Class</code> class represent a
Java data type and contain metadata about the type that is referred to.
To include a <code>Class</code> object literally in a Java program, follow the name
of any data type with <code>.class</code>. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Class</code><code class="o">&lt;?&gt;</code><code class="w"> </code><code class="n">typeInt</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kt">int</code><code class="p">.</code><code class="na">class</code><code class="p">;</code><code class="w"/>
<code class="n">Class</code><code class="o">&lt;?&gt;</code><code class="w"> </code><code class="n">typeIntArray</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="p">.</code><code class="na">class</code><code class="p">;</code><code class="w"/>
<code class="n">Class</code><code class="o">&lt;?&gt;</code><code class="w"> </code><code class="n">typeAccount</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">Account</code><code class="p">.</code><code class="na">class</code><code class="p">;</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="The null reference" data-type="sect3"><div class="sect3" id="idm45927753183584">
<h3>The null reference</h3>
<p><a data-primary="null reference" data-type="indexterm" id="idm45927753151632"/><a data-primary="reference types" data-secondary="null" data-type="indexterm" id="idm45927753150928"/>The <code>null</code> keyword is a special literal value that is a reference to
nothing, or an absence of a reference. The <code>null</code> value is unique
because it is a member of every reference type. You can assign <code>null</code>
to variables of any reference type. For example:<a data-startref="ix_ch02-asciidoc51" data-type="indexterm" id="idm45927753145472"/></p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">null</code><code class="p">;</code><code class="w"/>
<code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">null</code><code class="p">;</code><code class="w"/></pre>
</div></section>
</div></section>
<section data-pdf-bookmark="Lambda Expressions" data-type="sect2"><div class="sect2" id="javanut8-CHP-2-SECT-7.5a">
<h2>Lambda Expressions</h2>
<p>Java 8
<a data-primary="lambda expressions" data-secondary="basics" data-type="indexterm" id="idm45927753113504"/><a data-primary="syntax, Java" data-secondary="lambda expressions" data-type="indexterm" id="idm45927753112496"/>introduced a major new feature—<em>lambda expressions</em>. <a data-primary="functional programming" data-secondary="languages" data-type="indexterm" id="idm45927753111040"/>These are a very common programming language construct and in
particular are extremely widely used in the family of languages known as <em>functional programming languages</em> (e.g., Lisp, Haskell, and OCaml).
The power and flexibility of lambdas goes far beyond just functional
languages, and they can be found in almost all modern programming
languages.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45927753109392">
<h5>Definition of a Lambda Expression</h5>
<p><a data-primary="lambda expressions" data-secondary="defined" data-type="indexterm" id="idm45927753108256"/>A lambda expression is essentially a function that does not have a
name and can be treated as a value in the language (e.g., assigned to a
variable). As Java does not allow code to run around on its own outside of
classes, in Java this means that a lambda is an anonymous method defined on
some class (that is possibly unknown to the developer).</p>
</div></aside>
<p>The syntax for a lambda expression looks like this:</p>
<pre data-code-language="java" data-type="programlisting">
<code class="p">(</code><code class="w"> </code><em><code class="n">paramlist</code></em><code class="w"> </code><code class="p">)</code><code class="w"> </code><code class="o">-</code><code class="o">&gt;</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><em><code class="n">statements</code></em><code class="w"> </code><code class="p">}</code><code class="w">
</code></pre>
<p>One simple, very traditional example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Runnable</code><code class="w"> </code><code class="n">r</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">()</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Hello World"</code><code class="p">);</code><code class="w"/></pre>
<p>When a lambda expression is used as a value, it is automatically
converted to a new object of the correct type for the variable it
is being placed into. <a data-primary="type inference" data-type="indexterm" id="idm45927753034688"/>This autoconversion and <em>type inference</em> is essential to Java’s approach to lambda expressions. Unfortunately, it
relies on a proper understanding of Java’s type system as a whole.
<a data-type="xref" href="ch04.xhtml#javanut8-CHP-4-SECT-5">“Nested Types”</a> provides a more detailed
explanation of lambda expressions—so for now, it suffices to simply
recognize the syntax for lambdas.</p>
<p>A slightly more complex example:<a data-startref="ix_ch02-asciidoc50" data-type="indexterm" id="idm45927753074672"/><a data-startref="ix_ch02-asciidoc49" data-type="indexterm" id="idm45927753073968"/><a data-startref="ix_ch02-asciidoc48" data-type="indexterm" id="idm45927753073296"/></p>
<pre data-code-language="java" data-type="programlisting"><code class="n">ActionListener</code><code class="w"> </code><code class="n">listener</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="o">-&gt;</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">  </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Event fired at: "</code><code class="o">+</code><code class="w"> </code><code class="n">e</code><code class="p">.</code><code class="na">getWhen</code><code class="p">());</code><code class="w"/>
<code class="w">  </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Event command: "</code><code class="o">+</code><code class="w"> </code><code class="n">e</code><code class="p">.</code><code class="na">getActionCommand</code><code class="p">());</code><code class="w"/>
<code class="p">};</code><code class="w"/></pre>
</div></section>
</div></section>
<section data-pdf-bookmark="Arrays" data-type="sect1"><div class="sect1" id="idm45927753114720">
<h1>Arrays</h1>
<p><a data-primary="arrays" data-type="indexterm" id="ix_ch02-asciidoc52"/><a data-primary="objects" data-secondary="arrays as" data-type="indexterm" id="ix_ch02-asciidoc53"/><a data-primary="syntax, Java" data-secondary="arrays" data-type="indexterm" id="ix_ch02-asciidoc54"/>An <em>array</em> is a special kind of object that holds zero or more
primitive values or references. <a data-primary="data types" data-secondary="array elements" data-type="indexterm" id="idm45927752976032"/><a data-primary="indexes" data-secondary="array" data-type="indexterm" id="idm45927752975056"/>These values are held in the <em>elements</em>
of the array, which are unnamed variables referred to by their position
or <em>index</em>. The type of an array is characterized by its <em>element
type</em>, and all elements of the array must be of that type.</p>
<p>Array elements are numbered starting with zero, and valid indexes range
from zero to the number of elements minus one. The array element with
index 1, for example, is the <em>second</em> element in the array. <a data-primary="length of arrays" data-type="indexterm" id="idm45927752972064"/>The number
of elements in an array is its <em>length</em>. The length of an array is
specified when the array is created, and it never changes (unlike Java
collections, which we’ll see in <a data-type="xref" href="ch08.xhtml#javanut8-CHP-8">Chapter 8</a>).</p>
<p>The element type of an array may be any valid Java type, including array
types. This means that Java supports arrays of arrays, which provide a
kind of multidimensional array capability. Java does not support the
matrix-style multidimensional arrays found in some languages.</p>
<p>While Java’s Collection API, covered thoroughly in <a data-type="xref" href="ch08.xhtml#javanut8-CHP-8">Chapter 8</a>, is often
more flexible and feature-rich than basic arrays, arrays remain common
throughout the platform and it’s worth understanding the details of using them.</p>
<section data-pdf-bookmark="Array Types" data-type="sect2"><div class="sect2" id="idm45927752924528">
<h2>Array Types</h2>
<p><a data-primary="arrays" data-secondary="array types" data-type="indexterm" id="ix_ch02-asciidoc55"/><a data-primary="arrays" data-secondary="types" data-type="indexterm" id="ix_ch02-asciidoc56"/><a data-primary="data types" data-secondary="array types" data-type="indexterm" id="ix_ch02-asciidoc57"/><a data-primary="reference types" data-secondary="array types" data-type="indexterm" id="ix_ch02-asciidoc58"/>Array types are reference types, just as classes are. Instances of
arrays are objects, just as the instances of a class are.<sup><a data-type="noteref" href="ch02.xhtml#idm45927752917984" id="idm45927752917984-marker">4</a></sup> Unlike classes, array types do not
have to be defined. <a data-primary="[ ] (brackets)" data-secondary="after array element type" data-type="indexterm" id="idm45927752917328"/>Simply place square brackets after the element
type. For example, the following code declares three variables of array
type:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">byte</code><code class="w"> </code><code class="n">b</code><code class="p">;</code><code class="w">                        </code><code class="c1">// byte is a primitive type</code><code class="w"/>
<code class="kt">byte</code><code class="o">[]</code><code class="w"> </code><code class="n">arrayOfBytes</code><code class="p">;</code><code class="w">           </code><code class="c1">// byte[] is an array of byte values</code><code class="w"/>
<code class="kt">byte</code><code class="o">[][]</code><code class="w"> </code><code class="n">arrayOfArrayOfBytes</code><code class="p">;</code><code class="w">  </code><code class="c1">// byte[][] is an array of byte[]</code><code class="w"/>
<code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">strings</code><code class="p">;</code><code class="w">              </code><code class="c1">// String[] is an array of strings</code><code class="w"/></pre>
<p>The length of an array is not part of the array type. It is not
possible, for example, to declare a method that expects an array of
exactly four <code>int</code> values. If a method parameter is of type
<code>int[]</code>, a caller can pass an array with any number (including zero) of
elements.</p>
<p>Array types are not classes, but array instances are objects. <a data-primary="java.lang.Object" data-type="indexterm" id="idm45927752882768"/>This
means that arrays inherit the methods of <code>java.lang.Object</code>. <a data-primary="clone() method" data-type="indexterm" id="idm45927752881200"/><a data-primary="Cloneable interface" data-type="indexterm" id="idm45927752880464"/><a data-primary="CloneNotSupportedException" data-type="indexterm" id="idm45927752879792"/>Arrays
implement the <code>Cloneable</code> interface and override the <code>clone()</code> method
to guarantee that an array can always be cloned and that <code>clone()</code> never
throws a <code>CloneNotSupportedException</code>. Arrays also implement
<code>Serializable</code> so that any array can be serialized if its element type
can be serialized. Finally, all arrays have a <code>public final int</code> field
named <code>length</code> that specifies the number of elements in the array.</p>
<section data-pdf-bookmark="Array type widening conversions" data-type="sect3"><div class="sect3" id="idm45927752882512">
<h3>Array type widening conversions</h3>
<p><a data-primary="arrays" data-secondary="type widening conversions" data-type="indexterm" id="idm45927752874736"/><a data-primary="Object class" data-type="indexterm" id="idm45927752873296"/><a data-primary="Serializable interface" data-type="indexterm" id="idm45927752872624"/><a data-primary="widening conversions" data-type="indexterm" id="idm45927752871952"/>Because arrays extend <code>Object</code> and implement the <code>Cloneable</code> and
<code>Serializable</code> interfaces, any array type can be widened to any of these
three types. But certain array types can also be widened to other array
types. If the element type of an array is a reference type <code>T</code>, and <code>T</code>
is assignable to a type <code>S</code>, the array type <code>T[]</code> is assignable to the
array type <code>S[]</code>. Note that there are no widening conversions of this
sort for arrays of a given primitive type. As examples, the following
lines of code show legal array widening conversions:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">arrayOfStrings</code><code class="p">;</code><code class="w">      </code><code class="c1">// Created elsewhere</code><code class="w"/>
<code class="kt">int</code><code class="o">[][]</code><code class="w"> </code><code class="n">arrayOfArraysOfInt</code><code class="p">;</code><code class="w">   </code><code class="c1">// Created elsewhere</code><code class="w"/>

<code class="c1">// String is assignable to Object,</code><code class="w"/>
<code class="c1">// so String[] is assignable to Object[]</code><code class="w"/>
<code class="n">Object</code><code class="o">[]</code><code class="w"> </code><code class="n">oa</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">arrayOfStrings</code><code class="p">;</code><code class="w"/>

<code class="c1">// String implements Comparable, so a String[] can</code><code class="w"/>
<code class="c1">// be considered a Comparable[]</code><code class="w"/>
<code class="n">Comparable</code><code class="o">[]</code><code class="w"> </code><code class="n">ca</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">arrayOfStrings</code><code class="p">;</code><code class="w"/>

<code class="c1">// An int[] is an Object, so int[][] is assignable to Object[]</code><code class="w"/>
<code class="n">Object</code><code class="o">[]</code><code class="w"> </code><code class="n">oa2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">arrayOfArraysOfInt</code><code class="p">;</code><code class="w"/>

<code class="c1">// All arrays are cloneable, serializable Objects</code><code class="w"/>
<code class="n">Object</code><code class="w"> </code><code class="n">o</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">arrayOfStrings</code><code class="p">;</code><code class="w"/>
<code class="n">Cloneable</code><code class="w"> </code><code class="n">c</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">arrayOfArraysOfInt</code><code class="p">;</code><code class="w"/>
<code class="n">Serializable</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">arrayOfArraysOfInt</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code class="p">;</code><code class="w"/></pre>
<p>This ability to widen an array type to another array type means that the
compile-time type of an array is not always the same as its runtime
type.</p>
<div data-type="tip"><h6>Tip</h6>
<p><a data-primary="array covariance" data-type="indexterm" id="idm45927752840240"/>This widening is known as <em>array covariance</em>, and as we shall see in
<a data-type="xref" href="ch04.xhtml#javanut8-CHP-4-SECT-2.5">“Bounded Type Parameters”</a>, it is regarded by modern
standards as a historical artifact and a misfeature, because of the
mismatch between compile and runtime typing that it exposes.</p>
</div>
<p>The compiler must usually insert runtime checks before any operation
that stores a reference value into an array element to ensure that the
runtime type of the value matches the runtime type of the array element.
<a data-primary="ArrayStoreException" data-type="indexterm" id="idm45927752717744"/>An <code>ArrayStoreException</code> is thrown if the runtime check fails.</p>
</div></section>
<section data-pdf-bookmark="C compatibility syntax" data-type="sect3"><div class="sect3" id="idm45927752716240">
<h3>C compatibility syntax</h3>
<p><a data-primary="arrays" data-secondary="C compatibility syntax" data-type="indexterm" id="idm45927752715040"/><a data-primary="C/C++" data-secondary="array compatibility syntax" data-type="indexterm" id="idm45927752714064"/>As we’ve seen, you write an array type simply by placing brackets after
the element type. <a data-primary="C/C++" data-secondary="compatibility syntax in variable declarations" data-type="indexterm" id="idm45927752712864"/><a data-primary="variables" data-secondary="declaring" data-type="indexterm" id="idm45927752711952"/>For compatibility with C and C++, however, Java
supports an alternative syntax in variable declarations: brackets may
be placed after the name of the variable instead of, or in addition to,
the element type. This applies to local variables, fields, and method
parameters. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// This line declares local variables of type int, int[] and int[][]</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">justOne</code><code class="p">,</code><code class="w"> </code><code class="n">arrayOfThem</code><code class="o">[]</code><code class="p">,</code><code class="w"> </code><code class="n">arrayOfArrays</code><code class="o">[][]</code><code class="p">;</code><code class="w"/>

<code class="c1">// These three lines declare fields of the same array type:</code><code class="w"/>
<code class="kd">public</code><code class="w"> </code><code class="n">String</code><code class="o">[][]</code><code class="w"> </code><code class="n">aas1</code><code class="p">;</code><code class="w">   </code><code class="c1">// Preferred Java syntax</code><code class="w"/>
<code class="kd">public</code><code class="w"> </code><code class="n">String</code><code class="w"> </code><code class="n">aas2</code><code class="o">[][]</code><code class="p">;</code><code class="w">   </code><code class="c1">// C syntax</code><code class="w"/>
<code class="kd">public</code><code class="w"> </code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">aas3</code><code class="o">[]</code><code class="p">;</code><code class="w">   </code><code class="c1">// Confusing hybrid syntax</code><code class="w"/>

<code class="c1">// This method signature includes two parameters with the same type</code><code class="w"/>
<code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="nf">dotProduct</code><code class="p">(</code><code class="kt">double</code><code class="o">[]</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="n">y</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/></pre>
<div data-type="tip"><h6>Tip</h6>
<p>This compatibility syntax is extremely uncommon, and you should not use
it.<a data-startref="ix_ch02-asciidoc58" data-type="indexterm" id="idm45927752645312"/><a data-startref="ix_ch02-asciidoc57" data-type="indexterm" id="idm45927752655168"/><a data-startref="ix_ch02-asciidoc56" data-type="indexterm" id="idm45927752654496"/><a data-startref="ix_ch02-asciidoc55" data-type="indexterm" id="idm45927752653824"/></p>
</div>
</div></section>
</div></section>
<section data-pdf-bookmark="Creating and Initializing Arrays" data-type="sect2"><div class="sect2" id="idm45927752652768">
<h2>Creating and Initializing Arrays</h2>
<p><a data-primary="arrays" data-secondary="creating and initializing" data-type="indexterm" id="idm45927752651392"/><a data-primary="new operator" data-secondary="creating arrays" data-type="indexterm" id="idm45927752650448"/>To create an array value in Java, you use the <code>new</code> keyword, just as
you do to create an object. <a data-primary="length of arrays" data-type="indexterm" id="idm45927752648992"/>Array types don’t have constructors, but you
are required to specify a length whenever you create an array. Specify
the desired size of your array as a nonnegative integer between square
brackets:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Create a new array to hold 1024 bytes</code><code class="w"/>
<code class="kt">byte</code><code class="o">[]</code><code class="w"> </code><code class="n">buffer</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">byte</code><code class="o">[</code><code class="mi">1024</code><code class="o">]</code><code class="p">;</code><code class="w"/>
<code class="c1">// Create an array of 50 references to strings</code><code class="w"/>
<code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">lines</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">String</code><code class="o">[</code><code class="mi">50</code><code class="o">]</code><code class="p">;</code><code class="w"/></pre>
<p>When you create an array with this syntax, each of the array elements is
automatically initialized to the same default value that is used for the
fields of a class: <code>false</code> for <code>boolean</code> elements, <code>\u0000</code> for <code>char</code>
elements, <code>0</code> for integer elements, <code>0.0</code> for floating-point elements, and
<code>null</code> for elements of reference type.</p>
<p><a data-primary="expressions" data-secondary="array creation" data-type="indexterm" id="idm45927752533568"/>Array creation expressions can also be used to create and initialize a
multidimensional array of arrays. This syntax is somewhat more
complicated and is explained later in this section.</p>
<section data-pdf-bookmark="Array initializers" data-type="sect3"><div class="sect3" id="idm45927752532336">
<h3>Array initializers</h3>
<p><a data-primary="arrays" data-secondary="initializers" data-type="indexterm" id="idm45927752530768"/><a data-primary="initializers" data-secondary="array" data-type="indexterm" id="idm45927752529792"/>To create an array and initialize its elements in a single expression, omit the array length and follow the square brackets with a
comma-separated list of expressions within curly braces. The type of
each expression must be assignable to the element type of the array, of
course. The length of the array that is created is equal to the number
of expressions. It is legal, but not necessary, to include a trailing
comma following the last expression in the list. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">greetings</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="s">"Hello"</code><code class="p">,</code><code class="w"> </code><code class="s">"Hi"</code><code class="p">,</code><code class="w"> </code><code class="s">"Howdy"</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">smallPrimes</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="p">,</code><code class="w"> </code><code class="mi">5</code><code class="p">,</code><code class="w"> </code><code class="mi">7</code><code class="p">,</code><code class="w"> </code><code class="mi">11</code><code class="p">,</code><code class="w"> </code><code class="mi">13</code><code class="p">,</code><code class="w"> </code><code class="mi">17</code><code class="p">,</code><code class="w"> </code><code class="mi">19</code><code class="p">,</code><code class="w"> </code><code class="p">};</code><code class="w"/></pre>
<p>Note that this syntax allows arrays to be created, initialized, and used
without ever being assigned to a variable. In a sense, these array
creation expressions are anonymous array literals. Here are examples:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Call a method, passing an anonymous array literal that</code><code class="w"/>
<code class="c1">// contains two strings</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">response</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">askQuestion</code><code class="p">(</code><code class="s">"Do you want to quit?"</code><code class="p">,</code><code class="w"/>
<code class="w">                               </code><code class="k">new</code><code class="w"> </code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="s">"Yes"</code><code class="p">,</code><code class="w"> </code><code class="s">"No"</code><code class="p">});</code><code class="w"/>

<code class="c1">// Call another method with an anonymous array (of anonymous objects)</code><code class="w"/>
<code class="kt">double</code><code class="w"> </code><code class="n">d</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">sumAccounts</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"1st"</code><code class="p">,</code><code class="w"> </code><code class="mf">100.0</code><code class="p">,</code><code class="w"> </code><code class="mi">1</code><code class="p">),</code><code class="w"/>
<code class="w">                                       </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"2nd"</code><code class="p">,</code><code class="w"> </code><code class="mf">200.0</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">),</code><code class="w"/>
<code class="w">                                       </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"3rd"</code><code class="p">,</code><code class="w"> </code><code class="mf">300.0</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="p">)</code><code class="w"> </code><code class="p">});</code><code class="w"/></pre>
<p>When an array initializer is part of a variable declaration, you may
omit the <code>new</code> keyword and element type and list the desired array
elements within curly braces:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">greetings</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="s">"Hello"</code><code class="p">,</code><code class="w"> </code><code class="s">"Hi"</code><code class="p">,</code><code class="w"> </code><code class="s">"Howdy"</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">powersOfTwo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">4</code><code class="p">,</code><code class="w"> </code><code class="mi">8</code><code class="p">,</code><code class="w"> </code><code class="mi">16</code><code class="p">,</code><code class="w"> </code><code class="mi">32</code><code class="p">,</code><code class="w"> </code><code class="mi">64</code><code class="p">,</code><code class="w"> </code><code class="mi">128</code><code class="p">};</code><code class="w"/></pre>
<p>Array literals are created and initialized when the program is run, not
when the program is compiled. Consider the following array literal:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">perfectNumbers</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="mi">6</code><code class="p">,</code><code class="w"> </code><code class="mi">28</code><code class="p">};</code><code class="w"/></pre>
<p>This is compiled into Java bytecodes that are equivalent to:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">perfectNumbers</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[</code><code class="mi">2</code><code class="o">]</code><code class="p">;</code><code class="w"/>
<code class="n">perfectNumbers</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">6</code><code class="p">;</code><code class="w"/>
<code class="n">perfectNumbers</code><code class="o">[</code><code class="mi">1</code><code class="o">]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">28</code><code class="p">;</code><code class="w"/></pre>
<p>The fact that Java does all array initialization at runtime has an
important corollary. It means that the expressions in an array
initializer may be computed at runtime and need not be compile-time
constants. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Account</code><code class="o">[]</code><code class="w"> </code><code class="n">accounts</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="n">findAccountById</code><code class="p">(</code><code class="mi">1</code><code class="p">),</code><code class="w"> </code><code class="n">findAccountById</code><code class="p">(</code><code class="mi">2</code><code class="p">)</code><code class="w"> </code><code class="p">};</code><code class="w"/></pre>
</div></section>
</div></section>
<section data-pdf-bookmark="Using Arrays" data-type="sect2"><div class="sect2" id="idm45927752148976">
<h2>Using Arrays</h2>
<p><a data-primary="arrays" data-secondary="using" data-type="indexterm" id="ix_ch02-asciidoc59"/>Once an array has been created, you are ready to start using it. The
following sections explain basic access to the elements of an array and
cover common idioms of array usage, such as iterating through the
elements of an array and copying an array or part of an array.</p>
<section data-pdf-bookmark="Accessing array elements" data-type="sect3"><div class="sect3" id="idm45927752108800">
<h3>Accessing array elements</h3>
<p><a data-primary="arrays" data-secondary="accessing elements" data-type="indexterm" id="idm45927752107664"/>The elements of an array are variables. When an array element appears
in an expression, it evaluates to the value held in the element. And
when an array element appears on the lefthand side of an assignment
operator, a new value is stored into that element. Unlike a normal
variable, however, an array element has no name, only a number. <a data-primary="[ ] (brackets)" data-secondary="accessing array elements" data-type="indexterm" id="idm45927752106336"/>Array
elements are accessed using a square bracket notation. <a data-primary="indexes" data-secondary="array" data-type="indexterm" id="idm45927752105296"/>If <code>a</code> is an
expression that evaluates to an array reference, you index that array
and refer to a specific element with <code>a[i]</code>, where <code>i</code> is an integer
literal or an expression that evaluates to an <code>int</code>. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Create an array of two strings</code><code class="w"/>
<code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">responses</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">String</code><code class="o">[</code><code class="mi">2</code><code class="o">]</code><code class="p">;</code><code class="w"/>
<code class="n">responses</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"Yes"</code><code class="p">;</code><code class="w">  </code><code class="c1">// Set the first element of the array</code><code class="w"/>
<code class="n">responses</code><code class="o">[</code><code class="mi">1</code><code class="o">]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"No"</code><code class="p">;</code><code class="w">   </code><code class="c1">// Set the second element of the array</code><code class="w"/>

<code class="c1">// Now read these array elements</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">question</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">" ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">responses</code><code class="o">[</code><code class="mi">0</code><code class="o">]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">"/"</code><code class="w"> </code><code class="o">+</code><code class="w"/>
<code class="w">                   </code><code class="n">responses</code><code class="o">[</code><code class="mi">1</code><code class="o">]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">" ): "</code><code class="p">);</code><code class="w"/>

<code class="c1">// Both the array reference and the array index may be more complex</code><code class="w"/>
<code class="kt">double</code><code class="w"> </code><code class="n">datum</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">data</code><code class="p">.</code><code class="na">getMatrix</code><code class="p">()</code><code class="o">[</code><code class="n">data</code><code class="p">.</code><code class="na">row</code><code class="p">()</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">data</code><code class="p">.</code><code class="na">numColumns</code><code class="p">()</code><code class="w"> </code><code class="o">+</code><code class="w"/>
<code class="w">                   </code><code class="n">data</code><code class="p">.</code><code class="na">column</code><code class="p">()</code><code class="o">]</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="data types" data-secondary="array index expressions" data-type="indexterm" id="idm45927752080480"/>The array index expression must be of type <code>int</code>, or a type that can be
widened to an <code>int</code>: <code>byte</code>, <code>short</code>, or even <code>char</code>. It is obviously
not legal to index an array with a <code>boolean</code>, <code>float</code>, or <code>double</code>
value. <a data-primary="length field" data-type="indexterm" id="idm45927751956656"/>Remember that the <code>length</code> field of an array is an <code>int</code> and that
arrays may not have more than <code>Integer.MAX_VALUE</code> elements. Indexing an
array with an expression of type <code>long</code> generates a compile-time error,
even if the value of that expression at runtime would be within the
range of an <code>int</code>.</p>
</div></section>
<section data-pdf-bookmark="Array bounds" data-type="sect3"><div class="sect3" id="idm45927752079984">
<h3>Array bounds</h3>
<p><a data-primary="arrays" data-secondary="array bounds" data-type="indexterm" id="idm45927751952512"/><a data-primary="arrays" data-secondary="bounds" data-type="indexterm" id="idm45927751951376"/>Remember that the first element of an array <code>a</code> is <code>a[0]</code> , the second element is <code>a[1]</code>, and the last is <code>a[a.length-1]</code>.</p>
<p>A common bug involving arrays is use of an index that is too small (a
negative index) or too large (greater than or equal to the array
<code>length</code>). In languages like C or C++, accessing elements before the
beginning or after the end of an array yields unpredictable behavior
that can vary from invocation to invocation and platform to platform.
Such bugs may not always be caught, and if a failure occurs, it may be
at some later time. While it is just as easy to write faulty array
indexing code in Java, Java guarantees predictable results by checking
every array access at runtime. <a data-primary="ArrayIndexOutOfBoundsException" data-type="indexterm" id="idm45927751919024"/>If an array index is too small or too
large, Java immediately throws an <code>ArrayIndexOutOfBoundsException</code>.</p>
</div></section>
<section data-pdf-bookmark="Iterating arrays" data-type="sect3"><div class="sect3" id="idm45927751917552">
<h3>Iterating arrays</h3>
<p><a data-primary="arrays" data-secondary="iterating" data-type="indexterm" id="idm45927751916144"/><a data-primary="iteration" data-secondary="arrays" data-type="indexterm" id="idm45927751915168"/>It is common to write loops that iterate through each of the elements
of an array in order to perform some operation on it. <a data-primary="for statements" data-secondary="iterating arrays" data-type="indexterm" id="idm45927751914096"/>This is typically
done with a <code>for</code> loop. The following code, for example, computes the
sum of an array of integers:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">primes</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="p">,</code><code class="w"> </code><code class="mi">5</code><code class="p">,</code><code class="w"> </code><code class="mi">7</code><code class="p">,</code><code class="w"> </code><code class="mi">11</code><code class="p">,</code><code class="w"> </code><code class="mi">13</code><code class="p">,</code><code class="w"> </code><code class="mi">17</code><code class="p">,</code><code class="w"> </code><code class="mi">19</code><code class="p">,</code><code class="w"> </code><code class="mi">23</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">sumOfPrimes</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>
<code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">primes</code><code class="p">.</code><code class="na">length</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">)</code><code class="w"/>
<code class="w">    </code><code class="n">sumOfPrimes</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="n">primes</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="p">;</code><code class="w"/></pre>
<p>The structure of this <code>for</code> loop is idiomatic, and you’ll see it
frequently. <a data-primary="foreach statements" data-secondary="iterating arrays" data-type="indexterm" id="idm45927751908720"/>Java also has the foreach syntax that we’ve already met. The summing code could be rewritten succinctly as follows:</p>
<pre data-code-language="java" data-type="programlisting"><code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">p</code><code class="w"> </code><code class="p">:</code><code class="w"> </code><code class="n">primes</code><code class="p">)</code><code class="w"> </code><code class="n">sumOfPrimes</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="n">p</code><code class="p">;</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="Copying arrays" data-type="sect3"><div class="sect3" id="idm45927751917184">
<h3>Copying arrays</h3>
<p><a data-primary="arrays" data-secondary="copying" data-type="indexterm" id="idm45927751855040"/><a data-primary="clone() method" data-type="indexterm" id="idm45927751768608"/><a data-primary="Cloneable interface" data-type="indexterm" id="idm45927751767936"/>All array types implement the <code>Cloneable</code> interface, and any array can
be copied by invoking its <code>clone()</code> method. Note that a cast is
required to convert the return value to the appropriate array type, but the <code>clone()</code> method of arrays is guaranteed not to throw
a <code>CloneNotSupportedException</code>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">data</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="kt">int</code><code class="o">[]</code><code class="w"> </code><code class="n">copy</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">data</code><code class="p">.</code><code class="na">clone</code><code class="p">();</code><code class="w"/></pre>
<p>The <code>clone()</code> method makes a shallow copy. If the element type of the
array is a reference type, only the references are copied, not the
referenced objects themselves. Because the copy is shallow, any array
can be cloned, even if the element type is not itself <code>Cloneable</code>.</p>
<p><a data-primary="arrayCopy()" data-type="indexterm" id="idm45927751718128"/><a data-primary="System.arraycopy()" data-type="indexterm" id="idm45927751717424"/>Sometimes you simply want to copy elements from one existing array to
another existing array. The <code>System.arraycopy()</code> method is designed to
do this efficiently, and you can assume that Java VM implementations
perform this method using high-speed block copy operations on the
underlying hardware.</p>
<p><code>arraycopy()</code> is a straightforward function that is difficult to use
only because it has five arguments to remember. First, pass the source
array from which elements are to be copied. Second, pass the index of
the start element in that array. Pass the destination array and the
destination index as the third and fourth arguments. Finally, as the
fifth argument, specify the number of elements to be copied.</p>
<p><code>arraycopy()</code> works correctly even for overlapping copies within the
same array. For example, if you’ve “deleted” the element at index <code>0</code>
from array <code>a</code> and want to shift the elements between indexes <code>1</code> and
<code>n</code> down one so that they occupy indexes <code>0</code> through <code>n-1,</code> you could do
this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">System</code><code class="p">.</code><code class="na">arraycopy</code><code class="p">(</code><code class="n">a</code><code class="p">,</code><code class="w"> </code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="n">a</code><code class="p">,</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="n">n</code><code class="p">);</code><code class="w"/></pre>
</div></section>
<section data-pdf-bookmark="Array utilities" data-type="sect3"><div class="sect3" id="idm45927751638224">
<h3>Array utilities</h3>
<p><a data-primary="arrays" data-secondary="utility methods for working with" data-type="indexterm" id="idm45927751642064"/><a data-primary="Arrays class" data-type="indexterm" id="idm45927751641120"/><a data-primary="java.util.Arrays class" data-type="indexterm" id="idm45927751640448"/>The <code>java.util.Arrays</code> class contains a number of static utility
methods for working with arrays. Most of these methods are heavily
overloaded, with versions for arrays of each primitive type and another
version for arrays of objects.</p>
<p>The <code>sort()</code> and <code>binarySearch()</code> methods
are particularly useful for sorting and searching arrays. The <code>equals()</code>
method allows you to compare the content of two arrays. The
<code>toString()</code> method is useful when you want to convert array
content to a string, such as for debugging or logging output. <code>copyOf()</code>
is a useful alternative to <code>arraycopy()</code> we’ve seen before if you’re ok with a
new array being allocated rather than copying into an existing one.</p>
<p>The <code>Arrays</code> class also includes <code>deepEquals()</code>, <code>deepHashCode()</code>, and
<code>deepToString()</code> methods that work correctly for multidimensional
arrays.<a data-startref="ix_ch02-asciidoc59" data-type="indexterm" id="idm45927751656528"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Multidimensional Arrays" data-type="sect2"><div class="sect2" id="idm45927751655568">
<h2>Multidimensional Arrays</h2>
<p><a data-primary="arrays" data-secondary="multidimensional" data-type="indexterm" id="idm45927751653680"/><a data-primary="multidimensional arrays" data-type="indexterm" id="idm45927751652480"/>As we’ve seen, an array type is written as the element type followed
by a pair of square brackets. An array of <code>char</code> is <code>char[]</code>, and an
array of arrays of <code>char</code> is <code>char[][]</code>. When the elements of an array
are themselves arrays, we say that the array is <em>multidimensional</em>. In
order to work with multidimensional arrays, you need to understand a few
additional details.</p>
<p>Imagine that you want to use a multidimensional array to represent a
multiplication table:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[][]</code><code class="w"> </code><code class="n">products</code><code class="p">;</code><code class="w">      </code><code class="c1">// A multiplication table</code><code class="w"/></pre>
<p>Each of the pairs of square brackets represents one dimension, so this
is a two-dimensional array. To access a single <code>int</code> element of this
two-dimensional array, you must specify two index values, one for each
dimension. Assuming that this array was actually initialized as a
multiplication table, the <code>int</code> value stored at any given element would
be the product of the two indexes. That is, <code>products[2][4]</code> would be 8,
and <code>products[3][7]</code> would be 21.</p>
<p>To create a new multidimensional array, use the <code>new</code> keyword and
specify the size of both dimensions of the array. For example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[][]</code><code class="w"> </code><code class="n">products</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[</code><code class="mi">10</code><code class="o">][</code><code class="mi">10</code><code class="o">]</code><code class="p">;</code><code class="w"/></pre>
<p>In some languages, an array like this would be created as a single block
of 100 <code>int</code> values. Java does not work this way. This line of code does
three things:</p>
<ul>
<li>
<p>Declares a variable named <code>products</code> to hold an array of arrays of
<code>int</code>.</p>
</li>
<li>
<p>Creates a 10-element array to hold 10 arrays of <code>int</code>.</p>
</li>
<li>
<p>Creates 10 more arrays, each of which is a 10-element array of <code>int</code>.
It assigns each of these 10 new arrays to the elements of the initial
array. The default value of every <code>int</code> element of each of these 10 new
arrays is 0.</p>
</li>
</ul>
<p>To put this another way, the previous single line of code is equivalent
to the following code:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[][]</code><code class="w"> </code><code class="n">products</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[</code><code class="mi">10</code><code class="o">][]</code><code class="p">;</code><code class="w"> </code><code class="c1">// An array to hold 10 int[] values</code><code class="w"/>
<code class="k">for</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mi">10</code><code class="p">;</code><code class="w"> </code><code class="n">i</code><code class="o">++</code><code class="p">)</code><code class="w">      </code><code class="c1">// Loop 10 times...</code><code class="w"/>
<code class="w">    </code><code class="n">products</code><code class="o">[</code><code class="n">i</code><code class="o">]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">int</code><code class="o">[</code><code class="mi">10</code><code class="o">]</code><code class="p">;</code><code class="w">   </code><code class="c1">// ...and create 10 arrays</code><code class="w"/></pre>
<p>The <code>new</code> keyword performs this additional initialization automatically
for you. It works with arrays with more than two dimensions as well:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">float</code><code class="o">[][][]</code><code class="w"> </code><code class="n">globalTemperatureData</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">float</code><code class="o">[</code><code class="mi">360</code><code class="o">][</code><code class="mi">180</code><code class="o">][</code><code class="mi">100</code><code class="o">]</code><code class="p">;</code><code class="w"/></pre>
<p>When using <code>new</code> with multidimensional arrays, you do not have to
specify a size for all dimensions of the array, only the leftmost
dimension or dimensions. For example, the following two lines are legal:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">float</code><code class="o">[][][]</code><code class="w"> </code><code class="n">globalTemperatureData</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">float</code><code class="o">[</code><code class="mi">360</code><code class="o">][][]</code><code class="p">;</code><code class="w"/>
<code class="kt">float</code><code class="o">[][][]</code><code class="w"> </code><code class="n">globalTemperatureData</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">float</code><code class="o">[</code><code class="mi">360</code><code class="o">][</code><code class="mi">180</code><code class="o">][]</code><code class="p">;</code><code class="w"/></pre>
<p>The first line creates a single-dimensional array, where each element of
the array can hold a <code>float[][]</code>. The second line creates a
two-dimensional array, where each element of the array is a <code>float[]</code>.
If you specify a size for only some of the dimensions of an array,
however, those dimensions must be the leftmost ones. The following lines
are not legal:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">float</code><code class="o">[][][]</code><code class="w"> </code><code class="n">globalTemperatureData</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">float</code><code class="o">[</code><code class="mi">360</code><code class="o">][][</code><code class="mi">100</code><code class="o">]</code><code class="p">;</code><code class="w">  </code><code class="c1">// Error!</code><code class="w"/>
<code class="kt">float</code><code class="o">[][][]</code><code class="w"> </code><code class="n">globalTemperatureData</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="kt">float</code><code class="o">[][</code><code class="mi">180</code><code class="o">][</code><code class="mi">100</code><code class="o">]</code><code class="p">;</code><code class="w">  </code><code class="c1">// Error!</code><code class="w"/></pre>
<p>Like a one-dimensional array, a multidimensional array can be
initialized using an array initializer. Simply use nested sets of curly
braces to nest arrays within arrays. For example, we can declare,
create, and initialize a 5 × 5 multiplication table like this:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="o">[][]</code><code class="w"> </code><code class="n">products</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">{</code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">0</code><code class="p">},</code><code class="w"/>
<code class="w">                     </code><code class="p">{</code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="p">,</code><code class="w"> </code><code class="mi">4</code><code class="p">},</code><code class="w"/>
<code class="w">                     </code><code class="p">{</code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">4</code><code class="p">,</code><code class="w"> </code><code class="mi">6</code><code class="p">,</code><code class="w"> </code><code class="mi">8</code><code class="p">},</code><code class="w"/>
<code class="w">                     </code><code class="p">{</code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="p">,</code><code class="w"> </code><code class="mi">6</code><code class="p">,</code><code class="w"> </code><code class="mi">9</code><code class="p">,</code><code class="w"> </code><code class="mi">12</code><code class="p">},</code><code class="w"/>
<code class="w">                     </code><code class="p">{</code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="mi">4</code><code class="p">,</code><code class="w"> </code><code class="mi">8</code><code class="p">,</code><code class="w"> </code><code class="mi">12</code><code class="p">,</code><code class="w"> </code><code class="mi">16</code><code class="p">}</code><code class="w"> </code><code class="p">};</code><code class="w"/></pre>
<p>Or, if you want to use a multidimensional array without declaring a
variable, you can use the anonymous initializer syntax:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">boolean</code><code class="w"> </code><code class="n">response</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">bilingualQuestion</code><code class="p">(</code><code class="n">question</code><code class="p">,</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">String</code><code class="o">[][]</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">                                                   </code><code class="p">{</code><code class="w"> </code><code class="s">"Yes"</code><code class="p">,</code><code class="w"> </code><code class="s">"No"</code><code class="w"> </code><code class="p">},</code><code class="w"/>
<code class="w">                                                   </code><code class="p">{</code><code class="w"> </code><code class="s">"Oui"</code><code class="p">,</code><code class="w"> </code><code class="s">"Non"</code><code class="w"> </code><code class="p">}});</code><code class="w"/></pre>
<p><a data-primary="new operator" data-secondary="creating arrays" data-type="indexterm" id="idm45927751153424"/><a data-primary="rectangular arrays" data-type="indexterm" id="idm45927751117712"/>When you create a multidimensional array using the <code>new</code> keyword, it is
usually good practice to use only <em>rectangular</em> arrays: ones in which
all the array values for a given dimension have the same size.<a data-startref="ix_ch02-asciidoc54" data-type="indexterm" id="idm45927751116144"/><a data-startref="ix_ch02-asciidoc53" data-type="indexterm" id="idm45927751115440"/><a data-startref="ix_ch02-asciidoc52" data-type="indexterm" id="idm45927751114768"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="Reference Types" data-type="sect1"><div class="sect1" id="javanut8-CHP-2-SECT-9">
<h1>Reference Types</h1>
<p><a data-primary="data types" data-secondary="reference" data-type="indexterm" id="ix_ch02-asciidoc60"/><a data-primary="reference types" data-type="indexterm" id="ix_ch02-asciidoc61"/><a data-primary="syntax, Java" data-secondary="reference types" data-type="indexterm" id="ix_ch02-asciidoc62"/>Now that we’ve covered arrays and introduced classes and objects, we
can turn to a more general description of <em>reference types</em>. Classes and
arrays are two of Java’s five kinds of reference types. Classes were
introduced earlier and are covered in complete detail, along with
<em>interfaces</em>, in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>. Enumerated types and
annotation types are reference types introduced in
<a data-type="xref" href="ch04.xhtml#javanut8-CHP-4">Chapter 4</a>.</p>
<p>This section does not cover specific syntax for any particular reference
type but instead explains the general behavior of reference types and
illustrates how they differ from Java’s primitive types. In this
section, the term <em>object</em> refers to a value or instance of any
reference type, including arrays.</p>
<section data-pdf-bookmark="Reference Versus Primitive Types" data-type="sect2"><div class="sect2" id="idm45927751099120">
<h2>Reference Versus Primitive Types</h2>
<p><a data-primary="primitive types" data-secondary="reference types vs." data-type="indexterm" id="idm45927751097776"/><a data-primary="reference types" data-secondary="primitive types vs." data-type="indexterm" id="idm45927751096800"/>Reference types and objects differ substantially from primitive types
and their primitive values:</p>
<dl>
<dt>Eight primitive types are defined by the Java language, and the programmer cannot define new primitive types.</dt>
<dd>
<p>Reference types are
user-defined, so there is an unlimited number of them. For example, a
program might define a class named <code>Account</code> and use objects of this newly
defined type to store and track user bank accounts.</p>
</dd>
<dt>Primitive types represent single values.</dt>
<dd>
<p>Reference types are aggregate
types that hold zero or more primitive values or objects. Our
hypothetical <code>Account</code> class, for example, might hold a numeric value for the
balance, along with identifiers for the account owner. The <code>char[]</code> and
<code>Account[]</code> array types are aggregate types because they hold a sequence
of primitive <code>char</code> values or <code>Account</code> objects.</p>
</dd>
<dt>Primitive types require between one and eight bytes of memory.</dt>
<dd>
<p><a data-primary="memory, primitive and reference types requirements" data-type="indexterm" id="idm45927751088384"/><a data-primary="objects" data-secondary="memory requirements for storing" data-type="indexterm" id="idm45927751087584"/>When a
primitive value is stored in a variable or passed to a method, the
computer makes a copy of the bytes that hold the value. Objects, on the
other hand, may require substantially more memory. Memory to store an
object is dynamically allocated on the heap when the object is created,
and this memory is automatically “garbage collected” when the object is
no longer needed.</p>
</dd>
</dl>
<div data-type="tip"><h6>Tip</h6>
<p>When an object is assigned to a variable or passed to a method, the
memory that represents the object is not copied. Instead, only a
reference to that memory is stored in the variable or passed to the
method.</p>
</div>
<p>References are completely opaque in Java and the representation of a
reference is an implementation detail of the Java runtime. If you are a
C programmer, however, you can safely imagine a reference as a pointer
or a memory address. Remember, though, that Java programs cannot
manipulate references in any way.</p>
<p><a data-primary="C/C++" data-secondary="pointers or memory addresses, references as" data-type="indexterm" id="idm45927751084640"/><a data-primary="reference types" data-secondary="pointers in C/C++ vs." data-type="indexterm" id="idm45927751083632"/>Unlike pointers in C and C++, references cannot be converted to or from
integers, and they cannot be incremented or decremented. C and C++
programmers should also note that Java does not support the <code>&amp;</code>
address-of operator or the <code>*</code> and <code>-&gt;</code> dereference operators.</p>
</div></section>
<section data-pdf-bookmark="Manipulating Objects and Reference Copies" data-type="sect2"><div class="sect2" id="idm45927751081184">
<h2>Manipulating Objects and Reference Copies</h2>
<p><a data-primary="objects" data-secondary="manipulating" data-type="indexterm" id="idm45927751079680"/><a data-primary="reference types" data-secondary="manipulating objects and reference copies" data-type="indexterm" id="idm45927751078704"/>The following code manipulates a primitive <code>int</code> value:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">42</code><code class="p">;</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">x</code><code class="p">;</code><code class="w"/></pre>
<p>After these lines execute, the variable <code>y</code> contains a copy of the value
held in the variable <code>x</code>. Inside the Java VM, there are two independent
copies of the 32-bit integer 42.</p>
<p>Now think about what happens if we run the same basic code but use a
reference type instead of a primitive type:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"Jason"</code><code class="p">,</code><code class="w"> </code><code class="mf">0.0</code><code class="p">,</code><code class="w"> </code><code class="mi">42</code><code class="p">);</code><code class="w"/>
<code class="n">Account</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">a</code><code class="p">;</code><code class="w"/></pre>
<p>After this code runs, the variable <code>b</code> holds a copy of the reference
held in the variable <code>a</code>. There is still only one copy of the <code>Account</code>
object in the VM, but there are now two copies of the reference to that
object. This has some important implications. Suppose the two previous
lines of code are followed by this code:</p>
<pre class="pre" data-code-language="java" data-type="programlisting"><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">a</code><code class="p">.</code><code class="na">balance</code><code class="p">);</code><code class="w">  </code><code class="c1">// Print out balance of a: 0.0</code><code class="w"/>
<code class="n">b</code><code class="p">.</code><code class="na">balance</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">13.0</code><code class="p">;</code><code class="w">               </code><code class="c1">// Now change balance of b</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">a</code><code class="p">.</code><code class="na">balance</code><code class="p">);</code><code class="w">  </code><code class="c1">// Print a's balance again: 13.0</code><code class="w"/></pre>
<p>Because the variables <code>a</code> and <code>b</code> hold references to the same object,
either variable can be used to make changes to the object, and those
changes are visible through the other variable as well. As arrays are a
kind of object, the same thing happens with arrays, as illustrated
by the following code:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// greet holds an array reference</code><code class="w"/>
<code class="kt">char</code><code class="o">[]</code><code class="w"> </code><code class="n">greet</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="sc">'h'</code><code class="p">,</code><code class="sc">'e'</code><code class="p">,</code><code class="sc">'l'</code><code class="p">,</code><code class="sc">'l'</code><code class="p">,</code><code class="sc">'o'</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="kt">char</code><code class="o">[]</code><code class="w"> </code><code class="n">cuss</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">greet</code><code class="p">;</code><code class="w">             </code><code class="c1">// cuss holds the same reference</code><code class="w"/>
<code class="n">cuss</code><code class="o">[</code><code class="mi">4</code><code class="o">]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="sc">'!'</code><code class="p">;</code><code class="w">                   </code><code class="c1">// Use reference to change an element</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">greet</code><code class="p">);</code><code class="w">       </code><code class="c1">// Prints "hell!"</code><code class="w"/></pre>
<p><a data-primary="methods" data-secondary="arguments passed to, primitive and reference types" data-type="indexterm" id="idm45927750879568"/>A similar difference in behavior between primitive types and reference
types occurs when arguments are passed to methods. Consider the
following method:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code><code class="w"> </code><code class="nf">changePrimitive</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">while</code><code class="p">(</code><code class="n">x</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">        </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">x</code><code class="o">--</code><code class="p">);</code><code class="w"/>
<code class="w">    </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>When this method is invoked, the method is given a copy of the argument
used to invoke the method in the parameter <code>x</code>. The code in the method
uses <code>x</code> as a loop counter and decrements it to zero. Because <code>x</code> is a
primitive type, the method has its own private copy of this value, so
this is a perfectly reasonable thing to do.</p>
<p>On the other hand, consider what happens if we modify the method so that
the parameter is a reference type:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">void</code><code class="w"> </code><code class="nf">changeReference</code><code class="p">(</code><code class="n">Account</code><code class="w"> </code><code class="n">b</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">    </code><code class="k">while</code><code class="w"> </code><code class="p">(</code><code class="n">b</code><code class="p">.</code><code class="na">balance</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="mi">0</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>
<code class="w">        </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">b</code><code class="p">.</code><code class="na">balance</code><code class="o">--</code><code class="p">);</code><code class="w"/>
<code class="w">    </code><code class="p">}</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p>When this method is invoked, it is passed a private copy of a reference
to a <code>Account</code> object and can use this reference to change the <code>Account</code>
object. For example, consider:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Account</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Account</code><code class="p">(</code><code class="s">"Jason"</code><code class="p">,</code><code class="w"> </code><code class="mf">3.0</code><code class="p">,</code><code class="w"> </code><code class="mi">42</code><code class="p">);</code><code class="w">  </code><code class="c1">// Account balance: 3.0</code><code class="w"/>
<code class="n">changeReference</code><code class="p">(</code><code class="n">a</code><code class="p">);</code><code class="w">             </code><code class="c1">// Prints 3,2,1 and modifies the Account</code><code class="w"/>
<code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">a</code><code class="p">.</code><code class="na">balance</code><code class="p">);</code><code class="w">  </code><code class="c1">// The balance of a is now 0!</code><code class="w"/></pre>
<p>When the <code>changeReference()</code> method is invoked, it is passed a copy of
the reference held in variable <code>a</code>. Now both the variable <code>a</code> and the
method parameter <code>b</code> hold references to the same object. The method can
use its reference to change the contents of the object. Note, however,
that it cannot change the contents of the variable <code>a</code>. In other words,
the method can change the <code>Account</code> object beyond recognition, but it
cannot change the fact that the variable <code>a</code> refers to that object.</p>
</div></section>
<section data-pdf-bookmark="Comparing Objects" data-type="sect2"><div class="sect2" id="idm45927751080528">
<h2>Comparing Objects</h2>
<p><a data-primary="objects" data-secondary="comparing" data-type="indexterm" id="idm45927750665584"/><a data-primary="reference types" data-secondary="comparing objects" data-type="indexterm" id="idm45927750664448"/>We’ve seen that primitive types and reference types differ
significantly in the way they are assigned to variables, passed to
methods, and copied. The types also differ in the way they are compared
for equality. <a data-primary="primitive types" data-secondary="reference types vs." data-type="indexterm" id="idm45927750663376"/>When used with primitive values, the equality operator
(<code>==</code>) simply tests whether two values are identical (i.e., whether
they have exactly the same bits). With reference types, however, <code>==</code>
compares references, not actual objects. In other words, <code>==</code> tests
whether two references refer to the same object; it does not test
whether two objects have the same content. Here’s an example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">letter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"o"</code><code class="p">;</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"hello"</code><code class="p">;</code><code class="w">              </code><code class="c1">// These two String objects</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">t</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"hell"</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">letter</code><code class="p">;</code><code class="w">      </code><code class="c1">// contain exactly the same text.</code><code class="w"/>
<code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">s</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">t</code><code class="p">)</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"equal"</code><code class="p">);</code><code class="w"> </code><code class="c1">// But they are not equal!</code><code class="w"/>

<code class="kt">byte</code><code class="o">[]</code><code class="w"> </code><code class="n">a</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="mi">2</code><code class="p">,</code><code class="w"> </code><code class="mi">3</code><code class="w"> </code><code class="p">};</code><code class="w"/>
<code class="c1">// A copy with identical content.</code><code class="w"/>
<code class="kt">byte</code><code class="o">[]</code><code class="w"> </code><code class="n">b</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">byte</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="n">a</code><code class="p">.</code><code class="na">clone</code><code class="p">();</code><code class="w"/>
<code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">a</code><code class="w"> </code><code class="o">==</code><code class="w"> </code><code class="n">b</code><code class="p">)</code><code class="w"> </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"equal"</code><code class="p">);</code><code class="w"> </code><code class="c1">// But they are not equal!</code><code class="w"/></pre>
<p>When working with reference types, keep in mind there are two kinds of equality:
equality of reference and equality of object. It is important to
distinguish between these two kinds of equality. One way to do this is
to use the word “identical” when talking about equality of references
and the word “equal” when talking about two distinct objects that have
the same content. <a data-primary="equals()" data-secondary="Arrays class" data-type="indexterm" id="idm45927750568240"/><a data-primary="equals()" data-secondary="testing two nonidentical objects for equality" data-type="indexterm" id="idm45927750567392"/>To test two nonidentical objects for equality, pass
one of them to the <code>equals()</code> method of the other:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">String</code><code class="w"> </code><code class="n">letter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"o"</code><code class="p">;</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"hello"</code><code class="p">;</code><code class="w">              </code><code class="c1">// These two String objects</code><code class="w"/>
<code class="n">String</code><code class="w"> </code><code class="n">t</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="s">"hell"</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">letter</code><code class="p">;</code><code class="w">      </code><code class="c1">// contain exactly the same text.</code><code class="w"/>
<code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">s</code><code class="p">.</code><code class="na">equals</code><code class="p">(</code><code class="n">t</code><code class="p">))</code><code class="w"> </code><code class="p">{</code><code class="w">               </code><code class="c1">// And the equals() method</code><code class="w"/>
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"equal"</code><code class="p">);</code><code class="w"> </code><code class="c1">// tells us so.</code><code class="w"/>
<code class="p">}</code><code class="w"/></pre>
<p><a data-primary="= (equals sign)" data-secondary="== (equal to) operator" data-type="indexterm" id="idm45927750428784"/><a data-primary="equality operator (==)" data-secondary="comparing reference types" data-type="indexterm" id="idm45927750394544"/>All objects inherit an <code>equals()</code> method (from <code>Object</code>), but the
default implementation simply uses <code>==</code> to test for identity of
references, not equality of content. A class that wants to allow objects
to be compared for equality can define its own version of the <code>equals()</code>
method. Our <code>Account</code> class does not do this, but the <code>String</code> class does,
as indicated in the code example. You can call the <code>equals()</code> method on
an array, but it is the same as using the <code>==</code> operator, because arrays
always inherit the default <code>equals()</code> method that compares references
rather than array content. You can compare arrays for equality with the <code>java.util.Arrays.equals()</code> convenience method.</p>
</div></section>
<section data-pdf-bookmark="Boxing and Unboxing Conversions" data-type="sect2"><div class="sect2" id="javanut8-CHP-2-SECT-9.4">
<h2>Boxing and Unboxing Conversions</h2>
<p><a data-primary="boxing and unboxing conversions" data-type="indexterm" id="idm45927750387472"/><a data-primary="boxing conversions" data-type="indexterm" id="idm45927750386352"/><a data-primary="conversions" data-secondary="boxing/unboxing" data-type="indexterm" id="idm45927750385680"/><a data-primary="data types" data-secondary="boxing and unboxing conversions" data-type="indexterm" id="idm45927750384736"/><a data-primary="primitive types" data-secondary="boxing and unboxing conversions" data-type="indexterm" id="idm45927750359888"/><a data-primary="reference types" data-secondary="boxing and unboxing conversions" data-type="indexterm" id="idm45927750359040"/><a data-primary="reference types" data-secondary="boxing/unboxing conversions" data-type="indexterm" id="idm45927750358192"/><a data-primary="unboxing conversions" data-type="indexterm" id="idm45927750357344"/>Primitive types and reference types behave quite differently. <a data-primary="primitive types" data-secondary="wrapper classes" data-type="indexterm" id="idm45927750356576"/><a data-primary="wrapper classes" data-type="indexterm" id="idm45927750355632"/>It is
sometimes useful to treat primitive values as objects, and for this
reason, the Java platform includes <em>wrapper classes</em> for each of the primitive types. <code>Boolean</code>, <code>Byte</code>, <code>Short</code>, <code>Character</code>, <code>Integer</code>,
<code>Long</code>, <code>Float</code>, and <code>Double</code> are immutable, final classes whose
instances each hold a single primitive value. These wrapper classes are
usually used when you want to store primitive values in collections
such as <code>java.util.List</code>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="c1">// Create a List-of-Integer collection</code><code class="w"/>
<code class="n">List</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;</code><code class="w"> </code><code class="n">numbers</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">ArrayList</code><code class="o">&lt;&gt;</code><code class="p">();</code><code class="w"/>
<code class="c1">// Store a wrapped primitive</code><code class="w"/>
<code class="n">numbers</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">Integer</code><code class="p">.</code><code class="na">valueOf</code><code class="p">(</code><code class="o">-</code><code class="mi">1</code><code class="p">));</code><code class="w"/>
<code class="c1">// Extract the primitive value</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">numbers</code><code class="p">.</code><code class="na">get</code><code class="p">(</code><code class="mi">0</code><code class="p">).</code><code class="na">intValue</code><code class="p">();</code><code class="w"/></pre>
<p>Java allows types of conversions known as boxing and unboxing conversions. Boxing conversions convert a primitive value to its
corresponding wrapper object and unboxing conversions do the opposite. You may explicitly specify a boxing or unboxing conversion with a cast,
but this is unnecessary, as these conversions are automatically
performed when you assign a value to a variable or pass a value to a
method. Furthermore, unboxing conversions are also automatic if you use
a wrapper object when a Java operator or statement expects a primitive
value. <a data-primary="autoboxing" data-type="indexterm" id="idm45927750289456"/>Because Java performs boxing and unboxing automatically, this
language feature is often known as <em>autoboxing</em>.</p>
<p>Here are some examples of automatic boxing and unboxing conversions:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Integer</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w">   </code><code class="c1">// int literal 0 boxed to an Integer object</code><code class="w"/>
<code class="n">Number</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">0.0f</code><code class="p">;</code><code class="w"> </code><code class="c1">// float literal boxed to Float and widened to Number</code><code class="w"/>
<code class="n">Integer</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">   </code><code class="c1">// this is a boxing conversion</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">j</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">i</code><code class="p">;</code><code class="w">       </code><code class="c1">// i is unboxed here</code><code class="w"/>
<code class="n">i</code><code class="o">++</code><code class="p">;</code><code class="w">             </code><code class="c1">// i is unboxed, incremented, and then boxed up again</code><code class="w"/>
<code class="n">Integer</code><code class="w"> </code><code class="n">k</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">i</code><code class="o">+</code><code class="mi">2</code><code class="p">;</code><code class="w"> </code><code class="c1">// i is unboxed and the sum is boxed up again</code><code class="w"/>
<code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">null</code><code class="p">;</code><code class="w"/>
<code class="n">j</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">i</code><code class="p">;</code><code class="w">           </code><code class="c1">// unboxing here throws a NullPointerException</code><code class="w"/></pre>
<p>Autoboxing makes dealing with collections much easier as well. Let’s
look at an example that uses Java’s <em>generics</em> (a language feature we’ll
meet properly in <a data-type="xref" href="ch04.xhtml#javanut8-CHP-4-SECT-2">“Java Generics”</a>) that allows
us to restrict what types can be put into lists and other collections:<a data-startref="ix_ch02-asciidoc62" data-type="indexterm" id="idm45927750224112"/><a data-startref="ix_ch02-asciidoc61" data-type="indexterm" id="idm45927750223472"/><a data-startref="ix_ch02-asciidoc60" data-type="indexterm" id="idm45927750222800"/></p>
<pre data-code-language="java" data-type="programlisting"><code class="n">List</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;</code><code class="w"> </code><code class="n">numbers</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">ArrayList</code><code class="o">&lt;&gt;</code><code class="p">();</code><code class="w"> </code><code class="c1">// Create a List of Integer</code><code class="w"/>
<code class="n">numbers</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="o">-</code><code class="mi">1</code><code class="p">);</code><code class="w">                           </code><code class="c1">// Box int to Integer</code><code class="w"/>
<code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">numbers</code><code class="p">.</code><code class="na">get</code><code class="p">(</code><code class="mi">0</code><code class="p">);</code><code class="w">                    </code><code class="c1">// Unbox Integer to int</code><code class="w"/></pre>
</div></section>
</div></section>
<section data-pdf-bookmark="Packages and the Java Namespace" data-type="sect1"><div class="sect1" id="javanut8-CHP-2-SECT-10">
<h1>Packages and the Java Namespace</h1>
<p><a data-primary="packages" data-type="indexterm" id="ix_ch02-asciidoc63"/><a data-primary="syntax, Java" data-secondary="packages and the Java namespace" data-type="indexterm" id="ix_ch02-asciidoc64"/>A <em>package</em> is a named collection of classes, interfaces, and other
reference types. Packages serve to group related classes and define a
namespace for the classes they contain.</p>
<p><a data-primary="class(es)" data-secondary="core classes of Java platform" data-type="indexterm" id="idm45927750133824"/>The core classes of the Java platform are in packages whose names
begin with <code>java</code>. For example, the most fundamental classes of the
language are in the package <code>java.lang</code>. Various utility classes are in
<code>java.util</code>. Classes for input and output are in <code>java.io</code>, and classes
for networking are in <code>java.net</code>. Some of these packages contain
subpackages, such as <code>java.lang.reflect</code> and <code>java.util.regex</code>.
<a data-primary="extensions, standard" data-type="indexterm" id="idm45927750129440"/><a data-primary="javax., package names beginning with" data-type="indexterm" id="idm45927750128704"/>Extensions to the Java platform that have been standardized by Oracle
(or originally Sun) typically have package names that begin with
<code>javax</code>. Some of these extensions, such as <code>javax.swing</code> and its myriad
subpackages, were later adopted into the core platform itself. <a data-primary="standards bodies, packages named for" data-type="indexterm" id="idm45927750127136"/>Finally,
the Java platform also includes several “endorsed standards,” which have
packages named after the standards body that created them, such as
<code>org.w3c</code> and <code>org.omg</code>.</p>
<p><a data-primary="class(es)" data-secondary="names, simple and fully qualified" data-type="indexterm" id="idm45927750133360"/>Every class has both a simple name, which is the name given to it in its
definition, and a fully qualified name, which includes the name of the
package of which it is a part. <a data-primary="strings" data-secondary="String class" data-type="indexterm" id="idm45927750124016"/>The <code>String</code> class, for example, is part
of the <code>java.lang</code> package, so its fully qualified name is
<code>java.lang.String</code>.</p>
<p>This section explains how to place your own classes and interfaces into
a package and how to choose a package name that won’t conflict with
anyone else’s package name. Next, it explains how to selectively import
type names or static members into the namespace so that you don’t have
to type the package name of every class or interface you use.</p>
<section data-pdf-bookmark="Package Declaration" data-type="sect2"><div class="sect2" id="idm45927750121120">
<h2>Package Declaration</h2>
<p><a data-primary="packages" data-secondary="declarations" data-type="indexterm" id="idm45927750119568"/>To specify the package a class belongs to, you use a <code>package</code>
declaration. <a data-primary="package keyword" data-type="indexterm" id="idm45927750118080"/>The <code>package</code> keyword, if it appears, must be the first
token of Java code (i.e., the first thing other than comments and space)
in the Java file. The keyword should be <span class="keep-together">followed</span> by the name of the
desired package and a semicolon. Consider a Java file that begins with
this directive:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">org.apache.commons.net</code><code class="p">;</code><code class="w"/></pre>
<p>All classes defined by this file are part of the package
<code>org.apache.commons.net</code>.</p>
<p>If no <code>package</code> directive appears in a Java file, all classes defined in
that file are part of an unnamed default package. In this case, the
qualified and unqualified names of a class are the same.</p>
<div data-type="tip"><h6>Tip</h6>
<p>The possibility of naming conflicts means that you should not use the
default package. As your project grows more complicated, conflicts
become almost inevitable—much better to create packages right from the
start.</p>
</div>
</div></section>
<section data-pdf-bookmark="Globally Unique Package Names" data-type="sect2"><div class="sect2" id="idm45927750061456">
<h2>Globally Unique Package Names</h2>
<p><a data-primary="class(es)" data-secondary="name collisions, preventing" data-type="indexterm" id="idm45927750060448"/><a data-primary="names" data-secondary="package-naming rules" data-type="indexterm" id="idm45927750057024"/><a data-primary="namespaces" data-secondary="globally unique package names" data-type="indexterm" id="idm45927750056080"/><a data-primary="packages" data-secondary="globally unique names" data-type="indexterm" id="idm45927750055168"/>One of the important functions of packages is to partition the Java
namespace and prevent name collisions between classes. It is only
their package names that keep the <code>java.util.List</code> and <code>java.awt.List</code>
classes distinct, for example. For this to work, however,
package names must themselves be distinct. <a data-primary="Oracle Corporation" data-secondary="control of package names beginning with java, javax, and sun" data-type="indexterm" id="idm45927750053152"/>As the developer of Java,
Oracle controls all package names that begin with <code>java</code>, <code>javax</code>, and
<code>sun</code>.</p>
<p><a data-primary="domain names in package names" data-type="indexterm" id="idm45927750050608"/>One common scheme is to use your domain name, with its elements
reversed, as the prefix for all your package names. <a data-primary="Apache Commons project" data-type="indexterm" id="idm45927750049680"/>For example, the
Apache Project produces a networking library as part of the Apache
Commons project. The Commons project can be found at
<a href="http://commons.apache.org"><em>http://commons.apache.org</em></a> and
accordingly, the package name used for the networking library is
<code>org.apache.commons.net</code>.</p>
<p>Note that these package-naming rules apply primarily to API developers.
If other programmers will be using classes that you develop along with
unknown other classes, it is important that your package name be
globally unique. On the other hand, if you are developing a Java
application and will not be releasing any of the classes for reuse by
others, you know the complete set of classes that your application will
be deployed with and do not have to worry about unforeseen naming
conflicts. In this case, you can choose a package-naming scheme for your
own convenience rather than for global uniqueness. One common approach
is to use the application name as the main package name (it may have
subpackages beneath it).</p>
</div></section>
<section data-pdf-bookmark="Importing Types" data-type="sect2"><div class="sect2" id="idm45927750028528">
<h2>Importing Types</h2>
<p><a data-primary="packages" data-secondary="importing types" data-type="indexterm" id="idm45927750027088"/>When referring to a class or interface in your Java code, you must,
by default, use the fully qualified name of the type, including the
package name. <a data-primary="File class" data-type="indexterm" id="idm45927750026016"/>If you’re writing code to manipulate a file and need to
use the <code>File</code> class of the <code>java.io</code> package, you must type
<code>java.io.File</code>. This rule has three exceptions:</p>
<ul>
<li>
<p>Types from the package <code>java.lang</code> are so important and so commonly
used that they can always be referred to by their simple names.</p>
</li>
<li>
<p>The code in a type <code>p.T</code> may refer to other types defined in the
package <code>p</code> by their simple names.</p>
</li>
<li>
<p><a data-primary="namespaces" data-secondary="importing types" data-type="indexterm" id="idm45927750019856"/>Types that have been <em>imported</em> into the namespace with an <code>import</code>
declaration may be referred to by their simple names.</p>
</li>
</ul>
<p><a data-primary="automatic imports" data-type="indexterm" id="idm45927750017376"/><a data-primary="java.lang package" data-type="indexterm" id="idm45927750016448"/>The first two exceptions are known as “automatic imports.” The types
from <code>java.lang</code> and the current package are “imported” into the
namespace so that they can be used without their package name. Typing
the package name of commonly used types that are not in <code>java.lang</code> or
the current package quickly becomes tedious, and so it is also possible
to explicitly import types from other packages into the namespace. <a data-primary="import declarations" data-type="indexterm" id="idm45927750014848"/>This
is done with the <code>import</code> declaration.</p>
<p><code>import</code> declarations must appear at the start of a Java file,
immediately after the <code>package</code> declaration, if there is one, and before
any type definitions. You may use any number of <code>import</code> declarations in
a file. An <code>import</code> declaration applies to all type definitions in the
file (but not to any <code>import</code> declarations that follow it).</p>
<p><a data-primary="import declarations" data-secondary="single type imports" data-type="indexterm" id="idm45927750010928"/>The <code>import</code> declaration has two forms. To import a single type into the
namespace, follow the <code>import</code> keyword with the name of the type and a
semicolon:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">java.io.File</code><code class="p">;</code><code class="w">    </code><code class="c1">// Now we can type File instead of java.io.File</code><code class="w"/></pre>
<p>This is known as the “single type <code>import</code>” declaration.</p>
<p><a data-primary="import declarations" data-secondary="on-demand imports" data-type="indexterm" id="idm45927750001904"/>The other form of <code>import</code> declaration is the “on-demand type <code>import</code>.” In this form,
you specify the name of a package followed by the characters <code>.*</code> to indicate that any type from that package may be used without its package
name. Thus, if you want to use several other classes from the <code>java.io</code>
package in addition to the <code>File</code> class, you can simply import the
entire package:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">java.io.*</code><code class="p">;</code><code class="w">   </code><code class="c1">// Use simple names for all classes in java.io</code><code class="w"/></pre>
<p>This on-demand <code>import</code> syntax does not apply to subpackages. If I import the
<code>java.util</code> package, I must still refer to the <code>java.util.zip.ZipInputStream</code>
class by its fully qualified name or import it.</p>
<p>Using an on-demand type <code>import</code> declaration is not the same as explicitly
writing out a single type <code>import</code> declaration for every type in the
package. It is more like an explicit single type <code>import</code> for every type
in the package <em>that you actually use</em> in your code. This is the reason
it’s called “on demand”; types are imported as you use them.</p>
<section data-pdf-bookmark="Naming conflicts and shadowing" data-type="sect3"><div class="sect3" id="idm45927749964400">
<h3>Naming conflicts and shadowing</h3>
<p><a data-primary="import declarations" data-secondary="naming conflicts and shadowing" data-type="indexterm" id="idm45927749962864"/><a data-primary="lists" data-secondary="java.util.List and java.awt.List classes" data-type="indexterm" id="idm45927749961696"/><a data-primary="naming conflicts" data-type="indexterm" id="idm45927749960784"/><a data-primary="packages" data-secondary="naming conflicts and shadowing" data-type="indexterm" id="idm45927749960112"/><code>import</code> declarations are invaluable to Java programming. They do
expose us to the possibility of naming conflicts, however. Consider the
packages <code>java.util</code> and <code>java.awt</code>. Both contain types named <code>List</code>.</p>
<p><a data-primary="java.awt.List" data-type="indexterm" id="idm45927749937280"/><a data-primary="java.util.List" data-type="indexterm" id="idm45927749936448"/><a data-primary="lists" data-secondary="java.util.List and java.awt.List classes" data-type="indexterm" id="idm45927749935840"/><code>java.util.List</code> is an important and commonly used interface. The
<code>java.awt</code> package contains a number of important types that are
commonly used in client-side applications, but <code>java.awt.List</code> has been
superseded and is not one of these important types. It is illegal to
import both <code>java.util.List</code> and <code>java.awt.List</code> in the same Java file.
The following single type <code>import</code> declarations produce a compilation
error:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">java.util.List</code><code class="p">;</code><code class="w"/>
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.List</code><code class="p">;</code><code class="w"/></pre>
<p>Using on-demand type imports for the two packages is legal:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">java.util.*</code><code class="p">;</code><code class="w">  </code><code class="c1">// For collections and other utilities.</code><code class="w"/>
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w">   </code><code class="c1">// For fonts, colors, and graphics.</code><code class="w"/></pre>
<p>Difficulty arises, however, if you actually try to use the type <code>List</code>.
This type can be imported “on demand” from either package, and any
attempt to use <code>List</code> as an unqualified type name produces a compilation
error. The workaround, in this case, is to explicitly specify the
package name you want.</p>
<p>Because <code>java.util.List</code> is much more commonly used than
<code>java.awt.List</code>, it is useful to combine the two on-demand type <code>import</code>
declarations with a single type <code>import</code> declaration that serves to
disambiguate what we mean when we say <code>List</code>:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">java.util.*</code><code class="p">;</code><code class="w">    </code><code class="c1">// For collections and other utilities.</code><code class="w"/>
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w">     </code><code class="c1">// For fonts, colors, and graphics.</code><code class="w"/>
<code class="kn">import</code><code class="w"> </code><code class="nn">java.util.List</code><code class="p">;</code><code class="w"> </code><code class="c1">// To disambiguate from java.awt.List</code><code class="w"/></pre>
<p>With these <code>import</code> declarations in place, we can use <code>List</code> to mean the
<code>java.util.List</code> interface. If we actually need to use the
<code>java.awt.List</code> class, we can still do so as long as we include its
package name. There are no other naming conflicts between <code>java.util</code>
and <code>java.awt</code>, and their types will be imported “on demand” when we use
them without a package name.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="Importing Static Members" data-type="sect2"><div class="sect2" id="idm45927750028064">
<h2>Importing Static Members</h2>
<p><a data-primary="import static declarations" data-type="indexterm" id="idm45927749836320"/><a data-primary="packages" data-secondary="importing static members" data-type="indexterm" id="idm45927749835248"/><a data-primary="static import declarations" data-type="indexterm" id="idm45927749834336"/><a data-primary="static members" data-type="indexterm" id="idm45927749833696"/><a data-primary="types" data-secondary="importing static members" data-type="indexterm" id="idm45927749833024"/>As well as types, you can import the static members of types using
the keywords <code>import static</code>. (Static members are explained in
<a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>. If you are not already familiar with
them, you may want to come back to this section later.) Like type <code>import</code>
declarations, these static <code>import</code> declarations come in two forms:
single static member <code>import</code> and on-demand static member <code>import</code>. Suppose,
for example, that you are writing a text-based program that sends a lot
of output to <code>System.out</code>. In this case, you might use this single
static member <code>import</code> to save yourself typing:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import static</code><code class="w"> </code><code class="nn">java.lang.System.out</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="println()" data-secondary="out.println() instead of System.out.println()" data-type="indexterm" id="idm45927749825184"/><a data-primary="System.out.println()" data-type="indexterm" id="idm45927749824112"/>You can then use <code>out.println()</code> instead of
<code>System.out.println()</code>. <a data-primary="Math class" data-secondary="on-demand static import" data-type="indexterm" id="idm45927749822608"/>Or suppose you are writing a program that uses
many of the trigonometric and other functions of the <code>Math</code> class. In a
program that is clearly focused on numerical methods like this, having
to repeatedly type the class name “Math” does not add clarity to your
code; it just gets in the way. In this case, an on-demand static member
<code>import</code> may be appropriate:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import static</code><code class="w"> </code><code class="nn">java.lang.Math.*</code><code class="w"/></pre>
<p>With this <code>import</code> declaration, you are free to write concise expressions
like <code>sqrt(abs(sin(x)))</code> without having to prefix the name of each
static method with the class name <code>Math</code>.</p>
<p><a data-primary="constants" data-secondary="importing into code" data-type="indexterm" id="idm45927749792400"/>Another important use of <code>import static</code> declarations is to import the
names of constants into your code. This works particularly well with
enumerated types (see <a data-type="xref" href="ch04.xhtml#javanut8-CHP-4">Chapter 4</a>). Suppose, for
example, that you want to use the values of this enumerated type in code
you are writing:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">climate.temperate</code><code class="p">;</code><code class="w"/>
<code class="kd">enum</code><code class="w"> </code><code class="n">Seasons</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="n">WINTER</code><code class="p">,</code><code class="w"> </code><code class="n">SPRING</code><code class="p">,</code><code class="w"> </code><code class="n">SUMMER</code><code class="p">,</code><code class="w"> </code><code class="n">AUTUMN</code><code class="w"> </code><code class="p">};</code><code class="w"/></pre>
<p>You could import the type <code>climate.temperate.Seasons</code> and then prefix
the constants with the type name: <code>Seasons.SPRING</code>. For more concise
code, you could import the enumerated values themselves:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import static</code><code class="w"> </code><code class="nn">climate.temperate.Seasons.*</code><code class="p">;</code><code class="w"/></pre>
<p>Using static member <code>import</code> declarations for constants is generally a better tech<span class="keep-together">nique</span> than implementing an interface that defines the constants.</p>
<section data-pdf-bookmark="Static member imports and overloaded methods" data-type="sect3"><div class="sect3" id="idm45927749721312">
<h3>Static member imports and overloaded methods</h3>
<p><a data-primary="method overloading" data-type="indexterm" id="idm45927749720304"/><a data-primary="overloading, static member imports and" data-type="indexterm" id="idm45927749719696"/><a data-primary="packages" data-secondary="static member imports and overloaded methods" data-type="indexterm" id="idm45927749719088"/>A static <code>import</code> declaration imports a <em>name</em>, not any one specific
member with that name. Because Java allows method overloading and
allows a type to have fields and methods with the same name, a single
static member <code>import</code> declaration may actually import more than one
member. Consider this code:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import static</code><code class="w"> </code><code class="nn">java.util.Arrays.sort</code><code class="p">;</code><code class="w"/></pre>
<p><a data-primary="namespaces" data-secondary="importing static members" data-type="indexterm" id="idm45927749690224"/><a data-primary="sort()" data-secondary="static member imports and" data-type="indexterm" id="idm45927749688304"/>This declaration imports the name “sort” into the namespace, not any one
of the 19 <code>sort()</code> methods defined by <code>java.util.Arrays</code>. If you use the
imported name <code>sort</code> to invoke a method, the compiler will look at the
types of the method arguments to determine which method you mean.</p>
<p>It is even legal to import static methods with the same name from two or
more different types as long as the methods all have different
signatures. Here is one natural example:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kn">import static</code><code class="w"> </code><code class="nn">java.util.Arrays.sort</code><code class="p">;</code><code class="w"/>
<code class="kn">import static</code><code class="w"> </code><code class="nn">java.util.Collections.sort</code><code class="p">;</code><code class="w"/></pre>
<p>You might expect that this code would cause a syntax error. In fact, it
does not because the <code>sort()</code> methods defined by the <code>Collections</code> class
have different signatures than all of the <code>sort()</code> methods defined by
the <code>Arrays</code> class. When you use the name “sort” in your code, the
compiler looks at the types of the arguments to determine which of the
21 possible imported methods you mean.<a data-startref="ix_ch02-asciidoc64" data-type="indexterm" id="idm45927749634144"/><a data-startref="ix_ch02-asciidoc63" data-type="indexterm" id="idm45927749633472"/></p>
</div></section>
</div></section>
</div></section>
<section data-pdf-bookmark="Java Source File Structure" data-type="sect1"><div class="sect1" id="idm45927750140800">
<h1>Java Source File Structure</h1>
<p><a data-primary="file structure, Java" data-type="indexterm" id="idm45927749631600"/><a data-primary="Java file structure" data-type="indexterm" id="idm45927749631008"/><a data-primary="source file, Java" data-type="indexterm" id="idm45927749630336"/><a data-primary="syntax, Java" data-secondary="Java file structure" data-type="indexterm" id="idm45927749629664"/><a data-primary="syntax, Java" data-secondary="Java source file structure" data-type="indexterm" id="idm45927749628720"/>This chapter has taken us from the smallest to the largest elements of
Java syntax, from individual characters and tokens to operators,
expressions, statements, and methods, and on up to classes and packages.
From a practical standpoint, the unit of Java program structure you will
be dealing with most often is the Java file. A Java file is the smallest
unit of Java code that can be compiled by the Java compiler. A Java file
consists of:</p>
<ul>
<li>
<p>An optional <code>package</code> directive</p>
</li>
<li>
<p>Zero or more <code>import</code> or <code>import static</code> directives</p>
</li>
<li>
<p>One or more type definitions</p>
</li>
</ul>
<p>These elements can be interspersed with comments, of course, but they
must appear in this order. This is all there is to a Java file. All Java
statements (except the <code>package</code> and <code>import</code> directives, which are not
true statements, and the specialized module descriptors we’ll discuss in
<a data-type="xref" href="ch12.xhtml#javanut8-CHP-12">Chapter 12</a>) must appear within methods, and all methods must appear
within a type definition.</p>
<p><a data-primary="module-info.java file" data-type="indexterm" id="idm45927749599520"/>A special Java file named <code>module-info.java</code> is used only in declaring the
structure and visibility of our packages in a modular Java application. These
more advanced techniques and syntax are covered in detail in
<a data-type="xref" href="ch12.xhtml#javanut8-CHP-12">Chapter 12</a>.</p>
<p>Java files have a couple of other important restrictions. First, each
file can contain at most one top-level class that is declared <code>public</code>.
A <code>public</code> class is one that is designed for use by other classes in
other packages. A class can contain any number of nested or inner
classes that are <code>public</code>. We’ll see more about the <code>public</code> modifier
and nested classes in <a data-type="xref" href="ch03.xhtml#javanut8-CHP-3">Chapter 3</a>.</p>
<p>The second restriction concerns the filename of a Java file. If a Java
file contains a <code>public</code> class, the name of the file must be the same as
the name of the class, with the extension <em>.java</em> appended. Therefore,
if <code>Account</code> is defined as a <code>public</code> class, its source code must appear
in a file named <em>Account.java</em>. Regardless of whether your classes are
<code>public</code> or not, it is good programming practice to define only one per
file and to give the file the same name as the class.</p>
<p>When a Java file is compiled, each of the classes it defines is compiled
into a separate <em>class</em> file that contains Java bytecodes to be
executed by the Java Virtual Machine. A class file has the same name
as the class it defines, with the extension <em>.class</em> appended. Thus, if
the file <em>Account.java</em> defines a class named <code>Account</code>, a Java compiler
compiles it to a file named <em>Account.class</em>. On most systems, class files
are stored in directories that correspond to their package names. For example, the
class <code>com.davidflanagan.examples.Account</code> is defined by the class
file 
<span class="keep-together"><em>com/davidflanagan/</em></span><em>examples/Account.class</em>.</p>
<p>The Java runtime knows where the class files for the standard system
classes are located and can load them as needed. When the interpreter
runs a program that wants to use a class named
<code>com.davidflanagan.examples.Account</code>, it knows that the code for that
class is located in a directory named <em>com/davidflanagan/examples/</em> and,
by default, it “looks” in the current directory for a subdirectory of
that name. In order to tell the interpreter to look in locations other
than the current directory, you must use the <code>-classpath</code> option when
invoking the interpreter or set the <code>CLASSPATH</code> environment variable.
For details, see the documentation for the Java executable, <em>java</em>, in
<a data-type="xref" href="ch13.xhtml#javanut8-CHP-13">Chapter 13</a>.</p>
</div></section>
<section data-pdf-bookmark="Defining and Running Java Programs" data-type="sect1"><div class="sect1" id="idm45927749582992">
<h1>Defining and Running Java Programs</h1>
<p><a data-primary="Java programs" data-secondary="defining and running" data-type="indexterm" id="idm45927749581488"/><a data-primary="syntax, Java" data-secondary="defining/running Java programs" data-type="indexterm" id="idm45927749580512"/>A Java program consists of a set of interacting class definitions. But
not every Java class or Java file defines a program. To create a
program, you must define a class that has a special method with the
following signature:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"/></pre>
<p>This <code>main()</code> method is the main entry point for your program. It is
where the Java interpreter starts running. This method is passed an
array of strings and returns no value. When <code>main()</code> returns, the Java
interpreter exits (unless <code>main()</code> has created separate threads, in
which case the interpreter waits for all those threads to exit).</p>
<p>To run a Java program, you run the Java executable, <em>java</em>,
specifying the fully qualified name of the class that contains the
<code>main()</code> method. Note that you specify the name of the class, <em>not</em> the
name of the class file that contains the class. Any additional arguments
you specify on the command line are passed to the <code>main()</code> method as its
<code>String[]</code> parameter. You may also need to specify the <code>-classpath</code>
option (or <code>-cp</code>) to tell the interpreter where to look for the classes
needed by the program. Consider the following command:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">java</code><code class="w"> </code><code class="o">-</code><code class="n">classpath</code><code class="w"> </code><code class="o">/</code><code class="n">opt</code><code class="o">/</code><code class="n">Jude</code><code class="w"> </code><code class="n">com</code><code class="p">.</code><code class="na">davidflanagan</code><code class="p">.</code><code class="na">jude</code><code class="p">.</code><code class="na">Jude</code><code class="w"> </code><code class="n">datafile</code><code class="p">.</code><code class="na">jude</code><code class="w"/></pre>
<p><a data-primary="java command" data-type="indexterm" id="idm45927749512432"/><a data-primary="Java interpreter" data-type="indexterm" id="idm45927749550096"/><code>java</code> is the command to run the Java interpreter.
<code>-classpath /opt/Jude</code> tells the interpreter where to look for
<em>.class</em> files. <a data-primary="main()" data-type="indexterm" id="idm45927749548272"/><code>com.davidflanagan.jude.Jude</code> is the name of the program
to run (i.e., the name of the class that defines the <code>main()</code> method).
Finally, <code>datafile.jude</code> is a string that is passed to that <code>main()</code>
method as the single element of an array of <code>String</code> objects.</p>
<p>There is an easier way to run programs. If a program and all its
auxiliary classes (except those that are part of the Java platform) <a data-primary="JAR (Java archive) files" data-type="indexterm" id="idm45927749506608"/>have
been properly bundled in a Java archive (JAR) file, you can run the
program simply by specifying the name of the JAR file. In the next
example, we show how to start up a log analyzer:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">java</code><code class="w"> </code><code class="o">-</code><code class="n">jar</code><code class="w"> </code><code class="o">/</code><code class="n">usr</code><code class="o">/</code><code class="n">local</code><code class="o">/</code><code class="n">log</code><code class="o">-</code><code class="n">analyzer</code><code class="o">/</code><code class="n">log</code><code class="o">-</code><code class="n">analyzer</code><code class="p">.</code><code class="na">jar</code><code class="w"/></pre>
<p>Some operating systems make JAR files automatically executable. On those systems, you can simply say:</p>
<pre data-code-language="java" data-type="programlisting"><code class="o">/</code><code class="n">usr</code><code class="o">/</code><code class="n">local</code><code class="o">/</code><code class="n">log</code><code class="o">-</code><code class="n">analyzer</code><code class="o">/</code><code class="n">log</code><code class="o">-</code><code class="n">analyzer</code><code class="p">.</code><code class="na">jar</code><code class="w"/></pre>
<p><a data-primary="Java 17" data-secondary="running java against a source file" data-type="indexterm" id="idm45927749451424"/>Java 17 also introduced the ability to run <code>java</code> against a source file
directly, similar to what’s available in scripting languages such as Python.
You still must define a class matching the name of the file and a
<code>main()</code> method, but then you can execute the program with:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">java</code><code class="w"> </code><code class="n">MyClass</code><code class="p">.</code><code class="na">java</code><code class="w"/></pre>
<p>See <a data-type="xref" href="ch13.xhtml#javanut8-CHP-13">Chapter 13</a> for more details on how to execute Java programs.</p>
</div></section>
<section data-pdf-bookmark="Summary" data-type="sect1"><div class="sect1" id="idm45927749582400">
<h1>Summary</h1>
<p>In this chapter, we’ve introduced the basic syntax of the Java language.
Due to the interlocking nature of the syntax of programming languages,
it is perfectly fine if you don’t feel at this point that you have
completely grasped all of the syntax of the language. It is by practice
that we acquire proficiency in any language, human or computer.</p>
<p>It is also worth observing that some parts of syntax are far more
regularly used than others. For example, the <code>strictfp</code> and <code>assert</code>
keywords are almost never used. Rather than trying to grasp every aspect
of Java’s syntax, it is far better to begin to acquire facility in the
core aspects of Java and then return to any details of syntax that may
still be troubling you. With this in mind, let’s move to the next
chapter and begin to discuss the classes and objects that are so central
to Java and the basics of Java’s approach to object-oriented programming.<a data-startref="ix_ch02-asciidoc0" data-type="indexterm" id="idm45927749394992"/></p>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="idm45927772106240"><sup><a href="ch02.xhtml#idm45927772106240-marker">1</a></sup> Technically, the minus sign is an operator that operates on the literal and not part of the literal itself.</p><p data-type="footnote" id="idm45927754904640"><sup><a href="ch02.xhtml#idm45927754904640-marker">2</a></sup> Technically, they must all implement the <code>AutoCloseable</code> interface.</p><p data-type="footnote" id="idm45927754603040"><sup><a href="ch02.xhtml#idm45927754603040-marker">3</a></sup> In the Java Language Specification, the term “signature” has a technical meaning that is slightly different than that used here. This book uses a less formal definition of method signature.</p><p data-type="footnote" id="idm45927752917984"><sup><a href="ch02.xhtml#idm45927752917984-marker">4</a></sup> There is a terminology difficulty in discussions of arrays. Unlike with classes and their instances, we use the term “array” for both the array type and the array instance. In practice, it is usually clear from context whether a type or a value is being discussed.</p></div></div></section></div></body></html>