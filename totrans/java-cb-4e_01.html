<html><head></head><body><section class="pagenumrestart" data-pdf-bookmark="Chapter 1. Getting Started: Compiling and Running Java" data-type="chapter" epub:type="chapter"><div class="chapter" id="javacook-getstarted">&#13;
<h1><span class="label">Chapter 1. </span>Getting Started: Compiling and <span class="keep-together">Running Java</span></h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.0 Introduction" data-type="sect1"><div class="sect1" id="javacook-getstarted-intro">&#13;
<h1>1.0 Introduction</h1>&#13;
&#13;
<p><a data-primary="Project Jigsaw" data-see="Java Platform Module System (JPMS)" data-type="indexterm" id="idm45290711652008"/><a data-primary="character strings" data-see="strings" data-type="indexterm" id="idm45290711650904"/><a data-primary="multiline text strings" data-see="text blocks" data-type="indexterm" id="idm45290711649960"/><a data-primary="Maven" data-see="Apache Maven" data-type="indexterm" id="idm45290711649016"/><a data-primary="JSR-310 API" data-see="Date/Time API" data-type="indexterm" id="idm45290711648072"/><a data-primary="IDE" data-see="Integrated Development Environment (IDE)" data-type="indexterm" id="idm45290711647128"/><a data-primary="Big Data" data-see="data science" data-type="indexterm" id="idm45290711646088"/><a data-primary="ML" data-see="machine learning (ML)" data-type="indexterm" id="idm45290711645144"/><a data-primary="repository" data-see="Git" data-type="indexterm" id="idm45290711644200"/><a data-primary="repository" data-see="SCM (source code management) repository" data-type="indexterm" id="idm45290711643256"/><a data-primary="repository" data-see="javasrc repository" data-type="indexterm" id="idm45290711642296"/>This chapter covers some entry-level tasks that you need to know how to do before you can go on. It is said you must crawl before you can walk, and walk before you can ride a bicycle. Before you can try out anything in this book, you need to be able to compile and run your Java code, so I start there, showing several ways to do that: the JDK way, the Integrated Development Environment (IDE) way, and the build tools (Ant, Maven, etc.) way. Another issue people run into is setting <code>CLASSPATH</code> correctly, so that’s dealt with next.  Deprecation warnings follow after that, because you’re likely to encounter them in maintaining old Java code. The chapter ends with some general information about conditional compilation, unit testing, assertions, and debugging.</p>&#13;
&#13;
<p><a data-primary="Java" data-secondary="downloading" data-type="indexterm" id="idm45290711639896"/><a data-primary="downloading" data-type="indexterm" id="idm45290711638696"/>If you don’t already have Java installed, you’ll need to download it. Be aware that there&#13;
are several different downloads. The <a data-primary="Java Runtime Environment (JRE)" data-type="indexterm" id="idm45290711637752"/><a data-primary="JRE (Java Runtime Environment)" data-type="indexterm" id="idm45290711637112"/>JRE (Java Runtime Environment) was, up until Java 8, a smaller download for end users.&#13;
Since there is far less desktop Java than there once was, the JRE was eliminated in favor&#13;
of<a data-primary="jlink" data-type="indexterm" id="idm45290711636152"/> <code>jlink</code> to make a custom download (see <a data-type="xref" href="ch15.html#javacook-packages-SECT-jlink">Recipe 15.8</a>).&#13;
<a data-primary="Java Development Kit (JDK)" data-type="indexterm" id="idm45290711634040"/><a data-primary="JDK (Java Development Kit)" data-type="indexterm" id="idm45290711633320"/><a data-primary="Java SDK" data-type="indexterm" id="idm45290711632632"/>The JDK or Java SDK download is the full development environment,&#13;
which you’ll want if you’re going to be developing Java software.</p>&#13;
&#13;
<p>Standard downloads for the current release of Java are available at<a data-primary="Oracle (website)" data-type="indexterm" id="idm45290711631432"/> <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle’s website</a>.</p>&#13;
&#13;
<p>You can sometimes find prerelease builds of the next major Java version on <a href="http://jdk.java.net"><em class="hyperlink">http://jdk.java.net</em></a>.&#13;
The entire JDK is maintained as an open source project, and the OpenJDK source tree is used&#13;
(with changes and additions) to build the commercial and supported Oracle JDKs.</p>&#13;
&#13;
<p>If you’re already happy with your IDE, you may wish to skip some or all of this material.&#13;
It’s here to ensure that everybody can compile and debug their programs before we move on.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.1 Compiling and Running Java: Standard JDK" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-1">&#13;
<h1>1.1 Compiling and Running Java: Standard JDK</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-1.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="Standard JDK" data-type="indexterm" id="sjdk_a"/><a data-primary="compiling" data-type="indexterm" id="idm45290711623720"/><a data-primary="Java" data-secondary="compiling and running" data-type="indexterm" id="java_comprun"/>You need to compile and run your Java program.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-1.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>This is one of the few areas where your computer’s operating system impinges on Java’s portability, so let’s get these issues out of the way first.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="JDK" data-type="sect3"><div class="sect3" id="javacook-getstarted-SECT-1.2.1">&#13;
<h3>JDK</h3>&#13;
&#13;
<p><a data-primary="Java Development Kit (JDK)" data-type="indexterm" id="jdk_a"/><a data-primary="JDK (Java Development Kit)" data-type="indexterm" id="jdkjdk_ab"/><a data-primary="Java SDK" data-type="indexterm" id="jsdk_ab"/>Using the command-line Java Development Kit (JDK) may be the best&#13;
way to keep up with the very latest improvements in Java. Assuming&#13;
you have the standard JDK installed in the standard location and/or&#13;
have set its location in your <code>PATH</code>, you&#13;
should be able to run the command-line JDK tools. Use the commands<a data-primary="javac command" data-type="indexterm" id="idm45290711613672"/>&#13;
<em>javac</em> to compile and<a data-primary="java command" data-type="indexterm" id="idm45290711612424"/> <em>java</em> to run your program (and, on Windows&#13;
only,<a data-primary="javaw command" data-type="indexterm" id="idm45290711611080"/> <em>javaw</em> to run a program without a console window), like this:</p>&#13;
<pre data-type="programlisting" id="I_1_tt4">C:\javasrc&gt;<strong>javac HelloWorld.java</strong>&#13;
&#13;
C:\javasrc&gt;<strong>java HelloWorld</strong>&#13;
Hello, World&#13;
&#13;
C:\javasrc&gt;</pre>&#13;
&#13;
<p>If the program refers to other classes for which the source is available (in the same directory)&#13;
and a compiled <em>.class</em> file is not, <em>javac</em> will automatically compile it for you.&#13;
Effective with Java 11, for simple programs that don’t need any such co-compilation,&#13;
you can combine the two operations by simply passing the Java source file to the <em>java</em> command:</p>&#13;
<pre data-type="programlisting">&#13;
	$ <strong>java HelloWorld.java</strong>&#13;
	Hello, Java&#13;
	$&#13;
	</pre>&#13;
&#13;
<p>As you can see from the compiler’s (lack of) output, both <em>javac</em> and <em>java</em> compilation works on the Unix “no news is good news” philosophy: if a program was able to do what you asked it to, it shouldn’t bother nattering at you to say that it did so.</p>&#13;
&#13;
<p>There is an optional setting called <a data-primary="CLASSPATH" data-secondary="about" data-type="indexterm" id="idm45290711602504"/><code>CLASSPATH</code>, discussed in <a data-type="xref" href="#javacook-getstarted-SECT-4">Recipe 1.5</a>, that controls where Java looks for classes. <code>CLASSPATH</code>, if set, is used by both <em>javac</em> and <em>java</em>. In older versions of Java, you had to set your <code>CLASSPATH</code> to include “.” even to run a simple program from the current directory; this is no longer true on current Java <span class="keep-together">implementations.</span></p>&#13;
&#13;
<p>Sun/Oracle’s <em>javac</em> compiler is the official reference implementation. There were several alternative open source command-line compilers, including <a href="http://sourceforge.net/projects/jikes">Jikes</a> and<a data-primary="Kaffe" data-type="indexterm" id="idm45290711596200"/> <a href="http://github.com/kaffe/kaffe">Kaffe</a>, but they are, for the most part, no longer actively maintained.</p>&#13;
&#13;
<p>There have also been some Java runtime clones, including<a data-primary="Apache Harmony" data-type="indexterm" id="idm45290711593912"/><a data-primary="Japhar" data-type="indexterm" id="idm45290711593128"/> <a href="http://harmony.apache.org">Apache Harmony</a>, <a href="http://www.hungry.com/old-hungry/products/japhar">Japhar</a>, the IBM Jikes Runtime (from the same site as Jikes), and even<a data-primary="JNode" data-type="indexterm" id="idm45290711590856"/> <a href="http://www.jnode.org">JNode</a>, a complete, standalone operating system written in Java; but since the Sun/Oracle JVM has been open sourced (GPL), most of these projects have stopped being maintained. Harmony was retired by Apache in November 2011.<a data-primary="" data-startref="jdk_a" data-type="indexterm" id="idm45290711589016"/><a data-primary="" data-startref="jsdk_ab" data-type="indexterm" id="idm45290711588040"/><a data-primary="" data-startref="jdkjdk_ab" data-type="indexterm" id="idm45290711587096"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="macOS" data-type="sect3"><div class="sect3" id="javacook-getstarted-SECT-1.2.3">&#13;
<h3><a data-primary="macOS" data-type="indexterm" id="idm45290711585320"/>macOS</h3>&#13;
&#13;
<p>The JDK is pure command line. At the other end of the spectrum in terms of keyboard-versus-visual, we have the Apple Macintosh. Books have been written about how great the Mac user interface is, and I won’t step into that debate. macOS (Release 10.x of the OS) is built upon a BSD Unix (and “Mach”) base. As such, it has a regular command line (the Terminal application, hidden away under <em>/Applications/Utilities</em>), as well as both the traditional Unix command-line tools and the graphical Mac tools.&#13;
If you’re using macOS, you can use the command-line JDK tools or any of the modern build tools. Compiled classes can be packaged into clickable applications using the <a data-primary="Jar Packager" data-type="indexterm" id="idm45290711582744"/>Jar Packager discussed in <a data-type="xref" href="ch15.html#javacook-packages-SECT-7">Recipe 15.6</a>. Mac fans can use one of the many full IDE tools discussed in <a data-type="xref" href="#javacook-getstarted-SECT-3">Recipe 1.3</a>.&#13;
Apple provides <a data-primary="XCode" data-type="indexterm" id="idm45290711580280"/>XCode as its IDE, but out of the box it isn’t very Java-friendly.<a data-primary="" data-startref="sjdk_a" data-type="indexterm" id="idm45290711579448"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.2 Compiling and Running Java: GraalVM for Better Performance" data-type="sect1"><div class="sect1" id="jcb-getstarted-graal">&#13;
<h1>1.2 Compiling and Running Java: GraalVM for Better Performance</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45290711576744">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="GraalVM" data-secondary="about" data-type="indexterm" id="graa_a"/>You’ve heard that Graal is a JVM from Oracle that’s faster than the standard JDK, and you want to try it out.&#13;
Graal promises to offer better performance, and it offers the ability to mix and match programming languages&#13;
and pre-compile your Java code into executable form for a given platform.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45290711923336">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Download and install GraalVM.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45290711921784">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>GraalVM bills itself as “a universal virtual machine for running applications written&#13;
in JavaScript, Python, Ruby, R, JVM-based languages like Java, Scala, Clojure, Kotlin,&#13;
and LLVM-based languages such as C and C++.”</p>&#13;
&#13;
<p>Note that Graal is undergoing rapid change.&#13;
While this recipe reflects the latest information at press time (late 2019),&#13;
there may be newer versions and changed functionality by the time you are ready to install.</p>&#13;
&#13;
<p>As we go to press, GraalVM is based on OpenJDK 11,&#13;
which means you can use Modules and other Java 9, 10, and 11 features,&#13;
but it doesn’t have support for Java 12, 13 or 14 features.&#13;
You can build your own Graal on later releases, since&#13;
 <a href="https://github.com/oracle/graal">the complete source is on GitHub</a>.</p>&#13;
&#13;
<p>See <a data-primary="GraalVM" data-secondary="website" data-type="indexterm" id="idm45290711917432"/><a href="https://www.graalvm.org">the GraalVM website</a> for more information on GraalVM.&#13;
See also&#13;
<a href="https://www.infoq.com/presentations/graal-jvm-jit">this presentation</a>&#13;
by <a data-primary="Thalinger, Chris" data-type="indexterm" id="idm45290711915048"/>Chris Thalinger, who has worked on JVMs for a decade and a half.</p>&#13;
&#13;
<p><a href="https://www.graalvm.org/downloads">Start at the downloads page</a>.&#13;
<a data-primary="editions, GraalVM" data-type="indexterm" id="idm45290711913176"/>You will have to choose between the Community Edition and&#13;
the Enterprise Edition.&#13;
To avoid any licensing issues, this recipe starts with the Community Edition.&#13;
You can download a tarball for Linux, macOS, and Windows.&#13;
There is no formal installer at this point. To install it,&#13;
open a terminal window and try the following (the directory chosen is for macOS):</p>&#13;
<pre>$ cd /Library/Java/JavaVirtualMachines&#13;
$ tar xzvf ~/Downloads/graalvm-ce-NNN-VVV.tar.gz # replace with actual version&#13;
$ cd&#13;
$ /usr/libexec/java_home -V # macOS only&#13;
11.0.2, x86_64:    "OpenJDK 11.0.2"&#13;
    /Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home&#13;
1.8.0_221, x86_64:    "GraalVM CE 19.2.0.1"&#13;
    /Library/Java/JavaVirtualMachines/graalvm-ce-19.2.0.1/Contents/Home&#13;
$</pre>&#13;
&#13;
<p>On other systems, do the install in a sensible place.&#13;
On most versions of Linux, after installing a JDK, you can use the standard Linux<a data-primary="alternatives command" data-type="indexterm" id="idm45290711910408"/>&#13;
<a href="https://access.redhat.com/documentation/en-US/JBoss_Communications_Platform/5.1/html/Platform_Installation_Guide/sect-Setting_the_Default_JDK.html"><em>alternatives</em> command</a> to make this your default.&#13;
On MacOS, the<a data-primary="java_home command" data-type="indexterm" id="idm45290711908472"/> <em>java_home</em> command output confirms that you have installed GraalVM, but it’s not your default JVM yet.&#13;
To do that, you have to set your <code>PATH</code>:</p>&#13;
<pre>export JAVA_HOME=&lt;where you installed GraalVM&gt;/Contents/Home&#13;
export PATH=$JAVA_HOME/bin:$PATH</pre>&#13;
&#13;
<p>Be very sure to include the<a data-primary=":$PATH" data-type="indexterm" id="idm45290711905800"/> <code>:$PATH</code> at the end of the line—no space—or all your&#13;
standard command-line tools will appear to disappear&#13;
(if you made this mistake, just log out and log back in to restore your path).&#13;
I suggest you don’t update your login scripts until you are sure the settings you have are correct.</p>&#13;
&#13;
<p>Now you should be running the Graal version of Java. This is what you should <span class="keep-together">see:</span></p>&#13;
<pre>$ java -version&#13;
openjdk version "1.8.0_222"&#13;
OpenJDK Runtime Environment (build&#13;
  1.8.0_222-20190711112007.graal.jdk8u-src-tar-gz-b08)&#13;
OpenJDK 64-Bit GraalVM CE 19.2.0.1 (build 25.222-b08-jvmci-19.2-b02, mixed mode)</pre>&#13;
&#13;
<p>Your output may differ, but as long as it says “GraalVM” you should be good.</p>&#13;
&#13;
<p>Graal includes a number of useful tools, including<a data-primary="native-image tool" data-type="indexterm" id="idm45290711901800"/> <em>native-image</em>, which can&#13;
in some cases translate a class file into a binary executable for the&#13;
platform it’s running on, optimizing startup speed and also reducing&#13;
the download size needed to run a single application.&#13;
The <em>native-image</em> tool must be downloaded separately using&#13;
<code>gu install native-image</code>.</p>&#13;
&#13;
<p>We’ll explore running some of the other non-Java languages in <a data-type="xref" href="ch18.html#javacook-otherlang-with-graalvm">Recipe 18.4</a>.<a data-primary="" data-startref="graa_a" data-type="indexterm" id="idm45290711897912"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.3 Compiling, Running, and Testing with an IDE" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-3">&#13;
<h1>1.3 Compiling, Running, and Testing with an IDE</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-3.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="Integrated Development Environment (IDE)" data-secondary="compiling, running and testing with an" data-type="indexterm" id="ide_crt"/><a data-primary="Java" data-secondary="testing with an IDE" data-type="indexterm" id="jaw_t"/><a data-primary="testing" data-secondary="Java with an IDE" data-type="indexterm" id="t_jaw"/>It is cumbersome to use several tools for the various development tasks.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-3.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use an Integrated Development Environment (IDE), which combines editing, testing, compiling, running, debugging, and package management.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-3.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Many programmers find that using a handful of separate tools—a text editor, a compiler, and a runner program, not to mention a debugger—is too many. An IDE <em>integrates</em> all of these into a single toolset with a graphical user interface. Many IDEs are available, and the better ones are fully integrated tools with their own compilers and virtual machines. Class browsers and other features of IDEs round out the ease-of-use feature sets of these tools. Today most developers use an IDE because of the productivity gains. Although I started as a command-line junkie, I do find that IDE features like the following make me more productive:<a data-primary="Integrated Development Environment (IDE)" data-secondary="features of" data-type="indexterm" id="idm45290711884632"/></p>&#13;
&#13;
<p><a data-primary="code" data-secondary="completion" data-type="indexterm" id="idm45290711883432"/>Code completion::<a data-primary="Ian's Rule" data-type="indexterm" id="idm45290711882328"/> <em>Ian’s Rule</em> here is that I never type more than three characters of any name that is known to the IDE; let the computer do the typing!&#13;
<a data-primary="incremental compiling features, as a feature of IDE" data-type="indexterm" id="idm45290711880936"/>Incremental compiling features:: Note and report compilation errors as you type, instead of waiting until you are finished typing.&#13;
<a data-primary="refactoring, as a feature of IDE" data-type="indexterm" id="idm45290711879928"/>Refactoring:: The ability to make far-reaching yet behavior-preserving changes to a code base without having to manually edit dozens of individual files.</p>&#13;
&#13;
<p>Beyond that, I don’t plan to debate the merits of IDE versus the command-line process; I use both modes at different times and on different projects. I’m just going to show a few examples of using a couple of the Java-based IDEs.</p>&#13;
&#13;
<p>The three most popular Java IDEs, which run on all mainstream computing platforms and quite a few niche ones, are<a data-primary="Eclipse" data-secondary="about" data-type="indexterm" id="idm45290711877528"/><a data-primary="NetBeans" data-type="indexterm" id="idm45290711876552"/><a data-primary="IntelliJ IDEA" data-secondary="about" data-type="indexterm" id="idm45290711875880"/> <em>Eclipse</em>, <em>NetBeans</em>, and <em>IntelliJ IDEA</em>. Eclipse is the most widely used, but the others each have a special place in the hearts and minds of some developers. If you develop for <a data-primary="Android" data-secondary="developing for" data-type="indexterm" id="idm45290711873336"/>Android, the ADT has traditionally been developed for Eclipse, but it has now transitioned to IntelliJ as the basis for Android Studio, which is the standard IDE for Android, and for Google’s other mobile platform, <a href="https://flutter.io">Flutter</a>.&#13;
All three IDEs are plug-in based and offer a wide selection of optional and third-party plug-ins to&#13;
enhance the IDE, such as supporting other programming languages, frameworks, and file types.&#13;
While the following paragraph shows creating and running a program with Eclipse, the IntelliJ IDEA and&#13;
NetBeans IDEs all offer similar capabilities.</p>&#13;
&#13;
<p>One of the most popular cross-platform, open source IDEs for Java is Eclipse, originally from IBM and now shepherded by the <a href="http://eclipse.org">Eclipse Foundation</a>, the home of many software projects including <a data-primary="Jakarta" data-type="indexterm" id="idm45290711869864"/>&#13;
<a href="https://projects.eclipse.org/projects/ee4j.jakartaee-platform">Jakarta</a>,&#13;
the follow-on to the Java Enterprise Edition.&#13;
The Eclipse Platform is also used as the basis of other tools such as&#13;
SpringSource Tool Suite (STS) and IBM’s Rational Application Developer (RAD).&#13;
All IDEs do basically the same thing for you when getting started.&#13;
The example in <a data-type="xref" href="#javacook-getstarted-FIG-5a">Figure 1-1</a> shows starting a new project.</p>&#13;
&#13;
<figure><div class="figure" id="javacook-getstarted-FIG-5a">&#13;
<img alt="jcb4 0101" src="assets/jcb4_0101.png"/>&#13;
<h6><span class="label">Figure 1-1. </span>Starting a new project with the Eclipse New Java Class Wizard</h6>&#13;
</div></figure>&#13;
&#13;
<p>The <a data-primary="Eclipse" data-secondary="New Java Class Wizard" data-type="indexterm" id="idm45290711864728"/>Eclipse New Java Class Wizard shown in&#13;
<a data-type="xref" href="#javacook-getstarted-FIG-5b">Figure 1-2</a> shows creating a new class.</p>&#13;
&#13;
<figure><div class="figure" id="javacook-getstarted-FIG-5b">&#13;
<img alt="jcb4 0102" src="assets/jcb4_0102.png"/>&#13;
<h6><span class="label">Figure 1-2. </span>Creating a new class with the Eclipse New Java Class Wizard</h6>&#13;
</div></figure>&#13;
&#13;
<p>Eclipse, like all modern IDEs, features a number of refactoring capabilities, shown in <a data-type="xref" href="#javacook-getstarted-FIG-6">Figure 1-3</a>.</p>&#13;
&#13;
<figure><div class="figure" id="javacook-getstarted-FIG-6">&#13;
<img alt="jcb4 0103" src="assets/jcb4_0103.png"/>&#13;
<h6><span class="label">Figure 1-3. </span>Refactoring in Eclipse</h6>&#13;
</div></figure>&#13;
&#13;
<p>And, of course, all the IDEs allow you to run and/or debug your application.&#13;
<a data-type="xref" href="#javacook-getstarted-intellij">Figure 1-4</a> shows running an application; for variety and neutrality,&#13;
this is shown using IntelliJ IDEA.</p>&#13;
&#13;
<p>macOS includes Apple’s Developer Tools. The main IDE is <a data-primary="XCode" data-type="indexterm" id="idm45290711855608"/>Xcode. Unfortunately, current versions of Xcode do not really support Java development, so I can’t recommend it for our purposes; it is primarily for those building nonportable (iOS-only or OS X–only) applications in the Swift or Objective-C programming languages. So even if you are on OS X, to do Java development you should use one of the three Java IDEs.</p>&#13;
&#13;
<p><a data-primary="Microsoft VSCode" data-type="indexterm" id="idm45290711854056"/>Microsoft VSCode (formerly part of Visual Studio) has been getting some attention in Java&#13;
circles lately, but it’s not a Java-specific IDE. Give it a try if you like.</p>&#13;
&#13;
<p><a data-primary="Integrated Development Environment (IDE)" data-secondary="choosing" data-type="indexterm" id="idm45290711852776"/>How do you choose an IDE?&#13;
Perhaps it will be dictated by your organization or chosen by majority vote of your fellow developers.&#13;
Given that all three major IDEs (Eclipse, NetBeans, and IntelliJ)&#13;
can be downloaded free and are 100% open source, why not try them all&#13;
and see which one best fits the kind of development you do?&#13;
Regardless of what platform you use to develop Java, if you have a Java runtime, you&#13;
should have plenty of IDEs from which to choose.</p>&#13;
&#13;
<figure><div class="figure" id="javacook-getstarted-intellij">&#13;
<img alt="jcb4 0104" src="assets/jcb4_0104.png"/>&#13;
<h6><span class="label">Figure 1-4. </span>IntelliJ program output</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-3.4">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>Each IDE’s website maintains an up-to-date list of resources,&#13;
including books. <a data-primary="Eclipse" data-secondary="website" data-type="indexterm" id="idm45290711847304"/><a data-primary="IntelliJ IDEA" data-secondary="website" data-type="indexterm" id="idm45290711846328"/><a data-primary="NetBeans" data-type="indexterm" id="idm45290711845384"/>See <a data-type="xref" href="#javacook-getstarted-idelist">Table 1-1</a> for the website for each.</p>&#13;
<table id="javacook-getstarted-idelist">&#13;
<caption><span class="label">Table 1-1. </span>The three major Java IDEs and their websites</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Product name</th>&#13;
<th>Project URL</th>&#13;
<th>Note</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Eclipse</p></td>&#13;
<td><p><a href="https://eclipse.org/"><em class="hyperlink">https://eclipse.org/</em></a></p></td>&#13;
<td><p>Basis of STS, RAD</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>IntelliJ Idea</p></td>&#13;
<td><p><a href="https://jetbrains.com/idea/"><em class="hyperlink">https://jetbrains.com/idea/</em></a></p></td>&#13;
<td><p>Basis of Android Studio</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Netbeans</p></td>&#13;
<td><p><a href="https://netbeans.apache.org"><em class="hyperlink">https://netbeans.apache.org</em></a></p></td>&#13;
<td><p>Run anywhere JavaSE does</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>These major IDEs are extensible; see their documentation&#13;
for a list of the many, many plug-ins available.&#13;
Most of them allow you to find and install plug-ins from within the IDE.&#13;
For Eclipse, use the <a data-primary="Eclipse Marketplace" data-type="indexterm" id="idm45290711829336"/>Eclipse Marketplace, near the bottom of the Help menu.&#13;
As a last resort, if you need/want to write a plug-in that extends the functionality of your IDE,&#13;
you can do that too, and in Java.</p>&#13;
&#13;
<p>For Eclipse, I have some useful information at&#13;
<a href="https://darwinsys.com/java"><em class="hyperlink">https://darwinsys.com/java</em></a>. The site includes a list of shortcuts to aid developer productivity.<a data-primary="" data-startref="t_jaw" data-type="indexterm" id="idm45290711826696"/><a data-primary="" data-startref="jaw_t" data-type="indexterm" id="idm45290711825704"/><a data-primary="" data-startref="ide_crt" data-type="indexterm" id="idm45290711824760"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.4 Exploring Java with JShell" data-type="sect1"><div class="sect1" id="javacook-getstarted-JSHELL">&#13;
<h1>1.4 Exploring Java with JShell</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-JSHELL.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="JShell" data-secondary="running Java with" data-type="indexterm" id="s_rj"/>You want to try out Java expressions and APIs quickly, without having to create a file with <code>public class X { public static void main(String[] args) { … }</code> every time.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-JSHELL.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use JShell, Java’s REPL (Read-Evaluate-Print-Loop) interpreter.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-JSHELL.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p><a data-primary="JShell" data-secondary="about" data-type="indexterm" id="idm45290711301000"/>Starting with Java 11, <code>JShell</code> is included as a standard part of Java. It allows you to enter Java statements and have them evaluated&#13;
without the bother of creating a class and a main program.&#13;
You can use it for quick calculations, to try out an API to see how it works,&#13;
or for almost any purpose; if you find an expression you like, you can copy it into a&#13;
regular Java source file and make it permanent.&#13;
JShell can also be used as a scripting language over Java, but the overhead of&#13;
starting the JVM means that it won’t be as fast as awk, Perl, or Python for quick scripting.</p>&#13;
&#13;
<p><a data-primary="read-evaluate-print loop (REPL)" data-type="indexterm" id="idm45290711298632"/><a data-primary="REPL (read-evaluate-print loop)" data-type="indexterm" id="idm45290711297912"/>REPL programs are very convenient, and they are hardly a new idea (LISP languages from the 1950s&#13;
included them). You can think of Command-Line Interpreters (CLIs) such as the Bash or Ksh&#13;
shells on UNIX/Linux, or Command.com and PowerShell on Microsoft Windows, as REPLs for the system&#13;
as a whole. Many interpreted languages like Ruby and Python can also be used as REPLs.&#13;
Java finally has its own REPL, <em>JShell</em>. Here’s an example of using it:</p>&#13;
&#13;
<pre data-type="programlisting">$ jshell&#13;
|  Welcome to JShell -- Version 11.0.2&#13;
|  For an introduction type: /help intro&#13;
&#13;
jshell&gt; "Hello"&#13;
$1 ==&gt; "Hello"&#13;
&#13;
jshell&gt; System.out.println("Hello");&#13;
Hello&#13;
&#13;
jshell&gt; System.out.println($1)&#13;
Hello&#13;
&#13;
jshell&gt; "Hello" + sqrt(57)&#13;
|  Error:&#13;
|  cannot find symbol&#13;
|    symbol:   method sqrt(int)&#13;
|  "Hello" + sqrt(57)&#13;
|            ^--^&#13;
&#13;
jshell&gt; "Hello" + Math.sqrt(57)&#13;
$2 ==&gt; "Hello7.54983443527075"&#13;
&#13;
jshell&gt; String.format("Hello %6.3f", Math.sqrt(57)&#13;
   ...&gt; )&#13;
$3 ==&gt; "Hello  7.550"&#13;
&#13;
jshell&gt; String x = Math.sqrt(22/7) + " " + Math.PI +&#13;
   ...&gt; " and the end."&#13;
x ==&gt; "1.7320508075688772 3.141592653589793 and the end."&#13;
&#13;
jshell&gt;</pre>&#13;
&#13;
<p><a data-primary="JShell" data-secondary="features and benefits of" data-type="indexterm" id="idm45290711294680"/>You can see some obvious features and benefits here:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The value of an expression is printed without needing to call <code>System.out.println</code> every time,&#13;
but you can call it if you like.</p>&#13;
</li>&#13;
<li>&#13;
<p>Values that are not assigned to a variable get assigned synthetic identifiers, like <code>$1</code>,&#13;
that can be used in subsequent statements.</p>&#13;
</li>&#13;
<li>&#13;
<p>The semicolon at the end of a statment is optional (unless you type more than one statement on a line).</p>&#13;
</li>&#13;
<li>&#13;
<p>If you make a mistake, you get a helpful message immediately.</p>&#13;
</li>&#13;
<li>&#13;
<p>You can get completion with a single tab, as in shell filename completion.</p>&#13;
</li>&#13;
<li>&#13;
<p>You can get the relevant portion of the Javadoc documentation on known classes or methods with just a double tab.</p>&#13;
</li>&#13;
<li>&#13;
<p>If you omit a close quote, parenthesis, or other punctuation, JShell will just wait for you,&#13;
giving a continuation prompt (<code>…</code>).</p>&#13;
</li>&#13;
<li>&#13;
<p>If you do make a mistake, you can use “shell history” (i.e., up arrow) to recall the statement so you can repair it.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p><a data-primary="JShell" data-secondary="prototyping Java code with" data-type="indexterm" id="idm45290711283768"/>JShell is also useful in prototyping Java code. For example, I wanted one of those&#13;
health-themed timers that reminds you to get up and move around a bit every half hour:</p>&#13;
&#13;
<pre data-type="programlisting">$ jshell&#13;
|  Welcome to JShell -- Version 11.0.2&#13;
|  For an introduction type: /help intro&#13;
&#13;
jshell&gt; while (true) { sleep (30*60); JOptionPane.showMessageDialog(null,&#13;
  "Move it"); }&#13;
|  Error:&#13;
|  cannot find symbol&#13;
|    symbol:   method sleep(int)&#13;
|  while (true) { sleep (30*60); JOptionPane.showMessageDialog(null, "Move it");}&#13;
|                 ^---^&#13;
|  Error:&#13;
|  cannot find symbol&#13;
|    symbol:   variable JOptionPane&#13;
|  while (true) { sleep (30*60); JOptionPane.showMessageDialog(null, "Move it");}&#13;
|                                ^---------^&#13;
&#13;
jshell&gt; import javax.swing.*;&#13;
&#13;
jshell&gt; while (true) { Thread.sleep (30*60); JOptionPane.showMessageDialog(null,&#13;
"Move it"); }&#13;
&#13;
jshell&gt; while (true) { Thread.sleep (30*60 * 1000);&#13;
  JOptionPane.showMessageDialog(null, "Move it"); }&#13;
&#13;
jshell&gt; ^D</pre>&#13;
&#13;
<p>I then put the final working version into a Java file called <em>MoveTimer.java</em>,&#13;
put a<a data-primary="class statement" data-type="indexterm" id="idm45290711279864"/> <code>class</code> statement and a<a data-primary="main() method" data-type="indexterm" id="idm45290711278584"/> <code>main()</code> method around the main line,&#13;
told the IDE to reformat the whole thing, and saved it into my <em>darwinsys-api</em> repository.</p>&#13;
&#13;
<p>So go ahead and experiment with JShell. Read the built-in introductory tutorial for&#13;
more details!&#13;
When you get something you like, either use <code>/save</code>, or copy and paste it into a Java program and save it.</p>&#13;
&#13;
<p>Read more about JShell at the<a data-primary="OpenJDK JShell Tutorial" data-type="indexterm" id="idm45290711275400"/>&#13;
<a href="https://cr.openjdk.java.net/~rfield/tutorial/JShellTutorial.html">OpenJDK JShell Tutorial</a>.<a data-primary="" data-startref="s_rj" data-type="indexterm" id="idm45290711273832"/><a data-primary="" data-startref="java_comprun" data-type="indexterm" id="idm45290711272824"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.5 Using CLASSPATH Effectively" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-4">&#13;
<h1>1.5 Using CLASSPATH Effectively</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-4.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p>You need to keep your class files in a common directory, or you’re wrestling with <code>CLASSPATH</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-4.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Set <code>CLASSPATH</code> to the list of directories and/or JAR files that contain the classes you want.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-4.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p><a data-primary="CLASSPATH" data-secondary="using" data-type="indexterm" id="idm45290711263864"/><code>CLASSPATH</code> is a list of class files in any of a number of directories, JAR files, or ZIP files. Just like the <code>PATH</code> your system uses for finding programs, the <code>CLASSPATH</code> is used by the Java runtime to find classes. Even when you type something as simple as <em>java HelloWorld</em>, the Java interpreter looks in each of the places named in your <code>CLASSPATH</code> until it finds a match. Let’s work through an example.</p>&#13;
&#13;
<p>The <code>CLASSPATH</code> can be set as an environment variable the same&#13;
way you set other environment variables, such as your <code>PATH</code> environment&#13;
variable. However, it’s usually preferable to specify the <code>CLASSPATH</code> for a given command on the command line:</p>&#13;
<pre data-type="programlisting" id="I_1_tt14"><strong>C:\&gt; java -classpath c:\ian\classes MyProg</strong></pre>&#13;
&#13;
<p>Suppose your <code>CLASSPATH</code> were set to <em>C:\classes;.</em> on Windows or <em>~/classes:.</em> on Unix or Mac. Suppose you had just compiled a source file named <em>HelloWorld.java</em> (with no package statement) into <em>HelloWorld.class</em> in the default directory (which is your current directory)&#13;
and tried to run it. On Unix, if you run one of the kernel tracing tools (<code>trace</code>, <code>strace</code>, <code>truss</code>, or <code>ktrace</code>), you would probably see the Java program <code>open</code> or <code>stat</code> or <code>access</code> the following files:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Some file(s) in the JDK directory</p>&#13;
</li>&#13;
<li>&#13;
<p>Then ~<em>/classes/HelloWorld.class</em>, which it probably wouldn’t find</p>&#13;
</li>&#13;
<li>&#13;
<p>Finally, <em>./HelloWorld.class</em>, which it would find, open, and read into memory</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>The vague “some file(s) in the JDK directory” is release dependent.&#13;
<a data-primary="Java Development Kit (JDK)" data-type="indexterm" id="idm45290711246776"/><a data-primary="JDK (Java Development Kit)" data-type="indexterm" id="idm45290711246056"/><a data-primary="Java SDK" data-type="indexterm" id="idm45290711245368"/>You should not mess with the JDK files, but if you’re curious,&#13;
you can find them in the System Properties (see <a data-type="xref" href="ch02.html#javacook-environ-SECT-2">Recipe 2.2</a>).&#13;
There used to be a variable named <code>sun.boot.class.path</code>, but that is not found anymore.&#13;
Let’s look for any property with <code>boot</code> in its name:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="n">jshell</code><code class="o">&gt;</code> <code class="n">System</code><code class="o">.</code><code class="na">getProperties</code><code class="o">().</code><code class="na">forEach</code><code class="o">((</code><code class="n">k</code><code class="o">,</code><code class="n">v</code><code class="o">)</code> <code class="o">-&gt;</code> <code class="o">{</code>&#13;
 <code class="o">...</code> <code class="k">if</code> <code class="o">(((</code><code class="n">String</code><code class="o">)</code><code class="n">k</code><code class="o">).</code><code class="na">contains</code><code class="o">(</code><code class="s">"boot"</code><code class="o">))</code> <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="n">k</code> <code class="o">+</code> <code class="s">"-&gt;"</code> <code class="o">+</code><code class="n">v</code><code class="o">);})</code>&#13;
<code class="n">sun</code><code class="o">.</code><code class="na">boot</code><code class="o">.</code><code class="na">library</code><code class="o">.</code><code class="na">path</code><code class="o">-&gt;/</code><code class="n">usr</code><code class="o">/</code><code class="n">local</code><code class="o">/</code><code class="n">jdk</code><code class="o">-</code><code class="mi">11</code><code class="o">/</code><code class="n">lib</code></pre>&#13;
&#13;
<p><a data-primary="CLASSPATH" data-secondary="environment variable, setting as an" data-type="indexterm" id="idm45290711239080"/>The reason I and others suggest <em>not</em> setting <code>CLASSPATH</code> as an environment variable&#13;
is that we don’t like surprises.&#13;
It’s easy to add a JAR to your <code>CLASSPATH</code> and then forget that you’ve done so; a program&#13;
might then work for you but not for your colleagues, due to their being unaware of your&#13;
hidden dependency. And if you add a new version to <code>CLASSPATH</code> without removing the old version,&#13;
you may run into conflicts.</p>&#13;
&#13;
<p>Note also that providing the <code>-classpath</code> argument causes the <code>CLASSPATH</code> environment&#13;
variable to be ignored.</p>&#13;
&#13;
<p>If you still want to set <code>CLASSPATH</code> as an environment variable, you can.&#13;
Suppose you had also installed the <a data-primary="JAR files" data-secondary="about" data-type="indexterm" id="idm45290711414408"/>JAR file containing the supporting classes for programs&#13;
from this book, <em>darwinsys-api.jar</em> (the actual filename if you download it may have a&#13;
<span class="keep-together">version</span> number as part of the filename). You might then set your <code>CLASSPATH</code> to&#13;
<em>C:\classes;C:\classes\darwinsys-api.jar;.</em> on Windows or&#13;
<em>~/classes:~/classes/darwinsys-api.jar:.</em> on Unix.</p>&#13;
&#13;
<p>Notice that you <em>do</em> need to list&#13;
the full name of the JAR file explicitly. Unlike a single class file, placing a JAR file into a directory&#13;
listed in your <code>CLASSPATH</code> does not make it available.</p>&#13;
&#13;
<p>Certain specialized programs (such as a web server running a <code>Servlet</code> container) might not use either bootpath or <code>CLASSPATH</code> exactly as shown; these application servers typically provide their own <code>ClassLoader</code> (see <a data-type="xref" href="ch17.html#javacook-reflection-SECT-4">Recipe 17.5</a> for information on class loaders). <a data-primary="EE Web containers" data-type="indexterm" id="idm45290700601592"/>EE Web containers, for example, set your web app <code>CLASSPATH</code> to include the directory <em>WEB-INF/classes</em> and all the JAR files found under <em>WEB-INF/lib</em>.</p>&#13;
&#13;
<p>How can you easily generate class files into a directory in your <code>CLASSPATH</code>? The <a data-primary="javac command" data-type="indexterm" id="idm45290700598456"/><em>javac</em> command has a <code>-d</code> dir option, which specifies where the compiler output should go. For example, using <code>-d</code> to put the <em>HelloWorld</em> class file into my <em>$HOME/classes</em> directory, I just type the following (note that from here on I will be using the package name in addition to the class name, like a good kid):</p>&#13;
<pre data-type="programlisting" id="I_1_tt17"><strong>javac -d $HOME/classes HelloWorld.java</strong>&#13;
<strong>java -cp $HOME/classes starting.HelloWorld</strong>&#13;
Hello, world!&#13;
</pre>&#13;
&#13;
<p>As long as this directory remains in my <code>CLASSPATH</code>, I can access the class file regardless of my current directory. That’s one of the key benefits of using <code>CLASSPATH</code>.</p>&#13;
&#13;
<p>While these examples show explicit use of <code>java</code> with <code>-classpath</code>, it is generally more convenient&#13;
(and reproducible) to use a build tool such as <a data-primary="Apache Maven" data-secondary="about" data-type="indexterm" id="idm45290700590840"/>Maven (<a data-type="xref" href="#javacook-getstarted-maven">Recipe 1.7</a>) or <a data-primary="Gradle" data-secondary="about" data-type="indexterm" id="idm45290700588888"/>Gradle,&#13;
which automatically provide the <code>CLASSPATH</code> for both compilation and execution.</p>&#13;
&#13;
<p>Note that Java 9 and later also have a <a data-primary="module path" data-type="indexterm" id="idm45290700586824"/>module path (environment variable <code>MODULEPATH</code>,&#13;
command-line argument <code>--module-path entry[:,…]</code>) with the same syntax as the class path.&#13;
The module path contains code that has been modularized; the Java Module System is&#13;
discussed in <a data-type="xref" href="ch02.html#javacook-environ-modules">Recipe 2.5</a> and <a data-type="xref" href="ch15.html#javacook-packages-creating-JPMS-modules">Recipe 15.9</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.6 Downloading and Using the Code Examples" data-type="sect1"><div class="sect1" id="javacook-getstarted-samplecode">&#13;
<h1>1.6 Downloading and Using the Code Examples</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-samplecode.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="downloading" data-type="indexterm" id="down_ce"/><a data-primary="code" data-secondary="downloading examples" data-type="indexterm" id="c_down"/>You want to try out my example code and/or use my utility classes.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-samplecode.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Download the latest archive of the book source files, unpack it, and run Maven (see <a data-type="xref" href="#javacook-getstarted-maven">Recipe 1.7</a>) to compile the files.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45290700538152">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p><a data-primary="javasrc repository" data-type="indexterm" id="idm45290700536712"/><a data-primary="darwinsys-api repository" data-type="indexterm" id="idm45290700536008"/>The source code used as examples in this book is included in a couple&#13;
of source code repositories that have been in continuous development since 1995.&#13;
These are listed in <a data-type="xref" href="#javacook-getstarted-TABLE-0">Table 1-2</a>.</p>&#13;
<table id="javacook-getstarted-TABLE-0">&#13;
<caption><span class="label">Table 1-2. </span>The main source repositories</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Repository name</th>&#13;
<th>GitHub URL</th>&#13;
<th>Package description</th>&#13;
<th>Approx. size</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><em>javasrc</em></p></td>&#13;
<td><p><a href="http://github.com/IanDarwin/javasrc"><em class="hyperlink">http://github.com/IanDarwin/javasrc</em></a></p></td>&#13;
<td><p>Java code examples/demos</p></td>&#13;
<td><p>1,400 classes</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>darwinsys-api</em></p></td>&#13;
<td><p><a href="http://github.com/Iandarwin/darwinsys-api"><em class="hyperlink">http://github.com/Iandarwin/darwinsys-api</em></a></p></td>&#13;
<td><p>A published API</p></td>&#13;
<td><p>200 classes</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>You can download these repositories from the GitHub URLs shown in <a data-type="xref" href="#javacook-getstarted-TABLE-0">Table 1-2</a>.&#13;
GitHub allows you to download a ZIP file of the entire&#13;
repository’s current state, as well as view individual files on the web interface.&#13;
Downloading with<a data-primary="git clone command" data-type="indexterm" id="idm45290700520232"/> <em>git clone</em> instead of as an archive is preferred because you can then&#13;
update at any time with a simple<a data-primary="git pull command" data-type="indexterm" id="idm45290700518904"/> <em>git pull</em> command.&#13;
And with the amount of updating this code base has undergone for the&#13;
current release of Java, you are sure to find changes after the book is published.</p>&#13;
&#13;
<p>If you are not familiar with Git, see <a data-type="xref" href="#javacook-getstarted-scms">“CVS, Subversion, Git, Oh My!”</a>.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="javasrc" data-type="sect3"><div class="sect3" id="idm45290700516216">&#13;
<h3>javasrc</h3>&#13;
&#13;
<p>This is the largest repo and consists primarily of code written to show a particular&#13;
feature or API.  The files are organized into subdirectories by topic, many of which&#13;
correspond more or less to book chapters—for example, a directory for <em>strings</em> examples&#13;
(<a data-type="xref" href="ch03.html#javacook-strings">Chapter 3</a>), <em>regex</em> for regular expressions (<a data-type="xref" href="ch04.html#javacook-regex">Chapter 4</a>), <em>numbers</em>&#13;
(<a data-type="xref" href="ch05.html#javacook-numbers">Chapter 5</a>), and so on. The archive also contains the index by name and index&#13;
by chapter files from the download site, so you can easily find the files you need.</p>&#13;
&#13;
<p>The <em>javasrc</em> library is further broken down into a dozen<a data-primary="Apache Maven" data-secondary="modules" data-type="indexterm" id="idm45290700509448"/><a data-primary="pom.xml module (Maven)" data-type="indexterm" id="idm45290700508472"/><a data-primary="Rdemo-web module (javasrc repository)" data-type="indexterm" id="idm45290700507800"/><a data-primary="desktop module (Maven)" data-type="indexterm" id="idm45290700507112"/><a data-primary="ee module (javasrc repository)" data-type="indexterm" id="idm45290700506440"/><a data-primary="graal module (Maven)" data-type="indexterm" id="idm45290700505752"/><a data-primary="jlink" data-type="indexterm" id="idm45290700505080"/><a data-primary="json module (javasrc repository)" data-type="indexterm" id="idm45290700504408"/><a data-primary="main module (javasrc repository)" data-type="indexterm" id="idm45290700503720"/><a data-primary="restdemo module (javasrc repository)" data-type="indexterm" id="idm45290700503032"/><a data-primary="spark module (javasrc repository)" data-type="indexterm" id="idm45290700502344"/><a data-primary="testing module (Maven)" data-type="indexterm" id="idm45290700501656"/><a data-primary="unsafe module (Maven)" data-type="indexterm" id="idm45290700500984"/><a data-primary="xml module (Maven)" data-type="indexterm" id="idm45290700500312"/> Maven modules (shown in <a data-type="xref" href="#javacook_javasrc_modules">Table 1-3</a>)&#13;
so that you don’t need all the dependencies for everything on your <code>CLASSPATH</code> all the time.</p>&#13;
<table class="less_space pagebreak-before" id="javacook_javasrc_modules">&#13;
<caption><span class="label">Table 1-3. </span>JavaSrc Maven modules</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Directory/module name</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><em>pom.xml</em></p></td>&#13;
<td><p>Maven <em>parent pom</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>Rdemo-web</em></p></td>&#13;
<td><p>R demo using a web framework</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>desktop</em></p></td>&#13;
<td><p>AWT and Swing stuff (no longer covered in the <em>Java Cookbook</em>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>ee</em></p></td>&#13;
<td><p>Enterprise stuff (no longer covered in the <em>Java Cookbook</em>)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>graal</em></p></td>&#13;
<td><p>GraalVM demos</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>jlink</em></p></td>&#13;
<td><p>JLink demos</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>json</em></p></td>&#13;
<td><p>JSON processing</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>main</em></p></td>&#13;
<td><p>Contains the majority of the files, i.e., those not required to be in one of the other modules due to <code>CLASSPATH</code> or other issues</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>restdemo</em></p></td>&#13;
<td><p>REST service demo</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>spark</em></p></td>&#13;
<td><p>Apache Spark demo</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>testing</em></p></td>&#13;
<td><p>Code for testing</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>unsafe</em></p></td>&#13;
<td><p>Demo of <code>Unsafe</code> class</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><em>xml</em></p></td>&#13;
<td><p>XML stuff (no longer covered in the <em>Java Cookbook</em>)</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="darwinsys-api" data-type="sect3"><div class="sect3" id="idm45290700469128">&#13;
<h3>darwinsys-api</h3>&#13;
&#13;
<p><a data-primary="darwinsys-api repository" data-type="indexterm" id="darwin_r"/>I have built up a collection of useful stuff partly by moving&#13;
some reusable classes from <em>javasrc</em> into my own API, which I use in my own Java projects.&#13;
I use example code from it in this book, and I import classes from it into&#13;
many of the other examples. So, if you’re going to be downloading&#13;
and compiling the examples <em>individually</em>, you should first download&#13;
the file <em>darwinsys-api-1.</em>x<em>.jar</em> (for the latest value of <em>x</em>)&#13;
and include it in your <code>CLASSPATH</code>. Note that if you are going to&#13;
build the <em>javasrc</em> code with Eclipse or Maven,&#13;
you can skip this download because the top-level Maven script starts&#13;
off by including the JAR file for this API.</p>&#13;
&#13;
<p>A compiled JAR file of <em>darwinsys-api</em>  is available in&#13;
<a href="http://search.maven.org">Maven Central</a>; find it by searching for <em>darwinsys</em>.&#13;
This is the current Maven <span class="keep-together">artifact:</span></p>&#13;
&#13;
<pre data-type="programlisting">&lt;dependency&gt;&#13;
   &lt;groupId&gt;com.darwinsys&lt;/groupId&gt;&#13;
   &lt;artifactId&gt;darwinsys-api&lt;/artifactId&gt;&#13;
   &lt;version&gt;1.1.3&lt;/version&gt;&#13;
&lt;/dependency&gt;</pre>&#13;
&#13;
<p>This API consists of about two dozen<a data-primary="com.darwinsys packages" data-type="indexterm" id="idm45290700459048"/> <code>com.darwinsys</code> packages, listed in <a data-type="xref" href="#javacook-getstarted-TABLE-1">Table 1-4</a>.&#13;
The structure vaguely parallels the standard Java API; this is intentional.&#13;
These packages now include around 200 classes and interfaces. Most of them have javadoc documentation&#13;
that can be viewed with the source download.</p>&#13;
<table class="less_space pagebreak-before" id="javacook-getstarted-TABLE-1">&#13;
<caption><span class="label">Table 1-4. </span>The com.darwinsys packages</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Package name</th>&#13;
<th>Package description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.csv</code></p></td>&#13;
<td><p>Classes for comma-separated values files</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.database</code></p></td>&#13;
<td><p>Classes for dealing with databases in a general way</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.diff</code></p></td>&#13;
<td><p>Comparison utilities</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.genericui</code></p></td>&#13;
<td><p>Generic GUI stuff</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.geo</code></p></td>&#13;
<td><p>Classes relating to country codes, provinces/states, and so on</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.graphics</code></p></td>&#13;
<td><p>Graphics</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.html</code></p></td>&#13;
<td><p>Classes (only one so far) for dealing with HTML</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.io</code></p></td>&#13;
<td><p>Classes for input and output operations, using Java’s underlying I/O classes</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.jsptags</code></p></td>&#13;
<td><p>Java EE JSP tags</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.lang</code></p></td>&#13;
<td><p>Classes for dealing with standard features of Java</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.locks</code></p></td>&#13;
<td><p>Pessimistic locking API</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.mail</code></p></td>&#13;
<td><p>Classes for dealing with email, mainly a convenience class for sending mail</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.model</code></p></td>&#13;
<td><p>Sample data models</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.net</code></p></td>&#13;
<td><p>Networking</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.preso</code></p></td>&#13;
<td><p>Presentations</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.reflection</code></p></td>&#13;
<td><p>Reflection</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.regex</code></p></td>&#13;
<td><p>Regular expression stuff: an REDemo program, a Grep variant</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.security</code></p></td>&#13;
<td><p>Security</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.servlet</code></p></td>&#13;
<td><p>Servlet API helpers</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.sql</code></p></td>&#13;
<td><p>Classes for dealing with SQL databases</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.swingui</code></p></td>&#13;
<td><p>Classes for helping construct and use Swing GUIs</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.swingui.layout</code></p></td>&#13;
<td><p>A few interesting LayoutManager implementations</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.testdata</code></p></td>&#13;
<td><p>Test data generators</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.testing</code></p></td>&#13;
<td><p>Testing tools</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.unix</code></p></td>&#13;
<td><p>Unix helpers</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.util</code></p></td>&#13;
<td><p>A few miscellaneous utility classes</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>com.darwinsys.xml</code></p></td>&#13;
<td><p>XML utilities</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>Many of these classes are used as examples in this book; just look for files whose first line begins with the following:</p>&#13;
<pre data-type="programlisting" id="I_1_tt19">package com.darwinsys;</pre>&#13;
&#13;
<p>You’ll also find that many of the other examples have imports from the <code>com.darwinsys</code> packages.<a data-primary="" data-startref="darwin_r" data-type="indexterm" id="idm45290700403736"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="General notes" data-type="sect3"><div class="sect3" id="idm45290700402600">&#13;
<h3>General notes</h3>&#13;
&#13;
<p>Your best bet is to use<a data-primary="git clone command" data-type="indexterm" id="idm45290700400840"/> <em>git clone</em> to download a copy of both the Git projects&#13;
and then do a<a data-primary="git pull command" data-type="indexterm" id="idm45290700399560"/> <em>git pull</em> every few months to get updates.&#13;
Alternatively, you can download from this book’s&#13;
<a href="http://shop.oreilly.com/product/0636920026518.do">catalog page</a> a single intersection subset of both&#13;
libraries that is made up almost exclusively of files actually used in&#13;
the book.&#13;
This archive is made from the sources that are dynamically included into&#13;
the book at formatting time, so it should reflect exactly the&#13;
examples you see in the book. But it will not include as many&#13;
examples as the three individual archives, nor is it guaranteed that&#13;
everything will compile because of missing dependencies, nor will it get updated often. But if all you&#13;
want is to copy pieces into a project you’re working on, this may be the one to get. You can find links to all of these files from my own <a href="http://javacook.darwinsys.com">website for this book</a>; just follow the Downloads link.</p>&#13;
&#13;
<p>The two separate repositories contain multiple self-contained projects with support for building&#13;
both with <a data-primary="Eclipse" data-secondary="repositories and" data-type="indexterm" id="idm45290700395576"/>Eclipse (<a data-type="xref" href="#javacook-getstarted-SECT-3">Recipe 1.3</a>) and with <a data-primary="Apache Maven" data-secondary="repositories and" data-type="indexterm" id="idm45290700393672"/>Maven (<a data-type="xref" href="#javacook-getstarted-maven">Recipe 1.7</a>).&#13;
Note that Maven will automatically fetch a vast array of prerequisite&#13;
libraries when first invoked on a given project, so be sure you’re&#13;
online on a high-speed internet link.&#13;
Maven will thus ensure that all prerequisites are installed before building.&#13;
If you choose to build pieces individually, look in the file<a data-primary="pom.xml file" data-type="indexterm" id="idm45290700391384"/> <em>pom.xml</em>&#13;
for the list of dependencies. Unfortunately, I will not be able&#13;
to help you if you are using tooling other than Eclipse or Maven with the&#13;
control files included in the download.</p>&#13;
&#13;
<p>If you have a version of Java older than Java 12, a few files will not compile.&#13;
You can make up exclusion elements for the files that are known not to compile.</p>&#13;
&#13;
<p>All my code in the two projects is released under the least-restrictive credit-only license,&#13;
the two-clause <a data-primary="BSD license" data-type="indexterm" id="idm45290700388968"/>BSD license. If you find it useful, incorporate it into your own software.&#13;
There is no need to write to ask me for permission; just use it, with credit.&#13;
If you get rich off it, send me some money.</p>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>Most of the command-line examples refer to source files, assuming&#13;
you are in <em>src/main/java</em>, and runnable classes, assuming&#13;
you are in (or have added to your <code>CLASSPATH</code>) the build directory (e.g., usually <em>target/classes</em>).&#13;
This will not be mentioned with each example, as doing so would&#13;
waste a lot of paper.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Caveat lector" data-type="sect3"><div class="sect3" id="javacook-getstarted-SECT-6.3.1">&#13;
<h3>Caveat lector</h3>&#13;
&#13;
<p>The repos have been in development since 1995. This means that you&#13;
will find some code that is not up to date or that no longer reflects best practices.&#13;
This is not surprising: any body of code will grow old if any part of it is not actively maintained. (Thus, at this point, I invoke Culture Club’s song “Do You Really Want to Hurt Me”: “Give me time to realize my crime.”) Where advice in the book disagrees with some code you found in the repo, keep this in mind. One of the practices of Extreme Programming is Continuous Refactoring, the ability to improve any part of the code base at any time. Don’t be surprised if the code in the online source directory differs from what appears in the book; it is a rare month that I don’t make some improvement to the code, and the results are committed and pushed quite often. So if there are differences between what’s printed in the book and what you get from GitHub, be glad, not sad, for you’ll have received the benefit of hindsight. Also, people can contribute easily on GitHub via pull requests; that’s what makes it interesting. If you find a bug or an improvement, do send me a pull request! The consolidated archive on <a href="http://shop.oreilly.com/product/0636920304371.do">the page for this book</a> will not be updated as frequently.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="javacook-getstarted-scms">&#13;
<h5>CVS, Subversion, Git, Oh My!</h5>&#13;
<p>Many distributed version control systems or source code management systems are available.&#13;
These are the ones that have been widely used in open source over the years:<a data-primary="Concurrent Versions System (CVS)" data-type="indexterm" id="idm45290700379400"/><a data-primary="CVS (Concurrent Versions System)" data-type="indexterm" id="idm45290700378632"/><a data-primary="Apache Subversion" data-type="indexterm" id="idm45290700377944"/><a data-primary="Git" data-type="indexterm" id="idm45290700377272"/></p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><a href="http://en.wikipedia.org/wiki/Concurrent_Versions_System">Concurrent Versions System (CVS)</a></p>&#13;
</li>&#13;
<li>&#13;
<p><a href="http://subversion.apache.org">Apache Subversion</a></p>&#13;
</li>&#13;
<li>&#13;
<p><a href="http://git-scm.com">Git</a></p>&#13;
</li>&#13;
<li>&#13;
<p>As well as others that are used in particular niches (e.g., Bazaar, Mercurial)</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Although each has its advantages and disadvantages, the use of Git in the Linux build process&#13;
(and projects based on Linux, such as the Android mobile environment), as well as the availability&#13;
of sites like <em>github.com</em> and <em>gitorious.org</em>, give Git a massive momentum over the others.&#13;
I don’t have statistics, but I suspect the number of projects in Git repositories probably exceeds&#13;
the others combined. Several well-known organizations using Git are listed on the Git home page.</p>&#13;
&#13;
<p>For this reason, I have moved my public projects to <a data-primary="GitHub (website)" data-type="indexterm" id="idm45290700369064"/>GitHub; see&#13;
<a href="http://github.com/IanDarwin"><em class="hyperlink">http://github.com/IanDarwin</em></a>. To download the projects&#13;
and be able to get updates applied automatically, use Git to download them. Options include the following:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The <a href="http://git-scm.com">command-line Git client</a>. <a data-primary="command-line Git client" data-type="indexterm" id="idm45290700365144"/>If you are on any modern&#13;
Unix or Linux system, Git is either included or available in your ports or packaging or developer&#13;
tools, but it can also be downloaded for MS Windows, Mac, Linux, and Solaris from the home page&#13;
under Downloads.</p>&#13;
</li>&#13;
<li>&#13;
<p>All modern IDEs have Git support built in (though <a data-primary="IntelliJ IDEA" data-secondary="Git and" data-type="indexterm" id="idm45290700363128"/>IntelliJ doesn’t include Git itself; it relies&#13;
on the command-line Git client, possibly because the main Java implementation <code>jgit</code> is owned by Eclipse).</p>&#13;
</li>&#13;
<li>&#13;
<p>Numerous <a href="http://git-scm.com/downloads/guis">standalone GUI clients</a>.<a data-primary="standalone GUI clients" data-type="indexterm" id="idm45290700359816"/></p>&#13;
</li>&#13;
<li>&#13;
<p>Even <a data-primary="Continuous Integration (CI)" data-type="indexterm" id="idm45290700358248"/><a data-primary="CI (Continuous Integration)" data-type="indexterm" id="idm45290700357496"/>Continuous Integration servers such as <a data-primary="Jenkins/Hudson" data-type="indexterm" id="idm45290700356680"/>Jenkins/Hudson (see <a data-type="xref" href="#javacook-intro-ci-1">Recipe 1.11</a>) have plug-ins available for updating a project with Git (and other popular SCMs) before building them.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>You will want to have one or more of these Git clients at your disposal to download my code examples.&#13;
You could instead download the code examples as ZIP archive files, but then you won’t get updates!&#13;
You can also view or download individual files from the GitHub page via a web browser.</p>&#13;
</div></aside>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="javacook-getstarted-SIDEBAR-1">&#13;
<h5>Make Versus Java Build Tools</h5>&#13;
<p><a data-primary="make" data-type="indexterm" id="idm45290700352008"/><em>Make</em> is the original build tool from the 1970s, used in Unix and C/C++ development. Make and the Java-based tools each have advantages; I’ll try to compare them without too much bias.</p>&#13;
&#13;
<p>The <a data-primary="Java" data-secondary="build tools for" data-type="indexterm" id="idm45290700350088"/>Java build tools work the same on all platforms, as much as possible.&#13;
Make is rather platform-dependent; there is <a data-primary="GNU make" data-type="indexterm" id="idm45290700348824"/>GNU Make, <a data-primary="BSD make" data-type="indexterm" id="idm45290700348024"/>BSD Make,&#13;
<a data-primary="XCode make" data-type="indexterm" id="idm45290700347192"/>Xcode Make, <a data-primary="Visual Studio make" data-type="indexterm" id="idm45290700346360"/>Visual Studio Make, and several others, each with&#13;
slightly different syntax.</p>&#13;
&#13;
<p>That said, there are many Java build tools to choose from, including these:<a data-primary="Apache Ant" data-type="indexterm" id="idm45290700345272"/><a data-primary="Ant (Apache)" data-type="indexterm" id="idm45290700344568"/><a data-primary="Apache Maven" data-secondary="about" data-type="indexterm" id="idm45290700343896"/><a data-primary="Gradle" data-secondary="about" data-type="indexterm" id="idm45290700342952"/><a data-primary="Apache Buildr" data-type="indexterm" id="idm45290700342008"/><a data-primary="Buildr (Apache)" data-type="indexterm" id="idm45290700341336"/></p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Apache Ant</p>&#13;
</li>&#13;
<li>&#13;
<p>Apache Maven</p>&#13;
</li>&#13;
<li>&#13;
<p>Gradle</p>&#13;
</li>&#13;
<li>&#13;
<p>Apache Buildr</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p><a data-primary="Makefiles" data-type="indexterm" id="idm45290700336376"/>Makefiles and Gradle build files are the shortest. Make just lets you list the commands you want run and their dependencies.&#13;
Buildr and Gradle each have their own language (based on Ruby and Groovy, respectively).&#13;
Maven uses XML, which is generally more verbose but with a lot of sensible defaults and a&#13;
standard, default workflow.&#13;
Ant also uses XML but makes you specify each task you want performed.</p>&#13;
&#13;
<p>Make runs faster for single tasks; most implementations are written in C. However, the Java tools can run many Java tasks in a single JVM, such as the built-in Java compiler or <em>.jar/.war/.tar/.zip</em> files—to the extent that it may be more efficient to run several Java compilations in one JVM process than to run the same compilations using Make. In other words, once the JVM that is running Ant/Maven/Gradle itself is up and running, it doesn’t take long at all to run the Java compiler and run the compiled class. This is Java as it was meant to be!</p>&#13;
&#13;
<p>Java build tool files can do more for you.&#13;
These tools automatically find all the <em>*.java</em> files in and under <em>src/main/java</em>.&#13;
With <em>make</em>, you have to spell such things out.</p>&#13;
&#13;
<p>The Java tools have special knowledge of <code>CLASSPATH</code>, making it easy to set a <code>CLASSPATH</code> in various ways&#13;
for compile time. Maven offers a scope of tests for classes and other files that will be on your&#13;
<code>CLASSPATH</code> only when running tests, for example.  You may have&#13;
to duplicate this in other ways—shell scripts or batch files—for using Make or for&#13;
manually running or testing your application.</p>&#13;
&#13;
<p><a data-primary="Apache Maven" data-secondary="dependency management and" data-type="indexterm" id="idm45290711114392"/>Maven and <a data-primary="Gradle" data-secondary="dependency management and" data-type="indexterm" id="idm45290711113224"/>Gradle also handle dependency management.&#13;
You simply list the API and version that you want, and the tool finds it, downloads it over the internet,&#13;
saves it in a cache folder for future use,&#13;
and adds it to your <code>CLASSPATH</code> at the right time—all without writing any rules.</p>&#13;
&#13;
<p>Gradle goes further yet and allows scripting logic in its configuration file. (Strictly speaking, Ant and Maven do as well, but Gradle’s is much easier to use.)</p>&#13;
&#13;
<p>Make is simpler to extend but harder to do so portably. You can write a one-line Make&#13;
rule for getting a CVS archive from a remote site, but you may run into incompatibilities&#13;
between GNU Make, BSD Make, Microsoft Make, and so on. There is a built-in Ant task for&#13;
getting an archive from CVS using Ant; it was written as a Java source file instead of&#13;
just a series of command-line commands.</p>&#13;
&#13;
<p>Make has been around much longer. There are probably millions (literally) more makefiles than Ant files. Non-Java developers have typically not heard of Ant; they almost all use Make. Most non-Java open source projects use Make, except for programming languages that provide their own build tool (e.g., Ruby provides Rake and Thor, and Haskell provides Cabal).</p>&#13;
&#13;
<p>The advantages of the Java tools make more sense on larger projects. Primarily, Make has been&#13;
used on the really large non-Java projects. For example, Make is used for telephone switch source&#13;
code, which consists of hundreds of thousands of source files totaling tens or hundreds&#13;
of millions of lines of source code. By contrast, <a data-primary="Tomcat (web server)" data-type="indexterm" id="idm45290711108232"/>Tomcat is about 500,000 lines of code,&#13;
and the JBoss Java EE server <a data-primary="WildFly (EE application server)" data-type="indexterm" id="idm45290711107400"/>WildFly is about 800,000 lines. Use of the Java tools is&#13;
growing steadily, particularly now that most of the widely used Java IDEs (IntelliJ,&#13;
Eclipse, NetBeans, etc.) have interfaces to Ant, Maven, and/or Gradle. Effectively all Java open&#13;
source projects use <a data-primary="Apache Maven" data-secondary="about" data-type="indexterm" id="idm45290711106280"/>Maven; some still use <a data-primary="Apache Ant" data-type="indexterm" id="idm45290711105208"/><a data-primary="Ant (Apache)" data-type="indexterm" id="idm45290711104504"/>Ant, or the newest kid on that block, <a data-primary="Gradle" data-secondary="about" data-type="indexterm" id="idm45290711103704"/>Gradle.</p>&#13;
&#13;
<p>Make is included with most Unix and Unix-like systems and shipped with many Windows IDEs. Ant and Maven and gradle are not included with any operating system distribution that I know of, but they can be installed as packages on almost all systems, and both are available direct from Apache. Gradle installs from<a data-primary="Gradle" data-secondary="website" data-type="indexterm" id="idm45290711101800"/> <a href="http://gradle.org"><em class="hyperlink">http://gradle.org</em></a>, and <a data-primary="Apache Buildr" data-type="indexterm" id="idm45290711099576"/><a data-primary="Buildr (Apache)" data-type="indexterm" id="idm45290711098872"/>Buildr from the<a data-primary="Apache (website)" data-type="indexterm" id="idm45290711098072"/> <a href="http://buildr.apache.org">Apache website</a>.</p>&#13;
&#13;
<p>To sum up, although Make and the Java tools are good, new Java projects&#13;
should use one of the newer Java-based tools such as Maven or Gradle.<a data-primary="" data-startref="down_ce" data-type="indexterm" id="idm45290711096104"/><a data-primary="" data-startref="c_down" data-type="indexterm" id="idm45290711095128"/></p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.7 Automating Dependencies, Compilation, Testing, and Deployment with Apache Maven" data-type="sect1"><div class="sect1" id="javacook-getstarted-maven">&#13;
<h1>1.7 Automating Dependencies, Compilation, Testing, and Deployment with Apache Maven</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-maven.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="compiling" data-type="indexterm" id="comp_aut"/><a data-primary="dependency" data-type="indexterm" id="depe_aut"/><a data-primary="deployment, automating" data-type="indexterm" id="depl_aut"/><a data-primary="testing" data-secondary="automating" data-type="indexterm" id="test_aut"/><a data-primary="Apache Maven" data-secondary="automating with" data-type="indexterm" id="maven_aut"/>You want a tool that does it all automatically: downloads your dependencies, compiles your code, compiles and runs your tests, packages the app, and installs or deploys it.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-maven.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use Apache Maven.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-maven.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p><a data-primary="Apache Maven" data-secondary="about" data-type="indexterm" id="idm45290711081752"/>Maven is a Java-centric build tool that includes a sophisticated, distributed dependency management system&#13;
that also gives it rules for building application packages such&#13;
as JAR, WAR, and EAR files and deploying them to an array of different targets.&#13;
Whereas older build tools focus on the <em>how</em>, Maven files focus on the <em>what</em>,&#13;
specifying what you want done.</p>&#13;
&#13;
<p>Maven is controlled by a file called<a data-primary="pom.xml file" data-type="indexterm" id="idm45290711079032"/> <em>pom.xml</em> (for Project Object Model).&#13;
A sample <em>pom.xml</em> might look like this:</p>&#13;
&#13;
<pre data-code-language="xml" data-type="programlisting"><code class="nt">&lt;project</code> <code class="na">xmlns=</code><code class="s">"http://maven.apache.org/POM/4.0.0"</code>&#13;
  <code class="na">xmlns:xsi=</code><code class="s">"http://www.w3.org/2001/XMLSchema-instance"</code>&#13;
  <code class="na">xsi:schemaLocation=</code><code class="s">"http://maven.apache.org/POM/4.0.0</code>&#13;
<code class="s">                      http://maven.apache.org/xsd/maven-4.0.0.xsd"</code><code class="nt">&gt;</code>&#13;
  <code class="nt">&lt;modelVersion&gt;</code>4.0.0<code class="nt">&lt;/modelVersion&gt;</code>&#13;
&#13;
  <code class="nt">&lt;groupId&gt;</code>com.example<code class="nt">&lt;/groupId&gt;</code>&#13;
  <code class="nt">&lt;artifactId&gt;</code>my-se-project<code class="nt">&lt;/artifactId&gt;</code>&#13;
  <code class="nt">&lt;version&gt;</code>1.0-SNAPSHOT<code class="nt">&lt;/version&gt;</code>&#13;
  <code class="nt">&lt;packaging&gt;</code>jar<code class="nt">&lt;/packaging&gt;</code>&#13;
&#13;
  <code class="nt">&lt;name&gt;</code>my-se-project<code class="nt">&lt;/name&gt;</code>&#13;
  <code class="nt">&lt;url&gt;</code>http://com.example/<code class="nt">&lt;/url&gt;</code>&#13;
&#13;
  <code class="nt">&lt;properties&gt;</code>&#13;
    <code class="nt">&lt;project.build.sourceEncoding&gt;</code>UTF-8<code class="nt">&lt;/project.build.sourceEncoding&gt;</code>&#13;
  <code class="nt">&lt;/properties&gt;</code>&#13;
&#13;
  <code class="nt">&lt;dependencies&gt;</code>&#13;
    <code class="nt">&lt;dependency&gt;</code>&#13;
      <code class="nt">&lt;groupId&gt;</code>junit<code class="nt">&lt;/groupId&gt;</code>&#13;
      <code class="nt">&lt;artifactId&gt;</code>junit<code class="nt">&lt;/artifactId&gt;</code>&#13;
      <code class="nt">&lt;version&gt;</code>4.8.1<code class="nt">&lt;/version&gt;</code>&#13;
      <code class="nt">&lt;scope&gt;</code>test<code class="nt">&lt;/scope&gt;</code>&#13;
    <code class="nt">&lt;/dependency&gt;</code>&#13;
  <code class="nt">&lt;/dependencies&gt;</code>&#13;
<code class="nt">&lt;/project&gt;</code></pre>&#13;
&#13;
<p>This specifies a project called <em>my-se-project</em> (my standard-edition project) that will&#13;
be packaged into a JAR file; it depends on the JUnit 4.x framework for unit testing&#13;
(see <a data-type="xref" href="#javacook-getstarted-junit">Recipe 1.10</a>) but only needs it for compiling and running tests.&#13;
If I type <em>mvn install</em> in the directory with this POM, Maven will&#13;
ensure that it has a copy of the given version of JUnit (and anything&#13;
that JUnit depends on). Then it will compile everything (setting CLASSPATH&#13;
and other options for the compiler), run any and all unit tests,&#13;
and if they all pass, generate a JAR file for the program. It will then install it in my <span class="keep-together">personal</span> Maven repo (under <em>~/.m2/repository</em>)&#13;
so that other Maven projects can depend on my new project JAR file.&#13;
Note that I haven’t had to tell Maven where the source files live,&#13;
nor how to compile them—this is all handled by sensible defaults,&#13;
based on a well-defined project structure.&#13;
The program source is expected to be found in <em>src/main/java</em>,&#13;
and the tests in <em>src/test/java</em>; if it’s a web application, the web&#13;
root is expected to be in <em>src/main/webapp</em> by default. Of course, you can override these <span class="keep-together">settings.</span></p>&#13;
&#13;
<p>Note that even the preceding config file does not have to be, and was not, written by hand; Maven’s&#13;
archetype generation rules let it build the starting version of any of several hundred&#13;
types of projects. Here is how the file was created:</p>&#13;
&#13;
<pre data-type="programlisting">$ mvn archetype:generate \&#13;
    -DarchetypeGroupId=org.apache.maven.archetypes \&#13;
    -DarchetypeArtifactId=maven-archetype-quickstart \&#13;
    -DgroupId=com.example -DartifactId=my-se-project&#13;
&#13;
[INFO] Scanning for projects...&#13;
Downloading: http://repo1.maven.org/maven2/org/apache/maven/plugins/&#13;
    maven-deploy-plugin/2.5/maven-deploy-plugin-2.5.pom&#13;
[several dozen or hundred lines of downloading POM files and Jar files...]&#13;
[INFO] Generating project in Interactive mode&#13;
[INFO] Archetype [org.apache.maven.archetypes:maven-archetype-quickstart:1.1]&#13;
    found in catalog remote&#13;
[INFO] Using property: groupId = com.example&#13;
[INFO] Using property: artifactId = my-se-project&#13;
Define value for property 'version':  1.0-SNAPSHOT: :&#13;
[INFO] Using property: package = com.example&#13;
Confirm properties configuration:&#13;
groupId: com.example&#13;
artifactId: my-se-project&#13;
version: 1.0-SNAPSHOT&#13;
package: com.example&#13;
 Y: : y&#13;
[INFO] ------------------------------------------------------------------------&#13;
[INFO] Using following parameters for creating project from Old (1.x) Archetype:&#13;
    maven-archetype-quickstart:1.1&#13;
[INFO] ------------------------------------------------------------------------&#13;
[INFO] Parameter: groupId, Value: com.example&#13;
[INFO] Parameter: packageName, Value: com.example&#13;
[INFO] Parameter: package, Value: com.example&#13;
[INFO] Parameter: artifactId, Value: my-se-project&#13;
[INFO] Parameter: basedir, Value: /private/tmp&#13;
[INFO] Parameter: version, Value: 1.0-SNAPSHOT&#13;
[INFO] project created from Old (1.x) Archetype in dir: /private/tmp/&#13;
    my-se-project&#13;
[INFO] ------------------------------------------------------------------------&#13;
[INFO] BUILD SUCCESS&#13;
[INFO] ------------------------------------------------------------------------&#13;
[INFO] Total time: 6:38.051s&#13;
[INFO] Finished at: Sun Jan 06 19:19:18 EST 2013&#13;
[INFO] Final Memory: 7M/81M&#13;
[INFO] ------------------------------------------------------------------------</pre>&#13;
&#13;
<p>Alternately, you can do <em>mvn archetype:generate</em> and select the default from a rather long list of choices.&#13;
The default is a quickstart Java archetype, which makes it easy to get started.</p>&#13;
&#13;
<p><a data-primary="Integrated Development Environment (IDE)" data-secondary="support for Maven from" data-type="indexterm" id="idm45290710851160"/>The IDEs (see <a data-type="xref" href="#javacook-getstarted-SECT-3">Recipe 1.3</a>) have support for Maven. For example, if you use <a data-primary="Eclipse" data-secondary="support for Maven from" data-type="indexterm" id="idm45290710849288"/>Eclipse,&#13;
M2Eclipse (m2e) is an Eclipse plug-in that will build your Eclipse project dependencies from your POM&#13;
file; this plug-in ships by default with current Java Developer&#13;
builds of Eclipse. It is&#13;
also available for some older releases; see the<a data-primary="Eclipse" data-secondary="website" data-type="indexterm" id="idm45290710906712"/> <a href="http://eclipse.org/m2e">Eclipse website</a>&#13;
for plug-in details.</p>&#13;
&#13;
<p>A POM file can redefine any of the standard goals.&#13;
Common Maven goals (predefined by default to do something sensible) include the following:</p>&#13;
<dl>&#13;
<dt><a data-primary="clean command (Maven)" data-type="indexterm" id="idm45290710903384"/>clean</dt>&#13;
<dd>&#13;
<p>Removes all generated artifacts</p>&#13;
</dd>&#13;
<dt><a data-primary="compile command (Maven)" data-type="indexterm" id="idm45290710901368"/>compile</dt>&#13;
<dd>&#13;
<p>Compiles all source files</p>&#13;
</dd>&#13;
<dt><a data-primary="test goal (Maven)" data-type="indexterm" id="idm45290711069864"/>test</dt>&#13;
<dd>&#13;
<p>Compiles and runs all unit tests</p>&#13;
</dd>&#13;
<dt><a data-primary="package goal (Maven)" data-type="indexterm" id="idm45290711067848"/>package</dt>&#13;
<dd>&#13;
<p>Builds the package</p>&#13;
</dd>&#13;
<dt><a data-primary="install command (Maven)" data-type="indexterm" id="idm45290711065832"/>install</dt>&#13;
<dd>&#13;
<p>Installs <em>pom.xml</em> and the package into your local Maven repository for use by your other projects</p>&#13;
</dd>&#13;
<dt><a data-primary="deploy command (Maven)" data-type="indexterm" id="idm45290711063400"/>deploy</dt>&#13;
<dd>&#13;
<p>Tries to install the package (e.g., on an application server)</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>Most of the steps implicitly invoke the previous ones. For example, <code>package</code>&#13;
will compile any missing <em>.class</em> files and run the tests if that&#13;
hasn’t already been done in this run.</p>&#13;
&#13;
<p>There is an optional <code>distributionManagement</code> element in the POM file or a <code>-DaltDeploymentRepository</code>&#13;
on the command line to specify an alternate deployment location.&#13;
There are application-server–specific targets provided by the app server vendors;&#13;
as a single example, with the <a data-primary="WildFly (EE application server)" data-type="indexterm" id="idm45290707603352"/>WildFly Application Server (known as JBoss AS a decade or more ago),&#13;
you would install some additional plug-in(s) as per their documentation and then deploy to the app server using</p>&#13;
&#13;
<pre data-type="programlisting">mvn wildfly:deploy</pre>&#13;
&#13;
<p>instead of the regular deploy. Since I use this Maven incantation frequently, I have a shell alias or batch file <code>mwd</code> to&#13;
automate even that.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Maven pros and cons" data-type="sect3"><div class="sect3" id="idm45290707600520">&#13;
<h3>Maven pros and cons</h3>&#13;
&#13;
<p><a data-primary="Apache Maven" data-secondary="pros and cons of" data-type="indexterm" id="idm45290707599288"/>Maven can handle complex projects and is very configurable. I build&#13;
the<a data-primary="darwinsys-api repository" data-type="indexterm" id="idm45290707598184"/> <em>darwinsys-api</em> and<a data-primary="javasrc repository" data-type="indexterm" id="idm45290707596952"/> <em>javasrc</em> projects with Maven and let it&#13;
handle finding dependencies, making the download of the project&#13;
source code smaller (actually, moving the download overhead to the&#13;
servers of the projects themselves). The only real downsides&#13;
to Maven are that it takes a while to get fully up to speed&#13;
with it, and it can be hard to diagnose when&#13;
things go wrong. A good web search engine is your friend when things fail.</p>&#13;
&#13;
<p>One issue I fear is that a hacker could gain access to a project’s site and&#13;
modify, or install a new version of, a POM.&#13;
Maven automatically fetches updated POM versions.&#13;
However, it does use hash signatures to verify that files have not been tampered with&#13;
during the download process, and all files to be uploaded must be signed with PGP/GPG,&#13;
so an attacker would have to compromise both the upload account and the signing keys.&#13;
I am not aware of this ever having happened though.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45290711082968">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>Start at <a href="http://maven.apache.org"><em class="hyperlink">http://maven.apache.org</em></a>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="javacook-getstarted-mavencentral">&#13;
<h5>Maven Central: Mapping the World of Java Software</h5>&#13;
<p><a data-primary="Apache Maven" data-secondary="dependency management and" data-type="indexterm" id="idm45290707577672"/><a data-primary="Maven Central" data-type="indexterm" id="idm45290707576568"/>There is an immense collection of software freely available to Maven users just for adding&#13;
a <code>&lt;dependency&gt;</code> element or “Maven Artifact” into your <em>pom.xml</em>. You can search this repository at&#13;
<a href="http://search.maven.org"><em class="hyperlink">http://search.maven.org</em></a> or&#13;
<a href="https://repository.sonatype.org/index.html"><em class="hyperlink">https://repository.sonatype.org/index.html</em></a>.</p>&#13;
&#13;
<p><a data-type="xref" href="#javacook-getstarted-mavensearch">Figure 1-5</a> shows a search for my <em>darwinsys-api</em> project and the information&#13;
it reveals. Note that the <em>dependency</em> information listed there is all you need to have&#13;
the library added to your Maven project; just copy the Dependency Information section&#13;
and paste it into the <code>&lt;dependencies&gt;</code> of your POM, and you’re done!&#13;
Because Maven Central has become the definitive place to look for software,&#13;
many other Java build tools piggyback on Maven Central. To accommodate these users, in turn,&#13;
Maven <span class="keep-together">Central</span> offers to serve up the dependency information in a form that half a dozen other&#13;
build tools can directly use in the same copy-and-paste fashion.</p>&#13;
&#13;
<p>When you get to the stage of having a useful open source project that others can build upon,&#13;
you may, in turn, want to share it on Maven Central. The process is longer than building for yourself&#13;
but not onerous. Refer to this <a href="http://maven.apache.org/guides/mini/guide-central-repository-upload.html">Maven guide</a> or the <a href="https://help.sonatype.com/repomanager3/formats/maven-repositories">Sonatype OSS Maven Repository Usage Guide</a>.<a data-primary="" data-startref="maven_aut" data-type="indexterm" id="idm45290707567176"/></p>&#13;
<figure class="no-frame"><div class="figure" id="javacook-getstarted-mavensearch">&#13;
<img src="assets/jcb4_0105.png"/>&#13;
<h6><span class="label">Figure 1-5. </span>Maven Central search results</h6>&#13;
</div></figure>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.8 Automating Dependencies, Compilation, Testing, and Deployment with Gradle" data-type="sect1"><div class="sect1" id="javacook-getstarted-gradle">&#13;
<h1>1.8 Automating Dependencies, Compilation, Testing, and Deployment with Gradle</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-gradle.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="Gradle" data-secondary="automating with" data-type="indexterm" id="gradle_aut"/>You want a build tool that doesn’t make you use a lot of XML in your&#13;
configuration file.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-gradle.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use Gradle’s simple build file format with configuration by convention for shorter build files and fast builds.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-gradle.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Gradle is the latest in the succession of build tools (Make, Ant, and Maven).&#13;
Gradle bills itself as “the enterprise automation tool”&#13;
and has integration with the other build tools and IDEs.</p>&#13;
&#13;
<p>Unlike the other Java-based tools, Gradle doesn’t use XML as its scripting language, but rather a Domain-Specific Language (DSL)&#13;
based on the JVM-based and Java-based scripting language<a data-primary="Groovy" data-type="indexterm" id="idm45290707554696"/> <a href="http://groovy.codehaus.org">Groovy</a>.</p>&#13;
&#13;
<p>You can install Gradle by downloading from the<a data-primary="Gradle" data-secondary="website" data-type="indexterm" id="idm45290707552712"/> <a href="http://gradle.org">Gradle website</a>, unpacking the ZIP, and adding its <em>bin</em> subdirectory to your path.</p>&#13;
&#13;
<p>Then you can begin to use Gradle. Assuming you use the standard&#13;
source directory (<em>src/main/java</em>, <em>src/main/test</em>) that is shared by&#13;
Maven and Gradle, among other tools, the example <em>build.gradle</em> file&#13;
in <a data-type="xref" href="#javacook-getstarted-gradle-samplefile">Example 1-1</a> will build your app and run your unit tests.</p>&#13;
<div data-type="example" id="javacook-getstarted-gradle-samplefile">&#13;
<h5><span class="label">Example 1-1. </span>Example build.gradle file</h5>&#13;
&#13;
<pre data-code-language="groovy" data-type="programlisting"><code class="err">#</code> <code class="n">Simple</code> <code class="n">Gradle</code> <code class="n">Build</code> <code class="k">for</code> <code class="n">the</code> <code class="n">Java</code><code class="o">-</code><code class="n">based</code> <code class="n">DataVis</code> <code class="n">project</code>&#13;
<code class="n">apply</code> <code class="nl">plugin:</code> <code class="s1">'java'</code>&#13;
<code class="err">#</code> <code class="n">Set</code> <code class="n">up</code> <code class="n">mappings</code> <code class="k">for</code> <code class="n">Eclipse</code> <code class="n">project</code> <code class="n">too</code>&#13;
<code class="n">apply</code> <code class="nl">plugin:</code> <code class="s1">'eclipse'</code>&#13;
&#13;
<code class="err">#</code> <code class="n">The</code> <code class="n">version</code> <code class="n">of</code> <code class="n">Java</code> <code class="n">to</code> <code class="n">use</code>&#13;
<code class="n">sourceCompatibility</code> <code class="o">=</code> <code class="mi">11</code>&#13;
<code class="err">#</code> <code class="n">The</code> <code class="n">version</code> <code class="n">of</code> <code class="n">my</code> <code class="n">project</code>&#13;
<code class="n">version</code> <code class="o">=</code> <code class="s1">'1.0.3'</code>&#13;
<code class="err">#</code> <code class="n">Configure</code> <code class="n">JAR</code> <code class="n">file</code> <code class="n">packaging</code>&#13;
<code class="n">jar</code> <code class="o">{</code>&#13;
    <code class="n">manifest</code> <code class="o">{</code>&#13;
        <code class="n">attributes</code> <code class="s1">'Main-class'</code><code class="o">:</code> <code class="s1">'com.somedomainnamehere.data.DataVis'</code><code class="o">,</code>&#13;
        <code class="s1">'Implementation-Version'</code><code class="o">:</code> <code class="n">version</code>&#13;
    <code class="o">}</code>&#13;
<code class="o">}</code>&#13;
&#13;
<code class="err">#</code> <code class="n">optional</code> <code class="nl">feature:</code> <code class="n">like</code> <code class="o">-</code><code class="n">Dtesting</code><code class="o">=</code><code class="kc">true</code> <code class="n">but</code> <code class="n">only</code> <code class="n">when</code> <code class="n">running</code> <code class="n">tests</code> <code class="o">(</code><code class="s2">"test task"</code><code class="o">)</code>&#13;
<code class="n">test</code> <code class="o">{</code>&#13;
    <code class="n">systemProperties</code> <code class="s1">'testing'</code><code class="o">:</code> <code class="s1">'true'</code>&#13;
<code class="o">}</code></pre></div>&#13;
&#13;
<p>You can bootstrap the industry’s vast investment in Maven infrastructure&#13;
by adding lines like these into your <em>build.gradle</em>:</p>&#13;
&#13;
<pre data-code-language="groovy" data-type="programlisting"><code class="err">#</code> <code class="n">Tell</code> <code class="n">Gradle</code> <code class="n">to</code> <code class="n">look</code> <code class="k">in</code> <code class="n">Maven</code> <code class="n">Central</code>&#13;
<code class="n">repositories</code> <code class="o">{</code>&#13;
    <code class="n">mavenCentral</code><code class="o">()</code>&#13;
<code class="o">}</code>&#13;
&#13;
<code class="err">#</code> <code class="n">We</code> <code class="n">need</code> <code class="n">darwinsys</code><code class="o">-</code><code class="n">api</code> <code class="k">for</code> <code class="n">compiling</code> <code class="k">as</code> <code class="n">well</code> <code class="k">as</code> <code class="n">JUnit</code> <code class="k">for</code> <code class="n">testing</code>&#13;
<code class="n">dependencies</code> <code class="o">{</code>&#13;
    <code class="n">compile</code> <code class="nl">group:</code> <code class="s1">'com.darwinsys'</code><code class="o">,</code> <code class="nl">name:</code> <code class="s1">'darwinsys-api'</code><code class="o">,</code> <code class="nl">version:</code> <code class="s1">'1.0.3+'</code>&#13;
    <code class="n">testCompile</code> <code class="nl">group:</code> <code class="s1">'junit'</code><code class="o">,</code> <code class="nl">name:</code> <code class="s1">'junit'</code><code class="o">,</code> <code class="nl">version:</code> <code class="s1">'4.+'</code>&#13;
<code class="o">}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45290707297256">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>There is much more functionality in Gradle.&#13;
Start at <a href="http://www.gradle.org">Gradle’s website</a>, and see the <a href="http://www.gradle.org/docs">documentation</a>.<a data-primary="" data-startref="comp_aut" data-type="indexterm" id="idm45290707410696"/><a data-primary="" data-startref="depe_aut" data-type="indexterm" id="idm45290707409688"/><a data-primary="" data-startref="depl_aut" data-type="indexterm" id="idm45290707408744"/><a data-primary="" data-startref="test_aut" data-type="indexterm" id="idm45290707407800"/><a data-primary="" data-startref="gradle_aut" data-type="indexterm" id="idm45290707406856"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.9 Dealing with Deprecation Warnings" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-9">&#13;
<h1>1.9 Dealing with Deprecation Warnings</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-9.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="deprecation warnings" data-type="indexterm" id="dep_war"/>Your code used to compile cleanly, but now it gives deprecation warnings.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-9.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>You must have blinked. Either live—dangerously—with the warnings or revise your code to eliminate them.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-9.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Each new release of Java includes a lot of powerful new functionality,&#13;
but at a price: during the evolution of this new stuff, Java’s&#13;
maintainers find some old stuff that wasn’t done right and shouldn’t&#13;
be used anymore because they can’t really fix it. In the first major&#13;
revision, for example, they realized that the<a data-primary="java.util.Date class" data-type="indexterm" id="idm45290707397128"/> <code>java.util.Date</code> class&#13;
had some serious limitations with regard to internationalization.&#13;
Accordingly, many of the <code>Date</code> class methods and constructors are&#13;
marked “deprecated.”&#13;
According to the <em>American Heritage Dictionary</em>, to deprecate something means&#13;
to “express disapproval of; deplore.”&#13;
Java’s developers are therefore disapproving of the old way of doing&#13;
things. Try compiling this code:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code> <code class="nn">java.util.Date</code><code class="o">;</code>&#13;
&#13;
<code class="cm">/** Demonstrate deprecation warning */</code>&#13;
<code class="kd">public</code> <code class="kd">class</code> <code class="nc">Deprec</code> <code class="o">{</code>&#13;
&#13;
    <code class="kd">public</code> <code class="kd">static</code> <code class="kt">void</code> <code class="nf">main</code><code class="o">(</code><code class="n">String</code><code class="o">[]</code> <code class="n">av</code><code class="o">)</code> <code class="o">{</code>&#13;
&#13;
        <code class="c1">// Create a Date object for May 5, 1986</code>&#13;
        <code class="nd">@SuppressWarnings</code><code class="o">(</code><code class="s">"deprecation"</code><code class="o">)</code>&#13;
        <code class="c1">// EXPECT DEPRECATION WARNING without @SuppressWarnings</code>&#13;
        <code class="n">Date</code> <code class="n">d</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Date</code><code class="o">(</code><code class="mi">86</code><code class="o">,</code> <code class="mi">04</code><code class="o">,</code> <code class="mi">05</code><code class="o">);</code>&#13;
        <code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Date is "</code> <code class="o">+</code> <code class="n">d</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p>What happened? When I compiled it (prior to adding the <code>@SuppressWarnings()</code> annotation),&#13;
I got this warning:</p>&#13;
<pre data-type="programlisting" id="I_1_tt25">C:\javasrc&gt;<strong>javac Deprec.java</strong>&#13;
Note: Deprec.java uses or overrides a deprecated API.  Recompile with&#13;
"-deprecation" for details.&#13;
1 warning&#13;
C:\javasrc&gt;</pre>&#13;
&#13;
<p>So, we follow orders. For details, recompile with <code>-deprecation</code> to see the additional details:</p>&#13;
<pre data-type="programlisting" id="I_1_tt26">C:\javasrc&gt;<strong>javac -deprecation Deprec.java</strong>&#13;
Deprec.java:10: warning: constructor Date(int,int,int) in class java.util.Date&#13;
has been deprecated&#13;
                Date d = new Date(86, 04, 05);          // May 5, 1986&#13;
                         ^&#13;
1 warning&#13;
&#13;
C:\javasrc&gt;</pre>&#13;
&#13;
<p>The warning is simple: the <code>Date</code> constructor that takes three&#13;
integer arguments has been deprecated. How do you fix it? The answer&#13;
is, as in most questions of usage, to refer to the javadoc documentation&#13;
for the class. The introduction to the <code>Date</code> page says, in part:</p>&#13;
<blockquote>&#13;
<p>The <a data-primary="Date class" data-type="indexterm" id="idm45290707237400"/>class <code>Date</code> represents a specific instant in time, with millisecond precision.</p>&#13;
&#13;
<p>Prior to JDK 1.1, the class <code>Date</code> had two additional functions. It allowed the&#13;
interpretation of dates as year, month, day, hour, minute, and second values. It also&#13;
allowed the formatting and parsing of date strings. Unfortunately, the API for these&#13;
functions was not amenable to internationalization. As of JDK 1.1, the<a data-primary="Calendar classes" data-type="indexterm" id="idm45290707234760"/> <code>Calendar</code> class&#13;
should be used to convert between dates and time fields and the<a data-primary="DateFormat class" data-type="indexterm" id="idm45290707233512"/> <code>DateFormat</code> class should be&#13;
used to format and parse date strings. The corresponding methods in <code>Date</code> are deprecated.</p></blockquote>&#13;
&#13;
<p>And more specifically, in the description of the three-integer constructor,&#13;
the <code>Date</code> javadoc says:</p>&#13;
<blockquote>&#13;
<p><code>Date(int year, int month, int date)</code></p>&#13;
&#13;
<p>Deprecated. As of JDK version 1.1, replaced by <code>Calendar.set(year + 1900</code>, <code>month</code>, <code>date)</code>&#13;
or <code>GregorianCalendar(year + 1900</code>, <code>month</code>, <code>date)</code>.</p></blockquote>&#13;
&#13;
<p>Of course, the older <code>Date</code> class is replaced by<a data-primary="LocalDate class" data-type="indexterm" id="idm45290707226008"/> <code>LocalDate</code> and<a data-primary="LocalDateTime class" data-type="indexterm" id="idm45290707224728"/> <code>LocalDateTime</code>&#13;
(see <a data-type="xref" href="ch06.html#javacook-dates">Chapter 6</a>),&#13;
so you’d only see that particular example in legacy code, but the principles of&#13;
dealing with deprecation warnings matter, because many new releases of Java add&#13;
deprecation warnings to parts of the API that were previously “OK” to use.</p>&#13;
&#13;
<p>As a general rule, when something has been deprecated, you should not use it in any new code; and, when maintaining code, strive to eliminate the deprecation warnings.</p>&#13;
&#13;
<p>In addition to <code>Date</code> (Java 8 includes a whole new date/time API; see <a data-type="xref" href="ch06.html#javacook-dates">Chapter 6</a>), the main areas of deprecation warnings in the standard API are the really ancient event handling and some methods (a few of them important) in the <code>Thread</code> class.</p>&#13;
&#13;
<p>You can also deprecate your own code, when you come up with a better&#13;
way of doing things. Put an <code>@Deprecated</code> annotation immediately&#13;
before the class or method you wish to deprecate and/or use a&#13;
<code>@deprecated</code> tag in a javadoc comment (see <a data-type="xref" href="ch15.html#javacook-packages-javadoc">Recipe 15.2</a>).&#13;
The javadoc comment allows you to explain the deprecation,&#13;
whereas the annotation is easier for some tools to recognize&#13;
because it is present at runtime (so you can use Reflection; see <a data-type="xref" href="ch17.html#javacook-reflection">Chapter 17</a>).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="idm45290707398856">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>Numerous other tools perform extra checking on your Java code.&#13;
See my <a href="https://cjp.darwinsys.com/">Checking Java Programs</a>&#13;
website.<a data-primary="" data-startref="dep_war" data-type="indexterm" id="idm45290707214344"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.10 Maintaining Code Correctness with Unit Testing: JUnit" data-type="sect1"><div class="sect1" id="javacook-getstarted-junit">&#13;
<h1>1.10 Maintaining Code Correctness with Unit Testing: JUnit</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-junit.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="unit testing" data-type="indexterm" id="unit_test"/><a data-primary="JUnit" data-type="indexterm" id="junit_test"/>You don’t want to have to debug your code.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-junit.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use unit testing to validate each class as you develop it.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-junit.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Stopping to use a debugger is time-consuming, and finding a bug in released code is much worse!&#13;
It’s better to <em>test</em> beforehand. The methodology of unit testing has been around for a long time; it is a tried-and-true means of getting your code tested in small blocks. Typically, in an OO language like Java, unit testing is applied to individual classes, in contrast to system or integration testing where a complete slice or even the entire application is tested.</p>&#13;
&#13;
<p>I have long been an advocate of this very basic testing methodology. Indeed, developers of the software methodology known as<a data-primary="Extreme Programming (XP)" data-type="indexterm" id="idm45290707202040"/><a data-primary="XP (Extreme Programming)" data-type="indexterm" id="idm45290707201320"/> <a href="http://www.extremeprogramming.org">Extreme Programming</a> (XP for short) advocate<a data-primary="Test Driven Development (TDD)" data-type="indexterm" id="idm45290707199800"/><a data-primary="TDD (Test Driven Development)" data-type="indexterm" id="idm45290707199032"/> <em>Test-Driven Development</em> (TDD): writing the unit tests <em>before</em> you write the code.&#13;
They also advocate running your tests almost every time you build your application. And they ask one good question: <em>If you don’t have a test, how do you know your code (still) works?</em> This group of unit-testing advocates has some well-known leaders, including <a data-primary="Design Patterns (Gamma, Helm, Johnson and Vlissades)" data-type="indexterm" id="idm45290707196808"/><a data-primary="Gamma, Erich" data-secondary="Design Patterns" data-type="indexterm" id="idm45290707159320"/><a data-primary="Helm, Richard" data-secondary="Design Patterns" data-type="indexterm" id="idm45290707158376"/><a data-primary="Johnson, Ralph" data-secondary="Design Patterns" data-type="indexterm" id="idm45290707157432"/><a data-primary="Vlissades, John" data-secondary="Design Patterns" data-type="indexterm" id="idm45290707156488"/>Erich Gamma of <em>Design Patterns</em> book fame and <a data-primary="Beck, Kent" data-secondary="eXtreme Programming" data-type="indexterm" id="idm45290707155000"/><a data-primary="eXtreme Programming (Beck)" data-type="indexterm" id="idm45290707153992"/>Kent Beck of <em>eXtreme Programming</em> book fame (both Addison-Wesley). I definitely go along with their advocacy of unit testing.</p>&#13;
&#13;
<p>Indeed, many of my classes used to come with a “built-in” unit test. Classes that are not main programs in their own right would often include a <code>main</code> method that just tests out or at least exercises the functionality of the class.&#13;
What surprised me is that, before encountering XP, I used to think I did this often, but an actual inspection of two projects indicated that only about a third of my classes had test cases, either internally or externally. Clearly what is needed is a uniform methodology. That is provided by JUnit.</p>&#13;
&#13;
<p>JUnit is a Java-centric methodology for providing test cases, and can be <a href="http://www.junit.org">downloaded for free</a>. It is a very simple but useful testing tool. It is easy to use—you just write a test class that has a series of methods and annotate them with <code>@Test</code> (the older JUnit 3.8 required you to have test methods’ names begin with <code>test</code>). JUnit uses introspection (see <a data-type="xref" href="ch17.html#javacook-reflection">Chapter 17</a>) to find all these methods and then runs them for you. Extensions to JUnit handle tasks as diverse as load testing and testing enterprise components; the JUnit website provides links to these extensions. All modern IDEs provide built-in support for generating and running JUnit tests.</p>&#13;
&#13;
<p>How do you get started using JUnit? All that’s necessary is to write a test. Here I have written a simple test of my <code>Person</code> class and placed it into a class called <code>PersonTest</code> (note the obvious naming pattern):</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">PersonTest</code> <code class="o">{</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testNameConcat</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">Person</code> <code class="n">p</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Person</code><code class="o">(</code><code class="s">"Ian"</code><code class="o">,</code> <code class="s">"Darwin"</code><code class="o">);</code>&#13;
        <code class="n">String</code> <code class="n">f</code> <code class="o">=</code> <code class="n">p</code><code class="o">.</code><code class="na">getFullName</code><code class="o">();</code>&#13;
        <code class="n">assertEquals</code><code class="o">(</code><code class="s">"Name concatenation"</code><code class="o">,</code> <code class="s">"Ian Darwin"</code><code class="o">,</code> <code class="n">f</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
<code class="o">}</code></pre>&#13;
&#13;
<p>JUnit 4 has been around for ages and works well. JUnit 5 is only a few years old&#13;
and has some improvements.&#13;
A simple test like this <code>PersonTest</code> class will be the same in JUnit 4 or 5 (but with different imports).&#13;
Using additional features, like setup methods to be run before each test,&#13;
requires different annotations between JUnit 4 and 5.</p>&#13;
&#13;
<p class="pagebreak-after">To show you running <code>PersonTest</code> manually, I compile the test and invoke the command-line test harness <code class="keep-together">TestRunner</code>:</p>&#13;
<pre data-type="programlisting" id="I_1_tt38">$ <strong>javac PersonTest.java</strong>&#13;
$ <strong>java -classpath .:junit4.x.x.jar junit.textui.TestRunner testing.PersonTest</strong>&#13;
.&#13;
Time: 0.188&#13;
&#13;
OK (1 tests)&#13;
&#13;
$</pre>&#13;
&#13;
<p>In practice, running tests that way is incredibly tedious, so I just put my tests&#13;
in the standard directory structure (i.e., <em>src/test/java/</em>)&#13;
with the same package as the code being tested and run Maven (see&#13;
<a data-type="xref" href="#javacook-getstarted-maven">Recipe 1.7</a>), which will automatically compile and run all the unit tests&#13;
and will halt the build if any test fails, <em>every time you try to build, package, or deploy your application</em>.&#13;
Gradle will do so too.</p>&#13;
&#13;
<p><a data-primary="Integrated Development Environment (IDE)" data-secondary="support for running JUnit" data-type="indexterm" id="idm45290707103224"/>All modern IDEs provide built-in support for running JUnit tests;&#13;
in <a data-primary="Eclipse" data-secondary="support for running JUnit" data-type="indexterm" id="idm45290707102056"/>Eclipse, you can right-click a project in the Package Explorer and select Run As→Unit Test&#13;
to have it find and run all the JUnit tests in the entire project.&#13;
The<a data-primary="MoreUnit plugin" data-type="indexterm" id="idm45290707100792"/> <code>MoreUnit</code> plugin (free in the Eclipse Marketplace) aims to simplify&#13;
creation and running of tests.</p>&#13;
&#13;
<p>The<a data-primary="Hamcrest matchers" data-type="indexterm" id="idm45290707098824"/> <em>Hamcrest matchers</em> allow you to write more expressive tests at the cost of an additional download.&#13;
Support for them is built into JUnit 4 with the<a data-primary="assertThat() method" data-type="indexterm" id="idm45290707097400"/> <code>assertThat</code> static method, but you need to&#13;
download the matchers from <a href="http://hamcrest.org">Hamcrest</a> or via the Maven artifact.</p>&#13;
&#13;
<p>Here’s an example of using the Hamcrest matchers:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">HamcrestDemo</code> <code class="o">{</code>&#13;
&#13;
    <code class="nd">@Test</code>&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">testNameConcat</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="n">Person</code> <code class="n">p</code> <code class="o">=</code> <code class="k">new</code> <code class="n">Person</code><code class="o">(</code><code class="s">"Ian"</code><code class="o">,</code> <code class="s">"Darwin"</code><code class="o">);</code>&#13;
        <code class="n">String</code> <code class="n">f</code> <code class="o">=</code> <code class="n">p</code><code class="o">.</code><code class="na">getFullName</code><code class="o">();</code>&#13;
        <code class="n">assertThat</code><code class="o">(</code><code class="n">f</code><code class="o">,</code> <code class="n">containsString</code><code class="o">(</code><code class="s">"Ian"</code><code class="o">));</code>&#13;
        <code class="n">assertThat</code><code class="o">(</code><code class="n">f</code><code class="o">,</code> <code class="n">equalTo</code><code class="o">(</code><code class="s">"Ian Darwin"</code><code class="o">));</code>&#13;
        <code class="n">assertThat</code><code class="o">(</code><code class="n">f</code><code class="o">,</code> <code class="n">not</code><code class="o">(</code><code class="n">containsString</code><code class="o">(</code><code class="s">"/"</code><code class="o">)));</code> <code class="c1">// contrived, to show syntax</code>&#13;
    <code class="o">}</code>&#13;
<code class="o">}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="See Also" data-type="sect2"><div class="sect2" id="javacook-getstarted-junit.4">&#13;
<h2>See Also</h2>&#13;
&#13;
<p>JUnit offers considerable documentation of its own; download it from the website listed earlier.</p>&#13;
&#13;
<p>An alternative unit test framework for Java is<a data-primary="TestNG" data-type="indexterm" id="idm45290706984744"/> <em>TestNG</em>; it got some early traction by adopting&#13;
features such as Java annotations before JUnit did; but since JUnit got with the annotations program,&#13;
it has remained the dominant package for Java unit testing.</p>&#13;
&#13;
<p>Another package of interest is<a data-primary="AssertJ" data-type="indexterm" id="idm45290706982856"/>&#13;
<a href="https://assertj.github.io/doc">AssertJ</a>, which appears to offer similar power to the&#13;
combination of JUnit with Hamcrest.</p>&#13;
&#13;
<p>Finally, one often needs to create substitute objects for use by the class being tested&#13;
(the dependencies of the class under test).&#13;
While you can code these by hand, in general I encourage use of packages such as<a data-primary="Mockito" data-type="indexterm" id="idm45290706980680"/>&#13;
<a href="https://site.mockito.org">Mockito</a>,&#13;
which can generate<a data-primary="mock objects" data-type="indexterm" id="idm45290706979144"/> <em>mock objects</em> dynamically, have these mocks provide fixed return values,&#13;
verify that the dependencies were called correctly, and so on.</p>&#13;
&#13;
<p>Remember: <em>test early and often!</em> <a data-primary="" data-startref="unit_test" data-type="indexterm" id="idm45290706976856"/><a data-primary="" data-startref="junit_test" data-type="indexterm" id="idm45290706975848"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.11 Maintaining Your Code with Continuous Integration" data-type="sect1"><div class="sect1" id="javacook-intro-ci-1">&#13;
<h1>1.11 Maintaining Your Code with Continuous Integration</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-intro-ci-1.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="code" data-secondary="Continuous Integration (CI) and" data-type="indexterm" id="code_ci"/><a data-primary="Continuous Integration (CI)" data-type="indexterm" id="ci_code"/><a data-primary="CI (Continuous Integration)" data-type="indexterm" id="cici_ab"/>You want to be sure that your entire code base compiles and passes its tests <span class="keep-together">periodically.</span></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-intro-ci-1.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use a Continuous Integration server such as Jenkins/Hudson.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-intro-ci-1.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>If you haven’t previously used Continuous Integration, you are going to wonder how you got along without it.&#13;
CI is simply the practice of having all developers on a project periodically&#13;
<em>integrate</em> (e.g., commit) their changes into a single master copy of the project’s source and then building and testing the project to make sure it still works and passes its tests.&#13;
This might be a few times a day, or every few days, but should not be more than that or else the integration will likely run into larger hurdles where multiple developers have&#13;
modified the same file.</p>&#13;
&#13;
<p>But it’s not just big projects that benefit from CI. Even on a one-person project, it’s great to have a single button you can click that will check out the latest version of everything, compile it, link or package it, run all the automated tests, and give a red or green pass/fail indicator.&#13;
Better yet, it can do this automatically every day or even on every commit to the master branch.</p>&#13;
&#13;
<p>It’s not just code-based projects that benefit from CI.&#13;
If you have a number of small websites, putting them all under CI control is one&#13;
of several important steps toward developing an automated, DevOps culture&#13;
around website deployment and <span class="keep-together">management.</span></p>&#13;
&#13;
<p>If you are new to the idea of CI, I can do no better than to plead with you to read <a data-primary="Fowler, Martin" data-secondary="on Continuous Integration (CI)" data-type="indexterm" id="idm45290706960120"/>Martin Fowler’s insightful (as ever) <a href="http://martinfowler.com/articles/continuousIntegration.html">paper on the topic</a>. One of the key points is to automate both the <em>management</em> of the code <em>and</em> all the other artifacts needed to build your project, and to automate the actual process of <em>building</em> it, possibly using one of the build tools discussed earlier in this chapter.<sup><a data-type="noteref" href="ch01.html#idm45290706957032" id="idm45290706957032-marker">1</a></sup></p>&#13;
&#13;
<p>There are many CI servers, both free and commercial. In the open source world,<a data-primary="CruiseControl" data-type="indexterm" id="idm45290706956008"/>&#13;
<a href="http://cruisecontrol.sourceforge.net">CruiseControl</a> and <a data-primary="Jenkins/Hudson" data-type="indexterm" id="idm45290706954136"/>Jenkins/Hudson<sup><a data-type="noteref" href="ch01.html#idm45290706953272" id="idm45290706953272-marker">2</a></sup>&#13;
are among the best known CI servers that you deploy yourself.&#13;
There are also hosted solutions such as<a data-primary="TravisCI" data-type="indexterm" id="idm45290706950616"/>&#13;
<a href="https://travis-ci.com">Travis CI</a>,<a data-primary="TeamCity" data-type="indexterm" id="idm45290706949128"/>&#13;
<a href="https://www.jetbrains.com/teamcity">TeamCity</a>,&#13;
or<a data-primary="CircleCI" data-type="indexterm" id="idm45290706947560"/>&#13;
<a href="https://circleci.com">CircleCI</a>.&#13;
These hosted ones eliminate the need for setting up and running your own CI server.&#13;
They also tend to have their configuration right in your repo (<em>travis.yml</em> etc.)&#13;
so deployment to them is simplified.</p>&#13;
&#13;
<p>Jenkins runs as a web application, either inside a <a data-primary="Jakarta" data-type="indexterm" id="idm45290706945176"/>Jakarta EE server or in its own standalone&#13;
web server. Once it’s started, you can use any standard web browser as its user interface.&#13;
Installing and starting Jenkins can be as simple as unpacking a distribution and invoking it as follows:</p>&#13;
&#13;
<pre data-type="programlisting">java -jar jenkins.war</pre>&#13;
&#13;
<p>This will start up its own tiny web server.&#13;
If you do that, be sure to configure security if your machine is reachable from the internet!</p>&#13;
&#13;
<p>Many people find it more secure to run Jenkins&#13;
in a full-function Java EE or Java web server; anything from Tomcat to JBoss to WebSphere or Weblogic&#13;
will do the job and let you impose additional security constraints.</p>&#13;
&#13;
<p>Once Jenkins is up and running and you have enabled security and are logged in on an account with&#13;
sufficient privilege, you can create<a data-primary="jobs" data-type="indexterm" id="idm45290706941608"/> <em>jobs</em>. A job usually corresponds to one project, both in terms of origin (one source code checkout) and in terms of results (one <em>.war</em> file, one executable, one library, one whatever). Setting up a project is as simple as clicking the New Job button at the top left of the dashboard, as shown in <a data-type="xref" href="#jvck_0112">Figure 1-6</a>.</p>&#13;
&#13;
<p>You can fill in the first few pieces of information: the project’s name and a brief description.&#13;
Note that each and every input field has a question mark icon beside it, which will give you hints&#13;
as you go along. Don’t be afraid to peek at these hints! <a data-type="xref" href="#jvck_0113">Figure 1-7</a> shows the first few steps of setting up a new job.</p>&#13;
&#13;
<p>In the next few sections of the form, Jenkins uses dynamic HTML to make entry fields appear based on what&#13;
you’ve checked. My demo project “TooSmallToFail” starts off with no <a data-primary="source code management (SCM) repository" data-type="indexterm" id="idm45290706936632"/><a data-primary="SCM (source code management) repository" data-type="indexterm" id="idm45290706918152"/>Source Code Management (SCM) repository,&#13;
but your real project is probably already in Git, Subversion, or ome other SCM.&#13;
Don’t worry if yours is not listed; there are hundreds of plug-ins to handle almost any SCM.&#13;
Once you’ve chosen your SCM, you will enter the parameters to fetch the project’s source&#13;
from that SCM repository, using text fields that ask for the specifics needed for that SCM:&#13;
a URL for Git, a CVSROOT for CVS, and so on.</p>&#13;
&#13;
<figure><div class="figure" id="jvck_0112">&#13;
<img alt="jcb4 0106" src="assets/jcb4_0106.png"/>&#13;
<h6><span class="label">Figure 1-6. </span>The dashboard in Jenkins</h6>&#13;
</div></figure>&#13;
&#13;
<figure><div class="figure" id="jvck_0113">&#13;
<img alt="jcb4 0107" src="assets/jcb4_0107.png"/>&#13;
<h6><span class="label">Figure 1-7. </span>Creating a new job in Jenkins</h6>&#13;
</div></figure>&#13;
&#13;
<p>You also have to tell Jenkins <em>when</em> and <em>how</em> to build (and package, test, deploy…) your project.&#13;
For the <em>when</em>, you have several choices such as building it after another Jenkins project,&#13;
building it every so often based on a cron-like schedule, or based on polling the SCM&#13;
to see if anything has changed (using the same cron-like scheduler).&#13;
If your project is at GitHub (not just a local Git server), or some other SCMs,&#13;
you can have the project built whenever somebody pushes changes up to the repository.&#13;
It’s all a matter of finding the right plug-ins and following the documentation for them.</p>&#13;
&#13;
<p>Then we have the <em>how</em>, or the build process. Again, a few build types are included with Jenkins, and many&#13;
more are available as plug-ins: I’ve used Apache Maven, Gradle, the&#13;
traditional Unix <code>make</code> tool, and even shell or command lines.&#13;
As before, text fields specific to your chosen tool will appear once you select the tool.&#13;
In the toy example, <code>TooSmallToFail</code>, I just use the shell command<a data-primary="/bin/false command" data-type="indexterm" id="idm45290706908392"/> <em>/bin/false</em>&#13;
(which should be present on any Unix or Linux system) to ensure that the project does,&#13;
in fact, fail to build, just so you can see what that looks like.</p>&#13;
&#13;
<p>You can have zero or more build steps; just keep clicking the Add button and add additional ones, as shown in <a data-type="xref" href="#jvck_0114">Figure 1-8</a>.</p>&#13;
&#13;
<figure><div class="figure" id="jvck_0114">&#13;
<img alt="jcb4 0108" src="assets/jcb4_0108.png"/>&#13;
<h6><span class="label">Figure 1-8. </span>Configuration for SCM and adding build steps in Jenkins</h6>&#13;
</div></figure>&#13;
&#13;
<p>Once you think you’ve entered all the necessary information, click the Save button at the&#13;
bottom of the page, and you’ll go back to the project’s main page. Here you can click the funny little&#13;
<a data-primary="Build Now icon" data-type="indexterm" id="idm45290706903064"/>Build Now icon at the far left to initiate a build right away. Or if you have set up build triggers,&#13;
you could wait until they kick in; but then again, wouldn’t you rather know right away whether&#13;
you’ve got it just right? <a data-type="xref" href="#jvck_0115">Figure 1-9</a> shows the build starting.</p>&#13;
&#13;
<p>Should a job fail to build, you get a red ball instead of a green one.&#13;
Actually, a successful build shows a blue ball by default (the <em>go</em> bulb in Japanese traffic lights,&#13;
where Kohsuke lives, is blue rather than green), but most people outside Japan prefer green for success,&#13;
so the optional Green Balls plug-in is often one of the first to be added to a new installation.</p>&#13;
&#13;
<p>Beside the red or green ball, you will see a weather report ranging from sunny (the last several&#13;
builds have succeeded) to cloudy, rainy, or stormy (no recent builds have succeeded).</p>&#13;
&#13;
<p>Click the link to the project that failed, and then the link to Console Output, and figure out what went wrong.&#13;
The usual workflow is then to make changes to the project, commit/push them to the source code&#13;
repository, and run the Jenkins build again.</p>&#13;
&#13;
<figure><div class="figure" id="jvck_0115">&#13;
<img alt="jcb4 0109" src="assets/jcb4_0109.png"/>&#13;
<h6><span class="label">Figure 1-9. </span>After a new job is added in Jenkins</h6>&#13;
</div></figure>&#13;
&#13;
<p>There are <em>hundreds</em> of optional plug-ins for <a data-primary="Jenkins/Hudson" data-type="indexterm" id="idm45290706895768"/>Jenkins. To make your life easier,&#13;
almost all of them can be installed by clicking the Manage Jenkins link and then going to&#13;
Manage Plug-ins. The Available tab lists all the ones that are available from Jenkins.org;&#13;
you just need to click the checkbox beside the ones you want, and click Apply.&#13;
You can also find updates there. If your plug-in addtion or upgrade requires a restart,&#13;
you’ll see a yellow ball and words to that effect; otherwise you should see a green (or blue)&#13;
ball indicating plug-in success. You can also see the list of plug-ins <a href="https://wiki.jenkins-ci.org/display/JENKINS/Plugins">directly on the web</a>.</p>&#13;
&#13;
<p>I mentioned that Jenkins began life under the name Hudson. The Hudson project still exists and is hosted&#13;
at the Eclipse website. Last I checked, both projects had maintained plug-in compatibility, so many or most&#13;
plug-ins from one can be used with the other. In fact, the most popular plug-ins appear in the&#13;
Available tab of both, and most of what’s said in this recipe about Jenkins applies equally to Hudson.&#13;
If you use a different CI system, you’ll need to check that system’s documentation,&#13;
but the concepts and the benefits will be similar.<a data-primary="" data-startref="code_ci" data-type="indexterm" id="idm45290706892616"/><a data-primary="" data-startref="ci_code" data-type="indexterm" id="idm45290706891640"/><a data-primary="" data-startref="cici_ab" data-type="indexterm" id="idm45290706890696"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.12 Getting Readable Stack Traces" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-15">&#13;
<h1>1.12 Getting Readable Stack Traces</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-15.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="stack traces" data-type="indexterm" id="idm45290706887176"/>You’re getting an exception stack trace at runtime, but most of the important parts don’t have line numbers.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-15.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Be sure you have compiled with debugging enabled.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-15.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>When a Java program throws an exception, the exception propagates up the call stack until there is a<a data-primary="catch clause" data-type="indexterm" id="idm45290706882168"/> <code>catch</code> clause that matches it. If none is found, the Java interpreter program that invoked your<a data-primary="main() method" data-type="indexterm" id="idm45290706880808"/> <code>main()</code> method catches the exception and prints a stack traceback showing all the method calls that got from the top of the program to the place where the exception was thrown. You can print this traceback yourself in any <code>catch</code> clause: the <code>Throwable</code> class has several overloads of the method called<a data-primary="printStackTrace() method" data-type="indexterm" id="idm45290706878408"/> <code>printStackTrace()</code>.</p>&#13;
&#13;
<p>The traceback includes line numbers only if they were compiled in. When using<a data-primary="javac command" data-type="indexterm" id="idm45290706876872"/> <em>javac</em>, this is the default. If you&#13;
add the <code>-g</code> option, <em>javac</em> will also include local variable names and other information in the compiled code,&#13;
which will make for better debugging information in the event of a crash.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.13 Finding More Java Source Code" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-16">&#13;
<h1>1.13 Finding More Java Source Code</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-16.1">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="source code" data-type="indexterm" id="idm45290706871272"/>You want to build a large application and need to minimize coding, avoiding the “Not Invented Here” syndrome.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-16.2">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use the Source, Luke. There are thousands of Java apps, frameworks, and libraries available in open source.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="javacook-getstarted-SECT-16.3">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Java source code is everywhere. As mentioned earlier,&#13;
all the code examples from this book can be downloaded: see <a data-type="xref" href="#javacook-getstarted-samplecode">Recipe 1.6</a>.</p>&#13;
&#13;
<p>Another valuable resource is the source code for the <a data-primary="Java API, source code for" data-type="indexterm" id="idm45290706864680"/>Java API. You may not have realized it, but the source code for all the public parts of the Java API are included with each release of the Java Development Kit. Want to know how <code>java.util.ArrayList</code> actually works? You have the source code. Got a problem making a <code>JTable</code> behave? The standard JDK includes the source for all the public classes! Look for a file called <em>src.zip</em> or <em>src.jar</em>; some versions unzip this and some do not.</p>&#13;
&#13;
<p>If that’s not enough, you can get the source for the&#13;
whole JDK for free over the internet, either via the Mercurial source code librarian at <a href="http://hg.openjdk.java.net/jdk/jdk"><em>openjdk.java.net</em></a> or from the Git mirror at <a href="https://github.com/AdoptOpenJDK/openjdk-jdk">AdoptOpenJDK at <em>github.com</em></a>.&#13;
This includes the source for the public and nonpublic parts of the API, as well as the&#13;
compiler (written in Java) and a large body of code written in C/C++&#13;
(the runtime itself and the interfaces to the native library). For example,<a data-primary="java.io.Reader" data-type="indexterm" id="idm45290706859032"/>&#13;
<code>java.io.Reader</code> has a method called<a data-primary="read() method" data-type="indexterm" id="idm45290706857816"/> <code>read()</code>, which reads bytes of data&#13;
from a file or network connection. There is a version of this written in C for&#13;
each operating system because it calls down to&#13;
the <code>read()</code> system call for Unix, Windows, macOS, or whatever. The&#13;
JDK source kit includes the source for all this stuff.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1.14 Finding Runnable Java Libraries" data-type="sect1"><div class="sect1" id="javacook-getstarted-SECT-46">&#13;
<h1>1.14 Finding Runnable Java Libraries</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Problem" data-type="sect2"><div class="sect2" id="idm45290706854392">&#13;
<h2>Problem</h2>&#13;
&#13;
<p><a data-primary="Java libraries" data-type="indexterm" id="java_lib"/>You want to reuse a published library rather than reinventing a well-known solution to your problem at hand.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Solution" data-type="sect2"><div class="sect2" id="idm45290706851704">&#13;
<h2>Solution</h2>&#13;
&#13;
<p>Use the internet to find reusable software.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Discussion" data-type="sect2"><div class="sect2" id="idm45290706850152">&#13;
<h2>Discussion</h2>&#13;
&#13;
<p>Although most of this book is about writing Java code, this recipe is about <em>not</em> writing code, but about using code written by others.&#13;
There are hundreds of good frameworks to add to your Java application—why reinvent the flat tire when you can buy a perfectly round one? Many of these frameworks have been around for years and have become well rounded by feedback from users.</p>&#13;
&#13;
<p>What, though, is the difference between a library and a framework? It’s sometimes a bit vague, but in general, a framework is a program with holes that you fill in, whereas a library is code you call. It is roughly the difference between building a car by buying a car almost complete but with no engine and building a car by buying all the pieces and bolting them together yourself.</p>&#13;
&#13;
<p>When considering using a <a data-primary="third-party frameworks" data-type="indexterm" id="idm45290706846408"/>third-party framework, there are many choices and issues to consider.&#13;
One is cost, which gets into the issue of open source versus closed source.&#13;
Most open source tools can be downloaded for free and used, either without any conditions&#13;
or with conditions that you must comply with.&#13;
There is not the space here to discuss these licensing issues, so I will refer you to <a data-primary="Understanding Open Source and Free Software Licensing (O'Reilly)" data-type="indexterm" id="idm45290706845192"/><em><a class="orm:hideurl" href="http://shop.oreilly.com/product/9780596005818.do">Understanding Open Source and Free Software Licensing</a></em> (O’Reilly).</p>&#13;
&#13;
<p>Much open source software is available in compiled library form on Maven Central,&#13;
as discussed in <a data-type="xref" href="#javacook-getstarted-mavencentral">“Maven Central: Mapping the World of Java Software”</a>.</p>&#13;
&#13;
<p>Some well-known collections of open source frameworks and libraries for Java are listed in <a data-type="xref" href="#chAppDesign-SECT-1-TABLE-1">Table 1-5</a>. Most of the projects on these sites are curated—that is, judged and found worthy—by some sort of community process.<a data-primary="Apache Software Foundation" data-type="indexterm" id="idm45290706840520"/><a data-primary="Eclipse Software Foundation" data-type="indexterm" id="idm45290706839832"/><a data-primary="Spring Framework" data-type="indexterm" id="idm45290706839144"/><a data-primary="JBoss community" data-type="indexterm" id="idm45290706838472"/><a data-primary="Codehaus" data-type="indexterm" id="idm45290706837800"/></p>&#13;
<table id="chAppDesign-SECT-1-TABLE-1">&#13;
<caption><span class="label">Table 1-5. </span>Reputable open source Java collections</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Organization</th>&#13;
<th>URL</th>&#13;
<th>Notes</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Apache Software Foundation</p></td>&#13;
<td><p><a href="http://projects.apache.org"><em class="hyperlink">http://projects.apache.org</em></a></p></td>&#13;
<td><p>Not just a web server!</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Eclipse Software Foundation</p></td>&#13;
<td><p><a href="https://eclipse.org/projects"><em class="hyperlink">https://eclipse.org/projects</em></a></p></td>&#13;
<td><p>Home of IDE and of Jakarta EE</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Spring Framework</p></td>&#13;
<td><p><a href="http://spring.io/projects"><em class="hyperlink">http://spring.io/projects</em></a></p></td>&#13;
<td><p>Home to a dozen frameworks: Spring IOC (DI factory), Spring MVC (web), more</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>JBoss community</p></td>&#13;
<td><p><a href="https://redhatofficial.github.io/"><em class="hyperlink">https://redhatofficial.github.io/</em></a></p></td>&#13;
<td><p>Lists half a dozen of their projects, plus a long list of current open source projects they use and/or support.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Codehaus</p></td>&#13;
<td><p> — </p></td>&#13;
<td><p>See footnote<sup><a data-type="noteref" href="ch01.html#idm45290706818824" id="idm45290706818824-marker">a</a></sup></p></td>&#13;
</tr>&#13;
</tbody>&#13;
<tbody><tr class="footnotes"><td colspan="3"><p data-type="footnote" id="idm45290706818824"><sup><a href="ch01.html#idm45290706818824-marker">a</a></sup> Codehaus itself went offline a few years ago. As of 2019, the domain 	is owned by the Apache Software Foundation but does not respond to browser requests. 	There is also <a href="https://github.com/codehaus">a Codehaus account on github</a> 	holding some of the projects that were previously on Codehaus, some active and some not. 	See <a href="https://www.javaworld.com/article/2892227/codehaus-the-once-great-house-of-code-has-fallen.html"> 	this article</a> for more on the history of Codehaus.</p></td></tr></tbody></table>&#13;
&#13;
<p>There are also a variety of open source code repositories, which&#13;
are not curated—anybody who signs up can create a project there,&#13;
regardless of the existing community size (if any).&#13;
Sites like this that are successful accumulate too many projects to&#13;
have a single page listing them—you have to search.&#13;
Most are not specific to Java. <a data-type="xref" href="#chAppDesign-SECT-1-TABLE-2">Table 1-6</a> shows some of the open source code repos.<a data-primary="open source" data-type="indexterm" id="idm45290706814520"/><a data-primary="Sourceforge.net" data-type="indexterm" id="idm45290706813848"/><a data-primary="GitHub (website)" data-type="indexterm" id="idm45290706813176"/><a data-primary="Bitbucket" data-type="indexterm" id="idm45290706812504"/><a data-primary="GitLab" data-type="indexterm" id="idm45290706811832"/><a data-primary="Maven Central" data-type="indexterm" id="idm45290706811160"/></p>&#13;
<table id="chAppDesign-SECT-1-TABLE-2">&#13;
<caption><span class="label">Table 1-6. </span>Open source code repositories</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Name</th>&#13;
<th>URL</th>&#13;
<th>Notes</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Sourceforge.net</p></td>&#13;
<td><p><a href="https://sourceforge.net/"><em class="hyperlink">https://sourceforge.net/</em></a></p></td>&#13;
<td><p>One of the oldest</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>GitHub</p></td>&#13;
<td><p><a href="http://github.com/"><em class="hyperlink">http://github.com/</em></a></p></td>&#13;
<td><p>“Social Coding”; probably most heavily used, now owned by Microsoft</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Bitbucket</p></td>&#13;
<td><p><a href="https://bitbucket.org/"><em class="hyperlink">https://bitbucket.org/</em></a></p></td>&#13;
<td><p>Public and private repos; free and paid plans</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>GitLab</p></td>&#13;
<td><p><a href="https://gitlab.org/"><em class="hyperlink">https://gitlab.org/</em></a></p></td>&#13;
<td><p>Public and private repos; free and paid plans</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Maven Central</p></td>&#13;
<td><p><a href="https://search.maven.org/"><em class="hyperlink">https://search.maven.org/</em></a></p></td>&#13;
<td><p>Has compiled jar, source jar and javadoc jar for each project</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>I’m not trying to disparage these repositories—indeed, the collection of demo programs&#13;
for this book is hosted on GitHub. I’m only saying that you have&#13;
to know what you’re looking for and exercise a bit of care&#13;
before deciding on a framework. Is there a community around it,&#13;
or is it a dead end?</p>&#13;
&#13;
<p>I maintain a small <a href="https://darwinsys.com/java">Java site</a> that may be of value.&#13;
It includes a listing of Java resources and material related to this book.</p>&#13;
&#13;
<p>For the Java enterprise or web tier, there are two main frameworks that also provide dependency injection: the first is <a data-primary="JavaServer Faces (JSF)" data-type="indexterm" id="idm45290706788824"/><a data-primary="JSF (JavaServer Faces)" data-type="indexterm" id="idm45290706788120"/>JavaServer Faces (JSF) and CDI, and the second is the <a data-primary="Spring Framework" data-type="indexterm" id="idm45290706787256"/>Spring Framework SpringMVC package. JSF and the built-in CDI (Contexts and Dependency Injection) provides DI as well as some additional contexts, such as a very useful Web Conversation context that holds objects across multiple web page interactions. The Spring Framework provides dependency injection and the SpringMVC web-tier helper classes. <a data-type="xref" href="#chAppDesign-SECT-1-TABLE-3">Table 1-7</a> shows some web tier resources.&#13;
Spring MVC and JSF are far from the only web frameworks; the list in <a data-type="xref" href="#chAppDesign-SECT-1-TABLE-3">Table 1-7</a>&#13;
includes many others, which may be a better fit for your application.&#13;
You have to decide!<a data-primary="web tier resources" data-type="indexterm" id="idm45290706784280"/></p>&#13;
<table id="chAppDesign-SECT-1-TABLE-3">&#13;
<caption><span class="label">Table 1-7. </span>Web tier resources</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Name</th>&#13;
<th>URL</th>&#13;
<th>Notes</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Ian’s List of 100 Java Web Frameworks</p></td>&#13;
<td><p><a href="http://darwinsys.com/jwf/"><em class="hyperlink">http://darwinsys.com/jwf/</em></a></p></td>&#13;
<td/>&#13;
</tr>&#13;
<tr>&#13;
<td><p>JSF</p></td>&#13;
<td><p><a href="http://www.oracle.com/technetwork/java/javaee/overview/"><em class="hyperlink">http://www.oracle.com/technetwork/java/javaee/overview/</em></a></p></td>&#13;
<td><p>Java EE standard technology for web pages</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>Because JSF is a component-based framework, there are many add-on components&#13;
that will make your JSF-based website much more capable (and better looking)&#13;
than the default JSF components. <a data-type="xref" href="#chAppDesign-SECT-1-TABLE-4">Table 1-8</a> shows some of the JSF add-on libraries.<a data-primary="add-on libraries, JSF" data-type="indexterm" id="idm45290706772328"/><a data-primary="BootsFaces (JSF)" data-type="indexterm" id="idm45290706771656"/><a data-primary="ButterFaces (JSF)" data-type="indexterm" id="idm45290706770984"/><a data-primary="Icefaces" data-type="indexterm" id="idm45290706770312"/><a data-primary="OpenFaces (JSF)" data-type="indexterm" id="idm45290706769640"/><a data-primary="PrimeFaces" data-type="indexterm" id="idm45290706768968"/><a data-primary="RichFaces" data-type="indexterm" id="idm45290706768296"/><a data-primary="Apache DeltaSpike" data-type="indexterm" id="idm45290706767624"/><a data-primary="JSFUnit" data-type="indexterm" id="idm45290706766952"/><a data-primary="OmniFaces (JSF)" data-type="indexterm" id="idm45290706766280"/></p>&#13;
<table id="chAppDesign-SECT-1-TABLE-4">&#13;
<caption><span class="label">Table 1-8. </span>JSF add-on libraries</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Name</th>&#13;
<th>URL</th>&#13;
<th>Notes</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>BootsFaces</p></td>&#13;
<td><p><a href="https://bootsfaces.net/"><em class="hyperlink">https://bootsfaces.net/</em></a></p></td>&#13;
<td><p>Combines BootStrap with JSF</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>ButterFaces</p></td>&#13;
<td><p><a href="http://butterfaces.org/"><em class="hyperlink">http://butterfaces.org/</em></a></p></td>&#13;
<td><p>Rich components library</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>ICEfaces</p></td>&#13;
<td><p><a href="http://icefaces.org/"><em class="hyperlink">http://icefaces.org/</em></a></p></td>&#13;
<td><p>Rich components library</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>OpenFaces</p></td>&#13;
<td><p><a href="http://openfaces.org/"><em class="hyperlink">http://openfaces.org/</em></a></p></td>&#13;
<td><p>Rich components library</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>PrimeFaces</p></td>&#13;
<td><p><a href="http://primefaces.org/"><em class="hyperlink">http://primefaces.org/</em></a></p></td>&#13;
<td><p>Rich components library</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>RichFaces</p></td>&#13;
<td><p><a href="http://richfaces.org/"><em class="hyperlink">http://richfaces.org/</em></a></p></td>&#13;
<td><p>Rich components; no longer maintained</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Apache DeltaSpike</p></td>&#13;
<td><p><a href="http://deltaspike.apache.org/"><em class="hyperlink">http://deltaspike.apache.org/</em></a></p></td>&#13;
<td><p>Numerous code add-ons for JSF</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>JSFUnit</p></td>&#13;
<td><p><a href="http://www.jboss.org/jsfunit/"><em class="hyperlink">http://www.jboss.org/jsfunit/</em></a></p></td>&#13;
<td><p>JUnit Testing for JSF</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>OmniFaces</p></td>&#13;
<td><p><a href="http://omnifaces.org/"><em class="hyperlink">http://omnifaces.org/</em></a></p></td>&#13;
<td><p>JSF Utilities add-on</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>There are frameworks and libraries for almost everything these days.&#13;
If my lists don’t lead you to what you need, a web search probably will.&#13;
Try not to reinvent the flat tire!</p>&#13;
&#13;
<p>As with all free software, be sure that you understand the&#13;
ramifications of the various licensing schemes. Code covered by the&#13;
GPL, for example, automatically transfers the GPL to any code that&#13;
uses even a small part of it.  Consult a lawyer. Your mileage may&#13;
vary. Despite these caveats, the source code is an invaluable&#13;
resource to the person who wants to learn more Java.<a data-primary="" data-startref="java_lib" data-type="indexterm" id="idm45290706733640"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45290706957032"><sup><a href="ch01.html#idm45290706957032-marker">1</a></sup> If the deployment or build includes a step like “Get Smith to process file X on his desktop and copy to the server,” you probably don’t quite get the notion of automated testing.</p><p data-type="footnote" id="idm45290706953272"><sup><a href="ch01.html#idm45290706953272-marker">2</a></sup> <a href="http://jenkins-ci.org">Jenkins</a> and <a href="https://www.eclipse.org/hudson">Hudson</a> began as Hudson, largely written by Kohsuke Kawaguchi while working for Sun Microsystems. There was later a cultural spat that resulted in Jenkins splitting off from Hudson, creating a new fork of the project. Kohsuke works on the half now known as Jenkins. I’ll just use the name Jenkins, because that’s the one I use, and because it takes too long to say “Jenkins/Hudson” all the time. But almost everything here applies to Hudson as well.</p></div></div></section></body></html>