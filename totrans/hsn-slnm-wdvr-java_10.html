<html><head></head><body><section data-pdf-bookmark="Chapter 7. The Page Object Model (POM)" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch07">&#13;
<h1><span class="label">Chapter 7. </span>The Page Object Model (POM)</h1>&#13;
&#13;
&#13;
<p>A <em>design pattern</em> is a reusable <a data-primary="design pattern, POM" data-type="indexterm" id="ch7_term1"/><a data-primary="POM (Page Object Model)" data-secondary="design pattern of" data-type="indexterm" id="ch7_term2"/>solution to a recurring problem in software engineering. This chapter presents the <a data-primary="POM (Page Object Model)" data-secondary="and maintainability of code" data-secondary-sortas="maintainability of code" data-type="indexterm" id="idm45849710157856"/><a data-primary="POM (Page Object Model)" data-secondary="purpose of" data-type="indexterm" id="idm45849710156672"/>Page Object Model (POM), a popular design pattern used to develop Selenium WebDriver tests. The use of POM has different benefits, such as improving reusability and avoiding code duplication. POM is based on creating <em>page classes</em> for modeling the SUT UI in a single repository, which is later used from the test logic.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Motivation" data-type="sect1"><div class="sect1" id="idm45849710155104">&#13;
<h1>Motivation</h1>&#13;
&#13;
<p>Some of the biggest <a data-primary="end-to-end (E2E) testing" data-secondary="challenges with" data-type="indexterm" id="idm45849710153376"/><a data-primary="end-to-end (E2E) testing" data-secondary="maintainability with" data-type="indexterm" id="idm45849710152432"/><a data-primary="end-to-end (E2E) testing" data-secondary="reliability of" data-type="indexterm" id="idm45849710151488"/><a data-primary="flakiness, test" data-type="indexterm" id="idm45849710150576"/><a data-primary="testing" data-secondary="reliability in" data-type="indexterm" id="idm45849710149904"/><a data-primary="code" data-secondary="maintainability of" data-type="indexterm" id="idm45849710148960"/>challenges of developing end-to-end tests with Selenium WebDriver are <em>maintainability</em> and <em>flakiness</em>. Regarding the former, the problem might happen during the development or evolution of the SUT. The changes made in the UI can cause existing end-to-end tests to break. The maintenance costs for fixing these tests can be relevant when having a large test suite in which code duplication exists in several tests cases (e.g., when the same locators are used repeatedly in different tests).</p>&#13;
&#13;
<p>Concerning flakiness (i.e., lack of reliability), a test is <em>flaky</em> when it has inconsistent behavior, i.e., it both passes and fails periodically under the same conditions (test logic, input data, setup, etc.). There are two major causes of test flakiness in Selenium WebDriver tests. First, the <a data-primary="SUT (System Under Test)" data-secondary="challenges with" data-type="indexterm" id="idm45849710146160"/><a data-primary="SUT (System Under Test)" data-secondary="improving design of" data-type="indexterm" id="idm45849710145152"/>root of the problem might be the SUT. For instance, a bug in the server-side logic (e.g., a race condition) can expose erratic behavior in end-to-end tests. In this case, developers and testers should work together to detect and solve the problem, typically fixing server-side bugs. Second, the cause could be in the test itself. This is an undesirable situation that testers should avoid. There are different strategies to prevent flakiness in Selenium WebDriver tests, such as <a data-primary="locator strategies" data-type="indexterm" id="idm45849710144080"/>implementing a robust locator strategy (to avoid brittle tests due to responsiveness or viewport changes) or <a data-primary="waiting strategies" data-type="indexterm" id="idm45849710143152"/>using a waiting strategy (to handle the distributed and asynchronous nature of web applications, as explained in <a data-type="xref" href="ch03.html#waiting_strategies">“Waiting Strategies”</a>).</p>&#13;
&#13;
<p>Utilizing a design pattern like POM <a data-primary="code" data-secondary="duplication of" data-type="indexterm" id="ch7_term6"/>can help reduce code duplication and enhance maintainability issues. Moreover, we can use POM for including reusable robust locating and waiting strategies. The following section describes how to carry out the POM design pattern.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The POM design pattern <a data-primary="code" data-secondary="reusable" data-type="indexterm" id="idm45849710138784"/>itself is not strictly a solution for test flakiness. However, as explained in the following sections, it enables the encapsulation of reusable code that prevents test unreliability.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The POM Design Pattern" data-type="sect1"><div class="sect1" id="idm45849710137392">&#13;
<h1>The POM Design Pattern</h1>&#13;
&#13;
<p>The principle of the POM design pattern is to <a data-primary="object-oriented programming" data-type="indexterm" id="idm45849710135472"/><a data-primary="page objects, POM" data-type="indexterm" id="idm45849710134800"/><a data-primary="page classes" data-type="indexterm" id="idm45849710134128"/><a data-primary="POM (Page Object Model)" data-secondary="as object-oriented approach" data-secondary-sortas="object-oriented approach" data-type="indexterm" id="idm45849710133456"/><a data-primary="POM (Page Object Model)" data-secondary="page classes in" data-type="indexterm" id="idm45849710132304"/><a data-primary="SUT (System Under Test)" data-secondary="improving design of" data-type="indexterm" id="idm45849710131360"/><a data-primary="test logic" data-type="indexterm" id="idm45849710130416"/><a data-primary="UI (User Interface)" data-secondary="elements, handling of" data-type="indexterm" id="idm45849710129744"/>separate the logic for handling UI elements in separate classes (called <em>page classes</em>) from the test logic. In other words, we model the appearance and behavior of our SUT following an object-oriented paradigm, i.e., as <em>page objects</em>. Then, these page objects are used by Selenium WebDriver tests.</p>&#13;
&#13;
<p>Let’s look at a <a data-primary="Selenium WebDriver API" data-secondary="vanilla version of" data-type="indexterm" id="ch7_term3"/><a data-primary="software design principles" data-type="indexterm" id="ch7_term4"/><a data-primary="vanilla Selenium WebDriver API" data-type="indexterm" id="ch7_term5"/><a data-primary="login form, test cases with" data-type="indexterm" id="ch7_term7"/>simple example to illustrate POM. Consider <a data-type="xref" href="#login-form">Figure 7-1</a>, which contains a login form. As usual, this page is contained on the practice site. <a data-type="xref" href="#vanilla_basic_login">Example 7-1</a> shows a test case using <em>vanilla</em> Selenium WebDriver. In programming, we use the term “vanilla” to refer to technology used without customization from the original form. In this case, we use the standard Selenium WebDriver API, explained in <a data-type="xref" href="part02.html#part02">Part II</a> of this book.</p>&#13;
&#13;
<figure><div class="figure" id="login-form">&#13;
<img alt="hosw 0701" src="assets/hosw_0701.png"/>&#13;
<h6><span class="label">Figure 7-1. </span>Practice web page with a login form</h6>&#13;
</div></figure>&#13;
<div data-type="example" id="vanilla_basic_login">&#13;
<h5><span class="label">Example 7-1. </span>Test using vanilla Selenium WebDriver to implement a successful login</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code><code>&#13;
</code><code class="kt">void</code><code> </code><code class="nf">testVanillaBasicLogin</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>            </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"username"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="s">"user"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO1-1" id="co_the_page_object_model__pom__CO1-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"password"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="s">"user"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO1-2" id="co_the_page_object_model__pom__CO1-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"button"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO1-3" id="co_the_page_object_model__pom__CO1-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"success"</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isDisplayed</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO1-4" id="co_the_page_object_model__pom__CO1-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO1-1" id="callout_the_page_object_model__pom__CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We type <a data-primary="username and password" data-type="indexterm" id="idm45849716031472"/>the word <code>user</code> as username in the web form.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO1-2" id="callout_the_page_object_model__pom__CO1-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We type the same word as password in the web form.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO1-3" id="callout_the_page_object_model__pom__CO1-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We click on the Submit button.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO1-4" id="callout_the_page_object_model__pom__CO1-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We verify the success box is displayed.</p></dd>&#13;
</dl>&#13;
&#13;
<p>This test is perfectly correct, but a <a data-primary="DRY (Don’t Repeat Yourself) with code" data-type="indexterm" id="idm45849709965856"/><a data-primary="POM (Page Object Model)" data-secondary="and maintainability of code" data-secondary-sortas="maintainability of code" data-type="indexterm" id="idm45849709965248"/><a data-primary="negative testing" data-type="indexterm" id="idm45849709964160"/><a data-primary="code" data-secondary="maintainability of" data-type="indexterm" id="idm45849709963552"/>potential problem might occur if we implement additional tests using the same web page. For instance, <a data-type="xref" href="#vanilla_basic_login_2">Example 7-2</a> shows another test case using vanilla Selenium WebDriver to implement a negative test (a failed login) using the same web form. This test is again sound, but together with <a data-type="xref" href="#vanilla_basic_login">Example 7-1</a>, we duplicate most of the logic for locating web elements, only using different input data and the expected outcome. This way of proceeding violates one of the most relevant principles in software design: Don’t Repeat Yourself (DRY). This is problematic since using the same code in different places makes maintainability <a data-startref="ch7_term3" data-type="indexterm" id="idm45849709960800"/><a data-startref="ch7_term4" data-type="indexterm" id="idm45849709960128"/><a data-startref="ch7_term5" data-type="indexterm" id="idm45849709959456"/><a data-startref="ch7_term6" data-type="indexterm" id="idm45849709958784"/>harder.</p>&#13;
<div data-type="example" id="vanilla_basic_login_2">&#13;
<h5><span class="label">Example 7-2. </span>Test using vanilla Selenium WebDriver to implement a failed login</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code>&#13;
<code class="kt">void</code> <code class="nf">testVanillaBasicLoginFailure</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code>&#13;
            <code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">);</code>&#13;
&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"username"</code><code class="o">)).</code><code class="na">sendKeys</code><code class="o">(</code><code class="s">"bad-user"</code><code class="o">);</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"password"</code><code class="o">)).</code><code class="na">sendKeys</code><code class="o">(</code><code class="s">"bad-password"</code><code class="o">);</code>&#13;
    <code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"button"</code><code class="o">)).</code><code class="na">click</code><code class="o">();</code>&#13;
&#13;
    <code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"invalid"</code><code class="o">)).</code><code class="na">isDisplayed</code><code class="o">()).</code><code class="na">isTrue</code><code class="o">();</code>&#13;
<code class="o">}</code></pre></div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Page Objects" data-type="sect2"><div class="sect2" id="idm45849709881264">&#13;
<h2>Page Objects</h2>&#13;
&#13;
<p>Page object classes enable the separation of the code devoted to the UI, such as locators and page layout, from the test logic. We can see page classes as a single repository that encapsulates the operations or services provided by the application under test. These classes are instantiated as <em>page objects</em> in different test cases. We can implement end-to-end tests using the method exposed in these objects while avoiding code <span class="keep-together">repetition</span>.</p>&#13;
&#13;
<p>Here is a basic <a data-primary="POM (Page Object Model)" data-secondary="page classes in" data-type="indexterm" id="ch7_term8"/><a data-primary="Selenium WebDriver API" data-secondary="page objects and classes with" data-type="indexterm" id="ch7_term9"/><a data-primary="WebDriver" data-secondary="page object with" data-type="indexterm" id="ch7_term10"/><a data-primary="page objects, POM" data-type="indexterm" id="ch7_term11"/><a data-primary="page classes" data-type="indexterm" id="ch7_term12"/>example using page objects. In the following example, we refactor the test explained in the previous section (i.e., using the login form) using a page object instead of vanilla Selenium WebDriver. The first step is to create a Java class that models the login page. <a data-type="xref" href="#basic_login_page">Example 7-3</a> shows a very basic implementation of this page class.</p>&#13;
<div data-type="example" id="basic_login_page">&#13;
<h5><span class="label">Example 7-3. </span>Basic page class to model the practice login form</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">BasicLoginPage</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO2-1" id="co_the_page_object_model__pom__CO2-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">usernameInput</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"username"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO2-2" id="co_the_page_object_model__pom__CO2-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">passwordInput</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"password"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">submitButton</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"button"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">successBox</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"success"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">BasicLoginPage</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO2-3" id="co_the_page_object_model__pom__CO2-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code>&#13;
</code><code>                </code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">with</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">username</code><code class="o">,</code><code> </code><code class="n">String</code><code> </code><code class="n">password</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO2-4" id="co_the_page_object_model__pom__CO2-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">usernameInput</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">username</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">passwordInput</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">password</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">submitButton</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">boolean</code><code> </code><code class="nf">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO2-5" id="co_the_page_object_model__pom__CO2-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">successBox</code><code class="o">)</code><code class="o">.</code><code class="na">isDisplayed</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO2-1" id="callout_the_page_object_model__pom__CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We declare a <code>WebDriver</code> class attribute. This variable is used in the page object to implement the interaction with the web page.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO2-2" id="callout_the_page_object_model__pom__CO2-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We declare all the required locators as additional attributes. In this case, we locate the text input for the username and password, the Submit button, and the success box.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO2-3" id="callout_the_page_object_model__pom__CO2-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>The constructor defined by this page class accepts the <code>WebDriver</code> object. We use the constructor to load the page under test.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO2-4" id="callout_the_page_object_model__pom__CO2-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We declare a method to model the required interaction to log in, i.e., type the username and password, and click on the Submit button.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO2-5" id="callout_the_page_object_model__pom__CO2-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We declare another method to check if the success box is visible.</p></dd>&#13;
</dl>&#13;
&#13;
<p>Now, we can use this page class in a test case. <a data-type="xref" href="#basic_login_test">Example 7-4</a> illustrates how. Notice that <a data-primary="WebDriver" data-secondary="object creation for" data-type="indexterm" id="idm45849709601856"/>we create a <code>WebDriver</code> instance, as usual before each test, and quit it after each test. We use this driver as an argument in the page class constructor.</p>&#13;
<div data-type="example" id="basic_login_test">&#13;
<h5><span class="label">Example 7-4. </span>Test using the basic page class to implement a succesful login</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">BasicLoginJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">BasicLoginPage</code><code> </code><code class="n">login</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO3-1" id="co_the_page_object_model__pom__CO3-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">login</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">BasicLoginPage</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO3-2" id="co_the_page_object_model__pom__CO3-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testBasicLoginSuccess</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO3-3" id="co_the_page_object_model__pom__CO3-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">login</code><code class="o">.</code><code class="na">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO3-4" id="co_the_page_object_model__pom__CO3-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO3-1" id="callout_the_page_object_model__pom__CO3-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We declare the page class as an <a data-primary="text classes" data-type="indexterm" id="idm45849709474688"/>attribute in the test class.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO3-2" id="callout_the_page_object_model__pom__CO3-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We create the page object, passing the <code>WebDriver</code> instance.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO3-3" id="callout_the_page_object_model__pom__CO3-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We invoke the method <code>with</code> defined by the page class to make the login <span class="keep-together">operation</span>.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO3-4" id="callout_the_page_object_model__pom__CO3-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We verify the success box is available on the resulting web page using a method provided by the page object.</p></dd>&#13;
</dl>&#13;
&#13;
<p>This approach is a handy <a data-primary="POM (Page Object Model)" data-secondary="and maintainability of code" data-secondary-sortas="maintainability of code" data-type="indexterm" id="idm45849709439840"/><a data-primary="negative testing" data-type="indexterm" id="idm45849709438624"/><a data-primary="code" data-secondary="maintainability of" data-type="indexterm" id="idm45849709437952"/>start for improving the maintainability of our tests because now, all the logic related to the login web page is centralized as a reusable class. Nevertheless, the code in the page classes is still brittle. For instance, imagine we need to implement a negative test for the login page, i.e., a login attempt using incorrect credentials. <a data-type="xref" href="#basic_login_test_2">Example 7-5</a> seems a reasonable way to do that, given the current implementation of the page class. However, if you run this test, you <a data-primary="NoSuchElementException exception" data-type="indexterm" id="idm45849709436080"/>will discover that the test fails due to a <code>NoSuchElementException</code> exception. The next section explains how to solve this potential problem by creating more robust page objects.</p>&#13;
<div data-type="example" id="basic_login_test_2">&#13;
<h5><span class="label">Example 7-5. </span>Test using the basic page class to implement a failed login</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="nd">@Test</code>&#13;
<code class="kt">void</code> <code class="nf">testBasicLoginFailure</code><code class="o">()</code> <code class="o">{</code>&#13;
    <code class="n">login</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="s">"bad-user"</code><code class="o">,</code> <code class="s">"bad-password"</code><code class="o">);</code>&#13;
    <code class="n">assertThat</code><code class="o">(</code><code class="n">login</code><code class="o">.</code><code class="na">successBoxPresent</code><code class="o">()).</code><code class="na">isFalse</code><code class="o">();</code>&#13;
<code class="o">}</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Robust Page Objects" data-type="sect2"><div class="sect2" id="idm45849709417200">&#13;
<h2>Robust Page Objects</h2>&#13;
&#13;
<p>The example presented in the previous sections improves code maintainability since the page operations are encapsulated in a single class instead of having them scattered throughout the test suite. That said, there are different ways to enhance the previous page classes implementation. <a data-primary="object-oriented programming" data-type="indexterm" id="idm45849709426048"/><a data-primary="POM (Page Object Model)" data-secondary="as object-oriented approach" data-secondary-sortas="object-oriented approach" data-type="indexterm" id="idm45849709425408"/><a data-primary="SUT (System Under Test)" data-secondary="improving design of" data-type="indexterm" id="idm45849709424256"/>First of all, our SUT is likely to have several web pages, not only one. For this reason, a common strategy is to follow an object-oriented approach <a data-primary="base page class, POM" data-type="indexterm" id="ch7_term13"/>and create a <em>base page</em> class that encapsulates the common logic for all the page classes. <a data-type="xref" href="#base_page">Example 7-6</a> shows a Java class implementing a typical base for page classes.</p>&#13;
<div data-type="example" id="base_page">&#13;
<h5><span class="label">Example 7-6. </span>Example of a base class for page classes</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">BasePage</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kd">final</code><code> </code><code class="n">Logger</code><code> </code><code class="n">log</code><code> </code><code class="o">=</code><code> </code><code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">lookupClass</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">WebDriverWait</code><code> </code><code class="n">wait</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">timeoutSec</code><code> </code><code class="o">=</code><code> </code><code class="mi">5</code><code class="o">;</code><code> </code><code class="c1">// wait timeout (5 seconds by default)&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">BasePage</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">wait</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">WebDriverWait</code><code class="o">(</code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="n">timeoutSec</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO4-1" id="co_the_page_object_model__pom__CO4-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setTimeoutSec</code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">timeoutSec</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO4-2" id="co_the_page_object_model__pom__CO4-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">timeoutSec</code><code> </code><code class="o">=</code><code> </code><code class="n">timeoutSec</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">visit</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">url</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO4-3" id="co_the_page_object_model__pom__CO4-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="n">url</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">WebElement</code><code> </code><code class="nf">find</code><code class="o">(</code><code class="n">By</code><code> </code><code class="n">element</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="n">driver</code><code class="o">.</code><code class="na">findElement</code><code class="o">(</code><code class="n">element</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">click</code><code class="o">(</code><code class="n">By</code><code> </code><code class="n">element</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">find</code><code class="o">(</code><code class="n">element</code><code class="o">)</code><code class="o">.</code><code class="na">click</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">type</code><code class="o">(</code><code class="n">By</code><code> </code><code class="n">element</code><code class="o">,</code><code> </code><code class="n">String</code><code> </code><code class="n">text</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">find</code><code class="o">(</code><code class="n">element</code><code class="o">)</code><code class="o">.</code><code class="na">sendKeys</code><code class="o">(</code><code class="n">text</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">boolean</code><code> </code><code class="nf">isDisplayed</code><code class="o">(</code><code class="n">By</code><code> </code><code class="n">locator</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO4-4" id="co_the_page_object_model__pom__CO4-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="k">try</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="n">wait</code><code class="o">.</code><code class="na">until</code><code class="o">(</code><code class="n">ExpectedConditions</code><code class="o">.</code><code class="na">visibilityOfElementLocated</code><code class="o">(</code><code class="n">locator</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code> </code><code class="k">catch</code><code> </code><code class="o">(</code><code class="n">TimeoutException</code><code> </code><code class="n">e</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="n">log</code><code class="o">.</code><code class="na">warn</code><code class="o">(</code><code class="s">"Timeout of {} wait for {}"</code><code class="o">,</code><code> </code><code class="n">timeoutSec</code><code class="o">,</code><code> </code><code class="n">locator</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>            </code><code class="k">return</code><code> </code><code class="kc">false</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="kc">true</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO4-1" id="callout_the_page_object_model__pom__CO4-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We define an <a data-primary="explicit waits" data-type="indexterm" id="idm45849709355440"/><a data-primary="WebDriverWait class" data-type="indexterm" id="idm45849709354944"/><a data-primary="waiting strategies" data-type="indexterm" id="idm45849709354336"/>explicit wait (<code>WebDriverWait</code>) attribute in the base class. We instantiate this attribute in the constructor using a default timeout value (five seconds in this example).</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO4-2" id="callout_the_page_object_model__pom__CO4-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We create a <a data-primary="timeouts" data-type="indexterm" id="idm45849709350768"/>setter method to change the default value for the wait timeout. For instance, we might need to adjust this timeout depending on the system response time.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO4-3" id="callout_the_page_object_model__pom__CO4-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We create several <a data-primary="code" data-secondary="reusable" data-type="indexterm" id="idm45849709062208"/>common methods that page classes can reuse, such as <code>visit()</code> (to open a web page), <code>find()</code> (to locate a web element), or <code>type()</code> (to send data to a writable element, such as an input field).</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO4-4" id="callout_the_page_object_model__pom__CO4-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We implement a method to check if a web element is displayed or not. Notice that this method hides the complexity of waiting for this element, returning a simple boolean value that tests can use.</p></dd>&#13;
</dl>&#13;
&#13;
<p>We use the previous base class as the parent of specific page classes. For instance, <a data-type="xref" href="#login_page">Example 7-7</a> shows a Java class that extends this base to implement the page class, using the login sample page in the practice site.</p>&#13;
<div data-type="example" id="login_page">&#13;
<h5><span class="label">Example 7-7. </span>Login page class using the previous base</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">LoginPage</code><code> </code><code class="kd">extends</code><code> </code><code class="n">BasePage</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">usernameInput</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"username"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO5-1" id="co_the_page_object_model__pom__CO5-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">passwordInput</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"password"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">submitButton</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"button"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">By</code><code> </code><code class="n">successBox</code><code> </code><code class="o">=</code><code> </code><code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"success"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">LoginPage</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">,</code><code> </code><code class="kt">int</code><code> </code><code class="n">timeoutSec</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO5-2" id="co_the_page_object_model__pom__CO5-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">setTimeoutSec</code><code class="o">(</code><code class="n">timeoutSec</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">LoginPage</code><code class="o">(</code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO5-3" id="co_the_page_object_model__pom__CO5-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="kd">super</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">visit</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">with</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">username</code><code class="o">,</code><code> </code><code class="n">String</code><code> </code><code class="n">password</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO5-4" id="co_the_page_object_model__pom__CO5-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="n">type</code><code class="o">(</code><code class="n">usernameInput</code><code class="o">,</code><code> </code><code class="n">username</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">type</code><code class="o">(</code><code class="n">passwordInput</code><code class="o">,</code><code> </code><code class="n">password</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">click</code><code class="o">(</code><code class="n">submitButton</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">boolean</code><code> </code><code class="nf">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO5-5" id="co_the_page_object_model__pom__CO5-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>        </code><code class="k">return</code><code> </code><code class="nf">isDisplayed</code><code class="o">(</code><code class="n">successBox</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO5-1" id="callout_the_page_object_model__pom__CO5-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We define the page locators as class attributes.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO5-2" id="callout_the_page_object_model__pom__CO5-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We define a constructor with two parameters: the <code>WebDriver</code> object and the timeout value (in seconds).</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO5-3" id="callout_the_page_object_model__pom__CO5-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We define another constructor that opens the web page under test.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO5-4" id="callout_the_page_object_model__pom__CO5-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We include a <a data-primary="username and password" data-type="indexterm" id="idm45849708868368"/><a data-primary="credentials, authentication" data-type="indexterm" id="idm45849708867632"/><a data-primary="authentication, approaches to" data-type="indexterm" id="idm45849708866992"/>method to log in using username and password as credentials. This uses the methods defined in the parent (<code>type()</code> and <code>click()</code>).</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO5-5" id="callout_the_page_object_model__pom__CO5-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We include another <a data-primary="isDisplayed() method" data-type="indexterm" id="idm45849708795776"/>method to check if the success box is visible or not (using the method <code>isDisplayed()</code> defined in the base class).</p></dd>&#13;
</dl>&#13;
&#13;
<p>Finally, we can use the page class to implement a Selenium WebDriver test. <a data-type="xref" href="#test_login_page">Example 7-8</a> shows a <a data-primary="JUnit 5" data-secondary="page class example with" data-type="indexterm" id="idm45849708793792"/>test using JUnit 5 (as usual, you can find the JUnit 4, TestNG, and Selenium-Jupiter flavors in the <a href="https://github.com/bonigarcia/selenium-webdriver-java">examples repository</a>).</p>&#13;
<div data-type="example" id="test_login_page">&#13;
<h5><span class="label">Example 7-8. </span>Test using the page class to implement a successful and failed login</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">LoginJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">LoginPage</code><code> </code><code class="n">login</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">chromedriver</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">login</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">LoginPage</code><code class="o">(</code><code class="n">driver</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO6-1" id="co_the_page_object_model__pom__CO6-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testLoginSuccess</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">login</code><code class="o">.</code><code class="na">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testLoginFailure</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="s">"bad-user"</code><code class="o">,</code><code> </code><code class="s">"bad-password"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">login</code><code class="o">.</code><code class="na">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isFalse</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO6-2" id="co_the_page_object_model__pom__CO6-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO6-1" id="callout_the_page_object_model__pom__CO6-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We instantiate the page object before each test.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO6-2" id="callout_the_page_object_model__pom__CO6-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>Since the page class logic is robust, we <a data-primary="successBoxPresent() method" data-type="indexterm" id="idm45849708659984"/><a data-primary="negative testing" data-type="indexterm" id="idm45849708659312"/><a data-primary="waiting strategies" data-type="indexterm" id="idm45849708658640"/>can invoke <code>successBoxPresent()</code> to implement a negative test. This method internally implements an explicit wait for the web element, which eventually returns <code>false</code> when the success box is not <a data-startref="ch7_term1" data-type="indexterm" id="idm45849708657008"/><a data-startref="ch7_term2" data-type="indexterm" id="idm45849708656304"/><a data-startref="ch7_term13" data-type="indexterm" id="idm45849708655632"/><span class="keep-together">displayed</span>.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Creating a Domain Specific Language (DSL)" data-type="sect1"><div class="sect1" id="idm45849710136928">&#13;
<h1>Creating a Domain Specific Language (DSL)</h1>&#13;
&#13;
<p>We can push things a little more in our journey of <a data-primary="SUT (System Under Test)" data-secondary="improving design of" data-type="indexterm" id="idm45849708598912"/><a data-primary="Domain Specific Language (DSL)" data-type="indexterm" id="ch7_term15"/><a data-primary="DSL (Domain Specific Language)" data-type="indexterm" id="ch7_term16"/><a data-primary="POM (Page Object Model)" data-secondary="DSL approach in" data-type="indexterm" id="ch7_term17"/>modeling our SUT and create a complete Domain Specific Language (DSL) using the page classes. In computing, a DSL is a specialized language for a particular domain. When using the POM and Selenium WebDriver, we can see a DSL as the encapsulation of all the SUT operations and services in the methods provided by the page classes. This way, test cases use a simple, readable API provided by the page classes. These classes encapsulate all the calls to the Selenium WebDriver API to interact with the SUT.</p>&#13;
&#13;
<p>Continuing with the example shown in the previous sections, <a data-type="xref" href="#dsl_base">Example 7-9</a> shows a base page class for the login page following a DSL approach. This base class is quite similar to <a data-type="xref" href="#base_page">Example 7-6</a>, but in this case, this class also encapsulates the required logic to create a <code>WebDriver</code> instance.</p>&#13;
<div data-type="example" id="dsl_base">&#13;
<h5><span class="label">Example 7-9. </span>Example of base class following a DSL approach</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ExtendedBasePage</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">static</code><code> </code><code class="kd">final</code><code> </code><code class="n">Logger</code><code> </code><code class="n">log</code><code> </code><code class="o">=</code><code> </code><code class="n">getLogger</code><code class="o">(</code><code class="n">lookup</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">lookupClass</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="n">WebDriverWait</code><code> </code><code class="n">wait</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kt">int</code><code> </code><code class="n">timeoutSec</code><code> </code><code class="o">=</code><code> </code><code class="mi">5</code><code class="o">;</code><code> </code><code class="c1">// wait timeout (5 seconds by default)&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">ExtendedBasePage</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">browser</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO7-1" id="co_the_page_object_model__pom__CO7-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="n">WebDriverManager</code><code class="o">.</code><code class="na">getInstance</code><code class="o">(</code><code class="n">browser</code><code class="o">)</code><code class="o">.</code><code class="na">create</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO7-2" id="co_the_page_object_model__pom__CO7-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="n">wait</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">WebDriverWait</code><code class="o">(</code><code class="n">driver</code><code class="o">,</code><code> </code><code class="n">Duration</code><code class="o">.</code><code class="na">ofSeconds</code><code class="o">(</code><code class="n">timeoutSec</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setTimeoutSec</code><code class="o">(</code><code class="kt">int</code><code> </code><code class="n">timeoutSec</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">timeoutSec</code><code> </code><code class="o">=</code><code> </code><code class="n">timeoutSec</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">quit</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO7-3" id="co_the_page_object_model__pom__CO7-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">driver</code><code> </code><code class="o">!</code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Rest of common methods: quit(), visit(URL url), find(By element), etc.&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO7-1" id="callout_the_page_object_model__pom__CO7-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We declare a <code>String</code> parameter in the base constructor. This string will be the browser name (specified in the tests).</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO7-2" id="callout_the_page_object_model__pom__CO7-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use WebDriverManager <a data-primary="drivers" data-secondary="WebDriverManager resolution of" data-type="indexterm" id="idm45849708454576"/><a data-primary="getInstance() method" data-type="indexterm" id="idm45849708453632"/><a data-primary="parameterized managers" data-type="indexterm" id="idm45849708452960"/><a data-primary="WebDriverManager" data-secondary="driver resolution by" data-type="indexterm" id="idm45849708452288"/><a data-primary="WebDriverManager" data-secondary="parameterized manager with" data-type="indexterm" id="idm45849708451344"/><a data-primary="generic manager of WebDriverManager" data-type="indexterm" id="idm45849708450432"/>to resolve the required driver and create the <code>WebDriver</code> instance. As explained in <a data-type="xref" href="app02.html#generic_manager">“Generic Manager”</a>, WebDriverManager allows the use of a parameterized manager by invoking the method <code>getInstance()</code>. In this case, we use the browser name (e.g., <code>chrome,</code> <code>firefox,</code> etc.) to select the manager.</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO7-3" id="callout_the_page_object_model__pom__CO7-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We also encapsulate the method to terminate the session and close the browser.</p></dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#dsl_page">Example 7-10</a> shows the page class that extends this base. As you can see, the only difference from <a data-type="xref" href="#login_page">Example 7-7</a> is that this page class uses a string parameter (the browser name) in the constructor.</p>&#13;
<div data-type="example" id="dsl_page">&#13;
<h5><span class="label">Example 7-10. </span>Login page class following a DSL approach</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="kd">class</code> <code class="nc">ExtendedLoginPage</code> <code class="kd">extends</code> <code class="n">ExtendedBasePage</code> <code class="o">{</code>&#13;
&#13;
    <code class="n">By</code> <code class="n">usernameInput</code> <code class="o">=</code> <code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"username"</code><code class="o">);</code>&#13;
    <code class="n">By</code> <code class="n">passwordInput</code> <code class="o">=</code> <code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"password"</code><code class="o">);</code>&#13;
    <code class="n">By</code> <code class="n">submitButton</code> <code class="o">=</code> <code class="n">By</code><code class="o">.</code><code class="na">cssSelector</code><code class="o">(</code><code class="s">"button"</code><code class="o">);</code>&#13;
    <code class="n">By</code> <code class="n">successBox</code> <code class="o">=</code> <code class="n">By</code><code class="o">.</code><code class="na">id</code><code class="o">(</code><code class="s">"success"</code><code class="o">);</code>&#13;
&#13;
    <code class="kd">public</code> <code class="nf">ExtendedLoginPage</code><code class="o">(</code><code class="n">String</code> <code class="n">browser</code><code class="o">,</code> <code class="kt">int</code> <code class="n">timeoutSec</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="k">this</code><code class="o">(</code><code class="n">browser</code><code class="o">);</code>&#13;
        <code class="n">setTimeoutSec</code><code class="o">(</code><code class="n">timeoutSec</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="kd">public</code> <code class="nf">ExtendedLoginPage</code><code class="o">(</code><code class="n">String</code> <code class="n">browser</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="kd">super</code><code class="o">(</code><code class="n">browser</code><code class="o">);</code>&#13;
        <code class="n">visit</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">with</code><code class="o">(</code><code class="n">String</code> <code class="n">username</code><code class="o">,</code> <code class="n">String</code> <code class="n">password</code><code class="o">)</code> <code class="o">{</code>&#13;
        <code class="n">type</code><code class="o">(</code><code class="n">usernameInput</code><code class="o">,</code> <code class="n">username</code><code class="o">);</code>&#13;
        <code class="n">type</code><code class="o">(</code><code class="n">passwordInput</code><code class="o">,</code> <code class="n">password</code><code class="o">);</code>&#13;
        <code class="n">click</code><code class="o">(</code><code class="n">submitButton</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
&#13;
    <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">successBoxPresent</code><code class="o">()</code> <code class="o">{</code>&#13;
        <code class="k">return</code> <code class="nf">isDisplayed</code><code class="o">(</code><code class="n">successBox</code><code class="o">);</code>&#13;
    <code class="o">}</code>&#13;
&#13;
<code class="o">}</code></pre></div>&#13;
&#13;
<p>Finally, <a data-type="xref" href="#dsl_test">Example 7-11</a> shows the resulting test. Notice that this test does not contain any single call to Selenium WebDriver or WebDriverManager. The page class encapsulates all the low-level details of the interaction with the browser, exposing a high-level, readable API used in the test.</p>&#13;
<div data-type="example" id="dsl_test">&#13;
<h5><span class="label">Example 7-11. </span>Test case using POM and following a DSL approach</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">ExtendedLoginJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">ExtendedLoginPage</code><code> </code><code class="n">login</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ExtendedLoginPage</code><code class="o">(</code><code class="s">"chrome"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO8-1" id="co_the_page_object_model__pom__CO8-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO8-2" id="co_the_page_object_model__pom__CO8-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testLoginSuccess</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="s">"user"</code><code class="o">,</code><code> </code><code class="s">"user"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">login</code><code class="o">.</code><code class="na">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testLoginFailure</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">login</code><code class="o">.</code><code class="na">with</code><code class="o">(</code><code class="s">"bad-user"</code><code class="o">,</code><code> </code><code class="s">"bad-password"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">login</code><code class="o">.</code><code class="na">successBoxPresent</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isFalse</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO8-1" id="callout_the_page_object_model__pom__CO8-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We instantiate the page object, simply specifying the browser type to be used (<code>chrome</code> in this case).</p></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO8-2" id="callout_the_page_object_model__pom__CO8-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>As usual, we terminate the browser session after each test, but this time using a method provided by the page <a data-startref="ch7_term8" data-type="indexterm" id="idm45849708095008"/><a data-startref="ch7_term9" data-type="indexterm" id="idm45849708094304"/><a data-startref="ch7_term10" data-type="indexterm" id="idm45849708093632"/><a data-startref="ch7_term11" data-type="indexterm" id="idm45849708092960"/><a data-startref="ch7_term15" data-type="indexterm" id="idm45849708092288"/><a data-startref="ch7_term16" data-type="indexterm" id="idm45849708091616"/><a data-startref="ch7_term17" data-type="indexterm" id="idm45849708090944"/>object.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Page Factory" data-type="sect1"><div class="sect1" id="idm45849708653712">&#13;
<h1>Page Factory</h1>&#13;
&#13;
<p>Page Factory is the <a data-primary="Page Factory approach with POM" data-type="indexterm" id="ch7_term18"/><a data-primary="POM (Page Object Model)" data-secondary="Page Factory in" data-type="indexterm" id="ch7_term20"/>name given to several support classes provided by the Selenium WebDriver API to ease the implementation of page object classes. The most relevant of these support classes are:</p>&#13;
<dl>&#13;
<dt><code>FindBy</code></dt>&#13;
<dd>&#13;
<p>Annotation used <a data-primary="@FindBy annotation" data-primary-sortas="FindBy annotation" data-type="indexterm" id="idm45849708037264"/>at the attribute level to identify web elements in a page.</p>&#13;
</dd>&#13;
<dt><code>FindAll</code></dt>&#13;
<dd>&#13;
<p>Annotation that <a data-primary="@FindAll annotation" data-primary-sortas="FindAll annotation" data-type="indexterm" id="idm45849708034720"/>allows composing different <code>@FindBy</code> locators.</p>&#13;
</dd>&#13;
<dt><code>PageFactory</code></dt>&#13;
<dd>&#13;
<p>Class used <a data-primary="PageFactory class" data-type="indexterm" id="idm45849708031728"/>to initialize all the previously declared web elements with <code>@FindBy</code> (and <code>@FindAll</code>).</p>&#13;
</dd>&#13;
<dt><code>CacheLookup</code></dt>&#13;
<dd>&#13;
<p>One downside of using the <code>@FindBy</code> annotation to locate web elements is that as each locator is used, the driver will try to find it on the current page. This feature is helpful in dynamic web applications. However, it <a data-primary="@CacheLookup annotation" data-primary-sortas="CacheLookup annotation" data-type="indexterm" id="idm45849708028144"/>would be desirable to cache the web elements in static web applications. For this reason, the annotation <code>@CacheLookup</code> allows caching the web elements once they are located, improving the performance of the resulting tests.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#factory_page">Example 7-12</a> shows a page class that uses these Selenium WebDriver support classes. You can find the resulting test using this page class in the repository object. This test is equivalent to <a data-type="xref" href="#dsl_test">Example 7-11</a>, but uses <code>FactoryLoginPage</code> instead of <code>ExtendedLoginPage</code> for interaction with the login page.</p>&#13;
<div data-type="example" id="factory_page">&#13;
<h5><span class="label">Example 7-12. </span>Class using the Page Factory provided by Selenium WebDriver</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">FactoryLoginPage</code><code> </code><code class="kd">extends</code><code> </code><code class="n">ExtendedBasePage</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@FindBy</code><code class="o">(</code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="s">"username"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="nd">@CacheLookup</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">usernameInput</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO9-1" id="co_the_page_object_model__pom__CO9-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@FindBy</code><code class="o">(</code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="s">"password"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="nd">@CacheLookup</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">passwordInput</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@FindBy</code><code class="o">(</code><code class="n">css</code><code> </code><code class="o">=</code><code> </code><code class="s">"button"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="nd">@CacheLookup</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">submitButton</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@FindBy</code><code class="o">(</code><code class="n">id</code><code> </code><code class="o">=</code><code> </code><code class="s">"success"</code><code class="o">)</code><code>&#13;
</code><code>    </code><code class="nd">@CacheLookup</code><code>&#13;
</code><code>    </code><code class="n">WebElement</code><code> </code><code class="n">successBox</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">FactoryLoginPage</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">browser</code><code class="o">,</code><code> </code><code class="kt">int</code><code> </code><code class="n">timeoutSec</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">this</code><code class="o">(</code><code class="n">browser</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">setTimeoutSec</code><code class="o">(</code><code class="n">timeoutSec</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="nf">FactoryLoginPage</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">browser</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="kd">super</code><code class="o">(</code><code class="n">browser</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="n">PageFactory</code><code class="o">.</code><code class="na">initElements</code><code class="o">(</code><code class="n">driver</code><code class="o">,</code><code> </code><code class="k">this</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_the_page_object_model__pom__CO9-2" id="co_the_page_object_model__pom__CO9-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="n">visit</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/login-form.html"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Same logic to the page class without using the page factory&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO9-1" id="callout_the_page_object_model__pom__CO9-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We declare the web elements in the page using the <code>WebElement</code> type decorated with two annotations:</p>&#13;
<dl>&#13;
<dt><code>@FindBy</code></dt>&#13;
<dd>&#13;
<p>To specify <a data-primary="@FindBy annotation" data-primary-sortas="FindBy annotation" data-type="indexterm" id="idm45849707883504"/>the locator (by <code>id</code> and <code>css</code> in this example).</p>&#13;
</dd>&#13;
<dt><code>@CacheLookup</code></dt>&#13;
<dd>&#13;
<p>To cache <a data-primary="@CacheLookup annotation" data-primary-sortas="CacheLookup annotation" data-type="indexterm" id="idm45849707880032"/>the web element location results (since the web page is static and its content will not change in different calls).</p>&#13;
</dd>&#13;
</dl></dd>&#13;
<dt><a class="co" href="#co_the_page_object_model__pom__CO9-2" id="callout_the_page_object_model__pom__CO9-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We invoke <a data-primary="initElements() method" data-type="indexterm" id="idm45849707876160"/>the <code>initElements</code> method to locate the web elements <a data-startref="ch7_term7" data-type="indexterm" id="idm45849707835024"/>using the <code>WebDriver</code> instance.</p></dd>&#13;
</dl>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>The Page Factory approach is only recommended when the web page tested with Selenium WebDriver is static. This approach can lead to undesirable effects such as stale web elements (i.e., old or no-longer-available elements) when using dynamic web <a data-startref="ch7_term18" data-type="indexterm" id="idm45849707832576"/><a data-startref="ch7_term20" data-type="indexterm" id="idm45849707831872"/><a data-startref="ch7_term9" data-type="indexterm" id="idm45849707831200"/>pages.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Summary and Outlook" data-type="sect1"><div class="sect1" id="idm45849707830144">&#13;
<h1>Summary and Outlook</h1>&#13;
&#13;
<p>This chapter provided a comprehensive overview of the Page Object Model (POM) in Selenium WebDriver tests. <a data-primary="POM (Page Object Model)" data-secondary="design pattern of" data-type="indexterm" id="idm45849707828464"/>POM is a design pattern in which we separate the logic to interact with web pages and the test code. <a data-primary="SUT (System Under Test)" data-secondary="improving design of" data-type="indexterm" id="idm45849707827248"/>This way, <em>page classes</em> contain the logic related to web locators and page layout, and <a data-primary="test classes" data-type="indexterm" id="idm45849707825760"/>test classes determine how to exercise and verify the <a data-startref="ch7_term12" data-type="indexterm" id="idm45849707825120"/>SUT. The POM <a data-primary="POM (Page Object Model)" data-secondary="and maintainability of code" data-secondary-sortas="maintainability of code" data-type="indexterm" id="idm45849707824384"/><a data-primary="end-to-end (E2E) testing" data-secondary="maintainability with" data-type="indexterm" id="idm45849707823296"/><a data-primary="code" data-secondary="maintainability of" data-type="indexterm" id="idm45849707822448"/>pattern improves the maintainability of test suites based on Selenium WebDriver since the page classes are stored in a single repository that models the SUT. This repository is used later in different test cases. We can create robust web pages using proper location and waiting strategies.</p>&#13;
&#13;
<p>The next chapter presents specific aspects of the used unit testing frameworks (JUnit, TestNG, and Selenium-Jupiter) to improve the overall testing process with Selenium WebDriver. These features allow creating parameterized tests (for cross-browser testing), categorizing tests (for test filtering), ordering and retrying tests, or executing tests in parallel.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>