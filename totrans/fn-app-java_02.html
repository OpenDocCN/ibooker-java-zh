<html><head></head><body>
<div id="sbo-rt-content"><section class="pagenumrestart" data-pdf-bookmark="Chapter 1. An Introduction to Functional Programming" data-type="chapter" epub:type="chapter"><div class="chapter" id="_01-an-introduction">
<h1><span class="label">Chapter 1. </span>An Introduction to <span class="keep-together">Functional Programming</span></h1>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45115253314800">
<h1>A Note for Early Release Readers</h1>
<p>With Early Release ebooks, you get books in their earliest form—the author’s raw and unedited content as they write—so you can take advantage of these technologies long before the official release of these titles.</p>
<p>This will be the 1st chapter of the final book. Please note that the GitHub repo will be made active later on.</p>
<p>If you have comments about how we might improve the content and/or examples in this book, or if you notice missing material within this chapter, please reach out to the editor at <em>rfernando@oreilly.com</em>.</p>
</div></aside>
<p>To better understand how to incorporate a more functional programming style in Java, you first need to understand what it means for a language to be functional and what its foundational concepts are.</p>
<p>This chapter will explore the roots of functional programming needed to incorporate a more functional programming style into your workflow.</p>
<section data-pdf-bookmark="What Makes A Language Functional?" data-type="sect1"><div class="sect1" id="idm45115253715056">
<h1>What Makes A Language Functional?</h1>
<p>Programming Paradigms — like object-oriented, functional, or procedural — are synthetic overall concepts that classify languages and provide ways to structure your programs in a specific style and use different approaches to solving problems.
Like most paradigms, functional programming doesn’t have a single agreed-upon definition, and many turf wars are fought about what defines a language as <em>actually</em> functional.
Instead of giving my own definition, I will go over different aspects of what makes a language functional.</p>
<p>A language is considered functional when there’s a way to express computations by creating and combining abstract functions.
This concept is rooted in the formal mathematical system <em>Lambda Calculus</em>, invented by the logician Alonzo Church in the 1930s.<sup><a data-type="noteref" href="ch01.xhtml#idm45115253643376" id="idm45115253643376-marker">1</a></sup>
It’s a system to express computations with abstract functions and how to apply variables to them.
The name “lambda calculus” came from the Greek letter “lambda” chosen for its symbol: <math alttext="lamda">
<mi>λ</mi>
</math>.</p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45115253246112">
<h1>Lambda Calculus</h1>
<p>Three pillars build the foundation for the general concept of lambda calculus:</p>
<dl>
<dt>Abstraction</dt>
<dd>
<p>An anonymous function — a <em>lambda</em> — that accepts a single input.</p>
</dd>
<dt>Application</dt>
<dd>
<p>An <em>abstraction</em> is applied to a value to create a result.
From a developer’s perspective, it’s a function or method call.</p>
</dd>
<dt>ß-Reduction</dt>
<dd>
<p>The substitution of the abstraction’s variable with the applied argument.</p>
</dd>
</dl>
<p>A mathematical function declaration looks like this: <math alttext="f equals lamda x period upper E">
<mrow>
<mi>f</mi>
<mo>=</mo>
<mi>λ</mi>
<mi>x</mi>
<mo>.</mo>
<mi>E</mi>
</mrow>
</math></p>
<p>Such a declaration consists of multiple parts:</p>
<dl>
<dt><math alttext="x">
<mi>x</mi>
</math></dt>
<dd>
<p>The <em>variable</em>, the argument representing a value.</p>
</dd>
<dt><math alttext="upper E">
<mi>E</mi>
</math></dt>
<dd>
<p>The <em>expression</em>, or <em>term</em>, containing the logic.</p>
</dd>
<dt><math alttext="lamda x period upper E">
<mrow>
<mi>λ</mi>
<mi>x</mi>
<mo>.</mo>
<mi>E</mi>
</mrow>
</math></dt>
<dd>
<p>The <em>abstraction</em>, an anonymous function accepting a single input <math alttext="x">
<mi>x</mi>
</math>.</p>
</dd>
<dt><math alttext="f">
<mi>f</mi>
</math></dt>
<dd>
<p>The resulting function that can apply an argument to its abstraction.</p>
</dd>
</dl>
<p>These parts are very similar to how Java lambdas — the core of its new functional programming style — are implemented.
For example, a function that calculates a quadratic value — <math alttext="f equals lamda x period upper E">
<mrow>
<mi>f</mi>
<mo>=</mo>
<mi>λ</mi>
<mi>x</mi>
<mo>.</mo>
<mi>E</mi>
</mrow>
</math> — is almost identical to the Java version if you include the types:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">Function</code><code class="o">&lt;</code><code class="n">Integer</code><code class="p">,</code> <code class="n">Integer</code><code class="o">&gt;</code> <code class="n">quadratic</code> <code class="o">=</code>
  <code class="n">value</code> <code class="o">-&gt;</code> <code class="n">value</code> <code class="o">*</code> <code class="n">value</code><code class="p">;</code></pre>
<p>The code should be self-explanatory in context, but the lambda syntax will be explained in detail in <a data-type="xref" href="ch02.xhtml#_01-functional-java">Chapter 2</a>.</p>
</div></aside>
<p>As an object-oriented developer, you are used to <em>imperative</em> programming: by defining a series of statements, you are telling the computer <em>what</em> to do to accomplish a particular task with a sequence of <em>statements</em>.</p>
<p>For a programming language to be considered functional, a <em>declarative</em> style to express the logic of computations without describing their actual control flow needs to be achievable.
In such a declarative programming style, you describe the outcome and <em>how</em> your program should work with <em>expressions</em>, not <em>what</em> it should do with <em>statements</em>.</p>
<p>In Java, an <em>expression</em> is a sequence of operators, operands, and method invocations that define a computation and evaluate to a single value:</p>
<pre data-code-language="java" data-type="programlisting"><code class="n">x</code> <code class="o">*</code> <code class="n">x</code>
<code class="mi">2</code> <code class="o">*</code> <code class="n">Math</code><code class="p">.</code><code class="na">PI</code> <code class="o">*</code> <code class="n">radius</code>
<code class="n">value</code> <code class="o">==</code> <code class="kc">null</code> <code class="o">?</code> <code class="kc">true</code> <code class="p">:</code> <code class="kc">false</code></pre>
<p><em>Statements</em>, on the other hand, are actions taken by your code, to form a complete unit of execution, including method invocations without a return value.
Any time you assign or change the value of a variable, call a <code>void</code> method, or use control-flow constructs like <code>if</code>/<code>else</code>, you’re using statements.
Usually, they’re intermixed with expressions:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kt">int</code> <code class="n">totalTreasure</code> <code class="o">=</code> <code class="mi">0</code><code class="p">;</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-1" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a>

<code class="kt">int</code> <code class="n">newTreasuresFound</code> <code class="o">=</code> <code class="n">findTreasure</code><code class="p">(</code><code class="mi">6</code><code class="p">)</code><code class="p">;</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-2" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a>

<code class="n">totalTreasure</code> <code class="o">=</code> <code class="n">totalTreasure</code> <code class="o">+</code> <code class="n">newTreasuresFound</code><code class="p">;</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-3" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a>

<code class="k">if</code> <code class="p">(</code><code class="n">treasureCounter</code> <code class="o">&gt;</code> <code class="mi">10</code><code class="p">)</code> <code class="p">{</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-4" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a>
  <code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"</code><code class="s">You have a lot of treasure!</code><code class="s">"</code><code class="p">)</code><code class="p">;</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-5" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-5"><img alt="5" height="12" src="assets/5.png" width="12"/></a>
<code class="p">}</code> <code class="k">else</code> <code class="p">{</code>
  <code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"</code><code class="s">You should look for more treasure!</code><code class="s">"</code><code class="p">)</code><code class="p">;</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-5" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-6"><img alt="5" height="12" src="assets/5.png" width="12"/></a>
<code class="p">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-1" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>Assigns an initial value to a variable, introducing state into the program.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-2" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>The function call <code>findTreasure(6)</code> is a functional expression, but the assignment of <code>newTreasuresFound</code> is a statement.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-3" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>The reassignment of <code>totalTreasure</code> is a statement using the result of the expression on the right-hand side.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-4" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-4"><img alt="4" height="12" src="assets/4.png" width="12"/></a></dt>
<dd><p>The control-flow statement <code>if</code>/<code>else</code> conveys what action should be taken based on the result of the expression <code>(treasureCounter &gt; 10)</code>.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-5" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO1-5"><img alt="5" height="12" src="assets/5.png" width="12"/></a></dt>
<dd><p>Printing to <code>System.out</code> is a statement because there’s no result returned from the call.</p></dd>
</dl>
<p>The primary distinction between expressions and statements is whether or not a value is returned.
In a general-purpose, multi-paradigm language like Java, the lines between them are often up for debate and can quickly blur.</p>
</div></section>
<section data-pdf-bookmark="Functional Programming Concepts" data-type="sect1"><div class="sect1" id="_01-an-introduction_functional-programming-concepts">
<h1>Functional Programming Concepts</h1>
<p>Since functional programming is based primarily on abstract functions, its many concepts that form the paradigm can focus on “what to solve” in a declarative style, in contrast to the imperative “how to solve” approach.</p>
<p>We will go through the most common and significant aspects that functional programming uses at its foundation.
These aren’t exclusive to the functional paradigm, though.
Many of the ideas behind them apply to other programming paradigms as well.</p>
<section data-pdf-bookmark="Pure Functions and Referential Transparency" data-type="sect2"><div class="sect2" id="_01-an-introduction_pure-functions">
<h2>Pure Functions and Referential Transparency</h2>
<p>Functional programming categorizes functions into two categories: <em>pure</em> and <em>impure</em>.</p>
<p><em>Pure functions</em> have two elemental guarantees:</p>
<dl>
<dt>The <em>same</em> input will <em>always</em> create the same output</dt>
<dd>
<p>The return value of a <em>pure</em> function must solely depend on its input arguments.</p>
</dd>
<dt>They are self-contained without any kind of side effect</dt>
<dd>
<p>The code cannot affect the global state, like changing argument values or using any I/O.</p>
</dd>
</dl>
<p>These two guarantees allow <em>pure functions</em> to be safe to use in any environment, even in a parallel fashion.
The following code shows a method being a <em>pure function</em> that accepts an argument without affecting anything outside of its context:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="n">String</code> <code class="nf">toLowercase</code><code class="p">(</code><code class="n">String</code> <code class="n">str</code><code class="p">)</code> <code class="p">{</code>
  <code class="k">return</code> <code class="n">str</code><code class="p">;</code>
<code class="p">}</code></pre>
<p>Functions violating either of the two guarantees are considered <em>impure</em>.
The following code is an example of an <em>impure function</em>, as it uses the current time for its logic:</p>
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code> <code class="n">String</code> <code class="nf">buildGreeting</code><code class="p">(</code><code class="n">String</code> <code class="n">name</code><code class="p">)</code> <code class="p">{</code>
  <code class="kd">var</code> <code class="n">now</code> <code class="o">=</code> <code class="n">LocalTime</code><code class="p">.</code><code class="na">now</code><code class="p">();</code>
  <code class="k">if</code> <code class="p">(</code><code class="n">now</code><code class="p">.</code><code class="na">getHour</code><code class="p">()</code> <code class="o">&lt;</code> <code class="mi">12</code><code class="p">)</code> <code class="p">{</code>
    <code class="k">return</code> <code class="s">"Good morning "</code> <code class="o">+</code> <code class="n">name</code><code class="p">;</code>
  <code class="p">}</code> <code class="k">else</code> <code class="p">{</code>
    <code class="k">return</code> <code class="s">"Hello "</code> <code class="o">+</code> <code class="n">name</code><code class="p">;</code>
  <code class="p">}</code>
<code class="p">}</code></pre>
<p>The signifier “pure” and “impure” are rather unfortunate names because of the connotation they might invoke.
<em>Impure functions</em> aren’t inferior to <em>pure functions</em> in general.
They are just used in different ways depending on the coding style and paradigm you want to adhere to.</p>
<p>Another aspect of side-effect-free <em>expressions</em> or <em>pure functions</em> is their deterministic nature, which makes them <em>referentially transparent</em>.
That means you can replace them with their respective evaluated result for any further invocations without changing the behavior of your program.</p>
<p>Abstract Function:</p>
<div data-type="equation">
<math alttext="StartLayout 1st Row 1st Column f left-parenthesis x right-parenthesis 2nd Column equals x asterisk x EndLayout" display="block">
<mtable displaystyle="true">
<mtr>
<mtd columnalign="right">
<mrow>
<mi>f</mi>
<mo>(</mo>
<mi>x</mi>
<mo>)</mo>
</mrow>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>x</mi>
<mo>*</mo>
<mi>x</mi>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</div>
<p>Replacing Evaluated Expressions:</p>
<div data-type="equation">
<math alttext="StartLayout 1st Row 1st Column r e s u l t 2nd Column equals f left-parenthesis 5 right-parenthesis plus f left-parenthesis 5 right-parenthesis 2nd Row 1st Column Blank 2nd Column equals 25 plus f left-parenthesis 5 right-parenthesis 3rd Row 1st Column Blank 2nd Column equals f left-parenthesis 5 right-parenthesis plus f left-parenthesis 5 right-parenthesis 4th Row 1st Column Blank 2nd Column equals 25 plus 25 EndLayout" display="block">
<mtable displaystyle="true">
<mtr>
<mtd columnalign="right">
<mrow>
<mi>r</mi>
<mi>e</mi>
<mi>s</mi>
<mi>u</mi>
<mi>l</mi>
<mi>t</mi>
</mrow>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>f</mi>
<mo>(</mo>
<mn>5</mn>
<mo>)</mo>
<mo>+</mo>
<mi>f</mi>
<mo>(</mo>
<mn>5</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
<mtr>
<mtd/>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mn>25</mn>
<mo>+</mo>
<mi>f</mi>
<mo>(</mo>
<mn>5</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
<mtr>
<mtd/>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>f</mi>
<mo>(</mo>
<mn>5</mn>
<mo>)</mo>
<mo>+</mo>
<mi>f</mi>
<mo>(</mo>
<mn>5</mn>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
<mtr>
<mtd/>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mn>25</mn>
<mo>+</mo>
<mn>25</mn>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</div>
<p>All these variants are equal and won’t change your program.
Purity and referential transparency go hand-in-hand and give you a powerful tool because it’s easier to understand and reason with your code.</p>
</div></section>
<section data-pdf-bookmark="Immutability" data-type="sect2"><div class="sect2" id="idm45115253352048">
<h2>Immutability</h2>
<p>Object-oriented code is usually based around a mutable program state.
Objects can and will usually change after their creation, using <em>setters</em>.
But mutating data structures can create unexpected side effects.
Mutability isn’t restricted to data structures and OOP, though.
A local variable in a method might be mutable, too, and can lead to problems in its context as much as a changing field of an object.</p>
<p>With <em>immutability</em>, data structures can no longer change after their initialization.
By never changing, they are always consistent, side-effect free, predictable, and easier to reason with.
Like <em>pure functions</em>, their usage is safe in concurrent and parallel environments without the usual issues of unsynchronized access or out-of-scope state changes.</p>
<p>If data structures never change after initialization, a program would not be very useful.
That’s why you need to create a new and updated version containing the mutated state instead of changing the data structure directly.</p>
<p>Creating new data structures for every change can be a chore and quite inefficient due to copying the data every time.
Many programming languages employ “structure sharing” to provide efficient copy mechanisms to minimize the inefficiencies of requiring new data structures for every change.
This way, different instances of data structures share immutable data between them.
<a data-type="xref" href="ch04.xhtml#_02-data-structures">Chapter 4</a> will explain in more detail why the advantages of having side-effect-free data structures outweigh the extra work that might be necessary.</p>
</div></section>
<section data-pdf-bookmark="Recursion" data-type="sect2"><div class="sect2" id="_01-an-introduction_recursion">
<h2>Recursion</h2>
<p><em>Recursion</em> is a problem-solving technique that solves a problem by partially solving problems of the same form, and combining the partial results to finally solve the original problem.
In layperson’s terms, recursive functions call themselves, but with a slight change in their input arguments, until they reach an end condition and return an actual value.
<a data-type="xref" href="ch12.xhtml#_02-recursion">Chapter 12</a> will go into the finer details of recursion.</p>
<p>A simple example is calculating a factorial, the product of all positive integers less than or equal to the input parameter.
Instead of calculating the value with an intermediate state, the function calls itself with a decremented input variable, as illustrated in <a data-type="xref" href="#_01-an-introduction_recursion_factorial">Figure 1-1</a>.</p>
<figure><div class="figure" id="_01-an-introduction_recursion_factorial">
<img alt="Calculating a factorial with recursion" height="269" src="assets/afaj_0101.png" width="253"/>
<h6><span class="label">Figure 1-1. </span>Calculating a factorial with recursion</h6>
</div></figure>
<p>Pure functional programming often prefers using recursion instead of loops or iterators.
Some of them, like <a href="https://www.haskell.org">Haskell</a>, go a step further and don’t have loops like <code>for</code> or <code>while</code> at all.</p>
<p>The repeated function calls can be inefficient and even dangerous due to the risk of the stack overflowing.
That’s why many functional languages utilize optimizations like “unrolling” recursion into loops or <em>tail-call optimization</em> to reduce the required stack frames.
Java doesn’t support any of these optimization techniques, which I’ll talk more about in <a data-type="xref" href="ch12.xhtml#_02-recursion">Chapter 12</a>.</p>
</div></section>
<section data-pdf-bookmark="First-Class and Higher-Order Functions" data-type="sect2"><div class="sect2" id="_01-an-introduction_concepts_first-class">
<h2>First-Class and Higher-Order Functions</h2>
<p>Many of the previously discussed concepts don’t have to be available as deeply integrated language features to support a more functional programming style in your code.
The concepts of first-class and higher-order functions, however, are absolute must-haves.</p>
<p>For functions to be so-called “first-class citizens,” they must observe all the properties inherent to other entities of the language.
They need to be assignable to variables and be used as arguments and return values in other functions and expressions.</p>
<p><em>Higher-order</em> functions use this <em>first-class</em> citizenship to accept functions as arguments or to return a function as their result, or both.
This is an essential property for the next concept, <em>functional composition</em>.</p>
</div></section>
<section data-pdf-bookmark="Functional Composition" data-type="sect2"><div class="sect2" id="_01-an-introduction_functional-composition">
<h2>Functional Composition</h2>
<p><em>Pure functions</em> can be combined to create more complex expressions.
In mathematical terms, this means that the two functions <math alttext="f left-parenthesis x right-parenthesis">
<mrow>
<mi>f</mi>
<mo>(</mo>
<mi>x</mi>
<mo>)</mo>
</mrow>
</math> and <math alttext="g left-parenthesis x right-parenthesis">
<mrow>
<mi>g</mi>
<mo>(</mo>
<mi>x</mi>
<mo>)</mo>
</mrow>
</math> can be combined to a function <math alttext="h left-parenthesis x right-parenthesis equals g left-parenthesis f left-parenthesis x right-parenthesis right-parenthesis">
<mrow>
<mi>h</mi>
<mo>(</mo>
<mi>x</mi>
<mo>)</mo>
<mo>=</mo>
<mi>g</mi>
<mo>(</mo>
<mi>f</mi>
<mo>(</mo>
<mi>x</mi>
<mo>)</mo>
<mo>)</mo>
</mrow>
</math>, as seen in <a data-type="xref" href="#_01-an-introduction_functional-composition_overview">Figure 1-2</a>.</p>
<figure><div class="figure" id="_01-an-introduction_functional-composition_overview">
<img alt="Composing function f and g to a new function h" height="215" src="assets/afaj_0102.png" width="450"/>
<h6><span class="label">Figure 1-2. </span>Composing functions</h6>
</div></figure>
<p>This way, functions can be small and on point as possible, and therefore, easier to reuse.
To create a more complex and complete task, such functions can be quickly composed as needed.</p>
</div></section>
<section data-pdf-bookmark="Currying" data-type="sect2"><div class="sect2" id="idm45115254885184">
<h2>Currying</h2>
<p>Function <em>currying</em> means converting a function from taking multiple arguments into a sequence of functions that each take only a single argument.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>The currying technique borrows its name from the mathematician and logician Haskell Brook Curry (1900-1982). He’s not only the namesake of the functional technique called <em>currying</em>, he also has three different programming languages named after him: <a href="https://www.haskell.org/">Haskell</a>, <a href="http://graphics.stanford.edu/projects/brookgpu/">Brook</a>, and <a href="http://curry-lang.org/">Curry</a>.</p>
</div>
<p>Imagine a function that accepts three arguments.
It can be curried as follows:</p>
<p>Initial function:</p>
<div data-type="equation">
<math alttext="StartLayout 1st Row 1st Column x 2nd Column equals f left-parenthesis a comma b comma c right-parenthesis EndLayout" display="block">
<mtable displaystyle="true">
<mtr>
<mtd columnalign="right">
<mi>x</mi>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>f</mi>
<mo>(</mo>
<mi>a</mi>
<mo>,</mo>
<mi>b</mi>
<mo>,</mo>
<mi>c</mi>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</div>
<p>Curried functions:</p>
<div data-type="equation">
<math alttext="StartLayout 1st Row 1st Column h 2nd Column equals g left-parenthesis a right-parenthesis 2nd Row 1st Column i 2nd Column equals h left-parenthesis b right-parenthesis 3rd Row 1st Column x 2nd Column equals i left-parenthesis c right-parenthesis EndLayout" display="block">
<mtable displaystyle="true">
<mtr>
<mtd columnalign="right">
<mi>h</mi>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>g</mi>
<mo>(</mo>
<mi>a</mi>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
<mtr>
<mtd columnalign="right">
<mi>i</mi>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>h</mi>
<mo>(</mo>
<mi>b</mi>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
<mtr>
<mtd columnalign="right">
<mi>x</mi>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>i</mi>
<mo>(</mo>
<mi>c</mi>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</div>
<p>Sequence of curried functions:</p>
<div data-type="equation">
<math alttext="StartLayout 1st Row 1st Column x 2nd Column equals g left-parenthesis a right-parenthesis left-parenthesis b right-parenthesis left-parenthesis c right-parenthesis EndLayout" display="block">
<mtable displaystyle="true">
<mtr>
<mtd columnalign="right">
<mi>x</mi>
</mtd>
<mtd columnalign="left">
<mrow>
<mo>=</mo>
<mi>g</mi>
<mo>(</mo>
<mi>a</mi>
<mo>)</mo>
<mo>(</mo>
<mi>b</mi>
<mo>)</mo>
<mo>(</mo>
<mi>c</mi>
<mo>)</mo>
</mrow>
</mtd>
</mtr>
</mtable>
</math>
</div>
<p>Some functional programming languages reflect the general concept of <em>currying</em> in their type definitions like Haskell as follows.</p>
<pre data-code-language="haskell" data-type="programlisting"><code class="nf">add</code> <code class="ow">::</code> <code class="kt">Integer</code> <code class="ow">-&gt;</code> <code class="kt">Integer</code> <code class="ow">-&gt;</code> <code class="kt">Integer</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-1" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a>
<code class="nf">add</code> <code class="n">x</code> <code class="n">y</code> <code class="ow">=</code>  <code class="n">x</code> <code class="o">+</code> <code class="n">y</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-2" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-1" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>The function <code>add</code> is declared to accept an <code>Integer</code> and returns another function accepting another <code>Integer</code>, which itself returns an <code>Integer</code>.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-2" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO2-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>The actual definition reflects the declaration: two input parameters and the result of the body as return value.</p></dd>
</dl>
<p>At first glance, the concept can feel weird and foreign to an OO or imperative developer, like many principles based on mathematics.
Still, it perfectly conveys how a function with more than one argument is representable as a function of functions, and that’s an essential realization to support the next concept.</p>
</div></section>
<section data-pdf-bookmark="Partial Function Application" data-type="sect2"><div class="sect2" id="idm45115259516528">
<h2>Partial Function Application</h2>
<p><em>Partial function application</em> is the process of creating a new function by providing not all arguments to an existing one.
It’s often conflated with <em>currying</em>, but a call to a partially applied function returns a result and not another function of a currying chain.</p>
<p>The currying example from the previous section can be partially applied to create a more specific function:</p>
<pre data-code-language="haskell" data-type="programlisting"><code class="nf">add</code> <code class="ow">::</code> <code class="kt">Integer</code> <code class="ow">-&gt;</code> <code class="kt">Integer</code> <code class="ow">-&gt;</code> <code class="kt">Integer</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-1" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a>
<code class="nf">add</code> <code class="n">x</code> <code class="n">y</code> <code class="ow">=</code>  <code class="n">x</code> <code class="o">+</code> <code class="n">y</code>

<code class="nf">add3</code> <code class="ow">=</code> <code class="n">add</code> <code class="mi">3</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-2" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a>

<code class="nf">add3</code> <code class="mi">5</code> <a class="co" href="#callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-3" id="co_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-1" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-1"><img alt="1" height="12" src="assets/1.png" width="12"/></a></dt>
<dd><p>The <code>add</code> function is declared as before, accepting two arguments.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-2" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-2"><img alt="2" height="12" src="assets/2.png" width="12"/></a></dt>
<dd><p>Calling the function <code>add</code> with only a value for the first argument <code>x</code> return as partially applied function of type <code>Integer → Integer</code>, which is bound to the name <code>add3</code>.</p></dd>
<dt><a class="co" href="#co_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-3" id="callout_an_introduction_to__span_class__keep_together__functional_programming__span__CO3-3"><img alt="3" height="12" src="assets/3.png" width="12"/></a></dt>
<dd><p>The call <code>add3 5</code> is equivalent to <code>add 3 5</code>.</p></dd>
</dl>
<p>With partial application, you can create new, less verbose functions on the fly or specialized functions from a more generic pool to match your code’s current context and requirements.</p>
</div></section>
<section data-pdf-bookmark="Lazy Evaluation" data-type="sect2"><div class="sect2" id="_01-an-introduction_laziness">
<h2>Lazy Evaluation</h2>
<p><em>Lazy evaluation</em> is an evaluation strategy that delays the evaluation of an expression until its result is literally needed by separating the concerns of how you create an expression from whether or when you actually use it.
It’s also another concept not rooted in or restricted to functional programming but a must-have for using other functional concepts and techniques.</p>
<p>Many non-functional languages, including Java, are primarily <em>strict</em> — or <em>eagerly</em> — evaluated, meaning an expression evaluates immediately.
Those languages still have a few lazy constructs, like control-flow statements such as <code>if</code>-<code>else</code>-statements or loops, or logical short-circuit operators.
Immediately evaluating both branches of an <code>if</code>-<code>else</code> construct or all possible loop iterations wouldn’t make much sense, would it?
So instead, only the branches and iterations absolutely required are evaluated during runtime.</p>
<p>Laziness enables certain constructs that aren’t possible otherwise, like infinite data structures or more efficient implementations of some algorithms.
It also works very well with <em>referential transparency</em>.
If there is no difference between an expression and its result, you can delay the evaluation without consequences to the result.
Delayed evaluation might still impact the program’s performance because you might not know the precise time of evaluation.</p>
<p>In <a data-type="xref" href="ch11.xhtml#_02-lazy-evaluation">Chapter 11</a> I will discuss how to achieve a lazy approach in Java with the tools at your disposal, and how to create your own.</p>
</div></section>
</div></section>
<section data-pdf-bookmark="Advantages of Functional Programming" data-type="sect1"><div class="sect1" id="idm45115253677088">
<h1>Advantages of Functional Programming</h1>
<p>After going through the most common and essential concepts of functional programming, you can see how they are reflected in the advantages that a more functional approach provides:</p>
<dl>
<dt>Simplicity</dt>
<dd>
<p>Without mutable state and side effects, your functions tend to be smaller, doing “just what they are supposed to do.”</p>
</dd>
<dt>Consistency</dt>
<dd>
<p>Immutable data structures are reliable and consistent.
No more worries about unexpected or unintended program state.</p>
</dd>
<dt>(Mathematical) Correctness</dt>
<dd>
<p>Simpler code with consistent data structures will automatically lead to “more correct” code with a smaller bug surface.
The “purer” your code, the easier it will be to reason with, leading to simpler debugging and testing.</p>
</dd>
<dt>Safer Concurrency</dt>
<dd>
<p>Concurrency is one of the most challenging tasks to do right in “classical” Java.
Functional concepts allow you to eliminate many headaches and gain safer parallel processing (almost) for free.</p>
</dd>
<dt>Modularity</dt>
<dd>
<p>Small and independent functions lead to simpler reusability and modularity.
Combined with functional composition and partial application, you have powerful tools to build more complex tasks out of these smaller parts easily.</p>
</dd>
<dt>Testability</dt>
<dd>
<p>Many of the functional concepts, like pure functions, referential transparency, immutability, and the separation of concerns make testing and verification easier.</p>
</dd>
</dl>
</div></section>
<section data-pdf-bookmark="Disadvantages of Functional Programming" data-type="sect1"><div class="sect1" id="idm45115257011648">
<h1>Disadvantages of Functional Programming</h1>
<p>While functional programming has many advantages, it’s also essential to know its possible pitfalls.</p>
<dl>
<dt>Learning curve</dt>
<dd>
<p>The advanced mathematical terminology and concepts that functional programming is based on can be quite intimidating.
To augment your Java code, though, you definitely don’t need to know that “a monad is just a monoid in the category of endofunctors.<sup><a data-type="noteref" href="ch01.xhtml#idm45115257000512" id="idm45115257000512-marker">2</a></sup>"
Nevertheless, you’re confronted with new and often unfamiliar terms and concepts.</p>
</dd>
<dt>Higher Level of Abstraction</dt>
<dd>
<p>Where OOP uses objects to model its abstraction, FP uses a higher level of abstraction to represent its data structures, making them quite elegant but often harder to recognize.</p>
</dd>
<dt>Dealing with State</dt>
<dd>
<p>Handling state isn’t an easy task, regardless of the chosen paradigm.
Even though FP’s immutable approach eliminates a lot of possible bug surfaces, it also makes it harder to mutate data structures if they actually need to change, especially if you’re accustomed to having setters in your OO code.</p>
</dd>
<dt>Performance Implications</dt>
<dd>
<p>Functional programming is easier and safer to use in concurrent environments.
This doesn’t mean, however, that it’s inherently faster compared to other paradigms, especially in a single-threaded context.
Despite their many benefits, many functional techniques, like immutability or recursion, can suffer from the required overhead.
That’s why many Functional programming languages utilize a plethora of optimizations to mitigate, like specialized data structures that minimize copying, or compiler optimizations for techniques like recursion<sup><a data-type="noteref" href="ch01.xhtml#idm45115256994976" id="idm45115256994976-marker">3</a></sup>.</p>
</dd>
<dt>Optimal Problem Context</dt>
<dd>
<p>Not all problem contexts are a good fit for a functional approach.
Domains like high-performance computing (HPC), I/O heavy problems, or low-level systems and embedded controllers, where you need fine-grained control over things like data locality and explicit memory management, don’t mix well with functional programming.</p>
</dd>
</dl>
<p>As programmers, we must find the balance between the advantages and disadvantages of any paradigm and programming approach.
That’s why this book shows you how to pick the best parts of Java’s functional evolution and utilize them to augment your object-oriented Java code.</p>
</div></section>
<section data-pdf-bookmark="Takeaways" data-type="sect1"><div class="sect1" id="idm45115256991200">
<h1>Takeaways</h1>
<ul>
<li>
<p>Functional programming is built on the mathematical principle of lambda calculus.</p>
</li>
<li>
<p>A declarative coding style based on expressions instead of statements is essential for functional programming.</p>
</li>
<li>
<p>Many programming concepts feel inherently functional, but they are not an absolute requirement to make a language or your code “functional.”
Even non-functional code benefits from their underlying ideas and overall mindset.</p>
</li>
<li>
<p>Purity, consistency, and simplicity are essential properties to apply to your code to gain the most out of a functional approach.</p>
</li>
<li>
<p>Trade-offs might be necessary between the functional concepts and their real-world application.
Their advantages usually outweigh them, though, or can at least be mitigated in some form.</p>
</li>
</ul>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="idm45115253643376"><sup><a href="ch01.xhtml#idm45115253643376-marker">1</a></sup> Church, Alonzo. 1936. “An unsolvable problem of elementary number theory.” <a href="https://doi.org/10.2307/2268571">American journal of mathematics, Vol. 58, 345-363.</a></p><p data-type="footnote" id="idm45115257000512"><sup><a href="ch01.xhtml#idm45115257000512-marker">2</a></sup> James Iry used this phrase in his humorous blog post <a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.xhtml">“A Brief, Incomplete, and Mostly Wrong History of Programming Languages”</a> to illustrate Haskell’s complexity. It’s also a good example of how you don’t need to know all the underlying mathematical details of a programming technique to reap its benefits. But, if you really want to know what it means, see Saunders Mac Lane’s book, <em>Categories for the Working Mathematician</em> (Springer, 1998), where the phrase used initially.</p><p data-type="footnote" id="idm45115256994976"><sup><a href="ch01.xhtml#idm45115256994976-marker">3</a></sup> The Java Magazine article <a href="https://blogs.oracle.com/javamagazine/post/curly-braces-java-recursion-tail-call-optimization">“Curly Braces #6: Recursion and tail-call optimization”</a> provides a great overview about the importance of tail-call optimization in recursive code.</p></div></div></section></div></body></html>