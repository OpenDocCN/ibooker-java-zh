<html><head></head><body><section data-pdf-bookmark="Chapter 10. Beyond Selenium" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch10">&#13;
<h1><span class="label">Chapter 10. </span>Beyond Selenium</h1>&#13;
&#13;
&#13;
<p>This chapter closes this book by <a data-primary="Selenium, complements to" data-secondary="about" data-type="indexterm" id="idm45849694690896"/>presenting several complementary technologies to Selenium. First, we analyze the basics of mobile apps and introduce Appium, a popular testing framework for mobile testing. Then, you will learn how to test REST (REpresentational State Transfer) services with an open source Java library called REST Assured. Finally, you will be introduced to <a data-primary="Selenium, alternatives to" data-secondary="about" data-type="indexterm" id="idm45849694689728"/>alternative tools to Selenium WebDriver for implementing end-to-end tests for web applications, namely: Cypress, WebDriverIO, TestCafe, Puppeteer, and Playwright.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mobile Apps" data-type="sect1"><div class="sect1" id="idm45849694688512">&#13;
<h1>Mobile Apps</h1>&#13;
&#13;
<p>Mobile <a data-primary="mobile apps" data-secondary="about" data-type="indexterm" id="idm45849694686864"/><a data-primary="Selenium, complements to" data-secondary="mobile apps" data-type="indexterm" id="ch10_term1"/>applications (usually called mobile apps, or simply apps) are software applications designed to run on mobile devices, such as smartphones, tablets, or wearables. There are two <a data-primary="operating systems" data-type="indexterm" id="idm45849694684496"/>principal operating systems for mobile devices:</p>&#13;
<dl>&#13;
<dt><a href="https://www.android.com">Android</a></dt>&#13;
<dd>&#13;
<p>An open source (Apache 2.0 license) mobile operating system based on a modified version of Linux. It was initially developed by a startup named Android, acquired by Google in 2005.</p>&#13;
</dd>&#13;
<dt><a href="https://www.apple.com/ios">iOS</a></dt>&#13;
<dd>&#13;
<p>A proprietary mobile operating system created by Apple exclusively for its hardware (e.g., iPhone, iPad, or Watch).</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>A common way to <a data-primary="apps, classifications of" data-type="indexterm" id="idm45849694679296"/>classify mobile apps is as follows:</p>&#13;
<dl>&#13;
<dt>Native apps</dt>&#13;
<dd>&#13;
<p>Mobile <a data-primary="native apps" data-type="indexterm" id="idm45849694676720"/>apps developed for a particular mobile operating system (e.g., Android or iOS).</p>&#13;
</dd>&#13;
<dt>Web-based apps</dt>&#13;
<dd>&#13;
<p>Web <a data-primary="web-based apps" data-type="indexterm" id="idm45849694674576"/>applications rendered into a mobile browser (e.g., Chrome, Safari, or Firefox Mobile). These apps are typically designed to be <em>responsive</em> (i.e., adaptable to different screen sizes and viewports).</p>&#13;
</dd>&#13;
<dt>Hybrid apps</dt>&#13;
<dd>&#13;
<p>Mobile <a data-primary="hybrid apps" data-type="indexterm" id="idm45849694671696"/>applications developed using client-side web standards (i.e., HTML, CSS, and JavaScript) and deployed to mobile devices using a native container called <em>webview</em>. Examples of frameworks that enable the development of hybrid apps are&#13;
<a href="https://ionicframework.com">Ionic</a>, <a href="https://reactnative.dev">React Native</a>, or <a href="https://flutter.dev">Flutter</a>.</p>&#13;
</dd>&#13;
<dt>Progressive web apps (PWAs)</dt>&#13;
<dd>&#13;
<p>Web <a data-primary="progressive web apps (PWAs)" data-type="indexterm" id="idm45849694667040"/>applications built with modern web standard APIs (for installability, responsiveness, etc.) intended to work on multiple platforms, including desktop and mobile devices.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mobile Testing" data-type="sect2"><div class="sect2" id="idm45849694665856">&#13;
<h2>Mobile Testing</h2>&#13;
&#13;
<p>Testing is an <a data-primary="testing" data-secondary="of mobile apps" data-secondary-sortas="mobile apps" data-type="indexterm" id="idm45849694664592"/><a data-primary="mobile apps" data-secondary="testing of" data-type="indexterm" id="idm45849694663312"/>essential process in the development of mobile apps. Mobile testing involves different challenges such as hardware compatibility, network connectivity, or operating system specifics. Different approaches to carry out mobile testing include:</p>&#13;
<dl>&#13;
<dt>Using desktop browsers with mobile emulation</dt>&#13;
<dd>&#13;
<p>We can use <a data-primary="emulation of network conditions, CDP for" data-type="indexterm" id="idm45849694660288"/><a data-primary="network emulation with CDP" data-type="indexterm" id="idm45849694659488"/><a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="device emulation with" data-type="indexterm" id="idm45849694658816"/><a data-primary="browser-specific capabilities" data-secondary="device emulation" data-type="indexterm" id="idm45849694657904"/>Selenium WebDriver for this type of mobile testing. To that aim, you can use browser-specific features (as explained in <a data-type="xref" href="ch05.html#sect-caps-device-emulation">“Device Emulation”</a>) or use the <a data-primary="Chromium" data-secondary="browser capabilities with" data-type="indexterm" id="idm45849694656000"/>CDP with Chromium-based browsers (as explained in <a data-type="xref" href="ch05.html#sect-cdp-device-emulation">“Device emulation”</a>).</p>&#13;
</dd>&#13;
<dt>Using virtual devices</dt>&#13;
<dd>&#13;
<p>There are two types of virtual mobile devices:</p>&#13;
<dl>&#13;
<dt>Emulators</dt>&#13;
<dd>&#13;
<p>Desktop applications that virtualize all aspects of mobile devices, including the hardware and the operating system.</p>&#13;
</dd>&#13;
<dt>Simulators</dt>&#13;
<dd>&#13;
<p>Desktop apps <a data-primary="mobile devices, emulation of" data-type="indexterm" id="idm45849694649584"/><a data-primary="simulation of mobile devices" data-type="indexterm" id="idm45849694648880"/><a data-primary="emulation of mobile devices" data-type="indexterm" id="idm45849694648192"/>that mimic certain features of a mobile operating system. They are primarily intended for iOS since Android devices are emulated easily.</p>&#13;
</dd>&#13;
</dl>&#13;
</dd>&#13;
<dt>Using real devices</dt>&#13;
<dd>&#13;
<p>Using actual devices and their native Android or iOS APIs in real conditions.</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Appium" data-type="sect2"><div class="sect2" id="idm45849694645456">&#13;
<h2>Appium</h2>&#13;
&#13;
<p><a href="https://appium.io">Appium</a> is an <a data-primary="Appium" data-type="indexterm" id="ch10_term2"/><a data-primary="mobile apps" data-secondary="Appium for testing of" data-type="indexterm" id="ch10_term3"/><a data-primary="Selenium, complements to" data-secondary="Appium as" data-type="indexterm" id="ch10_term4"/><a data-primary="web servers" data-type="indexterm" id="ch10_term5"/>open source test automation framework for mobile apps. Appium provides a cross-platform API that allows testing native, hybrid, and mobile web apps for iOS and Android on virtual or real devices. Furthermore, Appium enables automated testing for desktop applications on Windows and macOS.</p>&#13;
&#13;
<p>The story of Appium started in 2011 when <a data-primary="Cuellar, Dan" data-type="indexterm" id="idm45849694637488"/>Dan Cuellar created an automation tool for iOS applications developed in C# called iOSAuto. He met <a data-primary="Huggins, Jason" data-type="indexterm" id="idm45849694636544"/>Jason Huggins (the co-creator of Selenium) during the SeleniumConf 2012 in London. Jason contributed to the project by adding a web server and using the WebDriver wire protocol over HTTP, making iOSAuto compatible with any Selenium WebDriver client. They <a data-primary="Sauce Labs" data-type="indexterm" id="idm45849694635744"/>changed the project name to Appium (the <em>Selenium for Apps</em>). In January 2013, Sauce Labs decided to support Appium and provide more developer power. The new team <a data-primary="Node.js applications" data-type="indexterm" id="idm45849694634368"/>rewrote Appium using Node.js since it is a well-known, efficient framework for the server side.</p>&#13;
&#13;
<p>As depicted in <a data-type="xref" href="#appium-arch">Figure 10-1</a>, Appium <a data-primary="client-server architectures" data-type="indexterm" id="idm45849694632112"/>follows a client-server architecture. Appium is a web server that exposes a REST API that carries out an automated session on mobile or desktop apps. To that aim, the <a data-primary="Appium Server" data-type="indexterm" id="idm45849694631280"/>Appium server receives incoming requests from clients, executes those commands on target devices/apps, and responds with an HTTP response representing the command execution result. Appium <a data-primary="JSON Wire Protocol" data-type="indexterm" id="idm45849694630480"/>client libraries communicate with the Appium server using the Mobile JSON Wire Protocol (an official draft extension to the original WebDriver protocol). The Appium server and <a data-primary="W3C specifications" data-secondary="Appium and" data-type="indexterm" id="idm45849694629680"/>its client also use the W3C Webdriver specification. There are different Appium client libraries. <a data-type="xref" href="#appium-clients">Table 10-1</a> summarizes these libraries, both officially maintained by the Appium project and community.</p>&#13;
&#13;
<figure><div class="figure" id="appium-arch">&#13;
<img alt="hosw 1001" src="assets/hosw_1001.png"/>&#13;
<h6><span class="label">Figure 10-1. </span>Appium architecture</h6>&#13;
</div></figure>&#13;
<table class="pagebreak-before less_space" id="appium-clients">&#13;
<caption><span class="label">Table 10-1. </span>Appium client libraries</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Name</th>&#13;
<th>Language</th>&#13;
<th>License</th>&#13;
<th>Maintainer</th>&#13;
<th>Website</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>Appium java-client</p></td>&#13;
<td><p>Java</p></td>&#13;
<td><p>Apache 2.0</p></td>&#13;
<td><p>Appium team</p></td>&#13;
<td><p><a href="https://github.com/appium/java-client"><em class="hyperlink">https://github.com/appium/java-client</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Appium ruby_lib</p></td>&#13;
<td><p>Ruby</p></td>&#13;
<td><p>Apache 2.0</p></td>&#13;
<td><p>Appium team</p></td>&#13;
<td><p><a href="https://github.com/appium/ruby_lib"><em class="hyperlink">https://github.com/appium/ruby_lib</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Appium Python Client</p></td>&#13;
<td><p>Python</p></td>&#13;
<td><p>Apache 2.0</p></td>&#13;
<td><p>Appium team</p></td>&#13;
<td><p><a href="https://github.com/appium/python-client"><em class="hyperlink">https://github.com/appium/python-client</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>appium-dotnet-driver</p></td>&#13;
<td><p>C#</p></td>&#13;
<td><p>Apache 2.0</p></td>&#13;
<td><p>Appium team</p></td>&#13;
<td><p><a href="https://github.com/appium/appium-dotnet-driver"><em class="hyperlink">https://github.com/appium/appium-dotnet-driver</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>WebdriverIO</p></td>&#13;
<td><p>JavaScript (Node.js)</p></td>&#13;
<td><p>MIT</p></td>&#13;
<td><p>WebdriverIO team</p></td>&#13;
<td><p><a href="https://webdriver.io"><em class="hyperlink">https://webdriver.io</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>web2driver</p></td>&#13;
<td><p>JavaScript (browser)</p></td>&#13;
<td><p>Apache 2.0</p></td>&#13;
<td><p>HeadSpin</p></td>&#13;
<td><p><a href="https://github.com/projectxyzio/web2driver"><em class="hyperlink">https://github.com/projectxyzio/web2driver</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Appium library for RobotFramework</p></td>&#13;
<td><p>Python</p></td>&#13;
<td><p>Apache 2.0</p></td>&#13;
<td><p>Serhat Bolsu</p></td>&#13;
<td><p><a href="https://github.com/serhatbolsu/robotframework-appiumlibrary"><em class="hyperlink">https://github.com/serhatbolsu/robotframework-appiumlibrary</em></a></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>In Appium, the <a data-primary="drivers" data-secondary="in Appium" data-secondary-sortas="Appium" data-type="indexterm" id="idm45849694590576"/>support for the automation of a particular platform is provided by a component called <em>driver</em> in Appium jargon. These drivers were tightly coupled with the Appium Server in version 1. Nevertheless, in Appium 2 (the latest version of Appium at the time of this writing), these drivers are segregated from the Appium Server (see <a data-type="xref" href="#appium-arch">Figure 10-1</a>) and are installed separately.</p>&#13;
<table id="appium-drivers">&#13;
<caption><span class="label">Table 10-2. </span>Appium drivers</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Name</th>&#13;
<th>Target</th>&#13;
<th>Description</th>&#13;
<th>Repository</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>XCUITest Driver</p></td>&#13;
<td><p>iOS and tvOS apps</p></td>&#13;
<td><p>Leverages Apple’s XCUITest libraries to enable automation</p></td>&#13;
<td><p><a href="https://github.com/appium/appium-xcuitest-driver"><em class="hyperlink">https://github.com/appium/appium-xcuitest-driver</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Espresso Driver</p></td>&#13;
<td><p>Android apps</p></td>&#13;
<td><p>Enables automation through Espresso (a testing framework for Android)</p></td>&#13;
<td><p><a href="https://github.com/appium/appium-espresso-driver"><em class="hyperlink">https://github.com/appium/appium-espresso-driver</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>UiAutomator2 Driver</p></td>&#13;
<td><p>Android apps</p></td>&#13;
<td><p>Leverages Google <a data-primary="UiAutomator2 Driver" data-type="indexterm" id="ch10_term6"/>UiAutomator2 technology to enable automation on an Android device or emulator</p></td>&#13;
<td><p><a href="https://github.com/appium/appium-uiautomator2-driver"><em class="hyperlink">https://github.com/appium/appium-uiautomator2-driver</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Windows Driver</p></td>&#13;
<td><p>Windows desktop apps</p></td>&#13;
<td><p>Uses WinAppDriver, a WebDriver server for Windows desktop apps</p></td>&#13;
<td><p><a href="https://github.com/appium/appium-windows-driver"><em class="hyperlink">https://github.com/appium/appium-windows-driver</em></a></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>Mac Driver</p></td>&#13;
<td><p>macOS desktop apps</p></td>&#13;
<td><p>Uses Apple’s XCTest framework for automating macOS applications</p></td>&#13;
<td><p><a href="https://github.com/appium/appium-mac2-driver"><em class="hyperlink">https://github.com/appium/appium-mac2-driver</em></a></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="A basic Appium test" data-type="sect3"><div class="sect3" id="idm45849694563504">&#13;
<h3>A basic Appium test</h3>&#13;
&#13;
<p>This section presents a basic test case using Appium server 2 and the <a data-primary="Java" data-secondary="for Appium" data-secondary-sortas="Appium" data-type="indexterm" id="idm45849694561696"/>Appium Java client. For simplicity, I use the UiAutomator2 Driver and an emulated Android device. The SUT will be a web application, concretely, the practice site used throughout this book. The calls to the Appium Java clients are embedded in the different unit testing frameworks used in the rest of the examples (i.e., JUnit 4 and 5, TestNG, and Selenium-Jupiter). As usual, you can find the complete source code in the examples repository. The requisites for running this test are:</p>&#13;
<ol>&#13;
<li>&#13;
<p>Install Appium server 2.</p>&#13;
</li>&#13;
<li>&#13;
<p>Install UiAutomator2 Driver.</p>&#13;
</li>&#13;
<li>&#13;
<p>Install Android SDK (i.e., the official software development kit for Android). You can easily install this SDK by installing <a href="https://developer.android.com/studio">Android Studio</a> on your computer.</p>&#13;
</li>&#13;
<li>&#13;
<p>Create an <a data-primary="Android Virtual Device (AVD)" data-type="indexterm" id="idm45849694555712"/><a data-primary="AVD (Android Virtual Device)" data-type="indexterm" id="idm45849694555008"/>Android Virtual Device (AVD) using the AVD Manager in Android Studio. <a data-type="xref" href="#android-studio">Figure 10-2</a> shows the menu option to open this tool, and <a data-type="xref" href="#avd">Figure 10-3</a> shows the virtual device used in the test (a Nexus 5 mobile phone using the Android API level 30).</p>&#13;
</li>&#13;
<li>&#13;
<p>Start the virtual device and Appium server.</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<figure><div class="figure" id="android-studio">&#13;
<img alt="hosw 1002" src="assets/hosw_1002.png"/>&#13;
<h6><span class="label">Figure 10-2. </span>Android Studio</h6>&#13;
</div></figure>&#13;
&#13;
<figure><div class="figure" id="avd">&#13;
<img alt="hosw 1003" src="assets/hosw_1003.png"/>&#13;
<h6><span class="label">Figure 10-3. </span>AVD Manager</h6>&#13;
</div></figure>&#13;
&#13;
<p>As explained previously, the <a data-primary="Node.js applications" data-type="indexterm" id="idm45849694546944"/><a data-primary="npm install command" data-type="indexterm" id="idm45849694546240"/>Appium server is a Node.js application. Therefore, you need Node.js installed in your system to run Appium. The following commands summarize how to install the Appium server 2 and the UiAutomator2 Driver, and how to start the Appium server:</p>&#13;
&#13;
<pre data-type="programlisting">npm install -g appium@next <a class="co" href="#callout_beyond_selenium_CO1-1" id="co_beyond_selenium_CO1-1"><img alt="1" src="assets/1.png"/></a>&#13;
appium driver install uiautomator2 <a class="co" href="#callout_beyond_selenium_CO1-2" id="co_beyond_selenium_CO1-2"><img alt="2" src="assets/2.png"/></a>&#13;
appium --allow-insecure chromedriver_autodownload <a class="co" href="#callout_beyond_selenium_CO1-3" id="co_beyond_selenium_CO1-3"><img alt="3" src="assets/3.png"/></a></pre>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO1-1" id="callout_beyond_selenium_CO1-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use npm (the default package manager for Node.js) to install Appium 2.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO1-2" id="callout_beyond_selenium_CO1-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We use Appium to install the UiAutomator2 Driver.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO1-3" id="callout_beyond_selenium_CO1-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We start <a data-startref="ch10_term6" data-type="indexterm" id="idm45849694531104"/>the Appium server (by default, it listens to port 4723). We include a flag to let Appium manage the required browser drivers (e.g., chromedriver) for automating web applications (just like in Selenium WebDriver).</p></dd>&#13;
</dl>&#13;
&#13;
<p><a data-type="xref" href="#appium-java-client-test">Example 10-1</a> shows a <a data-primary="Java" data-secondary="for Appium" data-secondary-sortas="Appium" data-type="indexterm" id="idm45849694529024"/>complete test using the Appium Java client. As you can see, this test is quite similar to the regular Selenium WebDriver tests explained in this book. The main difference, in this case, is that <a data-primary="AppiumDriver class" data-type="indexterm" id="ch10_term7"/>we use an instance of <code>AppiumDriver</code>, a class provided by the Appium Java client. This class <a data-primary="RemoteWebDriver class" data-secondary="and mobile devices" data-secondary-sortas="mobile devices" data-type="indexterm" id="idm45849694526160"/>extends to the <code>RemoteWebDriver</code> class of the Selenium WebDriver API. Therefore, we can leverage the Selenium WebDriver API to test web applications on mobile devices. <a data-type="xref" href="#android-device">Figure 10-4</a> shows the emulated mobile device (a Nexus 5) during this test.</p>&#13;
&#13;
<figure><div class="figure" id="android-device">&#13;
<img alt="hosw 1004" src="assets/hosw_1004.png"/>&#13;
<h6><span class="label">Figure 10-4. </span>Android device</h6>&#13;
</div></figure>&#13;
<div data-type="example" id="appium-java-client-test">&#13;
<h5><span class="label">Example 10-1. </span>Test using Appium Java client</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">AppiumJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="n">WebDriver</code><code> </code><code class="n">driver</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@BeforeEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">setup</code><code class="o">(</code><code class="o">)</code><code> </code><code class="kd">throws</code><code> </code><code class="n">MalformedURLException</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">URL</code><code> </code><code class="n">appiumServerUrl</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">URL</code><code class="o">(</code><code class="s">"http://localhost:4723"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-1" id="co_beyond_selenium_CO2-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>        </code><code class="n">assumeThat</code><code class="o">(</code><code class="n">isOnline</code><code class="o">(</code><code class="k">new</code><code> </code><code class="n">URL</code><code class="o">(</code><code class="n">appiumServerUrl</code><code class="o">,</code><code> </code><code class="s">"/status"</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isTrue</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-2" id="co_beyond_selenium_CO2-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">ChromeOptions</code><code> </code><code class="n">options</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">ChromeOptions</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-3" id="co_beyond_selenium_CO2-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>        </code><code class="n">options</code><code class="o">.</code><code class="na">setCapability</code><code class="o">(</code><code class="n">MobileCapabilityType</code><code class="o">.</code><code class="na">PLATFORM_NAME</code><code class="o">,</code><code> </code><code class="s">"Android"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-4" id="co_beyond_selenium_CO2-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
</code><code>        </code><code class="n">options</code><code class="o">.</code><code class="na">setCapability</code><code class="o">(</code><code class="n">MobileCapabilityType</code><code class="o">.</code><code class="na">DEVICE_NAME</code><code class="o">,</code><code>&#13;
</code><code>                </code><code class="s">"Nexus 5 API 30"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-5" id="co_beyond_selenium_CO2-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
</code><code>        </code><code class="n">options</code><code class="o">.</code><code class="na">setCapability</code><code class="o">(</code><code class="n">MobileCapabilityType</code><code class="o">.</code><code class="na">AUTOMATION_NAME</code><code class="o">,</code><code>&#13;
</code><code>                </code><code class="s">"UiAutomator2"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-6" id="co_beyond_selenium_CO2-6"><img alt="6" src="assets/6.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code> </code><code class="o">=</code><code> </code><code class="k">new</code><code> </code><code class="n">AppiumDriver</code><code class="o">(</code><code class="n">appiumServerUrl</code><code class="o">,</code><code> </code><code class="n">options</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-7" id="co_beyond_selenium_CO2-7"><img alt="7" src="assets/7.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@AfterEach</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">teardown</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">driver</code><code> </code><code class="o">!</code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>            </code><code class="n">driver</code><code class="o">.</code><code class="na">quit</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>        </code><code class="o">}</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testAppium</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">driver</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://bonigarcia.dev/selenium-webdriver-java/"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO2-8" id="co_beyond_selenium_CO2-8"><img alt="8" src="assets/8.png"/></a><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">driver</code><code class="o">.</code><code class="na">getTitle</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">contains</code><code class="o">(</code><code class="s">"Selenium WebDriver"</code><code class="o">)</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-1" id="callout_beyond_selenium_CO2-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We specify the Appium server URL.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-2" id="callout_beyond_selenium_CO2-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We make an assumption using the endpoint <code>/status</code> of the Appium server URL. If this URL is not online, the test is skipped.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-3" id="callout_beyond_selenium_CO2-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We use <a data-primary="ChromeOptions" data-type="indexterm" id="idm45849694331104"/>Chrome options to specify capabilities.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-4" id="callout_beyond_selenium_CO2-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>The first mandatory capability when using Appium is the platform name (<code>Android</code> in this case).</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-5" id="callout_beyond_selenium_CO2-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>The following <a data-primary="Android Virtual Device (AVD)" data-type="indexterm" id="idm45849694251536"/><a data-primary="AVD (Android Virtual Device)" data-type="indexterm" id="idm45849694250928"/>required capability is the device name. This name must match the name defined in the AVD manager (see <a data-type="xref" href="#avd">Figure 10-3</a>).</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-6" id="callout_beyond_selenium_CO2-6"><img alt="6" src="assets/6.png"/></a></dt>&#13;
<dd><p>The last mandatory capability is the driver name (<code>UiAutomator2</code> in this case).</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-7" id="callout_beyond_selenium_CO2-7"><img alt="7" src="assets/7.png"/></a></dt>&#13;
<dd><p>We create an instance of <code>AppiumDriver</code> using the Appium server URL and the browser options.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO2-8" id="callout_beyond_selenium_CO2-8"><img alt="8" src="assets/8.png"/></a></dt>&#13;
<dd><p>We use the <code>driver</code> object to exercise the SUT as <a data-startref="ch10_term1" data-type="indexterm" id="idm45849694241216"/><a data-startref="ch10_term2" data-type="indexterm" id="idm45849694240512"/><a data-startref="ch10_term3" data-type="indexterm" id="idm45849694239840"/><a data-startref="ch10_term4" data-type="indexterm" id="idm45849694239168"/><a data-startref="ch10_term5" data-type="indexterm" id="idm45849694238496"/><a data-startref="ch10_term7" data-type="indexterm" id="idm45849694237824"/>usual.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="REST Services" data-type="sect1"><div class="sect1" id="idm45849694562912">&#13;
<h1>REST Services</h1>&#13;
&#13;
<p>REST (REpresentational State Transfer) is an <a data-primary="REST (REpresentational State Transfer) services" data-type="indexterm" id="ch10_term8"/><a data-primary="Selenium, complements to" data-secondary="REST as" data-type="indexterm" id="ch10_term9"/>architectural style for designing distributed services. <a data-primary="Fielding, Roy" data-type="indexterm" id="idm45849694233696"/>Roy Fielding coined this term in his 2000 doctoral dissertation. REST is a popular way of creating web services on top of the HTTP protocol.</p>&#13;
&#13;
<p>REST follows <a data-primary="client-server architectures" data-type="indexterm" id="idm45849694232512"/>a client-server architecture. The server handles a set of <em>resources</em>, listening for incoming requests made by clients. These resources are the building blocks of REST services and define the type of information transferred. Each resource is identified uniquely. In <a data-primary="endpoints in HTTP" data-type="indexterm" id="idm45849694230912"/><a data-primary="HTTP" data-secondary="URLs as endpoints in" data-type="indexterm" id="idm45849694230208"/>HTTP, we use URLs (also known as <em>endpoints</em>) for accessing individual resources. Each resource has a representation, a machine-readable explanation of the current state of a resource. We use a data-interchange format for defining representations, such as JSON, YAML, or XML. REST services expose a set of <em>actions</em> on the resources, such as CRUD (create, retrieve, update, and delete). We <a data-primary="HTTP" data-secondary="methods for creating REST services" data-type="indexterm" id="idm45849694228064"/>can use the HTTP methods (the so-called <em>verbs</em>) to map REST actions. <a data-type="xref" href="#http-method-rest">Table 10-3</a> summarizes the HTTP methods used to create REST services. Finally, we can use <a data-primary="HTTP" data-secondary="status codes for creating REST services" data-type="indexterm" id="idm45849694225696"/>the HTTP status codes to identify the response associated with REST actions. <a data-type="xref" href="#http-status-rest">Table 10-4</a> summarizes the typical HTTP status codes used in REST. <a data-type="xref" href="#rest-example">Figure 10-5</a> shows a sequence of requests and responses of an example REST service that uses different HTTP methods and response codes.</p>&#13;
<table id="http-method-rest">&#13;
<caption><span class="label">Table 10-3. </span>HTTP methods for creating REST services</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>HTTP Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>GET</code></p></td>&#13;
<td><p>Read a <a data-primary="GET HTTP method" data-type="indexterm" id="idm45849694218416"/>resource</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>POST</code></p></td>&#13;
<td><p>Send a new resource to the server</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>PUT</code></p></td>&#13;
<td><p>Update a resource</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>DELETE</code></p></td>&#13;
<td><p>Eliminate a resource</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>PATCH</code></p></td>&#13;
<td><p>Partially update a resource</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>HEAD</code></p></td>&#13;
<td><p>Ask if a given resource exists without returning any of its representations</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>OPTIONS</code></p></td>&#13;
<td><p>Retrieve the available verbs for a given resource</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<table id="http-status-rest">&#13;
<caption><span class="label">Table 10-4. </span>HTTP status codes for creating REST services</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Status Code</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>200 OK</code></p></td>&#13;
<td><p>The request was successful, and the content requested was returned (e.g., in a <code>GET</code> request).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>201 Created</code></p></td>&#13;
<td><p>The resource was created (e.g., in a <code>POST</code> or <code>PUT</code> request).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>204 No content</code></p></td>&#13;
<td><p>The action was successful, but no content was returned. This status code is useful in actions that do not require a response body (e.g., in a DELETE request).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><span class="keep-together"><code>301 Moved permanently</code></span></p></td>&#13;
<td><p>The resource was moved to another location.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>400 Bad request</code></p></td>&#13;
<td><p>The request has some problems (e.g., missing parameters).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>401 Unauthorized</code></p></td>&#13;
<td><p>The requested resource is not accessible for the user that made the request.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>403 Forbidden</code></p></td>&#13;
<td><p>The resource is not accessible, but unlike <code>401</code>, authentication will not affect the response.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>404 Not found</code></p></td>&#13;
<td><p>The provided endpoint does not identify any resource.</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>405 Method not allowed</code></p></td>&#13;
<td><p>The used verb is not allowed (e.g., when using <code>PUT</code> in a read-only resource).</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>500 Internal server error</code></p></td>&#13;
<td><p>Generic unexpected condition in the server side.</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<figure><div class="figure" id="rest-example">&#13;
<img alt="hosw 1005" src="assets/hosw_1005.png"/>&#13;
<h6><span class="label">Figure 10-5. </span>Example of a REST service</h6>&#13;
</div></figure>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="REST Assured" data-type="sect2"><div class="sect2" id="idm45849694181728">&#13;
<h2>REST Assured</h2>&#13;
&#13;
<p>REST APIs are ubiquitous. As usual, it is highly recommended to implement automated tests for verifying these services, for instance, by using <a href="https://rest-assured.io">REST Assured</a>. REST Assured is a <a data-primary="Java" data-secondary="for REST Assured" data-secondary-sortas="REST Assured" data-type="indexterm" id="idm45849694178976"/><a data-primary="POJOs (Plain Old Java Objects)" data-type="indexterm" id="ch10_term10"/><a data-primary="REST Assured library" data-type="indexterm" id="ch10_term11"/>popular open source (Apache 2.0 license) Java library for testing REST services. It provides a fluent API for testing and validating REST services. A convenient way to create readable assertions with REST Assured is to generate POJOs (Plain Old Java Objects) to map the REST responses (e.g., in JSON format) as Java classes. Then, we can <a data-primary="AssertJ assertions" data-type="indexterm" id="idm45849694175712"/>use a library like AssertJ to verify the expected conditions using the accessors (i.e., the getter methods) of these POJOs. <a data-type="xref" href="#rest-assured-test">Example 10-2</a> shows a test case using this approach. <a data-type="xref" href="#rest-assured-pojo">Example 10-3</a> contains the POJO used in this test.</p>&#13;
<div data-type="example" id="rest-assured-test">&#13;
<h5><span class="label">Example 10-2. </span>Test using REST Assured</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code><code> </code><code class="nc">RestJupiterTest</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="nd">@Test</code><code>&#13;
</code><code>    </code><code class="kt">void</code><code> </code><code class="nf">testRest</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>&#13;
</code><code>        </code><code class="n">HttpBinGet</code><code> </code><code class="n">get</code><code> </code><code class="o">=</code><code> </code><code class="n">RestAssured</code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"https://httpbin.org/get"</code><code class="o">)</code><code class="o">.</code><code class="na">then</code><code class="o">(</code><code class="o">)</code><code>&#13;
</code><code>                </code><code class="o">.</code><code class="na">assertThat</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">statusCode</code><code class="o">(</code><code class="mi">200</code><code class="o">)</code><code class="o">.</code><code class="na">extract</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">as</code><code class="o">(</code><code class="n">HttpBinGet</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO3-1" id="co_beyond_selenium_CO3-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">get</code><code class="o">.</code><code class="na">getHeaders</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">containsKey</code><code class="o">(</code><code class="s">"Accept-Encoding"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO3-2" id="co_beyond_selenium_CO3-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
</code><code>        </code><code class="n">assertThat</code><code class="o">(</code><code class="n">get</code><code class="o">.</code><code class="na">getOrigin</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">.</code><code class="na">isNotBlank</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO3-3" id="co_beyond_selenium_CO3-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
</code><code>    </code><code class="o">}</code><code>&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO3-1" id="callout_beyond_selenium_CO3-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We use REST Assured to <a data-primary="GET HTTP method" data-type="indexterm" id="idm45849694091072"/>request an online public REST service using the <code>GET</code> HTTP method. This line also verifies the expected status code (<code>200</code>) and converts the response payload (in JSON) to a Java class (shown in <a data-type="xref" href="#rest-assured-pojo">Example 10-3</a>).</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO3-2" id="callout_beyond_selenium_CO3-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We assert the header list (using the corresponding accessor method) contains a given key value.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO3-3" id="callout_beyond_selenium_CO3-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We assert that the origin is not blank.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="rest-assured-pojo">&#13;
<h5><span class="label">Example 10-3. </span>POJO class for testing a REST service</h5>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">HttpBinGet</code><code> </code><code class="o">{</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">Map</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code><code> </code><code class="n">String</code><code class="o">&gt;</code><code> </code><code class="n">args</code><code class="o">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO4-1" id="co_beyond_selenium_CO4-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">Map</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code><code> </code><code class="n">String</code><code class="o">&gt;</code><code> </code><code class="n">headers</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="n">origin</code><code class="o">;</code><code>&#13;
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="n">url</code><code class="o">;</code><code>&#13;
</code><code>&#13;
</code><code>    </code><code class="c1">// Getters and setters </code><a class="co" href="#callout_beyond_selenium_CO4-2" id="co_beyond_selenium_CO4-2"><img alt="2" src="assets/2.png"/></a><code class="c1">&#13;
</code><code>&#13;
</code><code class="o">}</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO4-1" id="callout_beyond_selenium_CO4-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>This POJO defines a set of attributes to map the JSON response payload using Java.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO4-2" id="callout_beyond_selenium_CO4-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We define accessors (getters) and mutators (setters) for each class attribute. Modern <a data-primary="IDEs (Integrated Development Environments)" data-type="indexterm" id="idm45849693989968"/><a data-primary="Integrated Development Environments (IDEs)" data-type="indexterm" id="idm45849693989296"/>IDEs allow generating these methods automatically from the class <a data-startref="ch10_term8" data-type="indexterm" id="idm45849693988528"/><a data-startref="ch10_term9" data-type="indexterm" id="idm45849693987856"/><a data-startref="ch10_term10" data-type="indexterm" id="idm45849693987184"/><a data-startref="ch10_term11" data-type="indexterm" id="idm45849693986512"/>attributes.</p></dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Alternatives to Selenium" data-type="sect1"><div class="sect1" id="idm45849693953840">&#13;
<h1>Alternatives to Selenium</h1>&#13;
&#13;
<p>Selenium is <a data-primary="end-to-end (E2E) testing" data-secondary="Selenium WebDriver for" data-type="indexterm" id="idm45849693952464"/><a data-primary="Selenium, alternatives to" data-secondary="about" data-type="indexterm" id="idm45849693951520"/><a data-primary="Selenium WebDriver API" data-secondary="for automated end-to-end testing" data-secondary-sortas="automated end-to-end testing" data-type="indexterm" id="idm45849693950576"/><a data-primary="end-to-end (E2E) testing" data-secondary="alternatives to Selenium for" data-type="indexterm" id="ch10_term14"/>currently the leading technology for implementing end-to-end tests. Nevertheless, it is not the only alternative available. This section provides an overview of other frameworks and libraries that also allow implementing end-to-end tests for web applications. In addition, the following subsections also review the main pros and cons of each of these alternatives. In my opinion, Selenium is still the reference solution for end-to-end testing <a data-primary="W3C specifications" data-secondary="WebDriver and" data-type="indexterm" id="idm45849693947952"/><a data-primary="W3C specifications" data-secondary="WebDriver BiDi and" data-type="indexterm" id="idm45849693947008"/>since it is built to promote web standards (i.e., the W3C WebDriver and WebDriver BiDi) to support the automation process and, therefore, it guarantees cross-browser compatibility.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Cypress" data-type="sect2"><div class="sect2" id="idm45849693945808">&#13;
<h2>Cypress</h2>&#13;
&#13;
<p><a href="https://www.cypress.io">Cypress</a> is a <a data-primary="JavaScript" data-secondary="for Selenium alternatives" data-secondary-sortas="Selenium alternatives" data-type="indexterm" id="idm45849693943392"/><a data-primary="Node.js applications" data-type="indexterm" id="idm45849693942144"/><a data-primary="Test Runner, Cypress" data-type="indexterm" id="idm45849693941472"/><a data-primary="Cypress" data-type="indexterm" id="ch10_term12"/><a data-primary="Selenium, alternatives to" data-secondary="Cypress as" data-type="indexterm" id="ch10_term13"/>JavaScript end-to-end automated testing framework. As illustrated in <a data-type="xref" href="#cypress-arch">Figure 10-6</a>, the Cypress architecture consists of a Node.js process plus a tool called <em>Test Runner</em> executed in a browser.</p>&#13;
&#13;
<figure><div class="figure" id="cypress-arch">&#13;
<img alt="hosw 1006" src="assets/hosw_1006.png"/>&#13;
<h6><span class="label">Figure 10-6. </span>Cypress architecture</h6>&#13;
</div></figure>&#13;
&#13;
<p>The Test Runner is an interactive web application <a data-primary="Selenium, alternatives to" data-secondary="languages of" data-type="indexterm" id="idm45849693934992"/>that embeds a test based on <a href="https://mochajs.org">Mocha</a> (a JavaScript unit testing framework) plus the web application under test as two iframes. Test code and the application code run in the same browser tab (i.e., in the same JavaScript loop). The Node.js process communicates with the Test Runner using a WebSocket. Finally, the Node.js process is a proxy for the HTTP traffic between the Test Runner and the web application under test.</p>&#13;
&#13;
<p>The Cypress Test Runner is open source, licensed under the terms of the MIT license. The Cypress team also provides commercial support for advanced features. One of them is the Cypress Dashboard, a cloud-managed web application that allows tracking the tests executed in Test Runner. <a data-type="xref" href="#cypress-pros-cons">Table 10-5</a> summarizes some of the most relevant pros and cons of Cypress.</p>&#13;
<table id="cypress-pros-cons">&#13;
<caption><span class="label">Table 10-5. </span>Cypress pros and cons</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Pros</th>&#13;
<th>Cons</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Automatic waiting and fast execution, since the test and the application run in the same browser</p>&#13;
</li>&#13;
<li>&#13;
<p>Live reload (the Test Runner automatically keeps track of changes in the tests)</p>&#13;
</li>&#13;
</ul></div></td>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Only some <a data-primary="Selenium, alternatives to" data-secondary="browsers supported by" data-type="indexterm" id="idm45849693923360"/>browsers supported: Firefox and Chromium-based (including Chrome, Edge, and Electron), but not other browsers like Safari or Opera</p>&#13;
</li>&#13;
<li>&#13;
<p>Since the application is executed in a browser iframe, certain operations are not allowed (e.g., drive different browsers or multiple tabs)</p>&#13;
</li>&#13;
</ul></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>The following commands show how to install Cypress locally and execute it. After executing these commands, you will see the Cypress GUI (like in <a data-type="xref" href="#cypress-process">Figure 10-7</a>). You can use this GUI to execute tests with Cypress.</p>&#13;
&#13;
<pre data-type="programlisting">npm install cypress <a class="co" href="#callout_beyond_selenium_CO5-1" id="co_beyond_selenium_CO5-1"><img alt="1" src="assets/1.png"/></a>&#13;
npx cypress open <a class="co" href="#callout_beyond_selenium_CO5-2" id="co_beyond_selenium_CO5-2"><img alt="2" src="assets/2.png"/></a></pre>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO5-1" id="callout_beyond_selenium_CO5-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We can <a data-primary="npm install command" data-type="indexterm" id="idm45849693911872"/>use <code>npm</code> (the default package manager in Node.js) for installing Cypress.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO5-2" id="callout_beyond_selenium_CO5-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We can use <code>npx</code> (an <code>npm</code> package runner) for running the Cypress process.</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="cypress-process">&#13;
<img alt="hosw 1007" src="assets/hosw_1007.png"/>&#13;
<h6><span class="label">Figure 10-7. </span>Cypress GUI</h6>&#13;
</div></figure>&#13;
&#13;
<p>By default, in <a data-primary="GUI (Graphical User Interface)" data-secondary="of Cypress" data-secondary-sortas="Cypress" data-type="indexterm" id="idm45849693904640"/>the Cypress GUI, you can find introductory test examples in the folders <code>1-getting-started</code> and <code>2-advanced-examples</code>. In addition, we can create new tests using the button New Spec File. For instance, <a data-type="xref" href="#cypress-helloworld">Example 10-4</a> shows a <a data-primary="Selenium, alternatives to" data-secondary="hello world examples with" data-type="indexterm" id="idm45849693901216"/>brand-new basic test using Cypress (i.e., a <em>hello world</em> in Cypress). This test is called <code>hello-world-cypress.spec.js</code> (the extension <code>spec.js</code> is used by default in Mocha tests), and it is stored in the path <code>cypress/integration</code> of the Cypress installation. <a data-type="xref" href="#cypress-test-runner">Figure 10-8</a> shows a <a data-primary="Test Runner, Cypress" data-type="indexterm" id="idm45849693897456"/>screenshot of the Cypress Test Runner during the execution of this test.</p>&#13;
<div data-type="example" id="cypress-helloworld">&#13;
<h5><span class="label">Example 10-4. </span>Hello world test using Cypress</h5>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">describe</code><code class="p">(</code><code class="s1">'Hello World with Cypress'</code><code class="p">,</code><code> </code><code class="p">(</code><code class="p">)</code><code> </code><code class="o">=&gt;</code><code> </code><code class="p">{</code><code>&#13;
   </code><code class="nx">it</code><code class="p">(</code><code class="s1">'Login in the practice site'</code><code class="p">,</code><code> </code><code class="p">(</code><code class="p">)</code><code> </code><code class="o">=&gt;</code><code> </code><code class="p">{</code><code>&#13;
      </code><code class="nx">cy</code><code class="p">.</code><code class="nx">visit</code><code class="p">(</code><code class="s1">'https://bonigarcia.dev/selenium-webdriver-java/login-form.html'</code><code class="p">)</code><code> </code><a class="co" href="#callout_beyond_selenium_CO6-1" id="co_beyond_selenium_CO6-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
&#13;
      </code><code class="nx">cy</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="s1">'#username'</code><code class="p">)</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s1">'user'</code><code class="p">)</code><code> </code><a class="co" href="#callout_beyond_selenium_CO6-2" id="co_beyond_selenium_CO6-2"><img alt="2" src="assets/2.png"/></a><code>&#13;
      </code><code class="nx">cy</code><code class="p">.</code><code class="nx">get</code><code class="p">(</code><code class="s1">'#password'</code><code class="p">)</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s1">'user'</code><code class="p">)</code><code>&#13;
      </code><code class="nx">cy</code><code class="p">.</code><code class="nx">contains</code><code class="p">(</code><code class="s1">'Submit'</code><code class="p">)</code><code class="p">.</code><code class="nx">click</code><code class="p">(</code><code class="p">)</code><code> </code><a class="co" href="#callout_beyond_selenium_CO6-3" id="co_beyond_selenium_CO6-3"><img alt="3" src="assets/3.png"/></a><code>&#13;
      </code><code class="nx">cy</code><code class="p">.</code><code class="nx">contains</code><code class="p">(</code><code class="s1">'Login successful'</code><code class="p">)</code><code> </code><a class="co" href="#callout_beyond_selenium_CO6-4" id="co_beyond_selenium_CO6-4"><img alt="4" src="assets/4.png"/></a><code>&#13;
&#13;
      </code><code class="nx">cy</code><code class="p">.</code><code class="nx">screenshot</code><code class="p">(</code><code class="s2">"hello-world-cypress"</code><code class="p">)</code><code> </code><a class="co" href="#callout_beyond_selenium_CO6-5" id="co_beyond_selenium_CO6-5"><img alt="5" src="assets/5.png"/></a><code>&#13;
  </code><code class="p">}</code><code class="p">)</code><code>&#13;
</code><code class="p">}</code><code class="p">)</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO6-1" id="callout_beyond_selenium_CO6-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We open the login page in the practice site.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO6-2" id="callout_beyond_selenium_CO6-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We type the correct credentials (username and password).</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO6-3" id="callout_beyond_selenium_CO6-3"><img alt="3" src="assets/3.png"/></a></dt>&#13;
<dd><p>We click on the Submit button.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO6-4" id="callout_beyond_selenium_CO6-4"><img alt="4" src="assets/4.png"/></a></dt>&#13;
<dd><p>We verify the resulting page contains the message for successful login.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO6-5" id="callout_beyond_selenium_CO6-5"><img alt="5" src="assets/5.png"/></a></dt>&#13;
<dd><p>We make a browser screenshot.</p></dd>&#13;
</dl>&#13;
&#13;
<figure><div class="figure" id="cypress-test-runner">&#13;
<img alt="hosw 1008" src="assets/hosw_1008.png"/>&#13;
<h6><span class="label">Figure 10-8. </span>Cypress Test Runner</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="WebDriverIO" data-type="sect2"><div class="sect2" id="idm45849693945216">&#13;
<h2>WebDriverIO</h2>&#13;
&#13;
<p><a href="https://webdriver.io">WebDriverIO</a> is an <a data-startref="ch10_term12" data-type="indexterm" id="idm45849693756720"/><a data-startref="ch10_term13" data-type="indexterm" id="idm45849693756016"/><a data-primary="W3C specifications" data-secondary="WebDriver and" data-type="indexterm" id="idm45849693755344"/><a data-primary="Selenium, alternatives to" data-secondary="languages of" data-type="indexterm" id="idm45849693754400"/><a data-primary="JavaScript" data-secondary="for Selenium alternatives" data-secondary-sortas="Selenium alternatives" data-type="indexterm" id="idm45849693753488"/><a data-primary="Node.js applications" data-type="indexterm" id="idm45849693752256"/><a data-primary="Selenium, alternatives to" data-secondary="WebDriverIO as" data-type="indexterm" id="ch10_term15"/><a data-primary="WebDriverIO" data-type="indexterm" id="ch10_term16"/>automated testing framework for web and mobile applications. It is entirely open source (MIT license) and based on web standards such as the W3C WebDriver protocol. <a data-type="xref" href="#webdriverio-arch">Figure 10-9</a> illustrates its architecture. WebDriverIO is written in JavaScript and runs on Node.js. It uses several <em>services</em> to <a data-primary="Selenium Server (Hub)" data-type="indexterm" id="idm45849693747968"/><a data-primary="Selenium Grid" data-secondary="Hub (Selenium Server) of" data-type="indexterm" id="idm45849693747232"/><a data-primary="Hub (Selenium Server)" data-type="indexterm" id="idm45849693746272"/><a data-primary="Appium Server" data-type="indexterm" id="idm45849693745600"/><a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="with Chromium" data-secondary-sortas="Chromium" data-type="indexterm" id="idm45849693744928"/><a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="WebDriverIO and" data-type="indexterm" id="idm45849693743696"/><a data-primary="Chromium" data-secondary="Chrome DevTools with" data-type="indexterm" id="idm45849693742736"/><a data-primary="chromedriver" data-type="indexterm" id="idm45849693741792"/><a data-primary="cloud providers" data-type="indexterm" id="idm45849693741120"/>support automation: chromedriver (for local Chrome browsers), Selenium Server (for other browsers), Appium Server (for mobile devices), Chrome DevTools (for Chromium-based local browsers using the CDP), and cloud providers (such as Sauce Labs, BrowserStack, or TestingBot). These <a data-primary="Selenium, alternatives to" data-secondary="browsers supported by" data-type="indexterm" id="idm45849693740016"/>services manipulate the corresponding browsers and mobile devices. <a data-type="xref" href="#webdriverio-pros-cons">Table 10-6</a> summarizes some of the pros and cons of WebDriverIO.</p>&#13;
&#13;
<figure><div class="figure" id="webdriverio-arch">&#13;
<img alt="hosw 1009" src="assets/hosw_1009.png"/>&#13;
<h6><span class="label">Figure 10-9. </span>WebDriverIO architecture</h6>&#13;
</div></figure>&#13;
<table id="webdriverio-pros-cons">&#13;
<caption><span class="label">Table 10-6. </span>WebDriverIO pros and cons</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Pros</th>&#13;
<th>Cons</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Support for multiple browsers and mobile devices</p>&#13;
</li>&#13;
<li>&#13;
<p>Works with different testing and reporting frameworks</p>&#13;
</li>&#13;
<li>&#13;
<p>Based on web standards</p>&#13;
</li>&#13;
</ul></div></td>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Only available using JavaScript</p>&#13;
</li>&#13;
</ul></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>The <a data-primary="npm install command" data-type="indexterm" id="ch10_term22"/>following <code>npm</code> command installs WebDriverIO locally. This installer displays a command-line wizard that asks for several options, such as the services (chomedriver, Selenium Server, Appium Server, CDP, or cloud providers), testing framework (Mocha, Jasmine, or Cucumber), or reporter tool (JUnit or Allure, among others):</p>&#13;
&#13;
<pre data-type="programlisting">npm init wdio .</pre>&#13;
&#13;
<p>When the previous command finishes, we can <a data-primary="Selenium, alternatives to" data-secondary="hello world examples with" data-type="indexterm" id="ch10_term23"/>create our custom tests. For instance, <a data-type="xref" href="#webdriverio-helloworld">Example 10-5</a> shows a basic WebDriverIO using Mocha. We locate this test under the folder <code>test</code> of the project scaffolding and run it through the following command:</p>&#13;
&#13;
<pre data-type="programlisting">npx wdio run ./wdio.conf.js</pre>&#13;
<div data-type="example" id="webdriverio-helloworld">&#13;
<h5><span class="label">Example 10-5. </span>Hello world test using WebDriverIO</h5>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="nx">describe</code><code class="p">(</code><code class="s1">'Hello World with WebDriverIO'</code><code class="p">,</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
   <code class="nx">it</code><code class="p">(</code><code class="s1">'Login in the practice site'</code><code class="p">,</code> <code class="nx">async</code> <code class="p">()</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
      <code class="nx">await</code> <code class="nx">browser</code><code class="p">.</code><code class="nx">url</code><code class="p">(</code>&#13;
            <code class="sb">`https://bonigarcia.dev/selenium-webdriver-java/login-form.html`</code><code class="p">);</code>&#13;
&#13;
      <code class="nx">await</code> <code class="nx">$</code><code class="p">(</code><code class="s1">'#username'</code><code class="p">).</code><code class="nx">setValue</code><code class="p">(</code><code class="s1">'user'</code><code class="p">);</code>&#13;
      <code class="nx">await</code> <code class="nx">$</code><code class="p">(</code><code class="s1">'#password'</code><code class="p">).</code><code class="nx">setValue</code><code class="p">(</code><code class="s1">'user'</code><code class="p">);</code>&#13;
      <code class="nx">await</code> <code class="nx">$</code><code class="p">(</code><code class="s1">'button[type="submit"]'</code><code class="p">).</code><code class="nx">click</code><code class="p">();</code>&#13;
      <code class="nx">await</code> <code class="nx">expect</code><code class="p">(</code><code class="nx">$</code><code class="p">(</code><code class="s1">'#success'</code><code class="p">)).</code><code class="nx">toHaveTextContaining</code><code class="p">(</code><code class="s1">'Login successful'</code><code class="p">);</code>&#13;
      <code class="nx">await</code> <code class="nx">browser</code><code class="p">.</code><code class="nx">saveScreenshot</code><code class="p">(</code><code class="s1">'hello-world-webdriverio.png'</code><code class="p">);</code>&#13;
    <code class="p">});</code>&#13;
<code class="p">});</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="TestCafe" data-type="sect2"><div class="sect2" id="idm45849693715840">&#13;
<h2>TestCafe</h2>&#13;
&#13;
<p><a href="https://testcafe.io">TestCafe</a> is an <a data-startref="ch10_term15" data-type="indexterm" id="idm45849693633344"/><a data-startref="ch10_term16" data-type="indexterm" id="idm45849693632608"/><a data-primary="TestCafe" data-type="indexterm" id="ch10_term17"/><a data-primary="Selenium, alternatives to" data-secondary="TestCafe as" data-type="indexterm" id="ch10_term18"/>open source (MIT license) cross-browser automation testing tool. The core idea of TestCafe is to <a data-primary="client-server architectures" data-type="indexterm" id="idm45849693629568"/><a data-primary="Node.js applications" data-type="indexterm" id="ch10_term21"/>avoid external drivers to support the automation process and emulate the user actions using a hybrid client-server architecture (see <a data-type="xref" href="#testcafe-arch">Figure 10-10</a>). The server side is implemented in Node.js and contains a <em>proxy</em> that intercepts the HTTP traffic with the web application under test. TestCafe tests are also written as Node.js scripts and are executed on the server side. The <em>automation scripts</em> that emulate the user activity run on the client side on the tested page in the browser. <a data-type="xref" href="#testcafe-pros-cons">Table 10-7</a> summarizes some advantages and limitations of TestCafe.</p>&#13;
&#13;
<figure><div class="figure" id="testcafe-arch">&#13;
<img alt="hosw 1010" src="assets/hosw_1010.png"/>&#13;
<h6><span class="label">Figure 10-10. </span>TestCafe architecture</h6>&#13;
</div></figure>&#13;
<table id="testcafe-pros-cons">&#13;
<caption><span class="label">Table 10-7. </span>TestCafe pros and cons</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Pros</th>&#13;
<th>Cons</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Full cross-browser <a data-primary="Selenium, alternatives to" data-secondary="browsers supported by" data-type="indexterm" id="ch10_term24"/>support (since TestCafe only launches browsers, it can automate any browser)</p>&#13;
</li>&#13;
</ul></div></td>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>It supports <a data-primary="Selenium, alternatives to" data-secondary="languages of" data-type="indexterm" id="ch10_term25"/>only JavaScript and TypeScript</p>&#13;
</li>&#13;
<li>&#13;
<p>Some actions cannot be automated since it is not possible with JavaScript</p>&#13;
</li>&#13;
</ul></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>We can install TestCafe easily using <code>npm</code>. Then, we can use the TestCafe CLI tool to run TestCafe scripts from the command line. The following snippet illustrates how:</p>&#13;
&#13;
<pre data-type="programlisting">npm install -g testcafe <a class="co" href="#callout_beyond_selenium_CO7-1" id="co_beyond_selenium_CO7-1"><img alt="1" src="assets/1.png"/></a>&#13;
testcafe chrome helloworld-testcafe.js <a class="co" href="#callout_beyond_selenium_CO7-2" id="co_beyond_selenium_CO7-2"><img alt="2" src="assets/2.png"/></a></pre>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO7-1" id="callout_beyond_selenium_CO7-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>We install TestCafe globally.</p></dd>&#13;
<dt><a class="co" href="#co_beyond_selenium_CO7-2" id="callout_beyond_selenium_CO7-2"><img alt="2" src="assets/2.png"/></a></dt>&#13;
<dd><p>We start a TestCafe basic script (<a data-type="xref" href="#testcafe-helloworld">Example 10-6</a>) using Chrome as a browser.</p></dd>&#13;
</dl>&#13;
<div data-type="example" id="testcafe-helloworld">&#13;
<h5><span class="label">Example 10-6. </span>Hello world test using TestCafe</h5>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">import</code> <code class="p">{</code> <code class="nx">Selector</code> <code class="p">}</code> <code class="nx">from</code> <code class="s1">'testcafe'</code><code class="p">;</code>&#13;
&#13;
<code class="nx">fixture</code><code class="sb">`Hello World with TestCafe`</code>&#13;
   <code class="p">.</code><code class="nx">page</code><code class="sb">`https://bonigarcia.dev/selenium-webdriver-java/login-form.html`</code><code class="p">;</code>&#13;
<code class="nx">test</code><code class="p">(</code><code class="s1">'Login in the practice site'</code><code class="p">,</code> <code class="nx">async</code> <code class="nx">t</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
   <code class="nx">await</code> <code class="nx">t</code>&#13;
      <code class="p">.</code><code class="nx">typeText</code><code class="p">(</code><code class="s1">'#username'</code><code class="p">,</code> <code class="s1">'user'</code><code class="p">)</code>&#13;
      <code class="p">.</code><code class="nx">typeText</code><code class="p">(</code><code class="s1">'#password'</code><code class="p">,</code> <code class="s1">'user'</code><code class="p">)</code>&#13;
      <code class="p">.</code><code class="nx">click</code><code class="p">(</code><code class="s1">'button[type="submit"]'</code><code class="p">)</code>&#13;
      <code class="p">.</code><code class="nx">expect</code><code class="p">(</code><code class="nx">Selector</code><code class="p">(</code><code class="s1">'#success'</code><code class="p">).</code><code class="nx">innerText</code><code class="p">).</code><code class="nx">eql</code><code class="p">(</code><code class="s1">'Login successful'</code><code class="p">)</code>&#13;
      <code class="p">.</code><code class="nx">takeScreenshot</code><code class="p">();</code>&#13;
<code class="p">});</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Puppeteer" data-type="sect2"><div class="sect2" id="idm45849693550912">&#13;
<h2>Puppeteer</h2>&#13;
&#13;
<p><a href="https://pptr.dev">Puppeteer</a> is an <a data-startref="ch10_term17" data-type="indexterm" id="idm45849693533008"/><a data-startref="ch10_term18" data-type="indexterm" id="idm45849693532272"/><a data-primary="Puppeteer" data-type="indexterm" id="idm45849693531600"/><a data-primary="Selenium, alternatives to" data-secondary="Puppeteer as" data-type="indexterm" id="idm45849693530928"/><a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="with Chromium" data-secondary-sortas="Chromium" data-type="indexterm" id="idm45849693530016"/><a data-primary="Chrome DevTools Protocol (CDP)" data-secondary="Puppeteer and" data-type="indexterm" id="idm45849693528832"/><a data-primary="Chromium" data-secondary="Chrome DevTools with" data-type="indexterm" id="idm45849693527920"/><a data-primary="Chromium" data-secondary="Puppeteer with" data-type="indexterm" id="idm45849693526976"/>open source (MIT license) Node.js library that provides a high-level API to control Chromium-based browsers over the DevTools Protocol. Puppeteer is maintained by the Chrome DevTools team at Google. <a data-type="xref" href="#puppeter-arch">Figure 10-11</a> illustrates the architecture of Puppeteer. <a data-type="xref" href="#puppeter-pros-cons">Table 10-8</a> presents the main advantages and drawbacks of Puppeteer.</p>&#13;
&#13;
<figure><div class="figure" id="puppeter-arch">&#13;
<img alt="hosw 1011" src="assets/hosw_1011.png"/>&#13;
<h6><span class="label">Figure 10-11. </span>Puppeteer architecture</h6>&#13;
</div></figure>&#13;
<table id="puppeter-pros-cons">&#13;
<caption><span class="label">Table 10-8. </span>Puppeteer pros and cons</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Pros</th>&#13;
<th>Cons</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Fast execution and comprehensive automation capabilities (due to direct communication with the browser using CDP)</p>&#13;
</li>&#13;
</ul></div></td>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Limited cross-browser support (only Chromium-based browsers, although there is experimental Firefox support at the time of writing)</p>&#13;
</li>&#13;
<li>&#13;
<p>Supports only JavaScript and TypeScript</p>&#13;
</li>&#13;
</ul></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>We can install Puppeteer using <code>npm</code>. Then, we need to use Node.js to run Puppeteer tests (for instance, <a data-type="xref" href="#puppeter-helloworld">Example 10-7</a>). The following snippet shows these commands:</p>&#13;
&#13;
<pre data-type="programlisting">npm install puppeteer&#13;
node helloword-puppeteer.js</pre>&#13;
<div data-type="example" id="puppeter-helloworld">&#13;
<h5><span class="label">Example 10-7. </span>Hello world test using Puppeteer</h5>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code><code> </code><code class="nx">puppeteer</code><code> </code><code class="o">=</code><code> </code><code class="nx">require</code><code class="p">(</code><code class="s1">'puppeteer'</code><code class="p">)</code><code class="p">;</code><code>&#13;
&#13;
</code><code class="p">(</code><code class="nx">async</code><code> </code><code class="p">(</code><code class="p">)</code><code> </code><code class="o">=&gt;</code><code> </code><code class="p">{</code><code>&#13;
   </code><code class="kr">const</code><code> </code><code class="nx">browser</code><code> </code><code class="o">=</code><code> </code><code class="nx">await</code><code> </code><code class="nx">puppeteer</code><code class="p">.</code><code class="nx">launch</code><code class="p">(</code><code class="p">)</code><code class="p">;</code><code> </code><a class="co" href="#callout_beyond_selenium_CO8-1" id="co_beyond_selenium_CO8-1"><img alt="1" src="assets/1.png"/></a><code>&#13;
   </code><code class="kr">const</code><code> </code><code class="nx">page</code><code> </code><code class="o">=</code><code> </code><code class="nx">await</code><code> </code><code class="nx">browser</code><code class="p">.</code><code class="nx">newPage</code><code class="p">(</code><code class="p">)</code><code class="p">;</code><code>&#13;
&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">page</code><code class="p">.</code><code class="kr">goto</code><code class="p">(</code><code class="s1">'https://bonigarcia.dev/selenium-webdriver-java/login-form.html'</code><code class="p">)</code><code class="p">;</code><code>&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">page</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s1">'#username'</code><code class="p">,</code><code> </code><code class="s1">'user'</code><code class="p">)</code><code class="p">;</code><code>&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">page</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s1">'#password'</code><code class="p">,</code><code> </code><code class="s1">'user'</code><code class="p">)</code><code class="p">;</code><code>&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">page</code><code class="p">.</code><code class="nx">click</code><code class="p">(</code><code class="s1">'button[type="submit"]'</code><code class="p">)</code><code class="p">;</code><code>&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">page</code><code class="p">.</code><code class="nx">waitForXPath</code><code class="p">(</code><code class="s1">'//*[contains(text(), "Login successful")]'</code><code class="p">)</code><code class="p">;</code><code>&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">page</code><code class="p">.</code><code class="nx">screenshot</code><code class="p">(</code><code class="p">{</code><code> </code><code class="nx">path</code><code class="o">:</code><code> </code><code class="s1">'helloword-puppeteer.png'</code><code> </code><code class="p">}</code><code class="p">)</code><code class="p">;</code><code>&#13;
&#13;
   </code><code class="nx">await</code><code> </code><code class="nx">browser</code><code class="p">.</code><code class="nx">close</code><code class="p">(</code><code class="p">)</code><code class="p">;</code><code>&#13;
</code><code class="p">}</code><code class="p">)</code><code class="p">(</code><code class="p">)</code><code class="p">;</code></pre></div>&#13;
<dl class="calloutlist">&#13;
<dt><a class="co" href="#co_beyond_selenium_CO8-1" id="callout_beyond_selenium_CO8-1"><img alt="1" src="assets/1.png"/></a></dt>&#13;
<dd><p>Puppeteer runs <a data-startref="ch10_term23" data-type="indexterm" id="idm45849693324464"/><a data-primary="headless browsers" data-type="indexterm" id="idm45849693346176"/><a data-primary="browser-specific capabilities" data-secondary="headless mode" data-type="indexterm" id="idm45849693345536"/>browsers in headless mode by default. It can be configured to use nonheadless browsers simply by changing this statement to:</p></dd>&#13;
</dl>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="nx">browser</code> <code class="o">=</code> <code class="nx">await</code> <code class="nx">puppeteer</code><code class="p">.</code><code class="nx">launch</code><code class="p">({</code> <code class="nx">headless</code><code class="o">:</code> <code class="kc">false</code> <code class="p">});</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Playwright" data-type="sect2"><div class="sect2" id="idm45849693550608">&#13;
<h2>Playwright</h2>&#13;
&#13;
<p><a href="https://playwright.dev">Playwright</a> is an open source (Apache 2.0 license) library for <a data-primary="Playwright" data-type="indexterm" id="ch10_term19"/><a data-primary="Selenium, alternatives to" data-secondary="Playwright as" data-type="indexterm" id="ch10_term20"/>browser automation supported by Microsoft. Playwright originally started as a Node.js library. In <a data-primary="JavaScript" data-secondary="for Selenium alternatives" data-secondary-sortas="Selenium alternatives" data-type="indexterm" id="idm45849693274480"/><a data-startref="ch10_term21" data-type="indexterm" id="idm45849693273296"/><a data-startref="ch10_term25" data-type="indexterm" id="idm45849693272624"/>addition to JavaScript, it now supports other programming languages, namely Python, Java, and .NET C#.</p>&#13;
&#13;
<p>Playwright supports <a data-primary="WebKit" data-type="indexterm" id="idm45849693271104"/><a data-primary="Firefox" data-secondary="Playwright with" data-type="indexterm" id="idm45849693270368"/><a data-primary="Chromium" data-secondary="Playwright with" data-type="indexterm" id="idm45849693269424"/>three types of web engines: Chromium, Firefox, and WebKit (i.e., the web browser engine used by Safari). The idea of supporting these engines is that they cover most of the browser market. Thus, the Playwright team maintains a <a data-primary="patched browsers" data-type="indexterm" id="idm45849693268352"/><a data-primary="browsers" data-secondary="patched" data-type="indexterm" id="idm45849693267680"/>patched version of these browsers that expose the necessary capabilities to enable the automation. These <a data-primary="event-driven architecture" data-type="indexterm" id="idm45849693266480"/>patched versions provide an event-driven architecture to access different internal <a data-startref="ch10_term24" data-type="indexterm" id="idm45849693265712"/>browser processes (e.g., the render, network, browser, or service worker processes). <a data-type="xref" href="#playwright-arch">Figure 10-12</a> illustrates this architecture. <a data-type="xref" href="#playwright-pros-cons">Table 10-9</a> contains some of the most relevant pros and cons for Playwright.</p>&#13;
&#13;
<figure><div class="figure" id="playwright-arch">&#13;
<img alt="hosw 1012" src="assets/hosw_1012.png"/>&#13;
<h6><span class="label">Figure 10-12. </span>Playwright architecture</h6>&#13;
</div></figure>&#13;
<table id="playwright-pros-cons">&#13;
<caption><span class="label">Table 10-9. </span>Playwright pros and cons</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Pros</th>&#13;
<th>Cons</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Autowaiting for elements to be ready</p>&#13;
</li>&#13;
<li>&#13;
<p>Multilanguage API</p>&#13;
</li>&#13;
<li>&#13;
<p>Provides a test generator by recording user actions in the browser</p>&#13;
</li>&#13;
<li>&#13;
<p>Allows browser session recording</p>&#13;
</li>&#13;
<li>&#13;
<p>Intercepts network traffic for stubbing and mocking</p>&#13;
</li>&#13;
</ul></div></td>&#13;
<td><div>&#13;
<ul>&#13;
<li>&#13;
<p>Uses patched browser versions instead of actual releases</p>&#13;
</li>&#13;
</ul></div></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>To use Playwright, we need <a data-primary="browser binaries" data-type="indexterm" id="idm45849693233792"/>first to install the patched browser binaries. We can use <code>npm</code> to that aim. The following command downloads the proper browser binaries for Chromium, Firefox, and WebKit for the operating system running this command (Windows, Linux, and macOS are supported):</p>&#13;
&#13;
<pre data-type="programlisting">npm install -D playwright</pre>&#13;
&#13;
<p>Then we can implement Playwright scripts using one supported API. For instance, when <a data-primary="test runners" data-type="indexterm" id="idm45849693231472"/>using the JavaScript API, we can use a third-party test runner (e.g., Jest, Jasmine, Mocha, etc.) or <a data-primary="Playwright Test" data-type="indexterm" id="idm45849693230528"/>use the Playwright Test (i.e., the test runner provided by the Playwright team). To use the latter, we need to install it as <a data-startref="ch10_term22" data-type="indexterm" id="idm45849693229728"/>follows:</p>&#13;
&#13;
<pre data-type="programlisting">npm install -D @playwright/test</pre>&#13;
&#13;
<p><a data-type="xref" href="#webdriverio-playwright">Example 10-8</a> contains a basic Playwright JavaScript test to be executed with the Playwright runner. This command supposes that this test (called <code>helloworld-playwright.spec.mjs</code>) is located under the <code>tests</code> directory. We can invoke the Playwright runner as shown in the following snippet to run this test. This command <a data-primary="browser-specific capabilities" data-secondary="headless mode" data-type="indexterm" id="idm45849693225824"/><a data-primary="headless browsers" data-type="indexterm" id="idm45849693224880"/>runs Playwright tests in headless mode by default. To run browsers in nonheadless mode, you need to include the flag <code>--headed</code> at the of the command:</p>&#13;
&#13;
<pre data-type="programlisting">npx playwright test</pre>&#13;
<div data-type="example" id="webdriverio-playwright">&#13;
<h5><span class="label">Example 10-8. </span>Hello world test using Playwright</h5>&#13;
&#13;
<pre data-code-language="javascript" data-type="programlisting"><code class="kr">const</code> <code class="p">{</code> <code class="nx">test</code><code class="p">,</code> <code class="nx">expect</code> <code class="p">}</code> <code class="o">=</code> <code class="nx">require</code><code class="p">(</code><code class="s1">'@playwright/test'</code><code class="p">);</code>&#13;
&#13;
<code class="nx">test</code><code class="p">(</code><code class="s1">'Hello World with Playwright'</code><code class="p">,</code> <code class="nx">async</code> <code class="p">({</code> <code class="nx">page</code> <code class="p">})</code> <code class="o">=&gt;</code> <code class="p">{</code>&#13;
   <code class="nx">await</code> <code class="nx">page</code><code class="p">.</code><code class="kr">goto</code><code class="p">(</code><code class="s1">'https://bonigarcia.dev/selenium-webdriver-java/login-form.html'</code><code class="p">);</code>&#13;
&#13;
   <code class="nx">await</code> <code class="nx">page</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s1">'#username'</code><code class="p">,</code> <code class="s1">'user'</code><code class="p">);</code>&#13;
   <code class="nx">await</code> <code class="nx">page</code><code class="p">.</code><code class="nx">type</code><code class="p">(</code><code class="s1">'#password'</code><code class="p">,</code> <code class="s1">'user'</code><code class="p">);</code>&#13;
   <code class="nx">await</code> <code class="nx">page</code><code class="p">.</code><code class="nx">click</code><code class="p">(</code><code class="s1">'button[type="submit"]'</code><code class="p">);</code>&#13;
   <code class="nx">await</code> <code class="nx">expect</code><code class="p">(</code><code class="nx">page</code><code class="p">.</code><code class="nx">locator</code><code class="p">(</code><code class="s1">'#success'</code><code class="p">)).</code><code class="nx">toHaveText</code><code class="p">(</code><code class="s1">'Login successful'</code><code class="p">);</code>&#13;
&#13;
   <code class="nx">await</code> <code class="nx">page</code><code class="p">.</code><code class="nx">screenshot</code><code class="p">({</code> <code class="nx">path</code><code class="o">:</code> <code class="s1">'helloworld-playwright.png'</code> <code class="p">});</code>&#13;
<code class="p">});</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Summary and Final Remarks" data-type="sect1"><div class="sect1" id="idm45849693281808">&#13;
<h1>Summary and Final Remarks</h1>&#13;
&#13;
<p>Web development <a data-startref="ch10_term14" data-type="indexterm" id="idm45849693216752"/><a data-startref="ch10_term19" data-type="indexterm" id="idm45849693170240"/><a data-startref="ch10_term20" data-type="indexterm" id="idm45849693169568"/><a data-primary="Selenium, alternatives to" data-secondary="about" data-type="indexterm" id="idm45849693168896"/><a data-primary="Selenium, complements to" data-secondary="about" data-type="indexterm" id="idm45849693167984"/>is a heterogeneous discipline that involves many different technologies, such as client side, server side, or integration with external services, to name a few. For this reason, this chapter introduced two complementary technologies for Selenium that can be helpful in testing web applications: Appium (an open source test automation framework for mobile apps) and REST Assured (an open source Java library for testing REST services). You also learned the basics of alternative tools for implementing end-to-end tests for web applications, namely Cypress, WebDriverIO, TestCafe, Puppeteer, and Playwright. Although these alternatives deliver remarkable advantages compared to Selenium (e.g., automated waiting), in my opinion, Selenium provides a more comprehensive automation model since it is built on top of web standards, such as the W3C WebDriver and WebDriver BiDi. In addition, the Selenium project actively participates in the deelopment of these specifications.</p>&#13;
&#13;
<p>This chapter concludes your journey through the development of end-to-end tests with Selenium. The next step is to put all the knowledge presented in this book into practice in your projects. This way, you can build your custom automation framework for your team, project, company, etc. There are many decisions you need to make, such as the project setup (e.g., Maven, Gradle), unit testing framework (e.g., JUnit, TestNG), browser infrastructure (e.g., Docker, cloud providers), and integration with third-party utilities. To deal with all of this complexity, as a final word, I recommend you play with the provided examples in this book. In other words: clone the repository, run the tests, and edit the code to fulfill your needs. I will maintain the GitHub repo after the book is published. And remember: it is an open source <span class="keep-together">software</span> project, so feel free to create a pull request to improve it if you want to <span class="keep-together">contribute</span>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>