<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 7. Tomorrow’s Solutions: Serverless"><div class="chapter" id="serverless_architecture">
<h1><span class="label">Chapter 7. </span>Tomorrow’s Solutions: Serverless</h1>

<blockquote>
<p>The second industrial revolution, unlike the first, does not present us with such crushing images as rolling mills and molten steel, but with “bits” in a flow of information traveling along with circuits in the form of electronic impulses. The iron machines still exist, but they obey the orders of weightless bits.</p>
<p data-type="attribution">Italo Calvino</p>
</blockquote>

<p>The serverless computing model has great momentum with public cloud offerings, and recently also within the open source community thanks to many projects that enable it for any platform. But, what is serverless, exactly? What are some use cases for serverless? And, how can it be used for modern Java applications?</p>






<section data-type="sect1" data-pdf-bookmark="What Is Serverless?"><div class="sect1" id="idm45261443155072">
<h1>What Is Serverless?</h1>

<p>The best definition of serverless <a data-type="indexterm" data-primary="serverless computing" data-secondary="definition" id="idm45261443153504"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="CNCF Serverless Whitepaper" id="idm45261443152528"/><a data-type="indexterm" data-primary="CNCF Serverless Whitepaper" id="idm45261443151520"/>comes from the <a href="https://oreil.ly/yYbmP">CNCF Serverless Whitepaper</a>:</p>
<blockquote>
<p>Serverless computing refers to the concept of building and running applications that do not require server management. It describes a finer-grained deployment model where applications, bundled as one or more functions, are uploaded to a platform and then executed, scaled, and billed in response to the exact demand needed at the moment.</p></blockquote>

<p>Running an application that “does not require server management” is the most relevant part of that definition. In the previous chapters, we explored how Kubernetes helps with functional requirements for modern architectures, and how container images represent a convenient way to package and ship applications to any cloud platform.
There are still servers in serverless, however, they are abstracted away from app development. While a third party handles the complexity of maintaining and managing such servers, developers can simply package their code in containers for deployment.</p>

<p>The main differentiator between the deployment model that we discussed in Kubernetes and the serverless model is <a data-type="indexterm" data-primary="serverless computing" data-secondary="scale-to-zero approach" id="idm45261443147392"/><a data-type="indexterm" data-primary="scale-to-zero approach to serverless computing" id="idm45261443146416"/>the so-called <em>scale-to-zero</em> approach. With this approach, an application is automatically launched on demand when called, and idle when not used. This execution <a data-type="indexterm" data-primary="event-driven approach to serverless computing" id="idm45261443129440"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="event drive approach" id="idm45261443128832"/>model is also called event-driven, and it is the core foundation of serverless. We discuss event-driven serverless architectures later in this chapter.</p>

<p>Typically, a series of events can trigger the launch of the application, which will produce an outcome, as you can see in <a data-type="xref" href="#fig7-1">Figure 7-1</a>. This can be a single action or a chain of actions where the output of one app is the input of the subsequent app. The event can be anything, such as an HTTP request, a Kafka message, or a database transaction. The application can be autoscaled to multiple replicas proportional to the needed amount to handle the traffic load, and then scaled down when there isn’t any activity.</p>

<figure><div id="fig7-1" class="figure">
<img src="Images/moej_0701.png" alt="Serverless execution model" width="600" height="231"/>
<h6><span class="label">Figure 7-1. </span>Serverless execution model</h6>
</div></figure>








<section data-type="sect2" data-pdf-bookmark="Architectural Evolution"><div class="sect2" id="idm45261443123840">
<h2>Architectural Evolution</h2>

<p>The serverless model is not good for all use cases. In general, any asynchronous, concurrent, easy-to-parallelize-into-independent-units-of-work application is a good fit for this model. If you look at the diagram in <a data-type="xref" href="#fig7-2">Figure 7-2</a>, you can see how the microservices-based architectures evolution started from a monolithic applications approach using the service-oriented architectures (SOA) model, and it is <a data-type="indexterm" data-primary="serverless computing" data-secondary="functions" id="idm45261443121072"/><a data-type="indexterm" data-primary="functions, serverless computing" id="idm45261443120128"/>now evolving again into a new model of <em>functions</em>.</p>

<figure><div id="fig7-2" class="figure">
<img src="Images/moej_0702.png" alt="Architectural evolution" width="600" height="140"/>
<h6><span class="label">Figure 7-2. </span>Architectural evolution</h6>
</div></figure>

<p>These functions represent a minimal computing unit that accomplishes a specific scope or task.
Examples are:</p>

<ul>
<li>
<p>Processing web hooks</p>
</li>
<li>
<p>Data transformation (image, video)</p>
</li>
<li>
<p>PDF generation</p>
</li>
<li>
<p>Single-page apps for mobile devices</p>
</li>
<li>
<p>Chatbots</p>
</li>
</ul>

<p>With this approach, you can focus on convenience, as it is generally offered as <em>best-effort</em>. Failures are tolerated, and short actions are preferred. That’s why the serverless model is not good for use cases such as real-time applications, long-running tasks, or contexts where reliability and/or atomicity are key. It’s up to the developer to take care of verifying that inputs and outputs have been successfully processed by any serverless function involved. This gives great flexibility and high scalability to at least some part of the overall architecture.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Use Cases: Data, AI, and Machine Learning"><div class="sect1" id="idm45261443109872">
<h1>Use Cases: Data, AI, and Machine Learning</h1>

<p>The serverless model helps avoid <a data-type="indexterm" data-primary="serverless computing" data-secondary="data" id="servdata"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="AI and" id="servAI"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="machine learning and" id="servML"/><a data-type="indexterm" data-primary="AI (artificial intelligence)" data-secondary="serverless computing" id="AIserv"/><a data-type="indexterm" data-primary="ML (machine learning)" data-secondary="serverless computing" id="MLserv"/><a data-type="indexterm" data-primary="data, serverless computing" id="dataserv"/>common headaches for capacity planning for projects, as it mitigates overprovisioning and underprovisioning, thereby reducing the IT cost of idle resources. With serverless, all of the resources consumed are tailored to the actual usage as the applications start only when invoked, and there’s no need to preallocate or measure-and-update hardware resources.</p>

<p>This is very important when you have to analyze in real time a large amount of data, and that’s why serverless is gaining lots of attention from data scientists and ML experts, as the functions that can process data for analysis are flexible and leave a minimal footprint. On the other hand, serverless doesn’t pair well with all of the design principles of existing
ML frameworks. A certain amount of tolerance is also required, in particular for processes that may take longer such as model training.</p>

<p>If you look at <a data-type="xref" href="#fig7-3">Figure 7-3</a>, you will see an example of a serverless-driven architecture for machine learning for classification and prediction. The process starts with a trigger to get an inference of a group of objects from a trained model. This starts 
<span class="keep-together">a sequence</span> of asynchronous functions that run in parallel, used to predict the class of the object based on its characteristics and return the classification as output. The 
<span class="keep-together">tolerance</span> we expect is that one of these functions may fail or not complete the task in time. However, those are all independent workloads. It’s important to have workloads that can run in parallel without a specific order so any failure to a single function is not affecting the whole system.  In addition, the autoscaling component of the 
<span class="keep-together">serverless</span> architecture will make sure that any high data load will be processed faster on demand than with <a data-type="indexterm" data-primary="serverless computing" data-secondary="data" data-startref="servdata" id="idm45261443095472"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="AI and" data-startref="servAI" id="idm45261443094224"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="machine learning and" data-startref="servML" id="idm45261443093008"/><a data-type="indexterm" data-primary="AI (artificial intelligence)" data-secondary="serverless computing" data-startref="AIserv" id="idm45261443091792"/><a data-type="indexterm" data-primary="ML (machine learning)" data-secondary="serverless computing" data-startref="MLserv" id="idm45261443090608"/><a data-type="indexterm" data-primary="data, serverless computing" data-startref="dataserv" id="idm45261443089392"/>traditional approaches.</p>

<figure><div id="fig7-3" class="figure">
<img src="Images/moej_0703.png" alt="Machine learning with serverless" width="600" height="199"/>
<h6><span class="label">Figure 7-3. </span>Machine Learning with serverless</h6>
</div></figure>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Use Cases: Edge Computing and IoT"><div class="sect1" id="idm45261443086368">
<h1>Use Cases: Edge Computing and IoT</h1>

<p>Edge and IoT devices are everywhere. From <a data-type="indexterm" data-primary="serverless computing" data-secondary="Edge computing" id="idm45261443084992"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="IoT" id="idm45261443084144"/><a data-type="indexterm" data-primary="Edge computing" id="idm45261443083296"/><a data-type="indexterm" data-primary="IoT (Internet of Things), serverless computing and" id="idm45261443082688"/>vocal assistants to home automation, nowadays nearly every item in our house can be connected to the internet, talking to some controller application. As a developer, you may be responsible for either the backend logic or the device application logic.</p>

<p>An example of this scenario for Java developers comes from the <a href="https://oreil.ly/0Lmiu">Quarkus for IoT</a> project, which aims to collect pollution data from sensors with <a href="https://raspberrypi.org">Raspberry Pi devices</a> using Quarkus and containers both on the device and the server-side backend. The latter is running a serverless application to provide on-demand high scalability of the huge amount of sensor data that may come in some bursty way.</p>

<p>The project also offers a very good reference on how IoT architectures should be implemented on top of Red Hat OpenShift, as shown in <a data-type="xref" href="#fig7-4">Figure 7-4</a>.</p>

<figure><div id="fig7-4" class="figure">
<img src="Images/moej_0704.png" alt="Quarkus for IoT project architecture" width="600" height="236"/>
<h6><span class="label">Figure 7-4. </span>Quarkus for IoT project architecture</h6>
</div></figure>

<p class="pagebreak-before less_space">Serverless is used to scale up Quarkus microservices from device messages using the MQTT protocol for data ingestion, with Kafka streams used in the architecture as well as for data collectors. This makes the architecture complete and reliable, but also cost-efficient as there’s no allocation of resources until they are needed.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Knative: Serverless for Kubernetes"><div class="sect1" id="idm45261443074944">
<h1>Knative: Serverless for Kubernetes</h1>

<p>Serverless can be considered the engine of <a data-type="indexterm" data-primary="serverless computing" data-secondary="Kubernetes, Knative" id="servKubKnav"/><a data-type="indexterm" data-primary="Kubernetes" data-secondary="serverless computing, Knative" id="KubservKna"/><a data-type="indexterm" data-primary="Knative" id="idm45261443070512"/><a data-type="indexterm" data-primary="Kubernetes" data-secondary="Knative" id="KubKnav"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="serverless computing" id="idm45261443068624"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="FaaS (functions-as-a-service)" id="idm45261443067664"/>functions as a service (FaaS), which is a more convenient way for developers to package and deploy apps. Often, particularly with public clouds, serverless and  FaaS fit together, since packaging apps in containers is also automated. However, a scale-to-zero app is not necessarily a function. As we discussed, serverless is not just a prerogative of public clouds. For instance, anyone can also adopt this model on any Kubernetes cluster thanks to an open source project called <a href="https://knative.dev">Knative</a>.</p>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>We will discuss FaaS in more detail later in this chapter.</p>
</div>

<p>Knative enables serverless on Kubernetes, supporting event-driven scale-to-zero applications.  It provides a higher level of abstraction for common app use cases.</p>
<div data-type="tip"><h6>Tip</h6>
<p>Knative can easily be installed on Kubernetes through an Operator from <a href="https://oreil.ly/ni1wkr">OperatorHub.io</a>.</p>
</div>

<p>There are two main components in Knative:</p>
<dl>
<dt>Knative Serving</dt>
<dd>
<p>Takes care of scale-to-zero, creating <a data-type="indexterm" data-primary="Knative" data-secondary="Services" id="idm45261443059568"/>all Kubernetes resources needed (e.g., Pod, Deployment, Service, Ingress)</p>
</dd>
<dt>Knative Eventing</dt>
<dd>
<p>A subscription, delivery, <a data-type="indexterm" data-primary="Knative" data-secondary="Eventing" id="idm45261443057040"/>and management component for handling events on-cluster and off-cluster (e.g., Kafka messages, external 
<span class="keep-together">services</span>)</p>
</dd>
</dl>

<p>It’s easy to make an app serverless in Kubernetes with Knative.
An example of a 
<span class="keep-together">Knative</span> Service for the Inventory Quarkus microservice that you created in <a data-type="xref" href="ch02.xhtml#changing_technologies">Chapter 2</a> follows.</p>

<p class="pagebreak-before less_space">You can also find the example in this <a href="https://oreil.ly/kyQfu">book’s GitHub repository</a>:</p>

<pre data-type="programlisting" data-code-language="yaml"><code class="nt">apiVersion</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">serving.knative.dev/v1</code><code>
</code><code class="nt">kind</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">Service</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO1-1" href="#callout_tomorrow_s_solutions__serverless_CO1-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="nt">metadata</code><code class="p">:</code><code>
</code><code> </code><code class="nt">name</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">inventory-svc</code><code>
</code><code class="nt">spec</code><code class="p">:</code><code>
</code><code> </code><code class="nt">template</code><code class="p">:</code><code>
</code><code>   </code><code class="nt">spec</code><code class="p">:</code><code>
</code><code>     </code><code class="nt">containers</code><code class="p">:</code><code>
</code><code>       </code><code class="p-Indicator">-</code><code> </code><code class="nt">image</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">docker.io/modernizingjavaappsbook/inventory-quarkus:latest</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO1-2" href="#callout_tomorrow_s_solutions__serverless_CO1-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>         </code><code class="nt">ports</code><code class="p">:</code><code>
</code><code>          </code><code class="p-Indicator">-</code><code> </code><code class="nt">containerPort</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">8080</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO1-1" href="#co_tomorrow_s_solutions__serverless_CO1-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>This is the definition of Knative Service, a Custom Resource representing a serverless workload on Kubernetes.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO1-2" href="#co_tomorrow_s_solutions__serverless_CO1-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>It is using the same container image we used for the Deployment object. With Knative Service, a Deployment and a Service are automatically created for you.</p></dd>
</dl>

<p>To create a serverless version for the Inventory microservice, you can create a Knative Service object with the following command:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl create -f kubernetes/ksvc.yaml</pre>
<div data-type="tip"><h6>Tip</h6>
<p>Knative also provides a <a data-type="indexterm" data-primary="Knative" data-secondary="kn CLI" id="idm45261443002672"/>convenient CLI called <code>kn</code> to create Knative Services and manage all Knative serverless components. You can find more info about it in the <a href="https://oreil.ly/vDtU2">official documentation</a>.</p>
</div>

<p>Immediately, you can verify that a new Knative Service has been created with this command:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl get ksvc</pre>

<p>You should get output similar to the following:</p>

<pre data-type="programlisting" data-code-language="bash">NAME           URL                                                  ↳
LATESTCREATED        LATESTREADY          READY  REASON
inventory-svc  http://inventory-svc.coolstore.192.168.39.69.nip.io↳
  inventory-svc-00001  inventory-svc-00001  True</pre>

<p>As you can see, all of the Kubernetes manifests, such as Pod, Deployment, and Service, have been created <a data-type="indexterm" data-primary="Knative" data-secondary="Services" id="idm45261442929904"/>automatically from the Knative Service. There’s no need to maintain them in this case, since you can rely on a single object that controls deployment and networking:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl get deploy,pod,svc</pre>

<pre data-type="programlisting" data-code-language="bash">NAME                                            READY  UP-TO-DATE  AVAILABLE  AGE
deployment.apps/inventory-svc-00001-deployment  1/1    <code class="m">1</code>           <code class="m">1</code>          58m

NAME                                            READY  STATUS   RESTARTS  AGE
pod/inventory-svc-00001-deployment-58...8-8lh9b 2/2    Running  <code class="m">0</code>         13s

NAME                                 TYPE          CLUSTER-IP     EXTERNAL-IP
service/inventory-svc                ExternalName  &lt;none&gt;         ↳
kourier-internal.kourier-system.svc.cluster.local  80/TCP         58m
service/inventory-svc-00001          ClusterIP     10.109.47.140  &lt;none&gt;
service/inventory-svc-00001-private  ClusterIP     10.101.59.10   &lt;none&gt;</pre>

<p>Under the hood, the traffic to a Knative Service is routed into the cluster through the Knative networking. Invoking the Inventory microservice will also trigger the Pod creation if the application is idling:</p>

<pre data-type="programlisting" data-code-language="bash">curl http://inventory-svc.coolstore.192.168.39.69.nip.io/api/inventory/329299</pre>

<p>You should get output similar to the following:</p>

<pre data-type="programlisting" data-code-language="json"><code class="p">{</code><code class="nt">"id"</code><code class="p">:</code><code class="s2">"329299"</code><code class="p">,</code><code class="nt">"quantity"</code><code class="p">:</code><code class="mi">35</code><code class="p">}</code></pre>

<p>After a certain amount of time with no new <a data-type="indexterm" data-primary="serverless computing" data-secondary="Kubernetes, Knative" data-startref="servKubKnav" id="idm45261442870400"/><a data-type="indexterm" data-primary="Kubernetes" data-secondary="serverless computing, Knative" data-startref="KubservKna" id="idm45261442869392"/><a data-type="indexterm" data-primary="Kubernetes" data-secondary="Knative" data-startref="KubKnav" id="idm45261442868160"/>requests, the scale-to-zero model applies and the Pod number is scaled down to zero:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl get deploy
NAME                            READY  UP-TO-DATE  AVAILABLE  AGE
inventory-svc-00001-deployment  0/0    <code class="m">0</code>           <code class="m">0</code>          75m</pre>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Event-Driven Serverless Architectures"><div class="sect1" id="idm45261443074000">
<h1>Event-Driven Serverless Architectures</h1>

<p>Events are everywhere. As we discussed <a data-type="indexterm" data-primary="serverless computing" data-secondary="event-driven" id="less_event"/><a data-type="indexterm" data-primary="EDA (event-driven architecture)" data-secondary="serverless computing" id="eventserverless"/><a data-type="indexterm" data-primary="event-driven architecture (EDA)" data-secondary="serverless computing" id="evntserverless"/>in the previous section, an HTTP request can trigger the start of an application that can be idling when not used, which is consistent with the serverless execution model represented in <a data-type="xref" href="#fig7-1">Figure 7-1</a>. But there are plenty of events out there, such as a Kafka message, a database stream, or any event from Kubernetes, that an application may want to subscribe to.</p>

<p>A popular pattern in this scenario is the <a href="https://oreil.ly/ThcHL">publish-subscribe messaging pattern</a> where many senders can send messages to an entity on the server, often called a topic, and receivers can subscribe to said topic to get messages. According to the serverless model, your application can be registered and connected to process incoming events.
One example for Kubernetes is the <a href="https://oreil.ly/NF2gB">Knative Eventing</a> component, which implements <a href="https://cloudevents.io">CloudEvents</a>, a specification for describing event data from multiple protocols and formats (such as Kafka, AMQP, and MQTT) <a href="https://oreil.ly/oGI1q">in a common way</a>.</p>

<p>With Knative Eventing, event producers <a data-type="indexterm" data-primary="Knative" data-secondary="Eventing" id="idm45261442798784"/>and event consumers are independent. A Knative Service is triggered by a source of events through a broker, as you can see in <a data-type="xref" href="#fig7-5">Figure 7-5</a>.  The goal of the eventing framework is to decouple everything. The sender doesn’t directly call the subscriber or even know how many subscribers there are. Instead, brokers and triggers handle the communication.</p>

<figure><div id="fig7-5" class="figure">
<img src="Images/moej_0705.png" alt="Knative eventing architecture" width="600" height="202"/>
<h6><span class="label">Figure 7-5. </span>Knative Eventing architecture</h6>
</div></figure>

<p>Rather than relying on the inbound request cascading through all the microservices, you could use an arbitrary HTTP event as an example of an event to wake up the Inventory service.</p>

<p>First, we need to create a <a data-type="indexterm" data-primary="Knative" data-secondary="Broker" id="idm45261442793440"/>Knative Broker. An example of a Knative Broker for the Inventory Quarkus microservice that we created in <a data-type="xref" href="ch02.xhtml#changing_technologies">Chapter 2</a> is listed below, which you can also find in this <a href="https://oreil.ly/8Gwys">book’s GitHub repository</a>:</p>

<pre data-type="programlisting" data-code-language="yaml"><code class="nt">apiVersion</code><code class="p">:</code> <code class="l-Scalar-Plain">eventing.knative.dev/v1</code>
<code class="nt">kind</code><code class="p">:</code> <code class="l-Scalar-Plain">Broker</code>
<code class="nt">metadata</code><code class="p">:</code>
 <code class="nt">name</code><code class="p">:</code> <code class="l-Scalar-Plain">default</code>
 <code class="nt">namespace</code><code class="p">:</code> <code class="l-Scalar-Plain">coolstore</code></pre>

<p>Create the Broker:</p>

<pre data-type="programlisting" data-code-language="bash"> kubectl create -f kubernetes/kbroker.yaml</pre>

<p>You should get output similar to the following:</p>

<pre data-type="programlisting" data-code-language="bash">NAME     URL   AGE  READY  REASON
default  http://broker-ingress.knative-eventing...coolstore/default ↳
 11s  True</pre>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p>We are using the internal Kubernetes networking for this part, so any endpoint we are using is a Kubernetes Service in the fully qualified domain name (FQDN) format accessible only within the cluster.</p>
</div>

<p>Now let’s create a Trigger to wake up the Inventory microservice. It can be any event compliant with the CloudEvents specification. In this case, you can use an HTTP request from another Pod.</p>

<p class="pagebreak-before less_space">An example of a Knative Trigger for <a data-type="indexterm" data-primary="Knative" data-secondary="Trigger" id="idm45261442756576"/>the Inventory Quarkus microservice that you created in <a data-type="xref" href="ch02.xhtml#changing_technologies">Chapter 2</a> follows; you can find it in this <a href="https://oreil.ly/GmG6r">book’s GitHub repository</a>:</p>

<pre data-type="programlisting" data-code-language="yaml"><code class="nt">apiVersion</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">eventing.knative.dev/v1</code><code>
</code><code class="nt">kind</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">Trigger</code><code>
</code><code class="nt">metadata</code><code class="p">:</code><code>
</code><code>  </code><code class="nt">name</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">inventory-trigger</code><code>
</code><code class="nt">spec</code><code class="p">:</code><code>
</code><code>  </code><code class="nt">broker</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">default</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO2-1" href="#callout_tomorrow_s_solutions__serverless_CO2-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>  </code><code class="nt">filter</code><code class="p">:</code><code>
</code><code>    </code><code class="nt">attributes</code><code class="p">:</code><code>
</code><code>      </code><code class="nt">type</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">web-wakeup</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO2-2" href="#callout_tomorrow_s_solutions__serverless_CO2-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>  </code><code class="nt">subscriber</code><code class="p">:</code><code>
</code><code>    </code><code class="nt">ref</code><code class="p">:</code><code>
</code><code>     </code><code class="nt">apiVersion</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">serving.knative.dev/v1</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO2-3" href="#callout_tomorrow_s_solutions__serverless_CO2-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>     </code><code class="nt">kind</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">Service</code><code>
</code><code>     </code><code class="nt">name</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">inventory</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO2-1" href="#co_tomorrow_s_solutions__serverless_CO2-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Name of the Broker.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO2-2" href="#co_tomorrow_s_solutions__serverless_CO2-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Attribute type. This can be used to filter which event to wake up.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO2-3" href="#co_tomorrow_s_solutions__serverless_CO2-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Name of the Knative Service to connect to and wake up to field the event.</p></dd>
</dl>

<p>Let’s create the Knative Trigger as follows:</p>

<pre data-type="programlisting" data-code-language="bash"> kubectl create -f kubernetes/ktrigger.yaml</pre>

<p>You should get output similar to the following:</p>

<pre data-type="programlisting" data-code-language="bash">NAME               BROKER   SUBSCRIBER_URI  AGE  READY  REASON
inventory-trigger  default  http://inventory.coolstore...local/  10s  True</pre>

<p>Now you can simulate an external event that can wake up your microservice. In this case, it’s a simple HTTP call, but it can also be something like a database stream with Debezium or a Kafka message.</p>
<div data-type="tip"><h6>Tip</h6>
<p><a href="https://debezium.io">Debezium.io</a> is an open source data capture platform that enables streaming from popular databases such as PostgreSQL, MySQL, etc. Check out the <a href="https://oreil.ly/bFEJi">online documentation</a> to learn more.</p>
</div>

<p>Run this command to download a minimal container image containing the <code>curl</code> command to run directly on Kubernetes as a Pod, sending an HTTP <code>POST</code> to the 
<span class="keep-together">Knative</span> Broker to trigger the microservice start:</p>

<pre data-type="programlisting" data-code-language="bash"><code>kubectl</code><code> </code><code>run</code><code> </code><code>curl</code><code> </code><code>--image</code><code class="o">=</code><code>radial/busyboxplus:curl</code><code> </code><code>-ti</code><code> </code><code>--↳</code><code>
</code><code>curl</code><code> </code><code>-v</code><code> </code><code class="s2">"http://broker-ingress.knative-eventing.svc.cluster.local/
  coolstore/default"</code><code>
  </code><code>-X</code><code> </code><code>POST</code><code> </code><code class="se">\
</code><code>  </code><code>-H</code><code> </code><code class="s2">"Ce-Id: wakeup"</code><code> </code><code class="se">\
</code><code>  </code><code>-H</code><code> </code><code class="s2">"Ce-Specversion: 1.0"</code><code> </code><code class="se">\
</code><code>  </code><code>-H</code><code> </code><code class="s2">"Ce-Type: web-wakeup"</code><code> </code><code class="se">\ </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO3-1" href="#callout_tomorrow_s_solutions__serverless_CO3-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
  </code><code>-H</code><code> </code><code class="s2">"Ce-Source: web-coolstore"</code><code> </code><code class="se">\ </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO3-2" href="#callout_tomorrow_s_solutions__serverless_CO3-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
  </code><code>-H</code><code> </code><code class="s2">"Content-Type: application/json"</code><code>
  </code><code>-d</code><code> </code><code class="s2">""</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO3-1" href="#co_tomorrow_s_solutions__serverless_CO3-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>The attribute we defined in the Knative Broker before.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO3-2" href="#co_tomorrow_s_solutions__serverless_CO3-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>A name for the event.</p></dd>
</dl>

<p>You should get output similar to the following:</p>

<pre data-type="programlisting" data-code-language="bash">&gt; POST /coolstore/default HTTP/1.1
&gt; User-Agent: curl/7.35.0
&gt; Host: broker-ingress.knative-eventing.svc.cluster.local
&gt; Accept: */*
&gt; Ce-Id: wakeup
&gt; Ce-Specversion: 1.0
&gt; Ce-Type: web-wakeup
&gt; Ce-Source: web-coolstore
&gt; Content-Type: application/json
&gt;
&lt; HTTP/1.1 <code class="m">202</code> Accepted
&lt; Date: Wed, <code class="m">16</code> Jun <code class="m">2021</code> 11:03:31 GMT
&lt; Content-Length: 0
&lt;</pre>

<p>You should now see the Inventory Pod has been <a data-type="indexterm" data-primary="serverless computing" data-secondary="event-driven" data-startref="less_event" id="idm45261442513312"/><a data-type="indexterm" data-primary="EDA (event-driven architecture)" data-secondary="serverless computing" data-startref="eventserverless" id="idm45261442512224"/><a data-type="indexterm" data-primary="event-driven architecture (EDA)" data-secondary="serverless computing" data-startref="evntserverless" id="idm45261442483120"/>started:</p>

<pre data-type="programlisting" data-code-language="bash">NAME                                             READY  STATUS   RESTARTS  AGE
curl                                             1/1    Running  <code class="m">1</code>         30m
inventory-svc-00001-deployment-58485ffb58-kpgdt  1/2    Running  <code class="m">0</code>         7s</pre>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Function as a Service for Java Applications"><div class="sect1" id="idm45261442865712">
<h1>Function as a Service for Java Applications</h1>

<p>We previously discussed how Knative Serving <a data-type="indexterm" data-primary="Java" data-secondary="FaaS (functions-as-a-service)" id="Javafaas"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="Java" id="faasjava"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="FaaS (functions-as-a-service)" id="servlessfaas"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="serverless computing" id="faasservless"/>helps to reduce the complexity of maintaining multiple Kubernetes objects, and how scale-to-zero helps optimize resource usage by scaling down and scaling up applications on demand when needed. But there is another layer of abstraction that helps with automatically building and deploying the application following the serverless model: the FaaS model, which we introduced earlier.</p>

<p>FaaS is an event-driven computing execution model where developers write apps that are automatically deployed in containers fully managed by a platform, then executed on demand following the scale-to-zero model. As a developer, you don’t have to write anything like a Kubernetes manifest with this model.  You can simply write the application logic and let the platform package the application as a container and deploy it on the cluster as a scale-to-zero serverless app.</p>

<p>Popular public cloud serverless solutions such as AWS Lambda, Azure Functions, or Google Cloud Run provide a convenient SDK to start developing functions written in the most popular programming languages, to be packaged and deployed in the FaaS model. There are also open source solutions available, such as <a href="https://openwhisk.apache.org">Apache OpenWhisk</a> or <a href="https://fnproject.io">Fn project</a>, that implement FaaS with Docker. In the following sections, we will focus on Knative and Kubernetes, as we have discussed throughout the book how Kubernetes provides a complete ecosystem for easing the migration of Java enterprise applications to the cloud native 
<span class="keep-together">paradigm</span>.</p>








<section data-type="sect2" data-pdf-bookmark="Functions Deployment for Java Applications"><div class="sect2" id="idm45261442475104">
<h2>Functions Deployment for Java Applications</h2>

<p>Functions are a piece of code delivered according <a data-type="indexterm" data-primary="Java" data-secondary="FaaS (functions-as-a-service)" data-tertiary="functions deployment" id="idm45261442473648"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="Java" data-tertiary="functions deployment" id="idm45261442472384"/>to the serverless model and are portable between different infrastructure configurations. The life cycle of a function is described in <a data-type="xref" href="#fig7-6">Figure 7-6</a> starting with code writing, as well as specification and metadata. The building phase automatically happens afterward, and the deployment publishes the function in the platform. This enables a mechanism of updates that will trigger a new build and a new publish when a new change is needed.</p>

<figure><div id="fig7-6" class="figure">
<img src="Images/moej_0706.png" alt="Functions deployment model" width="600" height="176"/>
<h6><span class="label">Figure 7-6. </span>Functions deployment model</h6>
</div></figure>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Boson Function CLI (func)"><div class="sect2" id="idm45261442418880">
<h2>Boson Function CLI (func)</h2>

<p><a href="https://oreil.ly/lKYKc">Boson Function CLI</a> is an open source CLI and framework that connects to Knative to <a data-type="indexterm" data-primary="Java" data-secondary="FaaS (functions-as-a-service)" data-tertiary="Boson function CLI" id="idm45261442415872"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="Java" data-tertiary="Boson function CLI" id="idm45261442414560"/><a data-type="indexterm" data-primary="Boson function CLI" id="idm45261442413328"/>provide FaaS capabilities to Kubernetes. With this tool, you can avoid writing Kubernetes manifests and building the container image yourself, as it will be done automatically:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>func
...
Available Commands:
 build      Build a <code class="k">function</code> project as a container image
 completion Generate completion scripts <code class="k">for</code> bash, fish, and zsh
 create     Create a <code class="k">function</code> project
 delete     Undeploy a <code class="k">function</code>
 deploy     Deploy a <code class="k">function</code>
 describe   Show details of a <code class="k">function</code>
 emit       Emit a CloudEvent to a <code class="k">function</code> endpoint
 <code class="nb">help       </code>Help about any <code class="nb">command</code>
<code class="nb"> </code>list       List functions
 run        Run the <code class="k">function</code> locally
 version    Show the version
 ...</pre>
<div data-type="tip"><h6>Tip</h6>
<p>You can download the latest <code>func</code> CLI from the <a href="https://oreil.ly/d6oXo">official website</a> and configure it to your system.</p>
</div>

<p>Functions can be deployed to any Kubernetes cluster that has been configured to support serverless workloads, such as with Knative.</p>

<p>Currently, <code>func</code> CLI supports these programming languages and frameworks:</p>

<ul>
<li>
<p>Golang</p>
</li>
<li>
<p>Node.js</p>
</li>
<li>
<p>Python</p>
</li>
<li>
<p>Quarkus</p>
</li>
<li>
<p>Rust</p>
</li>
</ul>

<p>Let’s create a Quarkus function <a data-type="indexterm" data-primary="Java" data-secondary="FaaS (functions-as-a-service)" data-tertiary="Quarkus function" id="idm45261442390544"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="Java" data-tertiary="Quarkus function" id="idm45261442389232"/><a data-type="indexterm" data-primary="Quarkus function" id="idm45261442388000"/>inside the <code>coolstore</code> namespace that you created in the previous sections. You can also find this function in this <a href="https://oreil.ly/M3yPE">book’s GitHub repository</a>.</p>

<p>To create a new Quarkus function, run this command specifying the <code>-l</code> option to select the language as follows:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>func create -l quarkus quarkus-faas</pre>

<p>You should get a similar output:</p>

<pre data-type="programlisting" data-code-language="bash">Project path: /home/bluesman/git/quarkus-faas
Function name: quarkus-faas
Runtime: quarkus
Trigger: http</pre>

<p>This created a skeleton of a Maven project for Quarkus, with a POM file containing all dependencies needed:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code><code>tree</code><code>
</code><code>.</code><code>
</code><code>├──</code><code> </code><code>func.yaml</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO4-1" href="#callout_tomorrow_s_solutions__serverless_CO4-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>├──</code><code> </code><code>mvnw</code><code>
</code><code>├──</code><code> </code><code>mvnw.cmd</code><code>
</code><code>├──</code><code> </code><code>pom.xml</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO4-2" href="#callout_tomorrow_s_solutions__serverless_CO4-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>├──</code><code> </code><code>README.md</code><code>
</code><code>└──</code><code> </code><code>src</code><code>
   </code><code>├──</code><code> </code><code>main</code><code>
   </code><code>│</code><code>   </code><code>├──</code><code> </code><code>java</code><code>
   </code><code>│</code><code>   </code><code>│</code><code>   </code><code>└──</code><code> </code><code>functions</code><code>
   </code><code>│</code><code>   </code><code>│</code><code>       </code><code>├──</code><code> </code><code>Function.java</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO4-3" href="#callout_tomorrow_s_solutions__serverless_CO4-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
   </code><code>│</code><code>   </code><code>│</code><code>       </code><code>├──</code><code> </code><code>Input.java</code><code>
   </code><code>│</code><code>   </code><code>│</code><code>       </code><code>└──</code><code> </code><code>Output.java</code><code>
   </code><code>│</code><code>   </code><code>└──</code><code> </code><code>resources</code><code>
   </code><code>│</code><code>       </code><code>└──</code><code> </code><code>application.properties</code><code>
   </code><code>└──</code><code> </code><code class="nb">test</code><code>
       </code><code>└──</code><code> </code><code>java</code><code>
           </code><code>└──</code><code> </code><code>functions</code><code>
               </code><code>├──</code><code> </code><code>FunctionTest.java</code><code>
               </code><code>└──</code><code> </code><code>NativeFunctionIT.java</code><code>
</code><code class="m">8</code><code> </code><code>directories,</code><code> </code><code class="m">11</code><code> </code><code>files</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO4-1" href="#co_tomorrow_s_solutions__serverless_CO4-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>This is the file containing configuration information for your function project.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO4-2" href="#co_tomorrow_s_solutions__serverless_CO4-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>The POM file for this Quarkus project.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO4-3" href="#co_tomorrow_s_solutions__serverless_CO4-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>The Java class containing annotations and code to run the function.</p></dd>
</dl>

<p>Let’s add some content for the <code>func.yaml</code> function’s configuration file to transform your function into a runnable container image on Kubernetes:</p>

<pre data-type="programlisting" data-code-language="yaml"><code class="nt">name</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">quarkus-faas</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-1" href="#callout_tomorrow_s_solutions__serverless_CO5-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="nt">namespace</code><code class="p">:</code><code> </code><code class="s">"</code><code class="s">coolstore</code><code class="s">"</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-2" href="#callout_tomorrow_s_solutions__serverless_CO5-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code class="nt">runtime</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">quarkus</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-3" href="#callout_tomorrow_s_solutions__serverless_CO5-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code class="nt">image</code><code class="p">:</code><code> </code><code class="s">"</code><code class="s">docker.io/modernizingjavaappsbook/quarkus-faas:latest</code><code class="s">"</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-4" href="#callout_tomorrow_s_solutions__serverless_CO5-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code class="nt">imageDigest</code><code class="p">:</code><code> </code><code class="s">"</code><code class="s">"</code><code>
</code><code class="nt">trigger</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">http</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-5" href="#callout_tomorrow_s_solutions__serverless_CO5-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code class="nt">builder</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">quay.io/boson/faas-quarkus-jvm-builder</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-6" href="#callout_tomorrow_s_solutions__serverless_CO5-6"><img src="Images/6.png" alt="6" width="12" height="12"/></a><code>
</code><code class="nt">builderMap</code><code class="p">:</code><code>
</code><code> </code><code class="nt">default</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">quay.io/boson/faas-quarkus-jvm-builder</code><code>
</code><code> </code><code class="nt">jvm</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">quay.io/boson/faas-quarkus-jvm-builder</code><code>
</code><code> </code><code class="nt">native</code><code class="p">:</code><code> </code><code class="l-Scalar-Plain">quay.io/boson/faas-quarkus-native-builder</code><code>
</code><code class="nt">env</code><code class="p">:</code><code> </code><code class="p-Indicator">{</code><code class="p-Indicator">}</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-7" href="#callout_tomorrow_s_solutions__serverless_CO5-7"><img src="Images/7.png" alt="7" width="12" height="12"/></a><code>
</code><code class="nt">annotations</code><code class="p">:</code><code> </code><code class="p-Indicator">{</code><code class="p-Indicator">}</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO5-8" href="#callout_tomorrow_s_solutions__serverless_CO5-8"><img src="Images/8.png" alt="8" width="12" height="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-1" href="#co_tomorrow_s_solutions__serverless_CO5-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Name of the function.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-2" href="#co_tomorrow_s_solutions__serverless_CO5-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>The Kubernetes namespace where your function will be deployed.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-3" href="#co_tomorrow_s_solutions__serverless_CO5-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>The language runtime for your function declared at creation time.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-4" href="#co_tomorrow_s_solutions__serverless_CO5-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>This is the image name for your function after it has been built.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-5" href="#co_tomorrow_s_solutions__serverless_CO5-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a></dt>
<dd><p>The invocation event that triggers your function. For example, <code>http</code> for plain HTTP requests such as in this case, or <code>event</code> for CloudEvent-triggered functions.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-6" href="#co_tomorrow_s_solutions__serverless_CO5-6"><img src="Images/6.png" alt="6" width="12" height="12"/></a></dt>
<dd><p>Specifies the buildpack builder image to use when building the function.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-7" href="#co_tomorrow_s_solutions__serverless_CO5-7"><img src="Images/7.png" alt="7" width="12" height="12"/></a></dt>
<dd><p>Reference to any environment variables that will be available to your function at runtime.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO5-8" href="#co_tomorrow_s_solutions__serverless_CO5-8"><img src="Images/8.png" alt="8" width="12" height="12"/></a></dt>
<dd><p>Annotations for the function to be used to tag items.</p></dd>
</dl>
<div data-type="tip"><h6>Tip</h6>
<p><code>func</code> builds functions and transforms them in container images with <a href="https://buildpacks.io">Buildpack</a>, a popular open source project used to build source code into a runnable application container image.</p>
</div>

<p>Let’s review the POM file:</p>

<pre data-type="programlisting" data-code-language="xml"><code class="cp">&lt;?xml version="1.0"?&gt;</code><code>
</code><code class="nt">&lt;project</code><code> </code><code class="na">xsi:schemaLocation=</code><code class="s">"http://maven.apache.org/POM/4.0.0↳
 https://maven.apache.org/xsd/maven-4.0.0.xsd"</code><code> </code><code class="err">↳</code><code>
</code><code class="na">xmlns=</code><code class="s">"http://maven.apache.org/POM/4.0.0"</code><code class="err">↳</code><code>
   </code><code class="na">xmlns:xsi=</code><code class="s">"http://www.w3.org/2001/XMLSchema-instance"</code><code class="nt">&gt;</code><code>
 </code><code class="nt">&lt;modelVersion</code><code class="nt">&gt;</code><code>4.0.0</code><code class="nt">&lt;/modelVersion&gt;</code><code>
 </code><code class="nt">&lt;groupId</code><code class="nt">&gt;</code><code>org.acme</code><code class="nt">&lt;/groupId&gt;</code><code>
 </code><code class="nt">&lt;artifactId</code><code class="nt">&gt;</code><code>function</code><code class="nt">&lt;/artifactId&gt;</code><code>
 </code><code class="nt">&lt;version</code><code class="nt">&gt;</code><code>1.0.0-SNAPSHOT</code><code class="nt">&lt;/version&gt;</code><code>
 </code><code class="nt">&lt;properties</code><code class="nt">&gt;</code><code>
   </code><code class="nt">&lt;compiler-plugin.version</code><code class="nt">&gt;</code><code>3.8.1</code><code class="nt">&lt;/compiler-plugin.version&gt;</code><code>
   </code><code class="nt">&lt;maven.compiler.parameters</code><code class="nt">&gt;</code><code>true</code><code class="nt">&lt;/maven.compiler.parameters&gt;</code><code>
   </code><code class="nt">&lt;maven.compiler.source</code><code class="nt">&gt;</code><code>1.8</code><code class="nt">&lt;/maven.compiler.source&gt;</code><code>
   </code><code class="nt">&lt;maven.compiler.target</code><code class="nt">&gt;</code><code>1.8</code><code class="nt">&lt;/maven.compiler.target&gt;</code><code>
   </code><code class="nt">&lt;project.build.sourceEncoding</code><code class="nt">&gt;</code><code>UTF-8</code><code class="nt">&lt;/project.build.sourceEncoding&gt;</code><code>
   </code><code class="nt">&lt;project.reporting.outputEncoding</code><code class="nt">&gt;</code><code>UTF-8</code><code class="nt">&lt;/project.reporting.outputEncoding&gt;</code><code>
   </code><code class="nt">&lt;quarkus-plugin.version</code><code class="nt">&gt;</code><code>1.13.0.Final</code><code class="nt">&lt;/quarkus-plugin.version&gt;</code><code>
   </code><code class="nt">&lt;quarkus.platform.artifact-id</code><code class="nt">&gt;</code><code>quarkus-universe-bom</code><code class="err">&lt;</code><code>/quarkus.platform.
    artifact-id&gt;
   </code><code class="nt">&lt;quarkus.platform.group-id</code><code class="nt">&gt;</code><code>io.quarkus</code><code class="nt">&lt;/quarkus.platform.group-id&gt;</code><code>
   </code><code class="nt">&lt;quarkus.platform.version</code><code class="nt">&gt;</code><code>1.13.0.Final</code><code class="nt">&lt;/quarkus.platform.version&gt;</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO6-1" href="#callout_tomorrow_s_solutions__serverless_CO6-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
   </code><code class="nt">&lt;surefire-plugin.version</code><code class="nt">&gt;</code><code>3.0.0-M5</code><code class="nt">&lt;/surefire-plugin.version&gt;</code><code>
 </code><code class="nt">&lt;/properties&gt;</code><code>
 </code><code class="nt">&lt;dependencyManagement</code><code class="nt">&gt;</code><code>
   </code><code class="nt">&lt;dependencies</code><code class="nt">&gt;</code><code>
     </code><code class="nt">&lt;dependency</code><code class="nt">&gt;</code><code>
       </code><code class="nt">&lt;groupId</code><code class="nt">&gt;</code><code>${quarkus.platform.group-id}</code><code class="nt">&lt;/groupId&gt;</code><code>
       </code><code class="nt">&lt;artifactId</code><code class="nt">&gt;</code><code>${quarkus.platform.artifact-id}</code><code class="nt">&lt;/artifactId&gt;</code><code>
       </code><code class="nt">&lt;version</code><code class="nt">&gt;</code><code>${quarkus.platform.version}</code><code class="nt">&lt;/version&gt;</code><code>
       </code><code class="nt">&lt;type</code><code class="nt">&gt;</code><code>pom</code><code class="nt">&lt;/type&gt;</code><code>
       </code><code class="nt">&lt;scope</code><code class="nt">&gt;</code><code>import</code><code class="nt">&lt;/scope&gt;</code><code>
     </code><code class="nt">&lt;/dependency&gt;</code><code>
   </code><code class="nt">&lt;/dependencies&gt;</code><code>
 </code><code class="nt">&lt;/dependencyManagement&gt;</code><code>
 </code><code class="nt">&lt;dependencies</code><code class="nt">&gt;</code><code>
   </code><code class="nt">&lt;dependency</code><code class="nt">&gt;</code><code>
     </code><code class="nt">&lt;groupId</code><code class="nt">&gt;</code><code>io.quarkus</code><code class="nt">&lt;/groupId&gt;</code><code>
     </code><code class="nt">&lt;artifactId</code><code class="nt">&gt;</code><code>quarkus-funqy-knative-events</code><code class="nt">&lt;/artifactId&gt;</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO6-2" href="#callout_tomorrow_s_solutions__serverless_CO6-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
   </code><code class="nt">&lt;/dependency&gt;</code><code>
...
 </code><code class="nt">&lt;/dependencies&gt;</code><code>
...
 </code><code class="nt">&lt;profiles</code><code class="nt">&gt;</code><code>
   </code><code class="nt">&lt;profile</code><code class="nt">&gt;</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO6-3" href="#callout_tomorrow_s_solutions__serverless_CO6-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
     </code><code class="nt">&lt;id</code><code class="nt">&gt;</code><code>native</code><code class="nt">&lt;/id&gt;</code><code>
     </code><code class="nt">&lt;activation</code><code class="nt">&gt;</code><code>
       </code><code class="nt">&lt;property</code><code class="nt">&gt;</code><code>
         </code><code class="nt">&lt;name</code><code class="nt">&gt;</code><code>native</code><code class="nt">&lt;/name&gt;</code><code>
       </code><code class="nt">&lt;/property&gt;</code><code>
     </code><code class="nt">&lt;/activation&gt;</code><code>
     </code><code class="nt">&lt;build</code><code class="nt">&gt;</code><code>
       </code><code class="nt">&lt;plugins</code><code class="nt">&gt;</code><code>
         </code><code class="nt">&lt;plugin</code><code class="nt">&gt;</code><code>
           </code><code class="nt">&lt;artifactId</code><code class="nt">&gt;</code><code>maven-failsafe-plugin</code><code class="nt">&lt;/artifactId&gt;</code><code>
           </code><code class="nt">&lt;version</code><code class="nt">&gt;</code><code>${surefire-plugin.version}</code><code class="nt">&lt;/version&gt;</code><code>
           </code><code class="nt">&lt;executions</code><code class="nt">&gt;</code><code>
             </code><code class="nt">&lt;execution</code><code class="nt">&gt;</code><code>
               </code><code class="nt">&lt;goals</code><code class="nt">&gt;</code><code>
                 </code><code class="nt">&lt;goal</code><code class="nt">&gt;</code><code>integration-test</code><code class="nt">&lt;/goal&gt;</code><code>
                 </code><code class="nt">&lt;goal</code><code class="nt">&gt;</code><code>verify</code><code class="nt">&lt;/goal&gt;</code><code>
               </code><code class="nt">&lt;/goals&gt;</code><code>
               </code><code class="nt">&lt;configuration</code><code class="nt">&gt;</code><code>
                 </code><code class="nt">&lt;systemPropertyVariables</code><code class="nt">&gt;</code><code>
                   </code><code class="nt">&lt;native.image.path</code><code class="nt">&gt;</code><code>${project.build.directory}/${project.build.
                    finalName}↳
-runner</code><code class="nt">&lt;/native.image.path&gt;</code><code>
                   </code><code class="nt">&lt;java.util.logging.manager</code><code class="nt">&gt;</code><code>org.jboss.logmanager.LogManager↳
</code><code class="nt">&lt;/java.util.logging.manager&gt;</code><code>
                   </code><code class="nt">&lt;maven.home</code><code class="nt">&gt;</code><code>${maven.home}</code><code class="nt">&lt;/maven.home&gt;</code><code>
                 </code><code class="nt">&lt;/systemPropertyVariables&gt;</code><code>
               </code><code class="nt">&lt;/configuration&gt;</code><code>
             </code><code class="nt">&lt;/execution&gt;</code><code>
           </code><code class="nt">&lt;/executions&gt;</code><code>
         </code><code class="nt">&lt;/plugin&gt;</code><code>
       </code><code class="nt">&lt;/plugins&gt;</code><code>
     </code><code class="nt">&lt;/build&gt;</code><code>
     </code><code class="nt">&lt;properties</code><code class="nt">&gt;</code><code>
       </code><code class="nt">&lt;quarkus.package.type</code><code class="nt">&gt;</code><code>native</code><code class="nt">&lt;/quarkus.package.type&gt;</code><code>
     </code><code class="nt">&lt;/properties&gt;</code><code>
   </code><code class="nt">&lt;/profile&gt;</code><code>
 </code><code class="nt">&lt;/profiles&gt;</code><code>
</code><code class="nt">&lt;/project&gt;</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO6-1" href="#co_tomorrow_s_solutions__serverless_CO6-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Version of Quarkus</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO6-2" href="#co_tomorrow_s_solutions__serverless_CO6-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Quarkus Funqy dependency, a Java API for FaaS environments</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO6-3" href="#co_tomorrow_s_solutions__serverless_CO6-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Native profile for building Quarkus native applications</p></dd>
</dl>

<p><a href="https://oreil.ly/1CNPK">Quarkus Funqy</a> is part of Quarkus’s support for serverless workloads and aims <a data-type="indexterm" data-primary="Quarkus Funqy" id="idm45261441915584"/>to provide a portable Java API to write functions deployable to various FaaS environments, such as AWS Lambda, Azure Functions, Knative, and Knative Events (Cloud Events).
Funqy is an abstraction that spans multiple different FaaS providers and protocols. It is optimized for small workloads and faster execution while providing a simple framework with no overhead.</p>

<p>Let’s look at the source code of the Java function generated in the <code>src/main/java/functions/Function.java</code> path:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">functions</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">io.quarkus.funqy.Funq</code><code class="o">;</code><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">Function</code><code> </code><code class="o">{</code><code>
</code><code>   </code><code class="nd">@Funq</code><code> </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO7-1" href="#callout_tomorrow_s_solutions__serverless_CO7-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>   </code><code class="kd">public</code><code> </code><code class="n">Output</code><code> </code><code class="nf">function</code><code class="o">(</code><code class="n">Input</code><code> </code><code class="n">input</code><code class="o">)</code><code> </code><code class="o">{</code><code>  </code><a class="co" id="co_tomorrow_s_solutions__serverless_CO7-2" href="#callout_tomorrow_s_solutions__serverless_CO7-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>       </code><code class="k">return</code><code> </code><code class="k">new</code><code> </code><code class="nf">Output</code><code class="o">(</code><code class="n">input</code><code class="o">.</code><code class="na">getMessage</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code>
</code><code>   </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO7-1" href="#co_tomorrow_s_solutions__serverless_CO7-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>To enable a function, you simply need to annotate your method with the <code>@Funq</code> annotation that comes from Quarkus Funqy API.</p></dd>
<dt><a class="co" id="callout_tomorrow_s_solutions__serverless_CO7-2" href="#co_tomorrow_s_solutions__serverless_CO7-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Java classes can also be used as input and output. They must follow the JavaBean convention and have a default constructor. Here we are using <code>Input</code> and <code>Output</code> Beans.</p></dd>
</dl>

<p>Let’s look at the source code of the <code>Input</code> JavaBean generated in the <code>src/main/java/functions/Input.java</code> path that will be used to represent input messages to the function:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code> <code class="n">functions</code><code class="o">;</code>

<code class="kd">public</code> <code class="kd">class</code> <code class="nc">Input</code> <code class="o">{</code>
   <code class="kd">private</code> <code class="n">String</code> <code class="n">message</code><code class="o">;</code>

   <code class="kd">public</code> <code class="nf">Input</code><code class="o">()</code> <code class="o">{}</code>
   <code class="kd">public</code> <code class="nf">Input</code><code class="o">(</code><code class="n">String</code> <code class="n">message</code><code class="o">)</code> <code class="o">{</code>

       <code class="k">this</code><code class="o">.</code><code class="na">message</code> <code class="o">=</code> <code class="n">message</code><code class="o">;</code>
   <code class="o">}</code>
   <code class="kd">public</code> <code class="n">String</code> <code class="nf">getMessage</code><code class="o">()</code> <code class="o">{</code>
       <code class="k">return</code> <code class="n">message</code><code class="o">;</code>
   <code class="o">}</code>

   <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setMessage</code><code class="o">(</code><code class="n">String</code> <code class="n">message</code><code class="o">)</code> <code class="o">{</code>
       <code class="k">this</code><code class="o">.</code><code class="na">message</code> <code class="o">=</code> <code class="n">message</code><code class="o">;</code>
   <code class="o">}</code>
<code class="o">}</code></pre>

<p>And let’s have a look at the source code of the <code>Output</code> JavaBean generated in the <code>src/main/java/functions/Ouput.java</code> path:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code> <code class="n">functions</code><code class="o">;</code>

<code class="kd">public</code> <code class="kd">class</code> <code class="nc">Output</code> <code class="o">{</code>
   <code class="kd">private</code> <code class="n">String</code> <code class="n">message</code><code class="o">;</code>

   <code class="kd">public</code> <code class="nf">Output</code><code class="o">()</code> <code class="o">{}</code>

   <code class="kd">public</code> <code class="nf">Output</code><code class="o">(</code><code class="n">String</code> <code class="n">message</code><code class="o">)</code> <code class="o">{</code>
       <code class="k">this</code><code class="o">.</code><code class="na">message</code> <code class="o">=</code> <code class="n">message</code><code class="o">;</code>
   <code class="o">}</code>

   <code class="kd">public</code> <code class="n">String</code> <code class="nf">getMessage</code><code class="o">()</code> <code class="o">{</code>
       <code class="k">return</code> <code class="n">message</code><code class="o">;</code>
   <code class="o">}</code>

   <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setMessage</code><code class="o">(</code><code class="n">String</code> <code class="n">message</code><code class="o">)</code> <code class="o">{</code>
       <code class="k">this</code><code class="o">.</code><code class="na">message</code> <code class="o">=</code> <code class="n">message</code><code class="o">;</code>
   <code class="o">}</code>
<code class="o">}</code></pre>

<p>We are now ready to build the function. By default, the Boson CLI will connect to the local Docker instance locally to create the container with buildpacks and then push to the container registry you declared in the <code>func.yaml</code> configuration file:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>func build</pre>
<div data-type="tip"><h6>Tip</h6>
<p>In future versions, Boson CLI will also delegate the building phase to Kubernetes via Tekton.</p>
</div>

<p>After a few minutes, you should get a similar output:</p>

<pre data-type="programlisting" data-code-language="bash">Function image built: docker.io/modernizingjavaappsbook/quarkus-faas:latest</pre>

<p>After the function has been built, you can test it locally as a running container image before deploying it to Kubernetes:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>func run</pre>

<p>You should get an output similar to this:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nb">exec </code>java -Dquarkus.http.host<code class="o">=</code>0.0.0.0 -Djava.util.logging.manager<code class="o">=</code>org.jboss.
logmanager.LogManager -XX:+ExitOnOutOfMemoryError -cp . -jar /layers/dev.
boson.quarkus-jvm/app/app.jar</pre>

<pre data-type="programlisting" class="pagebreak-before less_space">__ ____ __ _____  ___ __ ____ ______
 --/ __ \/ / / / _ | / _ \/ //_/ / / / __/
 -/ /_/ / /_/ / __ |/ , _/ ,&lt; / /_/ /\ \
--\___\_\____/_/ |_/_/|_/_/|_|\____/___/
2021-06-25 16:51:24,023 INFO [io.quarkus] (main) function 1.0.0-SNAPSHOT on JVM
(powered by Quarkus 1.13.0.Final) started in 1.399s. Listening on:
http://0.0.0.0:8080
2021-06-25 16:51:24,027 INFO [io.quarkus] (main) Profile prod activated.
2021-06-25 16:51:24,028 INFO [io.quarkus] (main) Installed features: [cdi,
 funqy-knative-events]</pre>

<p>In another terminal, verify the process is running:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>docker ps <code class="p">|</code> grep modernizingjavaappsbook/quarkus-faas:latest
cd1dd0ccc9b2  modernizingjavaappsbook/quarkus-faas:latest  <code class="s2">"/cnb/process/web"</code>
 <code class="m">3</code> minutes ago  Up <code class="m">3</code> minutes  5005/tcp, 127.0.0.1:8080-&gt;8080/tcp
  musing_carson</pre>

<p>Try to access it:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>curl <code class="se">\</code>
 -X POST <code class="se">\</code>
 -H <code class="s2">"Content-Type: application/json"</code> <code class="se">\</code>
 -d <code class="s1">'{"message":"Hello FaaS!"}'</code> <code class="se">\</code>
http://localhost:8080</pre>

<p>You should get an output similar to this:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="o">{</code><code class="s2">"message"</code>:<code class="s2">"Hello FaaS!"</code><code class="o">}</code></pre>

<p>Now let’s deploy it to Kubernetes and let Knative use it as a scale-to-zero application. When we invoke the function via HTTP, Knative will start it automatically, and it will scale down to zero when not used:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>func deploy</pre>

<p>After a few seconds, you should see an output similar to this:</p>

<pre data-type="programlisting" data-code-language="bash">Deploying <code class="k">function</code> to the cluster
  Function deployed at URL: http://quarkus-faas.coolstore.192.168.39.69.nip.io</pre>

<p>Finally, start your Quarkus function on Kubernetes!</p>

<pre data-type="programlisting" data-code-language="bash"><code class="nv">$ </code>curl <code class="se">\</code>
  -X POST <code class="se">\</code>
  -H <code class="s2">"Content-Type: application/json"</code> <code class="se">\</code>
  -d <code class="s1">'{"message":"Hello FaaS on Kubernetes!"}'</code> <code class="se">\</code>
http://quarkus-faas.coolstore.192.168.39.69.nip.io</pre>

<p>You should get an output similar to this:</p>

<pre data-type="programlisting" data-code-language="bash"><code class="o">{</code><code class="s2">"message"</code>:<code class="s2">"Hello FaaS on Kubernetes!"</code><code class="o">}</code></pre>

<p class="pagebreak-before less_space">You can verify that a new pod has started in your Kubernetes cluster inside the <code>coolstore</code> namespace:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl get pods -n coolstore
NAME                                            READY  STATUS   RESTARTS  AGE
curl                                            1/1    Running  <code class="m">3</code>         9d
quarkus-faas-00001-deployment-5b789c84b5-kc2jb  2/2    Running  <code class="m">0</code>         80s</pre>

<p>And, you should see that a new Knative Service has been created:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl get ksvc quarkus-faas -n coolstore
NAME         URL                     LATESTCREATED      LATESTREADY        ...
quarkus-faas http://quarkus...nip.io quarkus-faas-00001 quarkus-faas-00001 ...</pre>

<p>You can now see all the details of your newly deployed function with the following command:</p>

<pre data-type="programlisting" data-code-language="bash">kubectl describe ksvc quarkus-faas -n coolstore</pre>

<p>You should get an output similar <a data-type="indexterm" data-primary="Java" data-secondary="FaaS (functions-as-a-service)" data-startref="Javafaas" id="idm45261441251136"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="Java" data-startref="faasjava" id="idm45261441249040"/><a data-type="indexterm" data-primary="serverless computing" data-secondary="FaaS (functions-as-a-service)" data-startref="servlessfaas" id="idm45261441254560"/><a data-type="indexterm" data-primary="FaaS (functions-as-a-service)" data-secondary="serverless computing" data-startref="faasservless" id="idm45261441253440"/>to this:</p>

<pre data-type="programlisting" data-code-language="bash">Name:        quarkus-faas
Namespace:   coolstore
Labels:      boson.dev/function<code class="o">=</code><code class="nb">true</code>
<code class="nb">             </code>boson.dev/runtime<code class="o">=</code>quarkus
Annotations: serving.knative.dev/creator: minikube-user
             serving.knative.dev/lastModifier: minikube-user
API Version: serving.knative.dev/v1
Kind:        Service
Metadata:
 Creation Timestamp: 2021-06-25T17:14:12Z
 Generation:         1
....
Spec:
 Template:
   Metadata:
     Creation Timestamp: &lt;nil&gt;
   Spec:
     Container Concurrency: 0
     Containers:
       Env:
         Name:  BUILT
         Value: 20210625T171412
       Image:   docker.io/modernizingjavaappsbook/quarkus-faas@↳
sha256:a8b9cfc3d8e8f2e48533fc885c2e59f6ddd5faa9638fdf65772133cfa7e1ac40
       Name:    user-container
       Readiness Probe:
         Success Threshold: 1
         Tcp Socket:
           Port: 0
       Resources:
     Enable Service Links: <code class="nb">false</code>
<code class="nb">     </code>Timeout Seconds:      300
 Traffic:
   Latest Revision: <code class="nb">true</code>
<code class="nb">   </code>Percent:         100
Status:
 Address:
   URL: http://quarkus-faas.coolstore.svc.cluster.local
 Conditions:
   Last Transition Time:       2021-06-25T17:14:22Z
   Status:                     True
   Type:                       ConfigurationsReady
   Last Transition Time:       2021-06-25T17:14:22Z
   Status:                     True
   Type:                       Ready
   Last Transition Time:       2021-06-25T17:14:22Z
   Status:                     True
   Type:                       RoutesReady
 Latest Created Revision Name: quarkus-faas-00001
 Latest Ready Revision Name:   quarkus-faas-00001
 Observed Generation:          1
 Traffic:
   Latest Revision: <code class="nb">true</code>
<code class="nb">   </code>Percent:         100
   Revision Name:   quarkus-faas-00001
 URL:               http://quarkus-faas.coolstore.192.168.39.69.nip.io
Events:
 Type   Reason  Age   From               Message
 ----   ------  ----  ----               -------
 Normal Created 4m15s service-controller Created Configuration <code class="s2">"quarkus-faas"</code>
 Normal Created 4m15s service-controller Created Route <code class="s2">"quarkus-faas"</code></pre>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="Summary"><div class="sect1" id="idm45261441227952">
<h1>Summary</h1>

<p>In this chapter, we analyzed how Java developers can create modern applications following the serverless execution model. We outlined some of the most common use cases and architectures that Java developers are likely to work with today, and tomorrow. Edge computing, Internet of Things, data ingestion, and machine learning are all contexts where event-driven architectures are a natural choice, and where serverless and Java can play a strategic and supporting role.
We discussed FaaS, which represents the latest evolution in software development, and how Kubernetes can automate the whole life cycle of applications deployed as decoupled, asynchronous, easy-to-parallelize processes called functions.</p>

<p>With this chapter, we complete this “Concise Cloud Native Guide for Developers.” From microservices to functions, Java developers today have a complete set of frameworks, tools, and platforms such as Kubernetes that can help them modernize their architectures, innovate their solutions, and look ahead to solve the next challenges in today’s IT context. This context is one that is ever more heterogeneous, ubiquitous, large scale, and cloud native.</p>
<blockquote class="pagebreak-before less_space">
<p>To you I have given wings, on which you may fly aloft</p>

<p>Above the boundless sea and all the earth […]</p>

<p>To all who care for them, even to those who are not yet born, you will be</p>

<p>Alike a theme of song, so long as Earth and Sun exist.</p>
<p data-type="attribution">Theognis of Megara</p>
</blockquote>
</div></section>







</div></section></div></body></html>