<html><head></head><body><section data-pdf-bookmark="Chapter 5. Objects in Java" data-type="chapter" epub:type="chapter"><div class="chapter" id="learnjava6-CHP-5">&#13;
<h1><span class="label">Chapter 5. </span>Objects in Java</h1>&#13;
&#13;
&#13;
<p>In this chapter, we get to the heart of Java and explore its <a data-primary="objects" data-type="indexterm" id="ix_objects_ch5"/>object-oriented aspects. The term <em>object-oriented design</em> refers to the art of decomposing an application into some number of <em>objects</em>, which are self-contained application components that work together. The goal is to break your problem down into smaller problems that are simpler and easier to handle and maintain. Object-based designs have proven themselves over the years, and object-oriented languages such as Java provide a strong foundation for writing applications—from the very small to the very large. Java was designed from the ground up to be an object-oriented language, and all of the Java APIs and libraries are built around solid object-based design <span class="keep-together">patterns.</span></p>&#13;
&#13;
<p>An object design <em>methodology</em> is a system or a set of rules created to help you break down your application into objects. Often this means mapping real-world entities and concepts (sometimes called the <em>problem domain</em>) into application components. Various methodologies attempt to help you factor your application into a good set of reusable objects. This is good in principle, but the problem is that good object-oriented design is still more art than science. While you can learn from  off-the-shelf design methodologies, none of them will help you in all situations. The truth is that there is no substitute for experience.</p>&#13;
&#13;
<p>We won’t try to push you into a particular methodology here; there are shelves full of books to do that.<sup><a data-type="noteref" href="ch05.html#id1063" id="id1063-marker">1</a></sup> Instead, we’ll provide some common-sense hints along the way as you get started.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Classes" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-1">&#13;
<h1>Classes</h1>&#13;
&#13;
<p>Classes are the <a data-primary="classes" data-type="indexterm" id="ix_class_ch5"/>building blocks of a Java application. A <em>class</em> can contain methods (functions), variables, initialization code, and, as we’ll discuss later, other classes. <a data-primary="packages" data-secondary="and class files" data-secondary-sortas="class files" data-type="indexterm" id="id1064"/>Separate classes that describe individual parts of a more complex idea are often bundled in <em>packages</em>, which help you organize larger projects. (Every class belongs to some package, even the simple examples we’ve seen so far.) An <em>interface</em> can <a data-primary="interfaces" data-type="indexterm" id="id1065"/>describe some specific commonalities between otherwise disparate classes. Classes can be related to each other by extension or to interfaces by implementation. <a data-type="xref" href="#learnjava6-CHP-5-FIG-1">Figure 5-1</a> illustrates the ideas in this very dense paragraph.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-1">&#13;
<img alt="ljv6 0501" src="assets/ljv6_0501.png"/>&#13;
<h6><span class="label">Figure 5-1. </span>Class, interface, and package overview</h6>&#13;
</div></figure>&#13;
&#13;
<p><code>Object</code> (in the upper-left corner) is the <a data-primary="Object class" data-type="indexterm" id="id1066"/>foundational class at the heart of every other class in Java. It is part of the core Java package, <code>java.lang</code>. Java also has a package for its graphical UI elements called <code>javax.swing</code>. Inside that package, the <code>JComponent</code> class defines all of the low-level, common properties of graphical things, like frames and buttons and canvases. <a data-primary="JLabel class" data-type="indexterm" id="id1067"/><a data-primary="desktop applications" data-secondary="labels (JLabel)" data-type="indexterm" id="id1068"/><a data-primary="labels, GUI" data-type="indexterm" id="id1069"/><a data-primary="JComponent class" data-type="indexterm" id="id1070"/>The <code>JLabel</code> class, for example, <em>extends</em> the <code>JComponent</code> class. That means <code>JLabel</code> inherits details from <code>JComponent</code> but adds things specific to labels. You might have noticed that <code>JComponent</code> itself extends from <code>Object</code>, or at least, it eventually extends back to <code>Object</code>. For brevity’s sake, we have left out the intermediate classes and packages in between.</p>&#13;
&#13;
<p>You can define your own classes and packages as well. For instance, the &#13;
<span class="keep-together"><code>ch05.examples.game</code></span> package in the lower-right corner is a custom package we built for a simple game that allows physicists to throw apples. (Newton will have his revenge!) In this package, we have some classes, like <code>Apple</code> and <code>Field</code>, that are part of our application. You can also see the <code>GamePiece</code> interface, which will contain some common, required elements for all game pieces and is implemented by the <code>Apple</code>, <code>Tree</code>, and <code>Physicist</code> classes. (In our game, the <code>Field</code> class is where all of the game pieces will be shown, but it is not a game piece itself. Notice that it does <em>not</em> implement the <code>GamePiece</code> interface.)</p>&#13;
&#13;
<p>This chapter will go into much more detail, with more examples of each concept. We heartily recommend that you try the examples as you go and use the <em>jshell</em> tool (discussed in <a data-type="xref" href="ch03.html#learnjava6-CHP-3-SECT-6">“Trying Java”</a>) to help cement your understanding of new topics.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Declaring and Instantiating Classes" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-1.1">&#13;
<h2>Declaring and Instantiating Classes</h2>&#13;
&#13;
<p>A <a data-primary="classes" data-secondary="declaring and instantiating" data-type="indexterm" id="ix_class_decl_ch5"/><a data-primary="instances" data-type="indexterm" id="id1071"/>class serves as a blueprint for making <em>instances</em>, which are runtime objects (individual copies) that implement the class structure. You declare a class with the <code>class</code> keyword and a name of your choosing. In our game, for example, the physicists, apples, and trees are all good targets for becoming classes. <a data-primary="variables" data-secondary="declaring" data-type="indexterm" id="id1072"/>Inside a class, we add variables that store details or other useful information, and methods that describe what we can do to and with instances of this class.</p>&#13;
&#13;
<p>Let’s get started with a class for our apples. By (strong!) convention, class names start with capital letters. That makes <code>Apple</code> a good name to use. We won’t try to get every detail about our game apples into the class right away, just a few elements to help illustrate how a class, variables, and methods fit together:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">mass</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">boolean</code><code class="w"> </code><code class="nf">isTouching</code><code class="p">(</code><code class="n">Apple</code><code class="w"> </code><code class="n">other</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// Code will eventually go here that performs</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// distance calculations and returns true if</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// this apple is touching another apple</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// More methods will go here as we fill out more</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// details of our apple</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The <code>Apple</code> class contains four variables: <code>mass</code>, <code>diameter</code>, <code>x</code>, and <code>y</code>. It also defines a method called <code>isTouching()</code>, which takes a reference to another <code>Apple</code> as an argument and returns a <code>boolean</code> value as a result. Variables and method declarations can appear in any order, but variable initializers can’t make “forward references” to other variables that appear later. (In our little snippet, the <code>diameter</code> variable could use the <code>mass</code> variable to help calculate its initial value, but <code>mass</code> could not use the <code>diameter</code> variable to do the same.) Once we’ve defined the <code>Apple</code> class, we can create an <code>Apple</code> object (an instance of that class) for our game, like so:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// Two steps, the declaration then the instantiation</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// Or all in one line...</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">a2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/></pre>&#13;
&#13;
<p>Recall that our declaration of the variable <code>a1</code> doesn’t create an <code>Apple</code> object; it simply creates a variable that refers to an object of type <code>Apple</code>. We still have to create the object, using the <code>new</code> keyword, as shown in the second line of the preceding code snippet. But you can combine those steps into a single line just as we did for the <code>a2</code> variable. The same separate actions occur under the hood, of course. Sometimes the combined declaration and initialization will feel more readable than the multiline version.</p>&#13;
&#13;
<p>Now that we’ve created an <code>Apple</code> object, we can access its variables and methods, as we’ve seen in several of our examples from <a data-type="xref" href="ch04.html#learnjava6-CHP-4">Chapter 4</a> or even our graphical “Hello” app from <a data-type="xref" href="ch02.html#learnjava6-CHP-2-SECT-2">“HelloJava”</a>. Although this is not very exciting, we could now build another class, <code>PrintAppleDetails</code>, that is a complete application to create an <code>Apple</code> instance and print its details:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">PrintAppleDetails</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">args</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apple a1:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  mass: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  diameter: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  position: ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">+</code><code class="s">")"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>If you compile and run this example, you should see the following output in your terminal or in the terminal window of your IDE:</p>&#13;
&#13;
<pre data-type="programlisting">Apple a1:&#13;
  mass: 0.0&#13;
  diameter: 1.0&#13;
  position: (0, 0)</pre>&#13;
&#13;
<p>But hmm, why doesn’t <code>a1</code> have a mass? If you look back at how we declared the variables for our <code>Apple</code> class, we only initialized <code>diameter</code>. All the other variables get the Java-assigned default value of <code>0</code> since they are numeric types.<sup><a data-type="noteref" href="ch05.html#id1073" id="id1073-marker">2</a></sup> We would ideally like to have a more interesting apple. Let’s see how to provide those interesting bits.<a data-primary="" data-startref="ix_class_decl_ch5" data-type="indexterm" id="id1074"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Accessing Fields and Methods" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-1.2">&#13;
<h2>Accessing Fields and Methods</h2>&#13;
&#13;
<p>Once you have a <a data-primary="methods" data-secondary="accessing from classes" data-type="indexterm" id="ix_method_acc_class"/><a data-primary="dot (.) notation/operator" data-secondary="selecting class members or object instances" data-type="indexterm" id="id1075"/><a data-primary="classes" data-secondary="accessing fields and methods" data-type="indexterm" id="ix_class_field_meth"/>reference to an object, you can use and manipulate its variables and methods using the dot notation you saw in <a data-type="xref" href="ch04.html#learnjava6-CHP-4">Chapter 4</a>. Let’s create a new class, <code>PrintAppleDetails2</code>, provide some values for the mass and position of our <code>a1</code> instance, and then print the new details:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">PrintAppleDetails2</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">args</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apple a1:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  mass: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  diameter: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  position: ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">+</code><code class="s">")"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// fill in some information on a1</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">10.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">20</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">42</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Updated a1:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  mass: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  diameter: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  position: ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">+</code><code class="s">")"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Here’s the new output:</p>&#13;
&#13;
<pre data-type="programlisting">Apple a1:&#13;
  mass: 0.0&#13;
  diameter: 1.0&#13;
  position: (0, 0)&#13;
Updated a1:&#13;
  mass: 10.0&#13;
  diameter: 1.0&#13;
  position: (20, 42)</pre>&#13;
&#13;
<p>Great! <code>a1</code> is looking a little better. But look at the code again. We had to repeat the three lines that print the object’s details. That type of exact replication calls out for a <em>method</em>.</p>&#13;
&#13;
<p>Methods allow us to “do stuff” inside a class. As a simple example, we could improve the <code>Apple</code> class by providing these print statements in a method:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">mass</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// other apple-related variables and methods</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">printDetails</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  mass: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">mass</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  diameter: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">diameter</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  position: ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">+</code><code class="s">")"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>With those detail statements relocated, we can create <code>PrintAppleDetails3</code> that does its job more succinctly than its predecessor:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">PrintAppleDetails3</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">args</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apple a1:"</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// We can use our new method!</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">printDetails</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="c1">// fill in some information on a1</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">10.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">20</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">42</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Updated a1:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// And look! We can easily reuse the same method</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">printDetails</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Take another look at the <code>printDetails()</code> method we added to the <code>Apple</code> class. Inside a class, we can access variables and call methods of the class directly by name. The print statements just use the simple names like <code>mass</code> and <code>diameter</code>.</p>&#13;
&#13;
<p>Or consider filling out the <code>isTouching()</code> method. We can use our own <code>x</code> and <code>y</code> coordinates without any special prefix. But to access the coordinates of some other apple, we need to go back to the dot notation. Here’s one way to write that method using some math (more of this in <a data-type="xref" href="ch08.html#learnjava6-CHP-8-SECT-4.1">“The java.lang.Math Class”</a>) and the <code>if/then</code> statement we saw in <a data-type="xref" href="ch04.html#learnjava6-CHP-4-SECT-5.1.1">“if/else conditionals”</a>:</p>&#13;
&#13;
<pre class="less_space pagebreak-before" data-code-language="java" data-type="programlisting"><code class="c1">// File: ch05/examples/Apple.java</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">boolean</code><code class="w"> </code><code class="nf">isTouching</code><code class="p">(</code><code class="n">Apple</code><code class="w"> </code><code class="n">other</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">xdiff</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">-</code><code class="w"> </code><code class="n">other</code><code class="p">.</code><code class="na">x</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">ydiff</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">-</code><code class="w"> </code><code class="n">other</code><code class="p">.</code><code class="na">y</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">distance</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">Math</code><code class="p">.</code><code class="na">sqrt</code><code class="p">(</code><code class="n">xdiff</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">xdiff</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">ydiff</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">ydiff</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">distance</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">diameter</code><code class="w"> </code><code class="o">/</code><code class="w"> </code><code class="mi">2</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">other</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">/</code><code class="w"> </code><code class="mi">2</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">return</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">return</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Let’s fill out a bit more of our game and create a <code>Field</code> class that uses a few <code>Apple</code> objects. It creates instances as member variables and works with those objects in the <span class="keep-together"><code>setupApples()</code></span> and <code>detectCollision()</code> methods, invoking <code>Apple</code> methods and accessing variables of those objects through the references <code>a1</code> and <code>a2</code>, visualized in <a data-type="xref" href="#learnjava6-CHP-5-FIG-2">Figure 5-2</a>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Field</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">Apple</code><code class="w"> </code><code class="n">a2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">setupApples</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">3.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">5.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">20</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">40</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a2</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">8.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a2</code><code class="p">.</code><code class="na">mass</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">10.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a2</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">70</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a2</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">200</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">detectCollisions</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">a1</code><code class="p">.</code><code class="na">isTouching</code><code class="p">(</code><code class="n">a2</code><code class="p">))</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Collision detected!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apples are not touching."</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-2">&#13;
<img alt="ljv6 0502" src="assets/ljv6_0502.png"/>&#13;
<h6><span class="label">Figure 5-2. </span>Instances of the <code>Apple</code> class</h6>&#13;
</div></figure>&#13;
&#13;
<p>We can prove that <code>Field</code> has access to the apples’ variables and methods with another iteration of our application, <code>PrintAppleDetails4</code>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">PrintAppleDetails4</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">args</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Field</code><code class="w"> </code><code class="n">f</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Field</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">f</code><code class="p">.</code><code class="na">setupApples</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apple a1:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">f</code><code class="p">.</code><code class="na">a1</code><code class="p">.</code><code class="na">printDetails</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apple a2:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">f</code><code class="p">.</code><code class="na">a2</code><code class="p">.</code><code class="na">printDetails</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">f</code><code class="p">.</code><code class="na">detectCollisions</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>We should see the familiar apple details followed by an answer to whether or not the two apples are touching:</p>&#13;
<pre data-type="programlisting">&#13;
% java PrintAppleDetails4&#13;
Apple a1:&#13;
  mass: 5.0&#13;
  diameter: 3.0&#13;
  position: (20, 40)&#13;
Apple a2:&#13;
  mass: 10.0&#13;
  diameter: 8.0&#13;
  position: (70, 200)&#13;
Apples are not touching.&#13;
</pre>&#13;
&#13;
<p>Great, just what we expected.</p>&#13;
&#13;
<p>Before reading further, try changing the positions of the apples to make them touch. Do you get the expected output?<a data-primary="" data-startref="ix_class_field_meth" data-type="indexterm" id="id1076"/><a data-primary="" data-startref="ix_method_acc_class" data-type="indexterm" id="id1077"/></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Access modifiers preview" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-1.2.1">&#13;
<h3>Access modifiers preview</h3>&#13;
&#13;
<p>Several <a data-primary="access modifiers" data-type="indexterm" id="id1078"/><a data-primary="modifiers" data-secondary="access levels" data-type="indexterm" id="id1079"/><a data-primary="private access modifier" data-type="indexterm" id="id1080"/><a data-primary="protected access modifier" data-type="indexterm" id="id1081"/><a data-primary="public access modifier" data-type="indexterm" id="id1082"/><a data-primary="scope" data-secondary="class" data-type="indexterm" id="id1083"/><a data-primary="visibility modifiers" data-type="indexterm" id="id1084"/>factors affect whether class members can be accessed from another class. You can use the visibility modifiers <code>public</code>, <code>private</code>, and <code>protected</code> to control access; classes can also be placed into a <em>package</em>, which affects their scope. The <code>private</code> modifier, for example, designates a variable or method for use only by other members of the class itself. In the previous example, we could change the declaration of our variable <code>diameter</code> to <code>private</code>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">private</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="n">diameter</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Now we can’t access <code>diameter</code> from <code>Field</code>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Field</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">Apple</code><code class="w"> </code><code class="n">a2</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">setupApples</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">3.0f</code><code class="p">;</code><code class="w"> </code><code class="c1">// Compile-time error</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">a2</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">8.0f</code><code class="p">;</code><code class="w"> </code><code class="c1">// Compile-time error</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>If we still need to access <code>diameter</code> in some capacity, we would usually add public <code>getDiameter()</code> and <code>setDiameter()</code> methods to the <code>Apple</code> class:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">private</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="n">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">setDiameter</code><code class="p">(</code><code class="kt">float</code><code class="w"> </code><code class="n">newDiameter</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">newDiameter</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="nf">getDiameter</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">return</code><code class="w"> </code><code class="n">diameter</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Creating methods like this is a good design rule because it allows future flexibility in changing the type or behavior of the value. We’ll look more at packages, access modifiers, and how they affect the visibility of variables and methods later in this chapter.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Static Members" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-1.3">&#13;
<h2>Static Members</h2>&#13;
&#13;
<p>As we’ve said, <a data-primary="static members of classes" data-type="indexterm" id="ix_static_class"/><a data-primary="classes" data-secondary="static members" data-type="indexterm" id="ix_class_static"/><a data-primary="class (static) methods" data-type="indexterm" id="id1085"/><a data-primary="class (static) variables" data-type="indexterm" id="id1086"/><a data-primary="static (class) methods" data-type="indexterm" id="id1087"/><a data-primary="static (class) variables" data-type="indexterm" id="id1088"/><a data-primary="modifiers" data-secondary="static" data-type="indexterm" id="id1089"/><a data-primary="static keyword" data-type="indexterm" id="id1090"/><a data-primary="variables" data-secondary="static" data-type="indexterm" id="id1091"/>instance variables and methods are associated with and accessed through an instance of the class (that is, through a particular object, like <code>a1</code> or <code>f</code> in the previous examples). In contrast, members that are declared with the <code>static</code> modifier live in the class and are shared by all instances of the class. Variables declared with the <code>static</code> modifier are called <em>static variables</em> or <em>class variables</em>; similarly, these kinds of methods are called <em>static methods</em> or <em>class methods</em>. Static members are useful as flags and identifiers, that can be accessed from anywhere. We can add a static variable to our <code>Apple</code> example to store the value of acceleration due to gravity. <a data-primary="animation" data-type="indexterm" id="id1092"/>This lets us calculate the trajectory of a tossed apple when we start animating our game:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">static</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="n">gravAccel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">9.8f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>We have <a data-primary="variables" data-secondary="float" data-type="indexterm" id="id1093"/><a data-primary="float variable" data-type="indexterm" id="id1094"/>declared the new <code>float</code> variable <code>gravAccel</code> as <code>static</code>. That means it is associated with the class, not with an individual instance, and if we change its value (either directly or through any instance of <code>Apple</code>), the value changes for all <code>Apple</code> objects, as shown in <a data-type="xref" href="#learnjava6-CHP-5-FIG-3">Figure 5-3</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-3">&#13;
<img alt="ljv6 0503" src="assets/ljv6_0503.png"/>&#13;
<h6><span class="label">Figure 5-3. </span>Static variables shared by all instances of a class</h6>&#13;
</div></figure>&#13;
&#13;
<p>You can access static members similarly to the way you access instance members. Inside our <code>Apple</code> class, we can refer to <code>gravAccel</code> like any other variable:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="nf">getWeight</code><code class="w"> </code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">return</code><code class="w"> </code><code class="n">mass</code><code class="w"> </code><code class="o">*</code><code class="w"> </code><code class="n">gravAccel</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>However, since static members exist in the class itself, independent of any instance, we can also access them directly through the class. If we want to toss apples on Mars, for example, we don’t need an <code>Apple</code> object like <code>a1</code> or <code>a2</code> to get or set the variable <code>gravAccel</code>. Instead, we can use the class to change the variable to reflect conditions on Mars:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Apple</code><code class="p">.</code><code class="na">gravAccel</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">3.7f</code><code class="p">;</code><code class="w"/></pre>&#13;
&#13;
<p>This changes the value of <code>gravAccel</code> for the class and all its instances. We don’t have to manually set each instance of <code>Apple</code> to fall on Mars. Static variables are useful for any kind of data that is shared among classes at runtime. For instance, you can create methods to register your object instances so that they can communicate, or so that you can keep track of all of them. It’s also common to use static variables to define constant values. In this case, we use the <code>static</code> modifier along with the <code>final</code> modifier. So, if we cared only about apples under the influence of the Earth’s gravitational pull, we might change <code>Apple</code> as follows:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="n">EARTH_ACCEL</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">9.8f</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>We have followed a common convention here and named our constant with capital letters and underscores (if the name has more than one word). The value of <code>EARTH_ACCEL</code> is a constant; you can access it through the class <code>Apple</code> or its instances, but you can’t change its value.</p>&#13;
&#13;
<p>It’s important to use the combination of <code>static</code> and <code>final</code> only for things that are really constant. The compiler is allowed to “inline” such values within classes that reference them. This means that if you change a <code>static final</code> variable, you may have to recompile all code that uses that class (this is really the only case where you have to do that in Java). Static members are also useful for values needed in the construction of an instance itself. In our example, we might declare a number of static values to represent various sizes of <code>Apple</code> objects:</p>&#13;
&#13;
<pre class="less_space pagebreak-before" data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">static</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">SMALL</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">,</code><code class="w"> </code><code class="n">MEDIUM</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">,</code><code class="w"> </code><code class="n">LARGE</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>We might then use these options in a method that sets the size of an <code>Apple</code>, or in a special constructor, as we’ll discuss shortly:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">typicalApple</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">typicalApple</code><code class="p">.</code><code class="na">setSize</code><code class="p">(</code><code class="n">Apple</code><code class="p">.</code><code class="na">MEDIUM</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>Again, inside the <code>Apple</code> class, we can use static members directly by name, as well. There’s no need for the <code>Apple.</code> prefix:<a data-primary="" data-startref="ix_class_ch5" data-type="indexterm" id="id1095"/><a data-primary="" data-startref="ix_class_static" data-type="indexterm" id="id1096"/><a data-primary="" data-startref="ix_static_class" data-type="indexterm" id="id1097"/></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">resetEverything</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setSize</code><code class="w"> </code><code class="p">(</code><code class="n">MEDIUM</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Methods" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-2">&#13;
<h1>Methods</h1>&#13;
&#13;
<p>So far, our example <a data-primary="methods" data-type="indexterm" id="ix_method_ch5"/>classes have been fairly simple. We keep a few bits of information around—apples have mass, fields have a couple of apples, etc. But we have also touched on the idea of making those classes do stuff. All of our various <code>PrintAppleDetails</code> classes have a list of steps that get executed when we run the program, for example. As we noted briefly before, in Java, those steps are bundled into a method. In the case of <code>PrintAppleDetails</code>, that is the <code>main()</code> method.</p>&#13;
&#13;
<p>Everywhere you have steps to take or decisions to make, you need a method. In <a data-primary="class (static) variables" data-type="indexterm" id="id1098"/><a data-primary="static (class) variables" data-type="indexterm" id="id1099"/><a data-primary="variables" data-secondary="static" data-type="indexterm" id="id1100"/>addition to storing variables like the <code>mass</code> and <code>diameter</code> in our <code>Apple</code> class, we also added a few pieces of code that contained actions and logic. Methods are so fundamental to classes that we had to create a few even before getting here to the formal discussion of them! Think back to the <code>printDetails()</code> method in <code>Apple</code> or the <code>setupApples()</code> method in <code>Field</code>. Even our very first, simple program required a <code>main()</code> method.</p>&#13;
&#13;
<p>Hopefully, the methods we have discussed so far have been straightforward enough to follow just from context. But methods can do much more than print out a few variables or calculate a distance. They can contain local variable declarations and other Java statements that are executed when the method is invoked. Methods may also return a value to the caller. <a data-primary="void return type" data-type="indexterm" id="id1101"/>They always specify a return type, which can be a primitive type, a reference type, or the special <code>void</code>, which indicates no returned value. <a data-primary="arguments" data-secondary="method" data-type="indexterm" id="id1102"/>Methods may take arguments, which are values supplied by the caller of the method.</p>&#13;
&#13;
<p>Here’s a simple example of a method that takes arguments:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Bird</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">xPos</code><code class="p">,</code><code class="w"> </code><code class="n">yPos</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">double</code><code class="w"> </code><code class="nf">fly</code><code class="w"> </code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">y</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">distance</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">Math</code><code class="p">.</code><code class="na">sqrt</code><code class="p">(</code><code class="n">x</code><code class="o">*</code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">y</code><code class="o">*</code><code class="n">y</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">flap</code><code class="p">(</code><code class="n">distance</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">xPos</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">x</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">yPos</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">return</code><code class="w"> </code><code class="n">distance</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other bird things ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this example, the class <code>Bird</code> defines a method, <code>fly()</code>, that takes as arguments two integers: <code>x</code> and <code>y</code>. It returns a <code>double</code> type value as a result, using the <code>return</code> keyword.</p>&#13;
&#13;
<p>Our <a data-primary="argument list" data-type="indexterm" id="id1103"/>method has a fixed number of arguments (two); however, methods can have <em>variable-length argument lists</em>, which allow the method to specify that it can take any number of arguments and sort them out itself at runtime.<sup><a data-type="noteref" href="ch05.html#id1104" id="id1104-marker">3</a></sup></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Local Variables" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.1">&#13;
<h2>Local Variables</h2>&#13;
&#13;
<p>Our <code>fly()</code> method <a data-primary="local variables" data-type="indexterm" id="id1105"/><a data-primary="methods" data-secondary="local variables" data-type="indexterm" id="id1106"/><a data-primary="scope" data-secondary="methods" data-type="indexterm" id="id1107"/><a data-primary="scope" data-secondary="variable" data-type="indexterm" id="id1108"/><a data-primary="variables" data-secondary="local" data-type="indexterm" id="id1109"/>declares a local variable called <code>distance</code>, which it uses to compute the distance flown. A local variable is temporary; it exists only within the scope (the block) of its method. Local variables are allocated when a method is invoked; they are normally destroyed when the method returns. They can’t be referenced from outside the method itself. If the method is executing concurrently in different threads, each thread has its own version of the method’s local variables. A method’s arguments also serve as local variables within the scope of the method; the only difference is that they are initialized by being passed in from the caller of the method.</p>&#13;
&#13;
<p>An object created within a method and assigned to a local variable may or may not persist after the method has returned. As we’ll see in detail in <a data-type="xref" href="#learnjava6-CHP-5-SECT-4">“Object Destruction”</a>, it depends on whether any references to the object remain. If an object is created, assigned to a local variable, and never used anywhere else, that object is no longer referenced when the local variable disappears from scope, so garbage collection removes the object. If, however, we assign the object to an instance variable of an object, pass it as an argument to another method, or pass it back as a return value, it may be saved by another variable holding its reference.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Shadowing" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.2">&#13;
<h2>Shadowing</h2>&#13;
&#13;
<p>If a <a data-primary="shadowing, methods" data-type="indexterm" id="ix_shadow_meth"/><a data-primary="methods" data-secondary="shadowing" data-type="indexterm" id="ix_method_shadow"/><a data-primary="local variables" data-type="indexterm" id="id1110"/><a data-primary="shadowed variables" data-type="indexterm" id="id1111"/><a data-primary="instance variables" data-type="indexterm" id="id1112"/><a data-primary="variables" data-secondary="instance" data-type="indexterm" id="id1113"/><a data-primary="variables" data-secondary="local" data-type="indexterm" id="id1114"/><a data-primary="variables" data-secondary="shadowing" data-type="indexterm" id="id1115"/>local variable or method argument and an instance variable have the same name, the local variable <em>shadows</em>, or hides, the name of the instance variable within the scope of the method. This might sound like an odd situation, but it happens fairly often when the instance variable has a common or obvious name. For example, we could add a <code>move</code> method to our <code>Apple</code> class. Our method will need a new coordinate telling it where to place the apple. An easy choice for the coordinate arguments would be <code>x</code> and <code>y</code>. But we already have instance variables of the same name that hold the current position of the apple:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">moveTo</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">y</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Moving apple to "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">y</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// actual move logic would go here ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>If the apple is currently at position (20, 40) and you call <code>moveTo(40, 50),</code> what do you think that <code>println()</code> statement will show? Inside <code>moveTo()</code>, the <code>x</code> and <code>y</code> names refer only to the method arguments with those names. The output would be:</p>&#13;
&#13;
<pre data-type="programlisting">    Moving apple to 40, 50</pre>&#13;
&#13;
<p>If we can’t get to the <code>x</code> and <code>y</code> instance variables, how can we move the apple? Turns out Java understands shadowing and provides a mechanism for working around these situations.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The “this” reference" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-2.2.1">&#13;
<h3>The “this” reference</h3>&#13;
&#13;
<p>You can use the <a data-primary="this reference" data-type="indexterm" id="id1116"/>special reference <code>this</code> any time you need to refer explicitly to the current object or a member of the current object. Often you don’t need to use <code>this</code>, because the reference to the current object is implicit; such is the case when using unambiguously named instance variables inside a class. But you can use <code>this</code> to refer explicitly to instance variables in an object, even if they are shadowed. The following example shows how to use <code>this</code> to allow argument names that shadow instance variable names. This is a fairly common technique because it saves having to make up alternative names. Here’s how we could implement our <code>moveTo()</code> method with shadowed variables:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">diameter</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mf">1.0f</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">moveTo</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">x</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">y</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Moving apple to "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">y</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// store the new x value</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">x</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// store the new y value if it is high enough</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">y</code><code class="w"> </code><code class="o">&gt;</code><code class="w"> </code><code class="n">diameter</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">this</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">y</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="c1">// otherwise set y to the height of the apple</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">this</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="kt">int</code><code class="p">)</code><code class="n">diameter</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this example, the expression <code>this.x</code> refers to the instance variable <code>x</code> and assigns it the value of the local variable <code>x</code>, which would otherwise hide its name. We do the same for <code>this.y</code> but add a little protection to make sure we don’t move the apple below our ground. Notice that <code>diameter</code> is not shadowed in this method. Since we don’t have a <code>diameter</code> argument in <code>moveTo()</code>, we don’t have to say <code>this.diameter</code> when we use it.</p>&#13;
&#13;
<p>The only reason we need to use <code>this</code> in the previous example is because we’ve used argument names that hide our instance variables, and we want to refer to the instance variables. You can also use the <code>this</code> reference any time you want to pass a reference to “the current” enclosing object to some other method, like we did for the graphical version of our “Hello Java” application in <a data-type="xref" href="ch02.html#learnjava6-CHP-2-SECT-3">“HelloJava2: The Sequel”</a>.<a data-primary="" data-startref="ix_method_shadow" data-type="indexterm" id="id1117"/><a data-primary="" data-startref="ix_shadow_meth" data-type="indexterm" id="id1118"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Static Methods" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.3">&#13;
<h2>Static Methods</h2>&#13;
&#13;
<p>Static <a data-primary="methods" data-secondary="static" data-type="indexterm" id="ix_method_static"/><a data-primary="static (class) methods" data-type="indexterm" id="ix_static_meth"/><a data-primary="class (static) methods" data-type="indexterm" id="ix_class_meth"/>methods (sometimes called class methods), like static variables, belong to the class and not to individual instances of the class. What does this mean? Well, foremost, a <em>static method</em> lives outside of any particular instance. It can be invoked through the class name and dot operator, without any objects around. Because it is not bound to a particular object, a static method can only access other static members (static variables and other static methods) of the class. It can’t directly see any instance variables or call any instance methods, because to do so it would have to ask, “on which instance?” Static methods can be called from instances using the same syntax as instance methods, but the important thing is that they can also be used <span class="keep-together">independently.</span></p>&#13;
&#13;
<p>Our <code>isTouching()</code> <a data-primary="Math class" data-type="indexterm" id="id1119"/><a data-primary="type system" data-secondary="Math class" data-type="indexterm" id="id1120"/>method uses a static method, <code>Math.sqrt()</code>, which is defined by the <code>java.lang.Math</code> class; we’ll explore this class in detail in <a data-type="xref" href="ch08.html#learnjava6-CHP-8">Chapter 8</a>. For now, the important thing to note is that <code>Math</code> is the name of a class and not an instance of a <code>Math</code> object.<sup><a data-type="noteref" href="ch05.html#id1121" id="id1121-marker">4</a></sup> Because static methods can be invoked wherever the class name is available, class methods are closer to C-style functions. Static methods are particularly useful for utility methods that perform work that is useful either independently of instances or in working on instances. For example, in our <code>Apple</code> class, we could enumerate all of the available sizes as human-readable strings from the constants we created in <a data-type="xref" href="#learnjava6-CHP-5-SECT-1.2">“Accessing Fields and Methods”</a>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Apple</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">SMALL</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">MEDIUM</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">LARGE</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">2</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other apple things...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="nf">getAppleSizes</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// Return names for our constants</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">return</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="s">"SMALL"</code><code class="p">,</code><code class="w"> </code><code class="s">"MEDIUM"</code><code class="p">,</code><code class="w"> </code><code class="s">"LARGE"</code><code class="w"> </code><code class="p">};</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Here, we’ve defined a static method, <code>getAppleSizes()</code>, that returns an array of strings containing apple size names. We make the method static because the list of sizes is the same regardless of what size any given instance of <code>Apple</code> might be. We can still use <code>getAppleSizes()</code> from within an instance of <code>Apple</code> if we want, just like an instance method. We could change the (nonstatic) <code>printDetails</code> method to print a size name rather than an exact diameter, for example:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">printDetails</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  mass: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">mass</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// Print the exact diameter:</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">//System.out.println("  diameter: " + diameter);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// Or a nice, human-friendly approximate</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">String</code><code class="w"> </code><code class="n">niceNames</code><code class="o">[]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">getAppleSizes</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">diameter</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mf">5.0f</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">niceNames</code><code class="o">[</code><code class="n">SMALL</code><code class="o">]</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">diameter</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mf">10.0f</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">niceNames</code><code class="o">[</code><code class="n">MEDIUM</code><code class="o">]</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="n">niceNames</code><code class="o">[</code><code class="n">LARGE</code><code class="o">]</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  position: ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">y</code><code class="w"> </code><code class="o">+</code><code class="s">")"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>However, we can also call it from other classes, using the <code>Apple</code> class name with the dot notation. For example, the very first <code>PrintAppleDetails</code> class could use similar logic to print a summary statement using our static method and static variables, &#13;
<span class="keep-together">like so</span>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">PrintAppleDetails</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">args</code><code class="o">[]</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">String</code><code class="w"> </code><code class="n">niceNames</code><code class="o">[]</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">Apple</code><code class="p">.</code><code class="na">getAppleSizes</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">a1</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Apple</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"Apple a1:"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  mass: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">mass</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  diameter: "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"  position: ("</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">x</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">", "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">a1</code><code class="p">.</code><code class="na">y</code><code class="w"> </code><code class="o">+</code><code class="s">")"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mf">5.0f</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"This is a "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">niceNames</code><code class="o">[</code><code class="n">Apple</code><code class="p">.</code><code class="na">SMALL</code><code class="o">]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">" apple."</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">a1</code><code class="p">.</code><code class="na">diameter</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="mf">10.0f</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"This is a "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">niceNames</code><code class="o">[</code><code class="n">Apple</code><code class="p">.</code><code class="na">MEDIUM</code><code class="o">]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">" apple."</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"This is a "</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="n">niceNames</code><code class="o">[</code><code class="n">Apple</code><code class="p">.</code><code class="na">LARGE</code><code class="o">]</code><code class="w"> </code><code class="o">+</code><code class="w"> </code><code class="s">" apple."</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Here we have our trusty instance of the <code>Apple</code> class, <code>a1</code>, but we don’t need <code>a1</code> to get the list of sizes. Notice that we load the list of nice names <em>before</em> <code>a1</code> even exists. But everything still works, as seen in the output:</p>&#13;
&#13;
<pre data-type="programlisting">Apple a1:&#13;
  mass: 0.0&#13;
  diameter: 1.0&#13;
  position: (0, 0)&#13;
This is a SMALL apple.</pre>&#13;
&#13;
<p>Static <a data-primary="new operator" data-secondary="and static methods" data-secondary-sortas="static methods" data-type="indexterm" id="id1122"/><a data-primary="factory methods" data-type="indexterm" id="id1123"/>methods also play an important role in various design patterns, where you limit the use of the <code>new</code> operator for a class to one method—a static method called a <em>factory method</em>. We’ll talk more about object construction in <a data-type="xref" href="#learnjava6-CHP-5-SECT-3.1">“Constructors”</a>. There’s no naming convention for factory methods, but it is common to see usage like this:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Apple</code><code class="w"> </code><code class="n">bigApple</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">Apple</code><code class="p">.</code><code class="na">createApple</code><code class="p">(</code><code class="n">Apple</code><code class="p">.</code><code class="na">LARGE</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>We won’t be writing any factory methods, but you’re likely to find them in the wild, especially when looking up questions on sites like Stack Overflow.<a data-primary="" data-startref="ix_class_meth" data-type="indexterm" id="id1124"/><a data-primary="" data-startref="ix_method_static" data-type="indexterm" id="id1125"/><a data-primary="" data-startref="ix_static_meth" data-type="indexterm" id="id1126"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Initializing Local Variables" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.4">&#13;
<h2>Initializing Local Variables</h2>&#13;
&#13;
<p>Unlike <a data-primary="variables" data-secondary="local" data-type="indexterm" id="ix_var_loc"/><a data-primary="methods" data-secondary="variables" data-type="indexterm" id="ix_method_var"/><a data-primary="variables" data-secondary="initializing" data-type="indexterm" id="ix_var_initial"/><a data-primary="local variables" data-type="indexterm" id="ix_local_var"/>instance variables, which receive default values if we don’t provide an explicit one, local variables must be initialized before they can be used. You’ll get a compile-time error if you try to access a local variable without first assigning it a value:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="c1">// instance variables always get default values if</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// you don't initialize them</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">foo</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">myMethod</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// local variables do not get default values</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">bar</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">foo</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">  </code><code class="c1">// This is ok, foo has the value 0</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bar</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">  </code><code class="c1">// compile-time error, bar is uninitialized</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">bar</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">99</code><code class="p">;</code><code class="w">  </code><code class="c1">// This is ok, we're setting bar's initial value</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bar</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">  </code><code class="c1">// Now this calculation is ok</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Notice that this doesn’t imply you always have to initialize local variables when you declare them, just that you must assign some value to them before the first time you reference them. More subtle possibilities arise when making assignments inside conditionals:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="n">myMethod</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">bar</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">someCondition</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">bar</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">42</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bar</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">   </code><code class="c1">// Still a compile-time error, bar may not be initialized</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this example, <code>bar</code> is initialized only if <code>someCondition</code> is <code>true</code>. The compiler doesn’t let you make this wager, so it flags the use of <code>bar</code> after our <code>if</code> statement as an error.</p>&#13;
&#13;
<p>We could correct this situation in several ways. We could initialize the variable to a default value in advance or move the usage inside the conditional. We could also make sure the flow of control doesn’t reach the uninitialized variable through some other means, depending on what makes sense for our particular application. For example, we could simply make sure that we assign <code>bar</code> a value in both an <code>else</code> branch if <code>someCondition</code> is false. Or we could return from the method abruptly:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="n">myMethod</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">bar</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">someCondition</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">bar</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">42</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"> </code><code class="k">else</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="k">return</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">bar</code><code class="w"> </code><code class="o">+=</code><code class="w"> </code><code class="mi">1</code><code class="p">;</code><code class="w">  </code><code class="c1">// This is ok!</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this case, either <code>someCondition</code> is true and <code>bar</code> is set to 42, or it is false and control returns from <code>myMethod()</code>. There’s no chance of reaching <code>bar</code> in an uninitialized state, so the compiler allows this use of <code>bar</code> after the conditional.</p>&#13;
&#13;
<p>Why is Java so picky about local variables? One of the most common (and insidious) sources of errors in other languages, like C or C++, is forgetting to initialize local variables. Local variables in those languages start with seemingly random values and cause all kinds of frustration for the programmer. Java tries to help out and forces you to assign good, known values.<a data-primary="" data-startref="ix_local_var" data-type="indexterm" id="id1127"/><a data-primary="" data-startref="ix_method_var" data-type="indexterm" id="id1128"/><a data-primary="" data-startref="ix_var_initial" data-type="indexterm" id="id1129"/><a data-primary="" data-startref="ix_var_loc" data-type="indexterm" id="id1130"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Argument Passing and References" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.5">&#13;
<h2>Argument Passing and References</h2>&#13;
&#13;
<p>In the <a data-primary="reference (class) types" data-secondary="methods" data-type="indexterm" id="ix_ref_types_meth"/><a data-primary="passing arguments" data-type="indexterm" id="ix_pass_arg"/><a data-primary="methods" data-secondary="argument passing and references" data-type="indexterm" id="ix_method_arg_ref"/><a data-primary="arguments" data-secondary="method" data-type="indexterm" id="ix_arg_meth"/><a data-primary="references" data-secondary="method" data-type="indexterm" id="id1131"/>beginning of <a data-type="xref" href="ch04.html#learnjava6-CHP-4">Chapter 4</a>, we described the distinction between primitive types, which are passed by value (by copying), and objects, which are passed by reference. Now that you’ve got a better handle on methods in Java, let’s walk through an example:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="c1">// declare a method with some arguments</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">myMethod</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">num</code><code class="p">,</code><code class="w"> </code><code class="n">SomeKindOfObject</code><code class="w"> </code><code class="n">o</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// do some useful stuff with num and o</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// use the method</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">SomeKindOfObject</code><code class="w"> </code><code class="n">obj</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">SomeKindOfObject</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">myMethod</code><code class="p">(</code><code class="n">i</code><code class="p">,</code><code class="w"> </code><code class="n">obj</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>This chunk of code calls <code>myMethod()</code>, passing it two arguments. The first argument, <code>i</code>, is passed by value; when the method is called, the value of <code>i</code> is copied into the method’s first parameter (a local variable) named <code>num</code>. If <code>myMethod()</code> changes the value of <code>num</code>, it changes only its local variable. Our <code>i</code> will not be affected.</p>&#13;
&#13;
<p>In the same way, Java places a copy of the reference to <code>obj</code> into the argument <code>o</code> of <code>myMethod()</code>. But since it is a reference, both <code>obj</code> and <code>o</code> refer to the same object. Any changes made through either <code>o</code> or <code>obj</code> affect the actual object instance. If we change the value of, say, <code>o.size</code>, the change is visible both as <code>o.size</code> (inside <code>myMethod()</code>) and as <code>obj.size</code> (in the caller after <code>myMethod()</code> completes). However, if <code>myMethod()</code> reassigns the reference <code>o</code> to point to a different object, that assignment only affects its local variable reference. Assigning <code>o</code> to something else doesn’t affect the caller’s variable <code>obj</code>, which still refers to the original object.</p>&#13;
&#13;
<p>Passing <a data-primary="references" data-secondary="this reference" data-type="indexterm" id="id1132"/><a data-primary="this reference" data-type="indexterm" id="id1133"/>references to methods gives us a taste of the other use for the <code>this</code> keyword we mentioned earlier. You can use <code>this</code> to pass a reference for the current object to some other object. Let’s look at a bit of code to see how this (no pun intended) works:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Element</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">num</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">double</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">printMyDetails</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="k">this</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Our example is contrived, of course, but the syntax is correct. Inside the <code>printMyDetails()</code> method, we call our old friend, <code>System.out.println()</code>. The argument we pass to <code>println()</code> is <code>this</code>, meaning we want the current element object printed. We’ll be working with more complex object relationships in later chapters, and we will often need access to the current instance. The <code>this</code> keyword gives us that access.<a data-primary="" data-startref="ix_arg_meth" data-type="indexterm" id="id1134"/><a data-primary="" data-startref="ix_method_arg_ref" data-type="indexterm" id="id1135"/><a data-primary="" data-startref="ix_pass_arg" data-type="indexterm" id="id1136"/><a data-primary="" data-startref="ix_ref_types_meth" data-type="indexterm" id="id1137"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Wrappers for Primitive Types" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.6">&#13;
<h2>Wrappers for Primitive Types</h2>&#13;
&#13;
<p>As we <a data-primary="methods" data-secondary="wrappers for primitive types" data-type="indexterm" id="ix_meth_prim_type_wrap"/><a data-primary="wrappers" data-secondary="for primitive types" data-secondary-sortas="primitive types" data-type="indexterm" id="ix_wrap_prim_type"/><a data-primary="primitive data types" data-secondary="wrappers" data-type="indexterm" id="ix_prim_type_wrap"/>touched on briefly in <a data-type="xref" href="ch04.html#learnjava6-CHP-4-SECT-4.1">“Primitive Types”</a>, there is a schism in the Java world between class types (objects) and primitive types (numbers, characters, and Boolean values). Java accepts this trade-off for efficiency reasons. When you’re crunching numbers, you want your computations to be lightweight; having to use objects for primitive types complicates performance optimizations. It’s not common, but sometimes you need to store a primitive value as an object. For those occasions, Java supplies a standard wrapper class for each of the primitive types, as shown in <a data-type="xref" href="#learnjava6-CHP-5-TABLE-1">Table 5-1</a>.</p>&#13;
<table id="learnjava6-CHP-5-TABLE-1">&#13;
<caption><span class="label">Table 5-1. </span>Primitive type wrappers</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Primitive</th>&#13;
<th>Wrapper</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>void</code></p></td>&#13;
<td><p><code>java.lang.Void</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>boolean</code></p></td>&#13;
<td><p><code>java.lang.Boolean</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>char</code></p></td>&#13;
<td><p><code>java.lang.Character</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>byte</code></p></td>&#13;
<td><p><code>java.lang.Byte</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>short</code></p></td>&#13;
<td><p><code>java.lang.Short</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>int</code></p></td>&#13;
<td><p><code>java.lang.Integer</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>long</code></p></td>&#13;
<td><p><code>java.lang.Long</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>float</code></p></td>&#13;
<td><p><code>java.lang.Float</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>double</code></p></td>&#13;
<td><p><code>java.lang.Double</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>An instance of a wrapper class <a data-primary="encapsulation" data-type="indexterm" id="id1138"/>encapsulates a single value of its corresponding type. It’s an immutable object that serves as a container to hold the value and lets you retrieve it later. You can construct a wrapper object from a primitive value or from a <code>String</code> representation of the value. The <a data-primary="float primitive type" data-type="indexterm" id="id1139"/>following statements are equivalent:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Float</code><code class="w"> </code><code class="n">pi</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Float</code><code class="p">(</code><code class="mf">3.14</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Float</code><code class="w"> </code><code class="n">pi</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Float</code><code class="p">(</code><code class="s">"3.14"</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>The numeric wrapper constructors throw a <code>NumberFormatException</code> when they encounter an error parsing a string.</p>&#13;
&#13;
<p>Each of the <a data-primary="Number interface" data-type="indexterm" id="id1140"/><a data-primary="byteValue() method, Number" data-type="indexterm" id="id1141"/><a data-primary="doubleValue() method, Number" data-type="indexterm" id="id1142"/><a data-primary="floatValue() method, Number" data-type="indexterm" id="id1143"/><a data-primary="intValue() method, Number" data-type="indexterm" id="id1144"/><a data-primary="longValue() method, Number" data-type="indexterm" id="id1145"/><a data-primary="shortValue() method, Number" data-type="indexterm" id="id1146"/>numeric wrappers implements the <code>java.lang.Number</code> interface, which provides “value” methods to access its value in all the primitive forms. You can retrieve scalar values with the methods <code>doubleValue()</code>, <code>floatValue()</code>, <code>longValue()</code>, <code>intValue()</code>, <code>shortValue()</code>, and <code>byteValue()</code>:</p>&#13;
&#13;
<pre class="less_space pagebreak-before" data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Double</code><code class="w"> </code><code class="n">size</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Double</code><code class="w"> </code><code class="p">(</code><code class="mf">32.76</code><code class="p">);</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">d</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">size</code><code class="p">.</code><code class="na">doubleValue</code><code class="p">();</code><code class="w">     </code><code class="c1">// 32.76</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">float</code><code class="w"> </code><code class="n">f</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">size</code><code class="p">.</code><code class="na">floatValue</code><code class="p">();</code><code class="w">       </code><code class="c1">// 32.76f</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">long</code><code class="w"> </code><code class="n">l</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">size</code><code class="p">.</code><code class="na">longValue</code><code class="p">();</code><code class="w">         </code><code class="c1">// 32L</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">i</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">size</code><code class="p">.</code><code class="na">intValue</code><code class="p">();</code><code class="w">           </code><code class="c1">// 32</code><code class="w"/></pre>&#13;
&#13;
<p>This code is equivalent to casting the primitive <code>double</code> value to the various types.</p>&#13;
&#13;
<p>The most common need for these wrappers is when you want to pass a primitive value to a method that requires an object. For example, in <a data-type="xref" href="ch07.html#learnjava6-CHP-7">Chapter 7</a>, we’ll look at Java collections, a sophisticated set of classes for dealing with object groups, such as lists, sets, and maps. Collections work only with object types, so primitives must be wrapped when stored in them. As we’ll see in the next section, Java makes this <span class="keep-together">wrapping</span> process transparent and automatic. For now, however, let’s do it ourselves. As we’ll see, a <code>List</code> is an extensible collection of <code>Object</code>s. We can use wrappers to hold simple numbers in a <code>List</code> (along with other objects):</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// Manually wrapping an integer</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">List</code><code class="w"> </code><code class="n">myNumbers</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">ArrayList</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Integer</code><code class="w"> </code><code class="n">thirtyThree</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Integer</code><code class="p">(</code><code class="mi">33</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">myNumbers</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="n">thirtyThree</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>Here, we have created an <code>Integer</code> wrapper object so that we can insert the number into the <code>List</code>, using the <code>add()</code> method, which accepts an object. Later, when we are extracting elements from the <code>List</code>, we can recover the <code>int</code> value as follows:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// Manually unwrapping an integer</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Integer</code><code class="w"> </code><code class="n">theNumber</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="p">(</code><code class="n">Integer</code><code class="p">)</code><code class="n">myNumbers</code><code class="p">.</code><code class="na">get</code><code class="p">(</code><code class="mi">0</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">theNumber</code><code class="p">.</code><code class="na">intValue</code><code class="p">();</code><code class="w">           </code><code class="c1">// 33</code><code class="w"/></pre>&#13;
&#13;
<p>Happily, Java can do much of this work <a data-primary="autoboxing" data-type="indexterm" id="id1147"/>automatically. Java calls the automatic wrapping and unwrapping of primitive types <em>autoboxing</em>. As we alluded to earlier, allowing Java to do this for us makes the code more concise and secure. The usage of the wrapper class is mostly hidden from us by the compiler, but it is still being used internally. Here’s one more example that includes extra type information (<em>generics</em> in computer language parlance) and uses autoboxing:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="c1">// Using autoboxing and generics</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;</code><code class="w"> </code><code class="n">myNumbers</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">ArrayList</code><code class="o">&lt;</code><code class="n">Integer</code><code class="o">&gt;</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">myNumbers</code><code class="p">.</code><code class="na">add</code><code class="p">(</code><code class="mi">33</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">n</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">myNumbers</code><code class="p">.</code><code class="na">get</code><code class="p">(</code><code class="mi">0</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>Notice we don’t create any <a data-primary="" data-startref="Integer wrapper" data-type="indexterm" id="id1148"/>explicit instances of the <code>Integer</code> wrapper, although we do include that extra type information in angle brackets (<code>&lt;Integer&gt;</code>) when we declare our variable. We’ll see more of generics in <a data-type="xref" href="ch07.html#learnjava6-CHP-7">Chapter 7</a>.<a data-primary="" data-startref="ix_prim_type_wrap" data-type="indexterm" id="id1149"/><a data-primary="" data-startref="ix_meth_prim_type_wrap" data-type="indexterm" id="id1150"/><a data-primary="" data-startref="ix_wrap_prim_type" data-type="indexterm" id="id1151"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Method Overloading" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-2.7">&#13;
<h2>Method Overloading</h2>&#13;
&#13;
<p><em>Method overloading</em> is the <a data-primary="overloading methods" data-type="indexterm" id="ix_overload_meth"/><a data-primary="methods" data-secondary="overloading" data-type="indexterm" id="ix_method_overload"/>ability to define multiple methods with the same name in a class; when the method is invoked, the compiler picks the correct one based on the arguments passed to the method. This implies that overloaded methods must have different numbers or types of arguments. (In <a data-type="xref" href="#learnjava6-CHP-5-SECT-6.1.2">“Overriding methods”</a>, we’ll look at <em>method overriding</em>, which occurs when we declare methods with identical signatures in subclasses.)</p>&#13;
&#13;
<p>Method <a data-primary="ad hoc polymorphism" data-type="indexterm" id="id1152"/><a data-primary="polymorphism" data-type="indexterm" id="id1153"/>overloading (also called <em>ad hoc polymorphism</em>) is a powerful and useful feature. The idea is to create methods that act in the same way on different types of arguments. This creates the illusion that a single method can operate on many types of arguments. The <code>print()</code> method in the standard <code>PrintStream</code> class is a good example of method overloading in action. As you’ve probably deduced by now, you can print a string representation of just about anything using this expression:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">print</code><code class="p">(</code><code class="n">argument</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>The variable <code>out</code> is a reference to an object (a <code>PrintStream</code>) that defines nine different, “overloaded” versions of the <code>print()</code> method. The versions take arguments of the following types: <code>Object</code>, <code>String</code>, <code>char[]</code>, <code>char</code>, <code>int</code>, <code>long</code>, <code>float</code>, <code>double</code>, and <code>boolean</code>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">PrintStream</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">print</code><code class="p">(</code><code class="n">Object</code><code class="w"> </code><code class="n">arg</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">print</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">arg</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">print</code><code class="p">(</code><code class="kt">char</code><code class="o">[]</code><code class="w"> </code><code class="n">arg</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>You can <a data-primary="PrintStream class" data-type="indexterm" id="id1154"/><a data-primary="print() method, streams" data-type="indexterm" id="id1155"/>invoke the <code>print()</code> method with any of these types as an argument, and the value will be printed in an appropriate way. In a language without method overloading, this requires something more cumbersome, such as a uniquely named method for printing each type of object. In that case, it’s your responsibility to figure out what method to use for each data type.</p>&#13;
&#13;
<p>In Java, <code>print()</code> has been overloaded to support two reference types: <code>Object</code> and <code>String</code>. <a data-primary="String class" data-secondary="and overloading methods" data-secondary-sortas="overloading methods" data-type="indexterm" id="id1156"/>What if we try to call <code>print()</code> with some other reference type? <a data-primary="Date class" data-type="indexterm" id="id1157"/><a data-primary="java.util package" data-secondary="Date class" data-type="indexterm" id="id1158"/>Say, a <code>Date</code> object? When there’s not an exact type match, the compiler searches for an acceptable, <em>assignable</em> match. Since <code>Date</code>, like all classes, is a subclass of <code>Object</code>, a <code>Date</code> object can be assigned to a variable of type <code>Object</code>. It’s therefore an acceptable match, and the compiler selects the <code>Object</code> version of the method.</p>&#13;
&#13;
<p>What if there’s more than one possible match? For example, what if we want to print the literal <code>"Hi there"</code>? That literal is assignable to either <code>String</code> (since it is a <code>String</code>) or to <code>Object</code>, the parent class of <code>String</code>. Here, the compiler decides which match is “better” and selects that method. In this case, it selects the <code>String</code> version.</p>&#13;
&#13;
<p>The intuitive explanation for selecting the <code>String</code> version is that the <code>String</code> class is “closer” to the type of our literal <code>"Hi there"</code> in the inheritance hierarchy. It is a <em>more specific</em> match. A slightly more rigorous way of specifying it would be to say that a given method is more specific than another method if the argument types of the first method are all assignable to the argument types of the second method. In this case, the <code>String</code> method is more specific because type <code>String</code> is assignable to type <code>Object</code>. The reverse is not true.</p>&#13;
&#13;
<p>If you’re paying close attention, you may have noticed we said that the <a data-primary="compiler" data-secondary="overloaded method resolution" data-type="indexterm" id="id1159"/>compiler resolves overloaded methods. Method overloading is not something that happens at runtime; this is an important distinction. Making this decision during compilation means that once the overloaded method is selected, the choice is fixed until the code is recompiled, even if the class containing the called method is later revised and an even more specific overloaded method is added.</p>&#13;
&#13;
<p>This <a data-primary="overriding methods" data-type="indexterm" id="id1160"/><a data-primary="methods" data-secondary="overriding" data-type="indexterm" id="id1161"/>compile-time selection is in contrast to <em>overridden</em> methods, which are located at runtime and can be found even if they didn’t exist when the calling class was compiled. In practice, this distinction will not usually be relevant to you, as you will likely recompile all of the necessary classes at the same time. We’ll talk about method overriding later in the chapter.<a data-primary="" data-startref="ix_method_ch5" data-type="indexterm" id="id1162"/><a data-primary="" data-startref="ix_method_overload" data-type="indexterm" id="id1163"/><a data-primary="" data-startref="ix_overload_meth" data-type="indexterm" id="id1164"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Object Creation" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-3">&#13;
<h1>Object Creation</h1>&#13;
&#13;
<p>Objects in <a data-primary="objects" data-secondary="creating" data-type="indexterm" id="ix_obj_create_ch5"/><a data-primary="memory allocation and deallocation" data-type="indexterm" id="id1165"/>Java are allocated on a system “heap” memory space. Unlike some other languages, however, we needn’t manage that memory ourselves. Java takes care of memory allocation and deallocation for you. Java explicitly allocates storage for an object when you create it with the <code>new</code> operator. More importantly, objects are removed by garbage collection when they’re no longer referenced.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Constructors" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-3.1">&#13;
<h2>Constructors</h2>&#13;
&#13;
<p>Objects are <a data-primary="methods" data-secondary="constructors" data-type="indexterm" id="ix_method_construct_ch5"/><a data-primary="objects" data-secondary="constructors" data-type="indexterm" id="ix_obj_construct_ch5"/><a data-primary="constructors" data-type="indexterm" id="ix_construct_ch5"/><a data-primary="new operator" data-secondary="constructor object allocation" data-type="indexterm" id="id1166"/>allocated with the <code>new</code> operator using a <em>constructor</em>. A constructor is a special method with the same name as its class and no return type. It’s called when a new class instance is created, which gives the class an opportunity to set up the object for use. Constructors, like other methods, can accept arguments and can be overloaded. They are not, however, inherited like other methods:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Date</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">day</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other date variables ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// Simple "default" constructor</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">Date</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">day</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">currentDay</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="n">Date</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">date</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">day</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">parseDay</code><code class="p">(</code><code class="n">date</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// other Date methods ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this <a data-primary="default constructor" data-type="indexterm" id="id1167"/>snippet, the class <code>Date</code> has two constructors. The first takes no arguments; it’s known as the <em>default constructor</em>. Default constructors play a special role: if you don’t define any constructors for a class, the compiler will supply an empty default constructor for you. The default constructor is what gets called whenever you create an object by calling its constructor with no arguments.</p>&#13;
&#13;
<p>Here we have implemented the default constructor so that it sets the instance variable <code>day</code> by calling a hypothetical method, <code>currentDay()</code>, which presumably knows how to look up the current day. The second constructor takes a <code>String</code> argument. In this case, the <code>String</code> contains a date string that can be parsed to set the <code>day</code> variable. Given these constructors, we can create a <code>Date</code> object in the following ways:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Date</code><code class="w"> </code><code class="n">now</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Date</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Date</code><code class="w"> </code><code class="n">christmas</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Date</code><code class="p">(</code><code class="s">"Dec 25, 2022"</code><code class="p">);</code><code class="w"/></pre>&#13;
&#13;
<p>In each case, Java chooses the appropriate constructor at compile time based on the rules for overloaded method selection.</p>&#13;
&#13;
<p>If we later remove all <a data-primary="references" data-secondary="and garbage collection" data-secondary-sortas="garbage collection" data-type="indexterm" id="id1168"/>references to an allocated object, it’ll be garbage-collected, as we’ll discuss shortly:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">christmas</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">null</code><code class="p">;</code><code class="w">  </code><code class="c1">// christmas is now fair game for the garbage collector</code><code class="w"/></pre>&#13;
&#13;
<p>Setting this reference to <code>null</code> means it’s no longer pointing to the <code>"Dec 25, 2022"</code> date object. Setting the variable <code>christmas</code> to any other value would have the same effect. Unless another variable also refers to the original date object, the date is now inaccessible and can be garbage-collected. We’re not suggesting that you have to set references to <code>null</code> to get the values garbage-collected. <a data-primary="scope" data-secondary="variable" data-type="indexterm" id="id1169"/>Often this just happens naturally when local variables fall out of scope, but instance variables of objects live as long as the object itself lives (through references to it), and static variables live effectively forever.</p>&#13;
&#13;
<p>A few more notes: you can <a data-primary="visibility modifiers" data-type="indexterm" id="id1170"/><a data-primary="modifiers" data-secondary="for constructors" data-secondary-sortas="constructors" data-type="indexterm" id="id1171"/>declare constructors with the same visibility modifiers (<code>public</code>, <code>private</code>, or <code>protected</code>) as other methods, to control their accessibility. You can’t, however, make constructors <code>abstract</code>, <code>final</code>, or <code>synchronized</code>.   We’ll talk in detail about <code>abstract</code>, <code>final</code>, and visibility modifiers later in this chapter, and we’ll cover <code>synchronized</code> in <a data-type="xref" href="ch09.html#learnjava6-CHP-9">Chapter 9</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Working with Overloaded Constructors" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-3.2">&#13;
<h2>Working with Overloaded Constructors</h2>&#13;
&#13;
<p>A <a data-primary="overloading constructors" data-type="indexterm" id="ix_overload_construct"/><a data-primary="references" data-secondary="super reference" data-type="indexterm" id="id1172"/><a data-primary="super reference" data-type="indexterm" id="id1173"/><a data-primary="superclass" data-type="indexterm" id="id1174"/><a data-primary="this() method" data-type="indexterm" id="id1175"/>constructor can refer to another constructor in the same class or the immediate superclass using special forms of the <code>this</code> and <code>super</code> references. We’ll discuss the first case here and return to that of the superclass constructor after we have talked more about creating subclasses (often referred to simply as subclassing) and inheritance. A constructor can invoke another overloaded constructor in its class using the self-referential method call <code>this()</code> with appropriate arguments to select the desired constructor. If a constructor calls another constructor, <em>it must do so as its first statement</em>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Car</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="n">String</code><code class="w"> </code><code class="n">model</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">doors</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="n">Car</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">model</code><code class="p">,</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">doors</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">.</code><code class="na">model</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">model</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">.</code><code class="na">doors</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">doors</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// other, complicated stuff</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="n">Car</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">model</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">(</code><code class="n">model</code><code class="p">,</code><code class="w"> </code><code class="mi">4</code><code class="w"> </code><code class="cm">/* doors */</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this example, the class <code>Car</code> has two constructors. The first, more explicit one accepts arguments specifying the car’s model and its number of doors. The second constructor takes just the model as an argument and, in turn, calls the first constructor with a default value of four doors. The advantage of this approach is that you can have a single constructor do all the complicated setup work; other, more convenient constructors simply feed the appropriate arguments to that primary constructor.</p>&#13;
&#13;
<p>The special call to <code>this()</code> must appear as the first statement in our delegating constructor. The syntax is restricted in this way because there’s a need to identify a clear chain of command when calling constructors. At the end of the chain, Java invokes the constructor of the superclass (if we don’t do it explicitly in our code) to ensure that inherited members are initialized properly before we proceed.</p>&#13;
&#13;
<p>There’s also a point in the chain, just after invoking the constructor of the superclass, where the initializers of the current class’s instance variables are evaluated. Before that point, we can’t even reference the instance variables of our class. We’ll explain this situation again in complete detail after we have talked about inheritance.</p>&#13;
&#13;
<p>For now, all you need to know is that you can invoke a second constructor (delegate to it) only as the first statement of your constructor. For example, the following code is illegal and causes a compile-time error:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="n">Car</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">m</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">doors</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">determineDoors</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">(</code><code class="n">m</code><code class="p">,</code><code class="w"> </code><code class="n">doors</code><code class="p">);</code><code class="w">   </code><code class="c1">// Error: constructor call</code><code class="w"/>&#13;
<code class="w">                        </code><code class="c1">// must be first statement</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The simple model name constructor can’t do any additional setup before calling the more explicit constructor. It can’t even refer to an instance member for a constant value:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Car</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">default_doors</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">4</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="n">Car</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">m</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">(</code><code class="n">m</code><code class="p">,</code><code class="w"> </code><code class="n">default_doors</code><code class="p">);</code><code class="w"> </code><code class="c1">// Error: referencing</code><code class="w"/>&#13;
<code class="w">                              </code><code class="c1">// uninitialized variable</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The instance variable <code>defaultDoors</code> is not initialized until a later point in the chain of constructor calls setting up the object, so the compiler doesn’t let us access it yet. Fortunately, we can solve this particular problem by using a static variable instead of an instance variable:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Car</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">static</code><code class="w"> </code><code class="kd">final</code><code class="w"> </code><code class="kt">int</code><code class="w"> </code><code class="n">DEFAULT_DOORS</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">4</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="n">Car</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">m</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">(</code><code class="n">m</code><code class="p">,</code><code class="w"> </code><code class="n">DEFAULT_DOORS</code><code class="p">);</code><code class="w">  </code><code class="c1">// Okay!</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The static members of a class are initialized when the class is first loaded into the virtual machine. The compiler can determine the value of these static members so it’s safe to access them in a constructor.<a data-primary="" data-startref="ix_construct_ch5" data-type="indexterm" id="id1176"/><a data-primary="" data-startref="ix_method_construct_ch5" data-type="indexterm" id="id1177"/><a data-primary="" data-startref="ix_obj_construct_ch5" data-type="indexterm" id="id1178"/><a data-primary="" data-startref="ix_obj_create_ch5" data-type="indexterm" id="id1179"/><a data-primary="" data-startref="ix_overload_construct" data-type="indexterm" id="id1180"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Object Destruction" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-4">&#13;
<h1>Object Destruction</h1>&#13;
&#13;
<p>Now that we’ve seen how to <a data-primary="objects" data-secondary="destroying" data-type="indexterm" id="ix_obj_destroy"/>create objects, it’s time to talk about how to destroy them. If you’re accustomed to programming in C or C++, you’ve probably spent time hunting down <em>memory leaks</em> in your code. Programmers accidentally allow memory to leak by creating objects (which consume memory) and forgetting to destroy them (which returns the allocated memory) once the objects are no longer needed. Java takes care of object destruction for you; you don’t have to worry about traditional memory leaks, and you can concentrate on more important programming tasks.<sup><a data-type="noteref" href="ch05.html#id1181" id="id1181-marker">5</a></sup></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Garbage Collection" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-4.1">&#13;
<h2>Garbage Collection</h2>&#13;
&#13;
<p>Java uses a <a data-primary="garbage collection" data-type="indexterm" id="id1182"/>technique known as <em>garbage collection</em> to remove objects that are no longer needed. The garbage collector is Java’s Grim Reaper. It lingers in the background, stalking objects and awaiting their demise. It finds and watches them, periodically counting references to them to see when their time has come. <a data-primary="references" data-secondary="and garbage collection" data-secondary-sortas="garbage collection" data-type="indexterm" id="id1183"/><a data-primary="unreachable statements" data-type="indexterm" id="id1184"/>When all references to an object are gone and it’s no longer accessible, the garbage-collection mechanism declares the object <em>unreachable</em> and reclaims its space back to the available pool of resources. An unreachable object is one that can no longer be found through any combination of “live” references in the running application.</p>&#13;
&#13;
<p>Garbage collection uses a variety of algorithms; the Java virtual machine architecture doesn’t require a particular scheme. It’s worth noting, however, how some implementations of Java have accomplished this task. In the beginning, Java used a technique called “mark and sweep.” In this scheme, Java first walks through the tree of all accessible object references and marks them as alive. It then scans the heap, looking for identifiable objects that are <em>not</em> marked. Using this technique, Java can find objects on the heap because they are stored in a characteristic way and have a particular signature of bits in their handles that’s unlikely to be reproduced naturally. This kind of algorithm doesn’t become confused by the problem of cyclic references, in which objects can mutually reference each other and appear alive even when they are dead (Java handles this problem automatically). This scheme wasn’t the fastest method, however, and caused pauses in programs. Since then, implementations have become much more sophisticated.</p>&#13;
&#13;
<p>Modern Java garbage collectors effectively run continuously without forcing any lengthy delay in execution of the Java application. Because they are part of a runtime system, they can also accomplish some things that could not be done statically. For instance, Java divides the memory heap into several areas for objects with different estimated life spans. Short-lived objects are placed on a special part of the heap, which drastically reduces the time required to recycle them. Objects that live longer can be moved to other, less volatile parts of the heap. In recent implementations, the garbage collector can even “tune” itself by adjusting the heap partition sizes based on the actual application performance. The improvement in Java’s garbage collection since the early releases has been remarkable and is one of the reasons that Java is now roughly equivalent in speed to many traditional languages that place the burden of memory management on the shoulders of the programmer.</p>&#13;
&#13;
<p>In general, you do not have to <a data-primary="gc() method" data-type="indexterm" id="id1185"/>concern yourself with the garbage-collection process. But one garbage-collection method can be useful for debugging. You can prompt the garbage collector to make a clean sweep explicitly by invoking the <code>System.gc()</code> method. This method is completely implementation dependent and may do nothing, but you can use it if you want some guarantee that Java has at least tried to clean up memory before you do an activity.<a data-primary="" data-startref="ix_obj_destroy" data-type="indexterm" id="id1186"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Packages" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-5">&#13;
<h1>Packages</h1>&#13;
&#13;
<p>Even when we stick to simple examples, you may have noticed that solving problems in <a data-primary="packages" data-secondary="and objects" data-secondary-sortas="objects" data-type="indexterm" id="ix_pkg_obj"/><a data-primary="objects" data-secondary="and packages" data-secondary-sortas="packages" data-type="indexterm" id="ix_obj_pkg"/><a data-primary="packages" data-secondary="and class files" data-secondary-sortas="class files" data-type="indexterm" id="id1187"/><a data-primary="classes" data-secondary="and packages" data-secondary-sortas="packages" data-type="indexterm" id="id1188"/>Java requires creating classes. For our game classes above, we have our apples and our trees and our playing field, to name just a few. For more complex applications or libraries, you can have hundreds or even thousands of classes. <a data-primary="package statement" data-type="indexterm" id="id1189"/>You need a way to organize things, and Java uses the notion of a <em>package</em> to accomplish this task. Let’s look at some examples.</p>&#13;
&#13;
<p>Recall our second Hello World example in <a data-type="xref" href="ch02.html#learnjava6-CHP-2">Chapter 2</a>. The first few lines in the file show us a lot of information about where the code lives:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch02.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloJava</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>We named the Java file <em>HelloJava.java</em> according to the main class (<code>HelloJava</code>) in that file. When we talk about organizing things that go in files, you might naturally think of using folders to organize those files in turn. That is essentially what Java does. In this example, we use the <code>package</code> keyword and assign a package name of <code>ch02.examples</code>. Packages map onto folder names much the way classes map onto filenames. From the directory where you installed the examples for this book, then, this class should be found in the file <em>ch02/examples/HelloJava.java</em>. Take a look back at <a data-type="xref" href="#learnjava6-CHP-5-FIG-1">Figure 5-1</a> where we have some classes grouped into their packages. If you were looking at the Java source code for the Swing components we used in <code>HelloJava</code>, for example, you would find a folder named <em>javax</em>, and under that, one named <em>swing</em>, and under that you would find files like <em>JFrame.java</em> and <em>JLabel.java</em>.</p>&#13;
&#13;
<p>Each class belongs to exactly one package. Package names follow the same general rules as other Java identifiers and are all lowercase by convention. If you don’t specify a package, Java assigns your class to the “default” package. Using the default package is fine for one-off demos, but you should otherwise use <code>package</code> for your classes. The default package has several limitations—for example, a class in the default package cannot be used with <em>jshell</em>—and is not meant to be used beyond testing.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Importing Classes" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-5.1">&#13;
<h2>Importing Classes</h2>&#13;
&#13;
<p>One of <a data-primary="importing" data-secondary="classes" data-type="indexterm" id="ix_import_class"/>Java’s biggest strengths lies in the vast collection of supporting libraries available under both commercial and open source licensing. Need to export a PDF? There’s a library for that. Need to import a spreadsheet? There’s a library for that. Need to turn on that smart lightbulb in the basement from a web server in the cloud? There’s a library for that, too. If computers are doing some task or other, you will almost always find a Java library to help you write code to perform that task as well.</p>&#13;
&#13;
<p>To use any of these wonderful <a data-primary="import keyword" data-type="indexterm" id="ix_import_key"/>libraries, you <em>import</em> them with the cleverly named <code>import</code> keyword. We used <code>import</code> with our <code>HelloJava</code> example so we could add the frame and label components from the Swing graphical library. You can import individual classes or entire packages. Let’s look at some examples.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Importing individual classes" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-5.1.1">&#13;
<h3>Importing individual classes</h3>&#13;
&#13;
<p>In <a data-primary="importing" data-secondary="individual classes" data-type="indexterm" id="id1190"/>programming, you’ll often hear the maxim that “less is more.” Less code is more maintainable. Less overhead means more throughput, and so on. (Although in pursuing this way of coding, we do want to remind you to follow another famous quote from no less a thinker than Einstein: “Everything should be made as simple as possible, but no simpler.”) If you need only one or two classes from an external package, you can import exactly those classes. This makes your code a little more readable—others know exactly what classes you’ll be using.</p>&#13;
&#13;
<p>Let’s reexamine that earlier snippet of <code>HelloJava</code>. We used a blanket import (more on that in the next section), but we could tighten things up a bit by importing just the classes we need, like so:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch02.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.JFrame</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.JLabel</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloJava</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>This type of import setup is certainly more verbose, but again, it means anyone reading or compiling your code knows its exact dependencies. Many IDEs even have an “Optimize Imports” function that will automatically find those dependencies and list them individually. Once you get in the habit of listing and seeing these explicit imports, it is surprising how useful they become when orienting yourself in a new (or perhaps long-forgotten) class.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Importing entire packages" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-5.1.2">&#13;
<h3>Importing entire packages</h3>&#13;
&#13;
<p>Of course, <a data-primary="packages" data-secondary="importing" data-type="indexterm" id="id1191"/><a data-primary="importing" data-secondary="entire packages" data-type="indexterm" id="id1192"/><a data-primary="javax.swing package" data-seealso="desktop applications" data-type="indexterm" id="id1193"/>not every package lends itself to individual imports. That same Swing package, <code>javax.swing</code>, is a great example. If you are writing a graphical desktop application, you’ll almost certainly use Swing—and lots and lots of its components. You can import every class in the package using the syntax we glossed over earlier:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloJava</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JFrame</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The <code>*</code> is a sort of <a data-primary="* (asterisk)" data-secondary="wildcard type" data-type="indexterm" id="id1194"/><a data-primary="wildcard (*) type" data-type="indexterm" id="id1195"/>wildcard for class imports. This version of the <code>import</code> statement tells the compiler to have every class in the package ready to use. You’ll see this type of import quite often for many of the common Java packages, such as AWT, Swing, utilities, and I/O. Again, it works for any package, but where it makes sense to be more specific, you’ll gain some compile-time performance boosts and improve the readability of your code.</p>&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>While it might seem natural for a wildcard <code>import</code> to include both the classes of the named package as well as the classes from any subpackages, Java does not allow recursive imports. If you need some classes from <code>java.awt</code> and some more classes from <code>java.awt.event</code>, you must supply separate <code>import</code> lines for each package.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Skipping imports" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-5.1.3">&#13;
<h3>Skipping imports</h3>&#13;
&#13;
<p>You have <a data-primary="importing" data-secondary="skipping imports" data-type="indexterm" id="id1196"/>another option for using external classes from other packages—you can use their fully qualified names right in your code. For example, our <code>HelloJava</code> class used the <code>JFrame</code> and <code>JLabel</code> classes from the <code>javax.swing</code> package. We could import only the <code>JLabel</code> class if we wanted:</p>&#13;
&#13;
<pre class="less_space pagebreak-before" data-code-language="java" data-type="programlisting"><code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.JLabel</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloJava</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">javax</code><code class="p">.</code><code class="na">swing</code><code class="p">.</code><code class="na">JFrame</code><code class="w"> </code><code class="n">frame</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">javax</code><code class="p">.</code><code class="na">swing</code><code class="p">.</code><code class="na">JFrame</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">JLabel</code><code class="w"> </code><code class="n">label</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">JLabel</code><code class="p">(</code><code class="s">"Hello, Java!"</code><code class="p">,</code><code class="w"> </code><code class="n">JLabel</code><code class="p">.</code><code class="na">CENTER</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>This might seem overly verbose for one line where we create our frame, but in larger classes with already lengthy lists of imports, one-off usages can actually make your code more readable. Such a fully qualified entry often points to the sole use of this class within a file. If you were using that class many times, you would <code>import</code> it or its package. This type of full-name usage is never a requirement, but you will see it in the wild from time to time.<a data-primary="" data-startref="ix_import_class" data-type="indexterm" id="id1197"/><a data-primary="" data-startref="ix_import_key" data-type="indexterm" id="id1198"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Custom Packages" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-5.2">&#13;
<h2>Custom Packages</h2>&#13;
&#13;
<p>As you <a data-primary="packages" data-secondary="custom" data-type="indexterm" id="ix_package_custom"/>continue learning Java and write more code and solve larger problems, you will undoubtedly start to collect a larger and larger number of classes. You can use packages to help organize that collection. You use the <code>package</code> keyword to declare a custom package. You then place the file with your class inside a folder structure corresponding to the package name. As a quick reminder, packages use all lowercase names (by convention) separated by periods, such as in our graphical interface package, <code>javax.swing</code>.</p>&#13;
&#13;
<p>Another convention applied widely to package names is something called “reverse domain name” naming. Apart from the packages associated directly with Java, third-party libraries and other contributed code are usually organized using the domain name of the company or individual’s email address. For example, the Mozilla Foundation has contributed a variety of Java libraries to the open source community. Most of those libraries and utilities will be in packages starting with Mozilla’s domain, <em>mozilla.org</em>, in reverse order: <code>org.mozilla</code>. This reverse naming has the handy (and intended) side effect of keeping the folder structure at the top fairly small. It is not uncommon for good-sized projects to use libraries from only the <code>com</code> and <code>org</code> top-level domains.</p>&#13;
&#13;
<p>If you are building your own packages separate from any company or contract work, you can use your email address and reverse it, similar to company domain names. Another popular option for code distributed online is to use the domain of your hosting provider. GitHub, for example, hosts many, <em>many</em> Java projects for hobbyists and enthusiasts. You might create a package named <code>com.github.myawesomeproject</code> (where <code>myawesomeproject</code> would obviously be replaced by your actual project name). Be aware that repositories at sites like GitHub often allow names that are not valid in package names. You might have a repo named <code>my-awesome-project</code>, but dashes are not allowed in any portion of a package name. Often such illegal characters are simply omitted to create a valid name.</p>&#13;
&#13;
<p>You may have already noticed we placed the various examples from this book in packages. While organizing classes <em>within</em> packages is a woolly topic with no great best practices available, we’ve taken an approach designed to make the examples easy to locate as you’re reading the book. For any complete examples in a chapter, you’ll see a package like <code>ch05.examples</code>. For the ongoing game example, we use a <code>game</code> subpackage. We put the end-of-chapter exercises in <code>ch05.exercises</code>.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>When you compile a packaged class, you need to tell the compiler where the actual file resides within the filesystem, so you use its path, with the package elements separated by your filesystem separator (typically <code>/</code> or <code>\</code>). When you run a packaged class, on the other hand, you specify its fully qualified, dot-separated name.</p>&#13;
</div>&#13;
&#13;
<p>If you are using an <a data-primary="IDE (Integrated Development Environment)" data-type="indexterm" id="id1199"/><a data-primary="Integrated Development Environment (IDE)" data-type="indexterm" id="id1200"/>IDE, it will happily manage these package issues for you. Simply create and organize your classes and continue to identify the main class that kicks off your program.<a data-primary="" data-startref="ix_package_custom" data-type="indexterm" id="id1201"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Member Visibility and Access" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-5.3">&#13;
<h2>Member Visibility and Access</h2>&#13;
&#13;
<p>We’ve talked a bit about the <a data-primary="classes" data-secondary="visibility" data-type="indexterm" id="ix_class_vis"/><a data-primary="packages" data-secondary="modifiers in" data-type="indexterm" id="id1202"/><a data-primary="access modifiers" data-type="indexterm" id="id1203"/><a data-primary="modifiers" data-secondary="in packages" data-secondary-sortas="packages" data-type="indexterm" id="id1204"/><a data-primary="private access modifier" data-type="indexterm" id="id1205"/><a data-primary="protected access modifier" data-type="indexterm" id="id1206"/><a data-primary="public access modifier" data-type="indexterm" id="id1207"/><a data-primary="visibility modifiers" data-type="indexterm" id="id1208"/>access modifiers you can use when declaring variables and methods. Making something <code>public</code> means anyone, anywhere, can see your variable or call your method. Making something <code>protected</code> means any subclass can access the variable, call the method, or override the method to provide some alternate functionality more appropriate to your subclass. The <code>private</code> modifier means the variable or method is available only within the class itself.</p>&#13;
&#13;
<p>Packages affect <code>protected</code> members. In addition to being accessible by any subclass, such members are visible and can be overridden by other classes in the same package. Packages also come into play if you leave off the modifier altogether. Consider some example text components in the custom package <code>mytools.text</code>, as shown in <a data-type="xref" href="#learnjava6-CHP-5-FIG-4">Figure 5-4</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-4">&#13;
<img alt="ljv6 0504" src="assets/ljv6_0504.png"/>&#13;
<h6><span class="label">Figure 5-4. </span>Packages and class visibility</h6>&#13;
</div></figure>&#13;
&#13;
<p>The class <code>TextComponent</code> has no modifier. It has <em>default</em> visibility or “package private” visibility. This means that other classes <em>in the same package</em> can access the class, but any classes outside the package cannot. This can be very useful for implementation-specific classes or internal helpers. You can use the package private elements freely in building your code, but other programmers can use only your <code>public</code> and <code>protected</code> elements. <a data-type="xref" href="#learnjava6-CHP-5-FIG-5">Figure 5-5</a> shows more details, with both subclasses and external classes using variables and methods for a sample class.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-5">&#13;
<img alt="ljv6 0505" src="assets/ljv6_0505.png"/>&#13;
<h6><span class="label">Figure 5-5. </span>Packages and member visibility</h6>&#13;
</div></figure>&#13;
&#13;
<p>Notice that extending the <code>TextArea</code> class gives you access to the public <code>getText()</code> and <code>setText()</code> methods as well as the <code>protected</code> method <code>formatText()</code>. But <code>MyTextDisplay</code> (more on subclasses and <code>extends</code> shortly in <a data-type="xref" href="#learnjava6-CHP-5-SECT-6.1">“Subclassing and Inheritance”</a>) does not have access to the package-private variable <code>linecount</code>. Within the <code>mytools.text</code> package where we create the <code>TextEditor</code> class, however, we can get to <code>linecount</code> as well as those methods that are <code>public</code> or <code>protected</code>. Our internal storage for the content, <code>text</code>, remains private and unavailable to anyone other than the <code>TextArea</code> class itself.</p>&#13;
&#13;
<p><a data-type="xref" href="#learnjava6-CHP-5-TABLE-2">Table 5-2</a> summarizes the levels of visibility available in Java; it runs generally from most to least restrictive. Methods and variables are always visible within a declaring class itself, so the table doesn’t address that scope.<a data-primary="" data-startref="ix_class_vis" data-type="indexterm" id="id1209"/></p>&#13;
<table id="learnjava6-CHP-5-TABLE-2">&#13;
<caption><span class="label">Table 5-2. </span>Visibility modifiers</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Modifier</th>&#13;
<th>Visibility outside the class</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>private</code></p></td>&#13;
<td><p>None</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>No modifier (default)</p></td>&#13;
<td><p>Classes in the package</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>protected</code></p></td>&#13;
<td><p>Classes in package and subclasses inside or outside the package</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>public</code></p></td>&#13;
<td><p>All classes</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Compiling with Packages" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-5.4">&#13;
<h2>Compiling with Packages</h2>&#13;
&#13;
<p>You’ve already seen a few <a data-primary="classes" data-secondary="compiling" data-type="indexterm" id="id1210"/><a data-primary="packages" data-secondary="compiling with" data-type="indexterm" id="id1211"/>examples of using a fully qualified class name to compile a simple example. If you’re not using an IDE, you have other options available to you. For example, you may wish to compile all of the classes in a given package. If so, you can do this:</p>&#13;
&#13;
<pre data-type="programlisting">% javac ch02/examples/*.java&#13;
% java ch02.examples.HelloJava</pre>&#13;
&#13;
<p>Note that for commercial applications, you often see more complex package names that include multiple segments. As we mentioned earlier, a common practice is to reverse the internet domain name of your company. For example, this book from O’Reilly might more appropriately use a full package prefix such as <code>com.oreilly.learningjava6e</code>. Each chapter would be a subpackage under that prefix. Compiling and running classes in such packages is fairly straightforward, if a bit wordy:</p>&#13;
&#13;
<pre data-type="programlisting">% javac com/oreilly/learningjava6e/ch02/examples/*.java&#13;
% java com.oreilly.learningjava6e.ch02.examples.HelloJava</pre>&#13;
&#13;
<p>The <em>javac</em> command also <a data-primary="javac command-line utility" data-type="indexterm" id="id1212"/>understands basic class dependency. If your main class uses a few other classes in the same source hierarchy—even if they are not all in the same package—compiling that main class will “pick up” the other, dependent classes and compile them as well.<a data-primary="" data-startref="ix_obj_pkg" data-type="indexterm" id="id1213"/><a data-primary="" data-startref="ix_pkg_obj" data-type="indexterm" id="id1214"/></p>&#13;
&#13;
<p>Beyond simple programs with a few classes in a single package, though, you really are more likely to rely on your IDE or a build management tool such as Gradle or Maven. <a data-primary="Maven: The Definitive Guide (Van Zyl)" data-type="indexterm" id="id1215"/><a data-primary="Van Zyl, Jason" data-type="indexterm" id="id1216"/>Those tools are outside the scope of this book, but there are many references for them online. Maven in particular is popular for managing large projects with many dependencies. See <a href="https://oreil.ly/ya4DY"><em>Maven: The Definitive Guide</em></a> (O’Reilly) by Maven creator Jason Van Zyl and his team at Sonatype for a true exploration of the features and capabilities of this powerful tool.<sup><a data-type="noteref" href="ch05.html#id1217" id="id1217-marker">6</a></sup></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Advanced Class Design" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-6">&#13;
<h1>Advanced Class Design</h1>&#13;
&#13;
<p>You may recall from <a data-type="xref" href="ch02.html#learnjava6-CHP-2-SECT-3">“HelloJava2: The Sequel”</a> that we had two classes in the same file. That simplified the writing and compiling process but didn’t grant either class any special access to the other. As you start thinking about more complex problems, you will encounter cases where more advanced class design that does grant special access is not just handy but critical to writing maintainable code.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Subclassing and Inheritance" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-6.1">&#13;
<h2>Subclassing and Inheritance</h2>&#13;
&#13;
<p>Classes in Java exist in a <a data-primary="subclasses" data-secondary="and inheritance" data-secondary-sortas="inheritance" data-type="indexterm" id="ix_subclass_inherit"/><a data-primary="classes" data-secondary="subclasses" data-type="indexterm" id="ix_class_subclass"/><a data-primary="inheritance" data-type="indexterm" id="ix_inherit_ch5"/><a data-primary="classes" data-secondary="inheritance" data-type="indexterm" id="ix_class_inherit2"/><a data-primary="superclass" data-type="indexterm" id="id1218"/>hierarchy. You can declare a class in Java as a <em>subclass</em> of another class using the <code>extends</code> keyword. A subclass <em>inherits</em> variables and methods from its <em>superclass</em> and can use them as if they were declared within the subclass itself:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">eat</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// do eating stuff</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other animal stuff</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="kd">class</code> <code class="nc">Mammal</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// inherits weight</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">heartRate</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// inherits eat()</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">breathe</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// respire</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this example, an object of type <code>Mammal</code> has both the instance variable <code>weight</code> and the method <code>eat()</code>. They are inherited from <code>Animal</code>.</p>&#13;
&#13;
<p>A <a data-primary="single inheritance" data-type="indexterm" id="id1219"/><a data-primary="multiple inheritance" data-type="indexterm" id="id1220"/>class can <em>extend</em> only one other class. To use the proper terminology, Java allows <em>single inheritance</em> of a class implementation. Later in this chapter, we’ll talk about interfaces, which take the place of <em>multiple inheritance</em> found in other languages.</p>&#13;
&#13;
<p>A subclass can be further subclassed. Normally, subclassing specializes or refines a class by adding variables and methods (you cannot remove or hide variables or methods by subclassing). For example:</p>&#13;
&#13;
<pre class="less_space pagebreak-before" data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Cat</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">Mammal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// inherits weight and heartRate</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">boolean</code><code class="w"> </code><code class="n">longHair</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// inherits eat() and breathe()</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">purr</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// make nice sounds</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The <code>Cat</code> class is a type of <code>Mammal</code> that is ultimately a type of <code>Animal</code>. <code>Cat</code> objects inherit all the characteristics of <code>Mammal</code> objects and, in turn, <code>Animal</code> objects. <code>Cat</code> also provides additional behavior in the form of the <code>purr()</code> method and the <code>longHair</code> variable. We can denote the class relationship in a diagram, as shown in <a data-type="xref" href="#learnjava6-CHP-5-FIG-6">Figure 5-6</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-6">&#13;
<img alt="ljv6 0506" src="assets/ljv6_0506.png"/>&#13;
<h6><span class="label">Figure 5-6. </span>A class hierarchy</h6>&#13;
</div></figure>&#13;
&#13;
<p>A subclass inherits all members of its superclass not designated as <code>private</code>. As we’ll discuss shortly, other levels of visibility affect which inherited members of the class can be seen from outside of the class and its subclasses, but at a minimum, a subclass always has the same set of visible members as its parent. For this reason, the type of a subclass can be considered a <em>subtype</em> of its parent, and instances of the subtype can be used anywhere instances of the supertype are allowed. Consider the following <span class="keep-together">example:</span></p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Cat</code><code class="w"> </code><code class="n">simon</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Cat</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Animal</code><code class="w"> </code><code class="n">creature</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">simon</code><code class="p">;</code><code class="w"/></pre>&#13;
&#13;
<p>The <code>Cat</code> instance <code>simon</code> in this example can be assigned to the <code>Animal</code> type variable <code>creature</code> because <code>Cat</code> is a subtype of <code>Animal</code>. Similarly, any method accepting an <code>Animal</code> object would accept an instance of a <code>Cat</code> or any <code>Mammal</code> type as well. This is an important aspect of polymorphism in an object-oriented language such as Java. We’ll see how it can be used to refine a class’s behavior, as well as add new capabilities to it.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Shadowed variables" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-6.1.1">&#13;
<h3>Shadowed variables</h3>&#13;
&#13;
<p>We have seen that a <a data-primary="variables" data-secondary="shadowing" data-type="indexterm" id="ix_var_shadow"/><a data-primary="shadowed variables" data-type="indexterm" id="ix_shadow_var"/>local variable of the same name as an instance variable <em>shadows</em> (hides) the instance variable. Similarly, an instance variable in a subclass can shadow an instance variable of the same name in its parent class, as shown in <a data-type="xref" href="#learnjava6-CHP-5-FIG-7">Figure 5-7</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-7">&#13;
<img alt="ljv6 0507" src="assets/ljv6_0507.png"/>&#13;
<h6><span class="label">Figure 5-7. </span>The scope of shadowed variables</h6>&#13;
</div></figure>&#13;
&#13;
<p>The variable <code>weight</code> is declared in three places: as a local variable in the method <code>foodConsumption()</code> of the class <code>Mammal</code>, as an instance variable of the class <code>Mammal</code> itself, and as an instance variable of the class <code>Animal</code>. The <a data-primary="scope" data-secondary="variable" data-type="indexterm" id="id1221"/>actual variable you would reference in the code would depend on the scope in which you are working and how you qualify the reference to it.</p>&#13;
&#13;
<p>In the previous example, all variables were of the same type. A slightly more plausible use of shadowed variables would involve changing their types. We could, for example, shadow an <code>int</code> variable with a <code>double</code> variable in a subclass that needs decimal values instead of integer values. We can do this without changing the existing code because, as its name suggests, when we shadow variables, we don’t replace them but rather mask them instead. Both variables still exist; methods of the superclass see the original variable, and methods of the subclass see the new version. What variables the various methods see is determined at compile time.</p>&#13;
&#13;
<p>Here’s a simple example:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">IntegerCalculator</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">int</code><code class="w"> </code><code class="n">sum</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other integer stuff ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="kd">class</code> <code class="nc">DecimalCalculator</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">IntegerCalculator</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">double</code><code class="w"> </code><code class="n">sum</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other floating point stuff ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>In this example, we shadow the instance variable <code>sum</code> to change its type from <code>int</code> to <code>double</code>.<sup><a data-type="noteref" href="ch05.html#id1222" id="id1222-marker">7</a></sup> <a data-primary="DecimalCalculator class" data-type="indexterm" id="id1223"/><a data-primary="IntegerCalculator class" data-type="indexterm" id="id1224"/>Methods defined in the class <code>IntegerCalculator</code> see the integer variable <code>sum</code>, while methods defined in <code>DecimalCalculator</code> see the floating-point variable <code>sum</code>. However, both variables actually exist for a given instance of &#13;
<span class="keep-together"><code>DecimalCalculator</code></span>, and they can have independent values. In fact, any methods that &#13;
<span class="keep-together"><code>DecimalCalculator</code></span> inherits from <code>IntegerCalculator</code> actually see the integer variable <code>sum</code>. If that sounds confusing—it certainly can be. Shadowing is something you should avoid when possible. But it isn’t always possible to avoid, so we want to make sure you have seen some examples, albeit contrived ones.</p>&#13;
&#13;
<p>Because both variables exist in <code>DecimalCalculator</code>, we need a way to reference the variable inherited from <code>IntegerCalculator</code>. We do that using the <code>super</code> keyword as a qualifier on the reference:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kd">super</code><code class="p">.</code><code class="na">sum</code><code class="p">;</code><code class="w"/></pre>&#13;
&#13;
<p>Inside of <code>DecimalCalculator</code>, the <code>super</code> <a data-primary="references" data-secondary="super reference" data-type="indexterm" id="id1225"/><a data-primary="super reference" data-type="indexterm" id="id1226"/>keyword used in this manner selects the <code>sum</code> variable defined in the superclass. We’ll explain the use of <code>super</code> more fully in a bit.</p>&#13;
&#13;
<p>Another important point about shadowed variables has to do with how they work when we refer to an object by way of a less derived type (a parent type). For example, we can refer to a <code>DecimalCalculator</code> object as an <code>IntegerCalculator</code> by using it via a variable of type <code>IntegerCalculator</code>. If we do so and then access the variable <code>sum</code>, we get the integer variable, not the decimal one:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">DecimalCalculator</code><code class="w"> </code><code class="n">dc</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">DecimalCalculator</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">IntegerCalculator</code><code class="w"> </code><code class="n">ic</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">dc</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">s</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">ic</code><code class="p">.</code><code class="na">sum</code><code class="p">;</code><code class="w">       </code><code class="c1">// accesses IntegerCalculator sum</code><code class="w"/></pre>&#13;
&#13;
<p>The same would be true if we accessed the object using an explicit cast to the <code>IntegerCalculator</code> type or when passing an instance into a method that accepts that parent type.</p>&#13;
&#13;
<p>To reiterate, the usefulness of shadowed variables is limited. It’s much better to abstract the use of variables like this in other ways than to use tricky scoping rules. However, it’s important to understand the concepts here before we talk about doing the same thing with methods. We’ll see a different and more dynamic type of behavior when methods shadow other methods, or to use the correct terminology, <em>override</em> other methods. Overriding methods in a subclass is quite common and can be very powerful.<a data-primary="" data-startref="ix_shadow_var" data-type="indexterm" id="id1227"/><a data-primary="" data-startref="ix_var_shadow" data-type="indexterm" id="id1228"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Overriding methods" data-type="sect3"><div class="sect3" id="learnjava6-CHP-5-SECT-6.1.2">&#13;
<h3>Overriding methods</h3>&#13;
&#13;
<p>We have seen that we can declare <a data-primary="superclass" data-type="indexterm" id="ix_superclass"/><a data-primary="overriding methods" data-type="indexterm" id="ix_override_meth"/><a data-primary="subclasses" data-secondary="overriding methods" data-type="indexterm" id="ix_subclass_override_meth"/><a data-primary="methods" data-secondary="overriding" data-type="indexterm" id="ix_method_override"/><a data-primary="methods" data-secondary="overloading" data-type="indexterm" id="id1229"/><a data-primary="overloading methods" data-type="indexterm" id="id1230"/>overloaded methods (methods with the same name but a different number or type of arguments) within a class. Overloaded method selection works in the way we described on all methods available to a class, including inherited ones. This means that a subclass can define additional overloaded methods that add to the overloaded methods provided by a superclass.</p>&#13;
&#13;
<p>A subclass can do <a data-primary="polymorphism" data-type="indexterm" id="id1231"/><a data-primary="subtype polymorphism" data-type="indexterm" id="id1232"/>more than that; it can define a method that has exactly the <em>same</em> method signature (name and argument types) as a method in its superclass. In that case, the method in the subclass <em>overrides</em> the method in the superclass and effectively replaces its implementation, as shown in <a data-type="xref" href="#learnjava6-CHP-5-FIG-8">Figure 5-8</a>. Overriding methods to change the behavior of objects is called <em>subtype polymorphism</em>. It’s the usage most people think of when they talk about the power of object-oriented languages.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-8">&#13;
<img alt="ljv6 0508" src="assets/ljv6_0508.png"/>&#13;
<h6><span class="label">Figure 5-8. </span>Method overriding</h6>&#13;
</div></figure>&#13;
&#13;
<p>In <a data-type="xref" href="#learnjava6-CHP-5-FIG-8">Figure 5-8</a>, <code>Mammal</code> overrides the <code>reproduce()</code> method of <code>Animal</code>, perhaps to specialize the method for the behavior of mammals giving birth to live young.<sup><a data-type="noteref" href="ch05.html#id1233" id="id1233-marker">8</a></sup> The <code>Cat</code> object’s sleeping behavior is also overridden to be different from that of a general <code>Animal</code>, perhaps to accommodate catnaps. The <code>Cat</code> class also adds the more unique behaviors of purring and hunting mice.</p>&#13;
&#13;
<p>From what you’ve seen so far, overridden methods probably look like they shadow methods in superclasses, just as variables do. But overridden methods are actually more powerful than that. When there are multiple implementations of a method in the inheritance hierarchy of an object, the one in the “most derived” class (the furthest down the hierarchy) always overrides the others, even if we refer to the object through a reference of one of the superclass types.<sup><a data-type="noteref" href="ch05.html#id1234" id="id1234-marker">9</a></sup></p>&#13;
&#13;
<p>For example, if we have a <code>Cat</code> instance assigned to a variable of the more general type <code>Animal</code>, and we call its <code>sleep()</code> method, we still get the <code>sleep()</code> method implemented in the <code>Cat</code> class, not the one in <code>Animal</code>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Cat</code><code class="w"> </code><code class="n">simon</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Cat</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Animal</code><code class="w"> </code><code class="n">creature</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">simon</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">creature</code><code class="p">.</code><code class="na">sleep</code><code class="p">();</code><code class="w">       </code><code class="c1">// accesses Cat sleep();</code><code class="w"/></pre>&#13;
&#13;
<p>In other words, for purposes of behavior (invoking methods), a <code>Cat</code> acts like a <code>Cat</code>, regardless of whether you refer to it as such. You might remember that accessing a shadowed variable through our <code>Animal</code> variable <code>creature</code> would find that variable in the <code>Animal</code> class, not the <code>Cat</code> class. However, because methods are located <em>dynamically</em>, searching subclasses first, the runtime will invoke the appropriate method in the <code>Cat</code> class, even though we are treating it more generally as an <code>Animal</code> object. This means that the <em>behavior</em> of objects is dynamic. We can deal with specialized objects as if they were more general types and still take advantage of their specialized implementations of behavior.<a data-primary="" data-startref="ix_class_inherit2" data-type="indexterm" id="id1235"/><a data-primary="" data-startref="ix_class_subclass" data-type="indexterm" id="id1236"/><a data-primary="" data-startref="ix_inherit_ch5" data-type="indexterm" id="id1237"/><a data-primary="" data-startref="ix_subclass_inherit" data-type="indexterm" id="id1238"/><a data-primary="" data-startref="ix_method_override" data-type="indexterm" id="id1239"/><a data-primary="" data-startref="ix_override_meth" data-type="indexterm" id="id1240"/><a data-primary="" data-startref="ix_subclass_override_meth" data-type="indexterm" id="id1241"/><a data-primary="" data-startref="ix_superclass" data-type="indexterm" id="id1242"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Abstract Classes and Methods" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-6.2">&#13;
<h2>Abstract Classes and Methods</h2>&#13;
&#13;
<p>Sometimes you don’t have a good <a data-primary="classes" data-secondary="abstract classes" data-type="indexterm" id="id1243"/><a data-primary="abstract classes" data-type="indexterm" id="ix_abstract_class"/><a data-primary="abstract modifier" data-type="indexterm" id="id1244"/><a data-primary="modifiers" data-secondary="abstract" data-type="indexterm" id="id1245"/><a data-primary="abstract methods" data-type="indexterm" id="ix_abstract_meth"/>default behavior for a method. Think about how animals communicate. Dogs bark. Cats meow. Cows moo. There really is no standard sound. In Java, you can create an <em>abstract</em> method that defines exactly what a method should look like, without specifying any particular behavior. You use the <code>abstract</code> modifier when declaring the method. And rather than providing a body, you simply end the definition with a semicolon. Consider a <code>makeSound()</code> method for our &#13;
<span class="keep-together">animals</span>:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other animal traits ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">abstract</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">makeSound</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">duration</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// other animal behaviors ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p class="pagebreak-before">Notice that our method to make a sound has a complete signature (recall <a data-type="xref" href="ch03.html#learnjava6-CHP-3-SECT-3">“Running Java Applications”</a>). It is <code>void</code> (it has no return value), and it takes one argument of type <code>int</code>. But it has no body. This type of method is explicitly designed to be overridden. You cannot call an abstract method; you’ll get a compile-time error. You must create a new subclass that provides the logic for the abstract method before you can use it:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Cat</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">makeSound</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">duration</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">for</code><code class="w"> </code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">0</code><code class="p">;</code><code class="w"> </code><code class="n">count</code><code class="w"> </code><code class="o">&lt;</code><code class="w"> </code><code class="n">duration</code><code class="p">;</code><code class="w"> </code><code class="n">count</code><code class="o">++</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="c1">// assume our sound takes one second to make and we can</code><code class="w"/>&#13;
<code class="w">      </code><code class="c1">// repeat the sound to match the requested duration</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">System</code><code class="p">.</code><code class="na">out</code><code class="p">.</code><code class="na">println</code><code class="p">(</code><code class="s">"meow!"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>With an <a data-primary="subclasses" data-secondary="and abstract method" data-secondary-sortas="abstract method" data-type="indexterm" id="id1246"/>instance of <code>Cat</code>, we can now call the <code>makeSound()</code> method and the compiler knows what to do. But because <code>Animal</code> now contains an abstract method, we can’t create an instance of that class. To use <code>Animal</code> we have to create a subclass and fill out <code>makeSound()</code> like we did with our <code>Cat</code>.</p>&#13;
&#13;
<p>In fact, if we do include an abstract method in our class, we also have to declare the class itself as abstract. Our snippet of <code>Animal</code> above would not compile. We use the same <code>abstract</code> keyword for the class:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">abstract</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// Notice the class definition needs the "abstract" modifier</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">abstract</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">makeSound</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">duration</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>This declaration tells the compiler (and other developers) that you designed this class to be part of a larger program. You expect (actually, require) subclasses to extend your abstract class and fill in any missing details. Those subclasses, in turn, can be instantiated and can do real work.</p>&#13;
&#13;
<p>Abstract classes can still contain typical, complete-with-body methods, too. In the case of <code>Animal</code>, for example, we could add some helper methods for the animal’s weight:</p>&#13;
&#13;
<pre class="less_space pagebreak-before" data-code-language="java" data-type="programlisting"><code class="kd">public</code><code class="w"> </code><code class="kd">abstract</code><code class="w"> </code><code class="kd">class</code> <code class="nc">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">private</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">abstract</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">makeSound</code><code class="p">(</code><code class="kt">int</code><code class="w"> </code><code class="n">duration</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">setWeight</code><code class="p">(</code><code class="kt">double</code><code class="w"> </code><code class="n">w</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">this</code><code class="p">.</code><code class="na">weight</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">w</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">double</code><code class="w"> </code><code class="nf">getWeight</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">return</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>This is common and a good design practice. Your <code>Animal</code> class contains as much of the basic, shared information and behavior as possible. But for things that are not shared, you create a subclass with the desired traits and actions.<a data-primary="" data-startref="ix_abstract_meth" data-type="indexterm" id="id1247"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Interfaces" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-6.3">&#13;
<h2>Interfaces</h2>&#13;
&#13;
<p>Java expands on the concept of <a data-primary="interfaces" data-type="indexterm" id="ix_interface_ch5"/><a data-primary="abstract classes" data-secondary="and interfaces" data-secondary-sortas="interfaces" data-type="indexterm" id="ix_abstract_class_inter"/>abstract methods with interfaces. It’s often desirable to specify a group of abstract methods defining some behavior for an object without tying it to any implementation at all. In Java, this is called an <em>interface</em>. An <a data-primary="implements keyword" data-type="indexterm" id="id1248"/>interface defines a set of methods that a class must implement. A class in Java can declare that it <em>implements</em> an interface if it implements the required methods. Unlike extending an abstract class, a class implementing an interface doesn’t have to inherit from any particular part of the inheritance hierarchy or use a particular implementation.</p>&#13;
&#13;
<p>Interfaces are kind of like Scouting merit badges. A scout who has learned to build a birdhouse can walk around wearing a cloth patch or sash with a picture of one. This says to the world, “I know how to build a birdhouse.” Similarly, an interface is a list of methods that define some set of behavior for an object. Any class that implements each method listed in the interface can declare at compile time that it implements the interface and wear, as its merit badge, an extra type—the interface’s type.</p>&#13;
&#13;
<p><em>Interface types</em> act like class types. You can declare variables to be of an interface type, you can declare arguments of methods to accept interface types, and you can specify that the return type of a method is an interface type. In each case, you’re saying that any object that implements the interface (i.e., wears the right merit badge) can fill that role. In this sense, interfaces are orthogonal to the class hierarchy. They cut across the boundaries of what kind of object an item <em>is</em> and deal with it only in terms of what it can <em>do</em>. You can implement as many interfaces as you need for any given class. Interfaces in Java replace much of the need for multiple inheritance in other languages (and all the messy complications that come from true multiple inheritance).</p>&#13;
&#13;
<p>An interface looks, essentially, like a purely <code>abstract</code> class (a class with <em>only</em> <code>abstract</code> methods). You define an interface with the <code>interface</code> keyword and list its methods with no bodies, just prototypes (signatures):</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">interface</code> <code class="nc">Driveable</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">boolean</code><code class="w"> </code><code class="nf">startEngine</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">stopEngine</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">float</code><code class="w"> </code><code class="nf">accelerate</code><code class="p">(</code><code class="kt">float</code><code class="w"> </code><code class="n">acc</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">boolean</code><code class="w"> </code><code class="nf">turn</code><code class="p">(</code><code class="n">Direction</code><code class="w"> </code><code class="n">dir</code><code class="p">);</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The previous <a data-primary="modifiers" data-secondary="abstract" data-type="indexterm" id="id1249"/><a data-primary="visibility modifiers" data-type="indexterm" id="id1250"/><a data-primary="abstract modifier" data-type="indexterm" id="id1251"/>example defines an interface called <code>Driveable</code> with four methods. It’s acceptable, but not necessary, to declare the methods in an interface with the <code>abstract</code> modifier; we haven’t done that here. More importantly, the methods of an interface are always considered <code>public</code>, and you can optionally declare them as so. Why public? Well, the user of the interface wouldn’t necessarily be able to see them otherwise, and interfaces are generally intended to describe the behavior of an object, not its implementation.</p>&#13;
&#13;
<p>Interfaces define capabilities, so it’s common to name interfaces after their capabilities. <code>Driveable</code>, <code>Runnable</code>, and <code>Updateable</code> are good interface names. Any class that implements all the methods can then declare that it implements the interface by using a special <code>implements</code> clause in its class definition. For example:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Automobile</code><code class="w"> </code><code class="kd">implements</code><code class="w"> </code><code class="n">Driveable</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="c1">// Automobile traits could go here ...</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// build all the Driveable methods</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">boolean</code><code class="w"> </code><code class="nf">startEngine</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="k">if</code><code class="w"> </code><code class="p">(</code><code class="n">notTooCold</code><code class="p">)</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">engineRunning</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">true</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">stopEngine</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">engineRunning</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="kc">false</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">float</code><code class="w"> </code><code class="nf">accelerate</code><code class="p">(</code><code class="kt">float</code><code class="w"> </code><code class="n">acc</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">boolean</code><code class="w"> </code><code class="nf">turn</code><code class="p">(</code><code class="n">Direction</code><code class="w"> </code><code class="n">dir</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="c1">// Do other car things ...</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Here, the class <code>Automobile</code> implements the methods of the <code>Driveable</code> interface and declares itself a type of <code>Driveable</code> using the <code>implements</code> keyword.</p>&#13;
&#13;
<p>As shown in <a data-type="xref" href="#learnjava6-CHP-5-FIG-9">Figure 5-9</a>, another class, such as <code>Lawnmower</code>, can also implement the <code>Driveable</code> interface. The figure illustrates the <code>Driveable</code> interface being implemented by two different classes. While it’s possible that both <code>Automobile</code> and <code>Lawnmower</code> could derive from some primitive kind of vehicle, they don’t have to in this scenario.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-9">&#13;
<img alt="ljv6 0509" src="assets/ljv6_0509.png"/>&#13;
<h6><span class="label">Figure 5-9. </span>Implementing the <code>Driveable</code> interface</h6>&#13;
</div></figure>&#13;
&#13;
<p>After declaring the interface, we have a new type, <code>Driveable</code>. We can declare variables of type <code>Driveable</code> and assign them any instance of a <code>Driveable</code> object:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">    </code><code class="n">Automobile</code><code class="w"> </code><code class="n">auto</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Automobile</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Lawnmower</code><code class="w"> </code><code class="n">mower</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">Lawnmower</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">Driveable</code><code class="w"> </code><code class="n">vehicle</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">vehicle</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">auto</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">vehicle</code><code class="p">.</code><code class="na">startEngine</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">vehicle</code><code class="p">.</code><code class="na">stopEngine</code><code class="p">();</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="n">vehicle</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">mower</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">vehicle</code><code class="p">.</code><code class="na">startEngine</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">vehicle</code><code class="p">.</code><code class="na">stopEngine</code><code class="p">();</code><code class="w"/></pre>&#13;
&#13;
<p>Both <code>Automobile</code> and <code>Lawnmower</code> implement <code>Driveable</code>, so they can be considered interchangeable objects of that type.</p>&#13;
&#13;
<p>As we mentioned earlier, interfaces play a critical role in Java’s power and popularity. We will be using them throughout the remaining chapters. If they don’t quite make sense, keep reading and working on the code exercises. You’ll get much more practice with them. Practice doesn’t always make perfect, but it definitely does make something less weird and opaque.<a data-primary="" data-startref="ix_abstract_class_inter" data-type="indexterm" id="id1252"/><a data-primary="" data-startref="ix_interface_ch5" data-type="indexterm" id="id1253"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Inner Classes" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-6.4">&#13;
<h2>Inner Classes</h2>&#13;
&#13;
<p>All of the <a data-primary="inner classes" data-type="indexterm" id="ix_inner_class"/><a data-primary="abstract classes" data-secondary="inner classes" data-type="indexterm" id="ix_abstract_class_inner"/>classes we’ve seen so far in this book have been <em>top-level</em>, “freestanding” classes declared at the file and package level. But <a data-primary="scope" data-secondary="class" data-type="indexterm" id="ix_scope_class"/>classes in Java can actually be declared at any level of scope, within any set of curly braces—in other words, almost anywhere that you could put any other Java statement. These <em>inner classes</em> belong to another class or method as a variable would and may have their visibility limited to its scope in the same way.</p>&#13;
&#13;
<p>Inner <a data-primary="abstract classes" data-secondary="anonymous inner classes" data-type="indexterm" id="id1254"/><a data-primary="anonymous inner classes" data-type="indexterm" id="id1255"/><a data-primary="closures" data-type="indexterm" id="id1256"/><a data-primary="lambda expressions (lambdas)" data-secondary="and inner classes" data-secondary-sortas="inner classes" data-type="indexterm" id="id1257"/>classes are a useful and aesthetically pleasing facility for structuring code. Their cousins, <em>anonymous inner classes</em>, are an even more powerful shorthand that make it seem as if you can create new kinds of objects dynamically within Java’s statically typed environment. In Java, anonymous inner classes play part of the role of <em>closures</em> in other languages, giving the effect of handling state and behavior independently of classes. <a data-primary="encapsulation" data-type="indexterm" id="id1258"/>(You can also use <em>lambdas</em> in many places where inner or anonymous inner classes work. Lambdas encapsulate bits of logic and are common in many functional languages and LISPs. We’ll look at them in much more detail in <a data-type="xref" href="ch11.html#learnjava6-CHP-11">Chapter 11</a>.)</p>&#13;
&#13;
<p>However, as we delve into their inner workings, we’ll see that inner classes are not quite as aesthetically pleasing or dynamic as they seem. Inner classes are pure syntactic sugar; the Java runtime does not support them. Instead, the <a data-primary="compiler" data-secondary="inner class handling by" data-type="indexterm" id="id1259"/>compiler maps the code of an inner class to a cleverly named regular class. As a programmer, you may never need to know this; you can simply rely on inner classes like any other language construct. However, you should know a little about how they work to better understand the compiled code and to watch for a few potential side effects.</p>&#13;
&#13;
<p>Inner classes are essentially nested classes. For example:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">double</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">class</code> <code class="nc">Brain</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">volume</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// more brain stuff ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Here, the class <code>Brain</code> is an inner class: it is a class declared inside the scope of the <code>Animal</code> class. Although the details of what that means require a bit of explanation, we’ll start by saying that Java tries to make the meaning, as much as possible, the same as for the other members (methods and variables) living at that level of scope. For example, let’s add a method to the <code>Animal</code> class:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kd">class</code> <code class="nc">Animal</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kt">double</code><code class="w"> </code><code class="n">weight</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">class</code> <code class="nc">Brain</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">double</code><code class="w"> </code><code class="n">volume</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// more brain stuff ...</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kt">void</code><code class="w"> </code><code class="nf">performBehavior</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">...</code><code class="w"> </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>The inner class <code>Brain</code>, the method <code>performBehavior()</code>, and the <code>weight</code> variable are within the scope of <code>Animal</code>. Therefore, anywhere within <code>Animal</code>, we can refer to <code>Brain</code>, <code>performBehavior()</code>, and <code>weight</code> directly, by name. Within <code>Animal</code>, we can call the constructor for <code>Brain</code> (<code>new Brain()</code>) to get a <code>Brain</code> object or invoke <code>performBehavior()</code> to carry out that method’s function. But none of these elements are generally accessible outside of the class <code>Animal</code> without some additional qualification.</p>&#13;
&#13;
<p>Within the body of the inner <code>Brain</code> class and the body of the <code>performBehavior()</code> method, we have direct access to the <code>weight</code> variable as well as all the other methods and variables of the <code>Animal</code> class. So, just as the <code>performBehavior()</code> method could work with the <code>Brain</code> class and create instances of <code>Brain</code>, methods within the <code>Brain</code> class can invoke the <code>performBehavior()</code> method of <code>Animal</code> or work with the <code>weight</code> variable. The <code>Brain</code> class “sees” all of the methods and variables of the <code>Animal</code> class directly in its scope.</p>&#13;
&#13;
<p>A brain’s access to the variables and methods of <code>Animal</code> has important consequences. From within <code>Brain</code>, we can invoke the method <code>performBehavior()</code>; that is, from within an instance of <code>Brain</code>, we can invoke the <code>performBehavior()</code> method of an instance of <code>Animal</code>. Well, which instance of <code>Animal</code>? If we have several <code>Animal</code> objects around (say, a few <code>Cat</code>s and <code>Dog</code>s), we need to know whose <code>performBehavior()</code> method we are calling. What does it mean for a class definition to be “inside” another class definition? The answer is that a <code>Brain</code> object always lives within a single instance of <code>Animal</code>: the one that it was told about when it was created. We’ll call the object that contains any instance of <code>Brain</code> its <em>enclosing instance</em>.</p>&#13;
&#13;
<p>A <code>Brain</code> object cannot live outside of an enclosing instance of an <code>Animal</code> object. Anywhere you see an instance of <code>Brain</code>, it will be tethered to an instance of <code>Animal</code>. Although it is possible to construct a <code>Brain</code> object from elsewhere (perhaps another class), <code>Brain</code> always requires an enclosing instance of <code>Animal</code> to “hold” it. If you ever do find a <code>Brain</code> of the <code>Animal</code> class, it will still be explicitly associated with <code>Animal</code> as the <code>Animal.Brain</code> class. Just as with the <code>performBehavior()</code> method, modifiers can be applied to restrict its visibility. All of the usual visibility modifiers apply, and inner classes can also be declared <code>static</code>, as we’ll discuss in later chapters.<a data-primary="" data-startref="ix_abstract_class_inner" data-type="indexterm" id="id1260"/><a data-primary="" data-startref="ix_inner_class" data-type="indexterm" id="id1261"/><a data-primary="" data-startref="ix_scope_class" data-type="indexterm" id="id1262"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Anonymous Inner Classes" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-6.5">&#13;
<h2>Anonymous Inner Classes</h2>&#13;
&#13;
<p>Now we get to the <a data-primary="anonymous inner classes" data-type="indexterm" id="ix_anon_inner_class"/><a data-primary="abstract classes" data-secondary="anonymous inner classes" data-type="indexterm" id="ix_abstract_class_anon"/>best part. As a general rule, the more deeply encapsulated and limited in scope our classes are, the more freedom we have in naming them. We saw this in our earlier iterator example. This is not just a purely aesthetic issue. Naming is an important part of writing readable, maintainable code. Generally, use the most concise, meaningful names possible. As a corollary, avoid doling out names for temporary objects that are going to be used only once.</p>&#13;
&#13;
<p>Anonymous inner classes are an extension of the syntax of the <code>new</code> operation. When you create an anonymous inner class, you combine a class declaration with the allocation of an instance of that class, effectively creating a “one-time only” class and an instance in one operation. After the <code>new</code> keyword, you specify either the name of a class or an interface, followed by a class body. The class body becomes an inner class. It either extends the specified class or, in the case of an interface, is expected to implement the interface. A single instance of the class is created and returned as the value.</p>&#13;
&#13;
<p>For example, we could revisit the graphical application from <a data-type="xref" href="ch02.html#learnjava6-CHP-2-SECT-3">“HelloJava2: The Sequel”</a>. As you might recall, that app creates a <code>HelloComponent2</code> that extends <code>JComponent</code> and implements the <code>MouseMotionListener</code> interface. (Does that example make a little more sense now?) We never expect <code>HelloComponent2</code> to respond to mouse motion events coming from other components. It might make more sense to create an anonymous inner class specifically to move our “Hello” label around.</p>&#13;
&#13;
<p>Indeed, since <code>HelloComponent2</code> is really meant only for use by our demo, we <a data-primary="refactoring classes" data-type="indexterm" id="id1263"/>could <em>refactor</em> (a common developer process to optimize or improve code that is already working) that separate class into an inner class. Now that we know a little more about constructors and inheritance, we could also make our class an extension of <code>JFrame</code> rather than building a frame inside our <code>main()</code> method. And to put a little icing on this newly refactored cake, we can move our mouse listener code into an anonymous inner class devoted to our custom component.</p>&#13;
&#13;
<p>Here’s our <code>HelloJava3</code> with these nifty refactorings in place:</p>&#13;
&#13;
<pre data-code-language="java" data-type="programlisting"><code class="kn">package</code><code class="w"> </code><code class="nn">ch05.examples</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">java.awt.event.*</code><code class="p">;</code><code class="w"/>&#13;
<code class="kn">import</code><code class="w"> </code><code class="nn">javax.swing.*</code><code class="p">;</code><code class="w"/>&#13;
&#13;
<code class="kd">public</code><code class="w"> </code><code class="kd">class</code> <code class="nc">HelloJava3</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">JFrame</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kd">static</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">main</code><code class="p">(</code><code class="n">String</code><code class="o">[]</code><code class="w"> </code><code class="n">args</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">HelloJava3</code><code class="w"> </code><code class="n">demo</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="k">new</code><code class="w"> </code><code class="n">HelloJava3</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">demo</code><code class="p">.</code><code class="na">setVisible</code><code class="p">(</code><code class="kc">true</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="nf">HelloJava3</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="kd">super</code><code class="p">(</code><code class="s">"HelloJava3"</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">add</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">HelloComponent3</code><code class="p">(</code><code class="s">"Hello, Inner Java!"</code><code class="p">));</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setDefaultCloseOperation</code><code class="p">(</code><code class="n">JFrame</code><code class="p">.</code><code class="na">EXIT_ON_CLOSE</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">setSize</code><code class="p">(</code><code class="mi">300</code><code class="p">,</code><code class="w"> </code><code class="mi">300</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">  </code><code class="kd">class</code> <code class="nc">HelloComponent3</code><code class="w"> </code><code class="kd">extends</code><code class="w"> </code><code class="n">JComponent</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">String</code><code class="w"> </code><code class="n">theMessage</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">    </code><code class="kt">int</code><code class="w"> </code><code class="n">messageX</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">125</code><code class="p">,</code><code class="w"> </code><code class="n">messageY</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="mi">95</code><code class="p">;</code><code class="w"> </code><code class="c1">// message coordinates</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="nf">HelloComponent3</code><code class="p">(</code><code class="n">String</code><code class="w"> </code><code class="n">message</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">theMessage</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">message</code><code class="p">;</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">addMouseMotionListener</code><code class="p">(</code><code class="k">new</code><code class="w"> </code><code class="n">MouseMotionListener</code><code class="p">()</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">        </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseDragged</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">            </code><code class="n">messageX</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">e</code><code class="p">.</code><code class="na">getX</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">            </code><code class="n">messageY</code><code class="w"> </code><code class="o">=</code><code class="w"> </code><code class="n">e</code><code class="p">.</code><code class="na">getY</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">            </code><code class="n">repaint</code><code class="p">();</code><code class="w"/>&#13;
<code class="w">        </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">        </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">mouseMoved</code><code class="p">(</code><code class="n">MouseEvent</code><code class="w"> </code><code class="n">e</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"> </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">      </code><code class="p">});</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
&#13;
<code class="w">    </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">paintComponent</code><code class="p">(</code><code class="n">Graphics</code><code class="w"> </code><code class="n">g</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">      </code><code class="n">g</code><code class="p">.</code><code class="na">drawString</code><code class="p">(</code><code class="n">theMessage</code><code class="p">,</code><code class="w"> </code><code class="n">messageX</code><code class="p">,</code><code class="w"> </code><code class="n">messageY</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">    </code><code class="p">}</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/>&#13;
<code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Try compiling and running this example. It should behave exactly like the original <code>HelloJava2</code> application. The real difference is how we have organized the classes and who can access them (and the variables and methods inside them). <code>HelloJava3</code> probably looks a little cumbersome compared to <code>HelloJava2</code>, and it is verbose for such a small demo.</p>&#13;
&#13;
<p>The power of inner classes and interfaces will start to shine as you develop more complex applications. Practicing with the structure and rules of these features will help you write more maintainable code in the long run.<a data-primary="" data-startref="ix_abstract_class" data-type="indexterm" id="id1264"/><a data-primary="" data-startref="ix_class_abstract" data-type="indexterm" id="id1265"/><a data-primary="" data-startref="ix_abstract_class_anon" data-type="indexterm" id="id1266"/><a data-primary="" data-startref="ix_anon_inner_class" data-type="indexterm" id="id1267"/></p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Organizing Content and Planning for Failure" data-type="sect1"><div class="sect1" id="learnjava6-CHP-5-SECT-7">&#13;
<h1>Organizing Content and Planning for Failure</h1>&#13;
&#13;
<p>Classes are the <a data-primary="packages" data-secondary="organizing objects in" data-type="indexterm" id="id1268"/><a data-primary="classes" data-secondary="organizing content and planning for failure" data-type="indexterm" id="ix_class_org_cont"/>single most important idea in Java. They form the core of every executable program, portable library, or helper. We looked at the contents of classes and how classes relate to each other in a larger project. We know more about how to create and destroy objects based on the classes we write. And we’ve seen how inner classes (and anonymous inner classes) can help us write more maintainable code. We’ll be seeing more of these inner classes as we get into deeper topics such as threads in <a data-type="xref" href="ch09.html#learnjava6-CHP-9">Chapter 9</a> and Swing in <a data-type="xref" href="ch12.html#learnjava6-CHP-12">Chapter 12</a>.</p>&#13;
&#13;
<p>As you build your classes, here are a few guidelines to keep in mind:</p>&#13;
<dl>&#13;
<dt>Hide as much of your implementation as possible</dt>&#13;
<dd>&#13;
<p>Never expose more of the internals of an object than you need to. This is key to building maintainable, reusable code. <a data-primary="accessor methods" data-type="indexterm" id="id1269"/>Avoid using public variables in your objects, with the notable exception of constants. Instead,  define <em>accessor</em> methods to set and return values. This is useful even if they are simple types—think of methods like <code>getWeight()</code> and <code>setWeight()</code>. You’ll be able to modify and extend  your objects’ behavior down the road without breaking other classes that rely on them.</p>&#13;
</dd>&#13;
<dt>Use composition instead of inheritance</dt>&#13;
<dd>&#13;
<p>Specialize <a data-primary="composition" data-type="indexterm" id="id1270"/>objects only when you must. When you use an object in its existing form, as a piece of a new object, you are <em>composing</em> objects. When you change or refine the behavior of an object (by subclassing), you are using <em>inheritance</em>. Try to reuse objects by composition rather than inheritance whenever possible. When you compose objects, you are taking full advantage of existing tools. Inheritance involves breaking down the encapsulation of an object, so do it only when there’s a real advantage. Ask yourself if you really need to inherit the whole class (do you want it to be a “kind” of that object?) or if you can just include an instance of that class in your own class and delegate some work to that included instance.</p>&#13;
</dd>&#13;
<dt>Minimize relationships between objects and try to organize related objects in packages</dt>&#13;
<dd>&#13;
<p>Java packages (recall <a data-type="xref" href="#learnjava6-CHP-5-FIG-1">Figure 5-1</a>) can also hide classes that are not of general interest. Expose only classes that you intend other people to use. The more loosely coupled your objects, the easier it will be to reuse them later.</p>&#13;
</dd>&#13;
</dl>&#13;
&#13;
<p>We can apply these principles even on small projects. The <em>ch05/examples</em> folder contains simple versions of the classes and interfaces we’ll use to create our apple tossing game. Take a moment to see how the <code>Apple</code>, <code>Tree</code>, and <code>Physicist</code> classes implement the <code>GamePiece</code> interface—like the <code>draw()</code> method every class includes. Notice how <code>Field</code> extends <code>JComponent</code> and how the main game class, <code>AppleToss</code>, extends <code>JFrame</code>. You can see these simple pieces playing together in <a data-type="xref" href="#learnjava6-CHP-5-FIG-10">Figure 5-10</a>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-10">&#13;
<img alt="ljv6 0510" src="assets/ljv6_0510.png"/>&#13;
<h6><span class="label">Figure 5-10. </span>Our very first game classes in action</h6>&#13;
</div></figure>&#13;
&#13;
<p>The final code exercise for this chapter will help you get started. Look over the comments in the classes. Try tweaking a few things. Add another tree. More play is always good. We’ll be building on these classes throughout the remaining chapters, so getting comfortable with how they fit together will make it easier.</p>&#13;
&#13;
<p>Regardless of how you organize the members in your classes, the classes in your packages, or the packages in your project, you’ll have to contend with errors. Some will be simple syntax errors you’ll fix in your editor. Other errors are more interesting and may crop up only while your program is actually running. The next chapter will cover Java’s notion of these problems and help you handle them.<a data-primary="" data-startref="ix_class_org_cont" data-type="indexterm" id="id1271"/></p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="less_space pagebreak-before" data-pdf-bookmark="Review Questions" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-7.1">&#13;
<h2>Review Questions</h2>&#13;
<ol>&#13;
<li>&#13;
<p>What is the primary organizing unit in Java?</p>&#13;
</li>&#13;
<li>&#13;
<p>What operator do you use to create an object (or instance) from a class?</p>&#13;
</li>&#13;
<li>&#13;
<p>Java does not support classic multiple inheritance. What mechanisms does Java provide as alternatives?</p>&#13;
</li>&#13;
<li>&#13;
<p>How can you organize multiple, related classes?</p>&#13;
</li>&#13;
<li>&#13;
<p>How do you include classes from other packages for use in your own code?</p>&#13;
</li>&#13;
<li>&#13;
<p>What do you call a class defined inside the scope of another class? What are some features that make such a class useful in some circumstances?</p>&#13;
</li>&#13;
<li>&#13;
<p>What do you call a method designed to be overridden that has a name, return type, and argument list, but no body?</p>&#13;
</li>&#13;
<li>&#13;
<p>What is an overloaded method?</p>&#13;
</li>&#13;
<li>&#13;
<p>If you want to make sure no other class can use a variable you have defined, what access modifier should you use?</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Code Exercises" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-7.2">&#13;
<h2>Code Exercises</h2>&#13;
<ol>&#13;
<li>&#13;
<p>For your first coding practice, create a small zoo of communicative creatures. The <em>ch05/exercises/Zoo.java</em> file contains a complete outline for creating a few animals and having them “speak” using inner classes. Start by filling in the <code>speak()</code> method of the included <code>Gibbon</code> class using the completed <code>Lion</code> inner class as an example. When you compile and run your <code>Zoo</code>, you should see output like this (with your own animal noises, of course):</p>&#13;
&#13;
<pre data-type="programlisting">% cd ch05/exercises&#13;
% javac Zoo.java&#13;
% java Zoo&#13;
Let&amp;rsquo;s listen to some animals!&#13;
The lion goes "roar"&#13;
The gibbon goes "hoot"</pre>&#13;
</li>&#13;
<li>&#13;
<p>Now add your own animal to the zoo. Create a new inner class similar to <code>Lion</code>. Fill in the appropriate sound for your animal, and add them to the output section of the <code>listen()</code> method. Your new output will look something like:</p>&#13;
&#13;
<pre data-type="programlisting">% java Zoo&#13;
Let&amp;rsquo;s listen to some animals!&#13;
The lion goes "roar"&#13;
The gibbon goes "hoot"&#13;
The seal goes "bark"</pre>&#13;
</li>&#13;
<li>&#13;
<p>Let’s clean up that <code>listen()</code> method. We currently use separate <code>print()</code> and <code>println()</code> methods for each animal. If we add another animal (or several), that will require copying and pasting and tweaking the output lines—tasks that can introduce errors. Add another abstract method to <code>Animal</code> called <code>getSpecies()</code>. In the subclasses, this method should return the name of the animal as a <code>String</code>, such as “lion” or “seal” from the examples above.</p>&#13;
&#13;
<p>With that method in place, refactor the output section to put your animals in a small array, and then use a loop to produce the output. (Feel free to edit your existing <code>Zoo</code> class. Our solution is in a new class, <code>Zoo2</code>, so that you can look over the solution to this problem as well as the solution to the previous exercise.)</p>&#13;
</li>&#13;
<li>&#13;
<p>Run the apple tossing game. Compile and run the <code>ch05.exercises.game.AppleToss</code> class in the <em>ch05/exercises/game</em> folder using the steps discussed earlier in <a data-type="xref" href="#learnjava6-CHP-5-SECT-5.2">“Custom Packages”</a>.<a data-primary="" data-startref="ix_objects_ch5" data-type="indexterm" id="id1272"/></p>&#13;
</li>&#13;
&#13;
</ol>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Advanced Exercises" data-type="sect2"><div class="sect2" id="learnjava6-CHP-5-SECT-7.3">&#13;
<h2>Advanced Exercises</h2>&#13;
<ol>&#13;
<li>&#13;
<p>For a more advanced challenge, let’s expand our apple tossing game by creating a new type of obstacle. Use the <code>Tree</code> class as a template and create a <code>Hedge</code> class. You can draw your hedge as a green rectangle. To draw a rectangle:</p>&#13;
<div class="openblock">&#13;
<pre data-code-language="java" data-type="programlisting"><code class="w">  </code><code class="kd">public</code><code class="w"> </code><code class="kt">void</code><code class="w"> </code><code class="nf">paintComponent</code><code class="p">(</code><code class="n">Graphics</code><code class="w"> </code><code class="n">g</code><code class="p">)</code><code class="w"> </code><code class="p">{</code><code class="w"/>&#13;
<code class="w">    </code><code class="c1">// x and y set the upper left corner</code><code class="w"/>&#13;
<code class="w">    </code><code class="n">g</code><code class="p">.</code><code class="na">fillRect</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code class="n">y</code><code class="p">,</code><code class="n">width</code><code class="p">,</code><code class="n">height</code><code class="p">);</code><code class="w"/>&#13;
<code class="w">  </code><code class="p">}</code><code class="w"/></pre>&#13;
&#13;
<p>Add a hedge to your field. The final game should look something like &#13;
<span class="keep-together"><a data-type="xref" href="#learnjava6-CHP-5-FIG-hedges">Figure 5-11</a></span>.</p>&#13;
&#13;
<figure><div class="figure" id="learnjava6-CHP-5-FIG-hedges">&#13;
<img alt="ljv6 0511" src="assets/ljv6_0511.png"/>&#13;
<h6><span class="label">Figure 5-11. </span>Our new hedge obstacle on the field</h6>&#13;
</div></figure>&#13;
</div>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>We will continue to expand this game throughout the book, but feel free to do some of your own expanding now. Play around with drawing other shapes or change the colors of the current elements. The <a href="https://oreil.ly/_dhQy">online documentation</a> for the <code>Graphics</code> class will be helpful.</p>&#13;
</div></section>&#13;
</div></section>&#13;
<div data-type="footnotes"><p data-type="footnote" id="id1063"><sup><a href="ch05.html#id1063-marker">1</a></sup> Once you have some experience with basic object-oriented concepts, you might want to look at <em>Design Patterns: Elements of Reusable Object-Oriented Software</em> by Erich Gamma et al. (Addison-Wesley). This book catalogs useful object-oriented designs that have been refined over the years. Many of these patterns appear in the design of the Java APIs.</p><p data-type="footnote" id="id1073"><sup><a href="ch05.html#id1073-marker">2</a></sup> The <code>char</code> also gets a 0 but usually expressed as the null character, <code>\0</code>. A <code>boolean</code> variable gets the default of <code>false</code>, and reference types get the default of <code>null</code>.</p><p data-type="footnote" id="id1104"><sup><a href="ch05.html#id1104-marker">3</a></sup> We don’t go into the details of such argument lists, but if you’re curious and would like to do a little reading on your own, search online for the programmer-speak keyword “varargs.”</p><p data-type="footnote" id="id1121"><sup><a href="ch05.html#id1121-marker">4</a></sup> It turns out the <code>Math</code> class cannot be instantiated at all. It contains only static methods. Trying to call <code>new Math()</code> would result in a compiler error.</p><p data-type="footnote" id="id1181"><sup><a href="ch05.html#id1181-marker">5</a></sup> It’s still possible to write code in Java that holds on to objects forever (by accident, we’re sure), consuming more and more memory. This isn’t really a leak as much as it is hoarding. Such hoarding in Java is usually easier to track down than a leak in C.</p><p data-type="footnote" id="id1217"><sup><a href="ch05.html#id1217-marker">6</a></sup> Maven sufficiently changed the landscape for dependency management in Java and even other JVM-based languages so you can now find tools such as <a href="https://gradle.org">Gradle</a>, which were based on Maven’s <span class="keep-together">success.</span></p><p data-type="footnote" id="id1222"><sup><a href="ch05.html#id1222-marker">7</a></sup> Note that a better way to design our calculators would be to have an abstract <code>Calculator</code> class with two separate subclasses: <code>IntegerCalculator</code> and <code>DecimalCalculator</code>.</p><p data-type="footnote" id="id1233"><sup><a href="ch05.html#id1233-marker">8</a></sup> The platypus is a highly unusual egg-laying mammal. We could override the <code>reproduce()</code> behavior again for <code>Platypus</code> in its own subclass of <code>Mammal</code>.</p><p data-type="footnote" id="id1234"><sup><a href="ch05.html#id1234-marker">9</a></sup> An overridden method in Java acts like a <code>virtual</code> method in C++.</p></div></div></section></body></html>