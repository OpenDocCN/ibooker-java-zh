<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 14. Developing Quarkus Applications &#10;Using Spring APIs"><div class="chapter" id="developing_quarkus_chapter">
<h1><span class="label">Chapter 14. </span>Developing Quarkus Applications 
<span class="keep-together">Using Spring APIs</span></h1>


<p><a data-type="indexterm" data-primary="Spring Framework" id="spri_ch"/>Up to this point, you’ve seen that every example was developed using CDI annotations such as <code>@Inject</code> or <code>@Produces</code>, JAX-RS annotations, or Java EE Security annotations.
But Quarkus also offers a compatibility layer for some of the most-used Spring libraries, so you can use all your knowledge about Spring Framework to develop Quarkus applications.</p>

<p>This chapter will include recipes for the following:</p>

<ul>
<li>
<p>Spring Dependency Injection</p>
</li>
<li>
<p>Spring REST Web</p>
</li>
<li>
<p>Spring Data JPA</p>
</li>
<li>
<p>Spring Security</p>
</li>
<li>
<p>Spring Boot Configuration</p>
</li>
</ul>






<section data-type="sect1" data-pdf-bookmark="14.1 Using Spring Dependency Injection"><div class="sect1" id="idm45128493929080">
<h1>14.1 Using Spring Dependency Injection</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128493928072">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="Spring Dependency Injection API" id="sapi_ab"/><a data-type="indexterm" data-primary="Spring Framework" data-secondary="using Spring Dependency Injection API" id="sf_sapi"/>You want to use the Spring Dependency Injection (DI) API to develop with Quarkus.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128495995240">
<h2>Solution</h2>

<p>Quarkus offers an API compatibility layer (using an extension) to use Spring DI annotations.</p>

<p>Although we encourage you to use CDI annotations, you are free to use the Spring annotations as well because the final application will behave in exactly the same way.</p>

<p>A greeting service is developed, as it was at the beginning of the book.
If you are familiar with the Spring Framework, a lot of things will look familiar to you.</p>

<p>To add the Spring DI extension, run the following command:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension -Dextensions="spring-di"</code></pre>

<p>Or, you can create a project with the Spring DI extension by running the following:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">mvn io.quarkus:quarkus-maven-plugin:1.4.1.Final:create \</code>
<code class="go">    -DprojectGroupId=org.acme.quickstart \</code>
<code class="go">    -DprojectArtifactId=spring-di-quickstart \</code>
<code class="go">    -DclassName="org.acme.quickstart.GreeterResource" \</code>
<code class="go">    -Dpath="/greeting" \</code>
<code class="go">    -Dextensions="spring-di"</code></pre>

<p>Open the <em>application.properties</em> file and add a new property:</p>

<pre data-type="programlisting" data-code-language="properties"><code class="na">greetings.message</code><code class="o">=</code><code class="s">Hello World</code></pre>

<p>To inject this configuration value to any class, use the <code>@org.springframework.beans.factory.annotation.Value</code> Spring annotation:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.util.function.Function</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.context.annotation.Bean</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.context.annotation.Configuration</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@Configuration</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">AppConfiguration</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>    </code><code class="nd">@Bean</code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"suffix"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-2" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">Function</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code><code> </code><code class="n">String</code><code class="o">&gt;</code><code> </code><code class="n">exclamation</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="k">new</code><code> </code><code class="n">Function</code><code class="o">&lt;</code><code class="n">String</code><code class="o">,</code><code> </code><code class="n">String</code><code class="o">&gt;</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-3" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>            </code><code class="nd">@Override</code><code>
</code><code>            </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">apply</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">t</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>                </code><code class="k">return</code><code> </code><code class="n">t</code><code> </code><code class="o">+</code><code> </code><code class="s">"!!"</code><code class="o">;</code><code>
</code><code>            </code><code class="o">}</code><code>
</code><code>        </code><code class="o">}</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Uses the <code>@Configuration</code> annotation to define the class as a configuration object</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-2" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Creates a bean that adds the suffix to the given message</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-3" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO1-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Implements the service</p></dd>
</dl>

<p>It is important to notice that in both cases the Spring annotations are used.</p>

<p>The bean can be injected using the <code>@org.springframework.beans.factory.annotation.Autowired</code> and
<code>@org.springframework.beans.factory.annotation.Qualifier</code> annotations:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.stereotype.Service</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@Service</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO2-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO2-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">PrefixService</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">appendPrefix</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">message</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="s">"- "</code><code> </code><code class="o">+</code><code> </code><code class="n">message</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO2-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO2-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Sets this class as a service</p></dd>
</dl>

<p>And it can be injected using the constructor instead of <code>@Autowired</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kd">private</code><code> </code><code class="n">PrefixService</code><code> </code><code class="n">prefixService</code><code class="o">;</code><code>
</code><code>
</code><code class="kd">public</code><code> </code><code class="nf">GreetingResource</code><code class="o">(</code><code class="n">PrefixService</code><code> </code><code class="n">prefixService</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO3-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO3-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>    </code><code class="k">this</code><code class="o">.</code><code class="na">prefixService</code><code> </code><code class="o">=</code><code> </code><code class="n">prefixService</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO3-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO3-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Injects the instance using the constructor; notice that <code>@Autowired</code> is not required</p></dd>
</dl>

<p>Finally, all these operations can be combined to produce the following output:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@GET</code>
<code class="nd">@Produces</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code>
<code class="kd">public</code> <code class="n">String</code> <code class="nf">hello</code><code class="o">()</code> <code class="o">{</code>
    <code class="n">String</code> <code class="n">prefixed</code> <code class="o">=</code> <code class="n">prefixService</code><code class="o">.</code><code class="na">appendPrefix</code><code class="o">(</code><code class="n">message</code><code class="o">);</code>
    <code class="k">return</code> <code class="k">this</code><code class="o">.</code><code class="na">suffixComponent</code><code class="o">.</code><code class="na">apply</code><code class="o">(</code><code class="n">prefixed</code><code class="o">);</code>
<code class="o">}</code></pre>

<p>If you run the project, you’ll be able to see that all the objects are created and injected correctly, even though the Spring DI annotations are used:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw compile quarkus:dev</code>

<code class="go">curl http://localhost:8080/greeting</code>

<code class="go">- Hello World!!</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128495994328">
<h2>Discussion</h2>

<p>It is important to note that Quarkus does not start a Spring Application Context instance.
That’s because its integration is only at the API level (annotations, return types, etc.), which means the following:</p>

<ul>
<li>
<p>Using any other Spring library will not have any effect. You’ll see later that Quarkus offers integrations to other Spring libraries.</p>
</li>
<li>
<p><code>org.springframework.beans.factory.config.BeanPostProcessor</code> will not be executed.</p>
</li>
</ul>

<p><a data-type="indexterm" data-primary="" data-startref="sapi_ab" id="idm45128494078888"/><a data-type="indexterm" data-primary="" data-startref="sf_sapi" id="idm45128494077912"/><a data-type="xref" href="#microprofile-cdi-spring-equivalant-annotations">Table 14-1</a> shows the equivalent annotations between MicroProfile/CDI and Spring.</p>
<table id="microprofile-cdi-spring-equivalant-annotations">
<caption><span class="label">Table 14-1. </span>Equivalent annotations in MicroProfile/CDI and Spring</caption>
<thead>
<tr>
<th>Spring</th>
<th>CDI / MicroProfile</th>
</tr>
</thead>
<tbody>
<tr>
<td><div>
<p><code>@Autowired</code></p></div></td>
<td><div>
<p><code>@Injecct</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Qualifier</code></p></div></td>
<td><div>
<p><code>@Named</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Value</code></p></div></td>
<td><div>
<p><code>@ConfigProperty</code>. The expression language of typical use cases is supported.</p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Component</code></p></div></td>
<td><div>
<p><code>@Singleton</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Service</code></p></div></td>
<td><div>
<p><code>@Singleton</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Repository</code></p></div></td>
<td><div>
<p><code>@Singleton</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Configuration</code></p></div></td>
<td><div>
<p><code>@ApplicationScoped</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@Bean</code></p></div></td>
<td><div>
<p><code>@Produces</code></p></div></td>
</tr>
</tbody>
</table>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="14.2 Using Spring Web"><div class="sect1" id="idm45128494476952">
<h1>14.2 Using Spring Web</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128494476120">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="Spring Framework" data-secondary="using Spring Web API" id="idm45128494475000"/><a data-type="indexterm" data-primary="Spring Web API" id="idm45128496049992"/>You want to use the Spring Web API to develop with Quarkus.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128496048936">
<h2>Solution</h2>

<p>Quarkus offers an API compatibility layer (using an extension) to use Spring Web annotations/classes.</p>

<p>To add the Spring Web extension, run the following command:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension -Dextensions="spring-web"</code></pre>

<p>Create a new resource using only Spring Web annotations:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.http.ResponseEntity</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.GetMapping</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.PathVariable</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.RequestMapping</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.RestController</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@RestController</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="nd">@RequestMapping</code><code class="o">(</code><code class="s">"/greeting"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-2" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">SpringController</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>  </code><code class="nd">@GetMapping</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-3" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>  </code><code class="kd">public</code><code> </code><code class="n">ResponseEntity</code><code class="o">&lt;</code><code class="n">String</code><code class="o">&gt;</code><code> </code><code class="nf">getMessage</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-4" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">ResponseEntity</code><code class="o">.</code><code class="na">ok</code><code class="o">(</code><code class="s">"Hello"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>  </code><code class="o">}</code><code>
</code><code>
</code><code>  </code><code class="nd">@GetMapping</code><code class="o">(</code><code class="s">"/{name}"</code><code class="o">)</code><code>
</code><code>  </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">hello</code><code class="o">(</code><code class="nd">@PathVariable</code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"name"</code><code class="o">)</code><code> </code><code class="n">String</code><code> </code><code class="n">name</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-5" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="s">"hello "</code><code> </code><code class="o">+</code><code> </code><code class="n">name</code><code class="o">;</code><code>
</code><code>  </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>REST resource definition</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-2" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Maps the root path</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-3" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Sets <code>GET</code> HTTP method</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-4" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Returns Spring’s <code>ResponseEntity</code></p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-5" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO4-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a></dt>
<dd><p>Gets path information</p></dd>
</dl>

<p>Only Spring annotations and classes are used to implement the resource.
There are no traces of the JAX-RS API.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128494244104">
<h2>Discussion</h2>

<p>You’ve seen how to use Spring Dependency Injection annotations in a Quarkus application.
Quarkus integrates with Spring Web via an extension.</p>

<p>Although we encourage you to use JAX_RS annotations, you are free to use the Spring Web classes and annotations. Regardless of which is used, the final application will behave the same way.</p>

<p>Quarkus supports only the REST-related features of Spring Web.
In summary, all <code>@RestController</code> features are supported except the ones related to the generic 
<span class="keep-together"><code>@Controller</code>.</span></p>

<p>The following Spring Web annotations are supported: <code>@RestController</code>, <code>@RequestMapping</code>, <code>@GetMapping</code>, <code>@PostMapping</code>, <code>@PutMapping</code>, <code>@DeleteMapping</code>, <code>@PatchMapping</code>, <code>@RequestParam</code>, <code>@RequestHeader</code>, <code>@MatrixVariable</code>, <code>@PathVariable</code>, 
<span class="keep-together"><code>@CookieValue</code>,</span> <code>@RequestBody</code>, <code>@ResponseStatus</code>, <code>@ExceptionHandler</code> (only to be used in a <code>@RestControllerAdvice</code> class), and <code>@RestControllerAdvice</code> (only the <code>@ExceptionHandler</code> capability is supported).</p>

<p>The following are return types that are supported out of the box for REST controllers: primitives, <code>String</code> (as a literal, not as an MVC support), POJO, and <code>org.springframework.http.ResponseEntity</code>.</p>

<p>The following are method parameters that are supported out of the box, for REST controllers: primitives, <code>String</code>, POJO, <code>javax.servlet.http.HttpServletRequest</code>, and <code>javax.servlet.http.HttpServletResponse</code>.</p>

<p>The following are return types that are supported out of the box for exception 
<span class="keep-together">handlers</span>: <code>org.springframework.http.ResponseEntity</code> and <code>java.util.Map</code></p>

<p>The following are method parameters that are supported out of the box for exception handlers: <code>java.lang.Exception</code> or any other subtype, <code>javax.servlet.http.HttpServletRequest</code>, and <code>javax.servlet.http.HttpServletResponse</code>.</p>
<div data-type="important"><h6>Important</h6>
<p><a data-type="indexterm" data-primary="javax.servlet class" id="idm45128494353416"/>To use the <code>javax.servlet</code> classes you need to register the <code>quarkus-undertow</code> dependency.</p>
</div>

<p><a data-type="xref" href="#jax-rs-spring-web-equivalant-annotations">Table 14-2</a> shows the equivalent annotations between JAX-RS and Spring Web.</p>
<table id="jax-rs-spring-web-equivalant-annotations">
<caption><span class="label">Table 14-2. </span>Equivalent annotations in JAX-RS and Spring Web</caption>
<thead>
<tr>
<th>Spring</th>
<th>JAX-RS</th>
</tr>
</thead>
<tbody>
<tr>
<td><div>
<p><code>@RequestController</code></p></div></td>
<td><div/></td>
</tr>
<tr>
<td><div>
<p><code>@RequestMapping(path="/api")</code></p></div></td>
<td><div>
<p><code>@Path("/api")</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@RequestMapping(consumes="application/json")</code></p></div></td>
<td><div>
<p><code>@Consumes("application/json")</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@RequestMapping(produces="application/json")</code></p></div></td>
<td><div>
<p><code>@Produces("application/json")</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@RequestParam</code></p></div></td>
<td><div>
<p><code>@QueryParam</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@PathVariable</code></p></div></td>
<td><div>
<p><code>@PathParam</code></p></div></td>
</tr>
<tr>
<td><div>
<p><code>@RequestBody</code></p></div></td>
<td><div/></td>
</tr>
<tr>
<td><div>
<p><code>@RestControllerAdvice</code></p></div></td>
<td><div/></td>
</tr>
<tr>
<td><div>
<p><code>@ResponseStatus</code></p></div></td>
<td><div>
<p>Use <code>javax.ws.rs.core.Response</code> class</p></div></td>
</tr>
<tr>
<td><div>
<p><code>@ExceptionHandler</code></p></div></td>
<td><div>
<p>Implements <code>javax.ws.rs.ext.ExceptionMapper</code> interface</p></div></td>
</tr>
</tbody>
</table>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="14.3 Using Spring Data JPA"><div class="sect1" id="idm45128494243416">
<h1>14.3 Using Spring Data JPA</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128494381272">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="Spring Data JPA" id="idm45128494338024"/><a data-type="indexterm" data-primary="Spring Framework" data-secondary="using Spring Data JPA" id="idm45128494337320"/>You want to use the Spring Data JPA API to develop the persistent layer in Quarkus.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128494335992">
<h2>Solution</h2>

<p>Quarkus offers an API compatibility layer (using an extension) to use Spring Data JPA classes.</p>

<p>To add the Spring Web extension, run the following command:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension -Dextensions="spring-data-jpa"</code></pre>

<p>The big difference between using Panache or the Spring Data JPA is that your repository class must implement the Spring Data <code>org.springframework.data.repository.CrudRepository</code> class instead of <code>io.quarkus.hibernate.orm.panache.PanacheRepository</code>.
But the rest of the parts, like defining the entity or configuring the data source in <em>application.properties</em>, are exactly the same.</p>

<p>Create a new class with the name <code>org.acme.quickstart.DeveloperRepository</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.util.List</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.data.repository.CrudRepository</code><code class="o">;</code><code>
</code><code>
</code><code class="kd">public</code><code> </code><code class="kd">interface</code><code> </code><code class="nc">DeveloperRepository</code><code> </code><code class="kd">extends</code><code> </code><code class="n">CrudRepository</code><code class="o">&lt;</code><code class="n">Developer</code><code class="o">,</code><code> </code><code class="n">Long</code><code class="o">&gt;</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>    </code><code class="n">List</code><code class="o">&lt;</code><code class="n">Developer</code><code class="o">&gt;</code><code> </code><code class="nf">findByName</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">name</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-2" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Defines a Spring Data JPA CRUD repository</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-2" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO5-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Derived query method</p></dd>
</dl>

<p>Run the project and send some requests to validate that the objects are persisted using the Spring Data interface. To do so, run the following in a terminal:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw compile quarkus:dev</code>

<code class="go">curl -d '{"name":"Ada"}' -H "Content-Type: application/json" \</code>
<code class="go">    -X POST http://localhost:8080/developer -v</code>

<code class="go">&lt; HTTP/1.1 201 Created</code>
<code class="go">&lt; Content-Length: 0</code>
<code class="go">&lt; Location: http://localhost:8080/developer/1</code>
<code class="go">&lt;</code>
<code class="go">* Connection #0 to host localhost left intact</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128494335528">
<h2>Discussion</h2>

<p>In <a data-type="xref" href="ch07.xhtml#persistence_chapter">Chapter 7</a>, you learned how to develop persistent code with Quarkus, and in particular, using the Panache framework.
Quarkus also integrates with Spring Data JPA via an extension.</p>

<p>Although we encourage you to use the Panache framework, you are free to use the Spring Data JPA classes as well because the final application will behave in exactly the same way.</p>

<p>Quarkus supports a subset of Spring Data JPA’s features, which are basically the most commonly used features.</p>

<p>The following interfaces are supported to define a repository:</p>

<ul>
<li>
<p><code>org.springframework.data.repository.Repository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.PagingAndSortingRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.jpa.repository.JpaRepository</code></p>
</li>
</ul>
<div data-type="important"><h6>Important</h6>
<p>The methods that update the database are automatically annotated with <code>@Transactional</code>. If you are using <code>@org.springframework.data.jpa.repository.Query</code>, then you need to annotate the method with <code>@org.springframework.data.jpa.repository.Modifying</code> to make it transactional.</p>
</div>

<p>At the time of writing, the following features are unsupported:</p>

<ul>
<li>
<p>Methods of the <code>org.springframework.data.repository.query.QueryByExampleExecutor</code></p>
</li>
<li>
<p>QueryDSL support</p>
</li>
<li>
<p>Customizing the base repository for all repository interfaces in the codebase</p>
</li>
<li>
<p><code>java.util.concurrent.Future</code> or classes extending it as return types of repository methods</p>
</li>
<li>
<p>Native and named queries when using <code>@Query</code></p>
</li>
</ul>

<p>These limitations might be fixed in the near future.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="14.4 Using Spring Security"><div class="sect1" id="idm45128494409832">
<h1>14.4 Using Spring Security</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128494432616">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="Spring Framework" data-secondary="using Spring Security API" id="idm45128494431384"/><a data-type="indexterm" data-primary="Spring Security API" id="idm45128494466808"/>You want to use the Spring Security API to protect resources.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128494465752">
<h2>Solution</h2>

<p>Quarkus offers an API compatibility layer (using an extension) to use Spring Security classes.</p>

<p>To add the Spring Security extension (and the identity provider), run the following command:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension \</code>
<code class="go">    -Dextensions="quarkus-spring-security, quarkus-spring-web, \</code>
<code class="go">                  quarkus-elytron-security-properties-file"</code></pre>

<p>From this point, the code can be protected using the Spring Security annotations (<code>org.springframework.security.access.annotation.Secured</code> and <code>org.springframework.security.access.prepost.PreAuthorize</code>) instead of the Java EE ones (<code>@javax.annotation.security.RolesAllowed</code>):</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.security.access.annotation.Secured</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.security.access.prepost.PreAuthorize</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.GetMapping</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.RequestMapping</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.web.bind.annotation.RestController</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@RestController</code><code>
</code><code class="nd">@RequestMapping</code><code class="o">(</code><code class="s">"/hello"</code><code class="o">)</code><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">GreetingController</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="nd">@GetMapping</code><code>
</code><code>    </code><code class="nd">@Secured</code><code class="o">(</code><code class="s">"admin"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">helloAdmin</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="s">"hello from admin"</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"hasAnyRole('user')"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-2" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>    </code><code class="nd">@GetMapping</code><code>
</code><code>    </code><code class="nd">@RequestMapping</code><code class="o">(</code><code class="s">"/any"</code><code class="o">)</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">helloUsers</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="s">"hello from users"</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<div style="page-break-after: always;"/>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p><code>@Secured</code> annotation</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-2" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO6-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p><code>@PreAuthorize</code> annotation to add expression support</p></dd>
</dl>

<p>Register valid users and roles in the <em>application.properties</em> file because the Elytron file properties extension is registered as identity provider:</p>

<pre data-type="programlisting" data-code-language="java"><code class="n">quarkus</code><code class="o">.</code><code class="na">security</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">embedded</code><code class="o">.</code><code class="na">enabled</code><code class="o">=</code><code class="kc">true</code>
<code class="n">quarkus</code><code class="o">.</code><code class="na">security</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">embedded</code><code class="o">.</code><code class="na">plain</code><code class="o">-</code><code class="n">text</code><code class="o">=</code><code class="kc">true</code>
<code class="n">quarkus</code><code class="o">.</code><code class="na">security</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">embedded</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">alexandra</code><code class="o">=</code><code class="n">aixa</code>
<code class="n">quarkus</code><code class="o">.</code><code class="na">security</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">embedded</code><code class="o">.</code><code class="na">roles</code><code class="o">.</code><code class="na">alexandra</code><code class="o">=</code><code class="n">admin</code><code class="o">,</code><code class="n">user</code>
<code class="n">quarkus</code><code class="o">.</code><code class="na">security</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">embedded</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">ada</code><code class="o">=</code><code class="n">dev</code>
<code class="n">quarkus</code><code class="o">.</code><code class="na">security</code><code class="o">.</code><code class="na">users</code><code class="o">.</code><code class="na">embedded</code><code class="o">.</code><code class="na">roles</code><code class="o">.</code><code class="na">ada</code><code class="o">=</code><code class="n">user</code></pre>

<p>Only <code>alexandra</code> can access both endpoints, while <code>ada</code> can access only the user one.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128494465288">
<h2>Discussion</h2>

<p>In <a data-type="xref" href="ch11.xhtml#authentication_authorization">Chapter 11</a>, you learned how to protect RESTful web services using the Java EE security annotations (<code>@RolwsAllowed</code>).
Quarkus integrates with Spring Security via an extension, allowing Spring Security annotations to be used as well.</p>

<p>It is important to note that the Spring Security integration happens at the API level and that an identity provider implementation like Elytron file properties is still required.</p>

<p>Quarkus supports a subset of Spring Security <code>@PreAuthorze</code> expression language, which is basically a collection of the most commonly used features:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"hasRole('admin')"</code><code class="o">)</code><code>
</code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"hasRole(@roles.USER)"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO7-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO7-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>
</code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"hasAnyRole(@roles.USER, 'view')"</code><code class="o">)</code><code>
</code><code>
</code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"permitAll()"</code><code class="o">)</code><code>
</code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"denyAll()"</code><code class="o">)</code><code>
</code><code>
</code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"isAnonymous()"</code><code class="o">)</code><code>
</code><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"isAuthenticated()"</code><code class="o">)</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO7-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO7-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Where <code>roles</code> is a bean defined with the <code>@Component</code> annotation and <code>USER</code> is a public field of the class</p></dd>
</dl>

<p>Conditional expressions are also supported:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"#person.name == authentication.principal.username"</code><code class="o">)</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">doSomethingElse</code><code class="o">(</code><code class="n">Person</code> <code class="n">person</code><code class="o">){}</code>

<code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"@personChecker.check(#person,</code>
<code class="s">                                    authentication.principal.username)"</code><code class="o">)</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">doSomething</code><code class="o">(</code><code class="n">Person</code> <code class="n">person</code><code class="o">){}</code>

<code class="nd">@Component</code>
<code class="kd">public</code> <code class="kd">class</code> <code class="nc">PersonChecker</code> <code class="o">{</code>
    <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">check</code><code class="o">(</code><code class="n">Person</code> <code class="n">person</code><code class="o">,</code> <code class="n">String</code> <code class="n">username</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">return</code> <code class="n">person</code><code class="o">.</code><code class="na">getName</code><code class="o">().</code><code class="na">equals</code><code class="o">(</code><code class="n">username</code><code class="o">);</code>
    <code class="o">}</code>
<code class="o">}</code>

<code class="nd">@PreAuthorize</code><code class="o">(</code><code class="s">"hasAnyRole('user', 'admin') AND #user == principal.username"</code><code class="o">)</code>
<code class="kd">public</code> <code class="kt">void</code> <code class="nf">allowedForUser</code><code class="o">(</code><code class="n">String</code> <code class="n">user</code><code class="o">)</code> <code class="o">{}</code></pre>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="14.5 Using Spring Boot Properties"><div class="sect1" id="idm45128494731240">
<h1>14.5 Using Spring Boot Properties</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128494730360">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="Spring Boot API" id="idm45128494531304"/><a data-type="indexterm" data-primary="Spring Framework" data-secondary="Spring Boot API" id="idm45128494530600"/>You want to use Spring Boot to map configuration properties into Java objects.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128494529272">
<h2>Solution</h2>

<p>Quarkus offers an API compatibility layer (using an extension) to use Spring Boot configuration properties.</p>

<p>Quarkus is integrated with Spring Boot in the form of an extension, so the <code>@org.springframework.boot.context.properties.ConfigurationProperties</code> annotation can be used to map configuration properties into a Java object.</p>

<p>To add the Spring Boot extension (and the other Spring integrations), run the 
<span class="keep-together">following</span> command:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension \</code>
<code class="go">    -Dextensions="quarkus-spring-di, quarkus-spring-web, \</code>
<code class="go">                  quarkus-spring-boot-properties,</code>
<code class="go">                  quarkus-hibernate-validator"</code></pre>

<p>Add some configuration properties to be bound into a Java object:</p>

<pre data-type="programlisting" data-code-language="java"><code class="n">greeting</code><code class="o">.</code><code class="na">message</code><code class="o">=</code><code class="n">Hello</code> <code class="n">World</code>
<code class="n">greeting</code><code class="o">.</code><code class="na">configuration</code><code class="o">.</code><code class="na">uppercase</code><code class="o">=</code><code class="kc">true</code></pre>

<p>The next step is to create the POJOs with getters/setters to bind the configuration properties from file to Java object.
It is important to note that the property <code>uppercase</code> is defined in a subcategory named <code>configuration</code>, and this affects how the POJO classes are created because each subcategory must be added into its own class:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.validation.constraints.Size</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">org.springframework.boot.context.properties.ConfigurationProperties</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@ConfigurationProperties</code><code class="o">(</code><code class="n">prefix</code><code> </code><code class="o">=</code><code> </code><code class="s">"greeting"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">GreetingConfiguration</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>    </code><code class="nd">@Size</code><code class="o">(</code><code class="n">min</code><code> </code><code class="o">=</code><code> </code><code class="mi">2</code><code class="o">)</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-2" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="n">String</code><code> </code><code class="n">message</code><code class="o">;</code><code>
</code><code>    </code><code class="kd">private</code><code> </code><code class="n">Configuration</code><code> </code><code class="n">configuration</code><code class="o">;</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-3" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setMessage</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">message</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">message</code><code> </code><code class="o">=</code><code> </code><code class="n">message</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">getMessage</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">message</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setConfiguration</code><code class="o">(</code><code class="n">Configuration</code><code> </code><code class="n">configuration</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">this</code><code class="o">.</code><code class="na">configuration</code><code> </code><code class="o">=</code><code> </code><code class="n">configuration</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">Configuration</code><code> </code><code class="nf">getConfiguration</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">configuration</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Annotate the parent class with <code>ConfigurationProperties</code>, and set the prefix of the configuration properties</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-2" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Bean Validation annotations are supported</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-3" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO8-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Subcategory <code>configuration</code> is mapped in a field with the same name</p></dd>
</dl>

<p>Subcategory POJO is just a Java class with the <code>uppercase</code> attribute.</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code> <code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code>

<code class="kd">public</code> <code class="kd">class</code> <code class="nc">Configuration</code> <code class="o">{</code>

    <code class="kd">private</code> <code class="kt">boolean</code> <code class="n">uppercase</code><code class="o">;</code>

    <code class="kd">public</code> <code class="kt">boolean</code> <code class="nf">isUppercase</code><code class="o">()</code> <code class="o">{</code>
        <code class="k">return</code> <code class="n">uppercase</code><code class="o">;</code>
    <code class="o">}</code>

    <code class="kd">public</code> <code class="kt">void</code> <code class="nf">setUppercase</code><code class="o">(</code><code class="kt">boolean</code> <code class="n">uppercase</code><code class="o">)</code> <code class="o">{</code>
        <code class="k">this</code><code class="o">.</code><code class="na">uppercase</code> <code class="o">=</code> <code class="n">uppercase</code><code class="o">;</code>
    <code class="o">}</code>
<code class="o">}</code></pre>

<p>The configuration object is injected in any class, as is any other bean using <code>@Inject</code> or <code>@Autowired</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@Autowired</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-1" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="n">GreetingConfiguration</code><code> </code><code class="n">greetingConfiguration</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@GetMapping</code><code>
</code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">hello</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">greetingConfiguration</code><code class="o">.</code><code class="na">getConfiguration</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">isUppercase</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-2" href="#callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">greetingConfiguration</code><code class="o">.</code><code class="na">getMessage</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">toUpperCase</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">greetingConfiguration</code><code class="o">.</code><code class="na">getMessage</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-1" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Injects configuration object with data bound to it</p></dd>
<dt><a class="co" id="callout_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-2" href="#co_developing_quarkus_applications___span_class__keep_together__using_spring_apis__span__CO9-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Configuration properties are populated automatically to the Java object<a data-type="indexterm" data-primary="" data-startref="spri_ch" id="idm45128495738760"/></p></dd>
</dl>
</div></section>





</div></section>







</div></section></div>



  </body></html>