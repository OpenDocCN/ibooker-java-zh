<html><head></head><body><div id="sbo-rt-content"><section data-type="chapter" epub:type="chapter" data-pdf-bookmark="Chapter 3. Developing RESTful Services"><div class="chapter" id="developing_restful_services_chapter">
<h1><span class="label">Chapter 3. </span>Developing RESTful Services</h1>


<p><a data-type="indexterm" data-primary="REST APIs" id="rest_cha"/>Quarkus integrates with RESTEasy, a JAX-RS implementation to define REST APIs.
In this chapter, you’ll learn how to develop RESTful web services in Quarkus.
We’ll cover the following topics:</p>

<ul>
<li>
<p>How to use JAX-RS for creating CRUD services</p>
</li>
<li>
<p>How to enable CORS for requesting resources from other domains</p>
</li>
<li>
<p>How to implement reactive routes</p>
</li>
<li>
<p>How to implement filters to manipulate requests and responses</p>
</li>
</ul>






<section data-type="sect1" data-pdf-bookmark="3.1 Creating a Simple REST API Endpoint"><div class="sect1" id="create-simple-rest-api-endpoint">
<h1>3.1 Creating a Simple REST API Endpoint</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128539487304">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="REST APIs" data-secondary="creating simple endpoints" id="idm45128539486104"/><a data-type="indexterm" data-primary="endpoints" data-secondary="creating REST API" id="idm45128539485064"/><a data-type="indexterm" data-primary="CRUD" id="idm45128539484120"/>You want to create a REST API endpoint with CRUD operations.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128539483064">
<h2>Solution</h2>

<p>Use the JAX-RS <code>GreetingResource</code> resource generated previously and fill it with JAX-RS annotations.</p>

<p><a data-type="indexterm" data-primary="@GET annotation" id="idm45128539480632"/><a data-type="indexterm" data-primary="@POST annotation" id="idm45128539459224"/><a data-type="indexterm" data-primary="@PUT annotation" id="idm45128539458552"/><a data-type="indexterm" data-primary="@DELETE annotation" id="idm45128539457880"/><a data-type="indexterm" data-primary="@Path annotation" id="idm45128539457208"/>JAX-RS is the default framework used in Quarkus to define REST endpoints.
All of the JAX-RS annotations are already correctly on your classpath.
You will want to use the HTTP verb annotations (<code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>) to declare the HTTP verb(s) that the endpoint methods will listen to.
Of course, you will need the <code>@Path</code> annotation to define the URI relative to the rest of the application for your endpoint.</p>
<div style="page-break-after: always;"/>

<p>Open <code>org.acme.quickstart.GreetingResource.java</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.GET</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.Path</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.Produces</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.core.MediaType</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@Path</code><code class="o">(</code><code class="s">"/hello"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO1-1" href="#callout_developing_restful_services_CO1-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">GreetingResource</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="nd">@GET</code><code> </code><a class="co" id="co_developing_restful_services_CO1-2" href="#callout_developing_restful_services_CO1-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>    </code><code class="nd">@Produces</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO1-3" href="#callout_developing_restful_services_CO1-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">hello</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="s">"hello"</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO1-4" href="#callout_developing_restful_services_CO1-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO1-1" href="#co_developing_restful_services_CO1-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Identifies the URI path of the current resource</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO1-2" href="#co_developing_restful_services_CO1-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Responds to HTTP <code>GET</code> requests</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO1-3" href="#co_developing_restful_services_CO1-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Defines the media type(s) that are returned</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO1-4" href="#co_developing_restful_services_CO1-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Returns plain text</p></dd>
</dl>

<p>Let’s create the remaining methods for creating, updating,  and deleting a message:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@POST</code><code> </code><a class="co" id="co_developing_restful_services_CO2-1" href="#callout_developing_restful_services_CO2-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="nd">@Consumes</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO2-2" href="#callout_developing_restful_services_CO2-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">create</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">message</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_restful_services_CO2-3" href="#callout_developing_restful_services_CO2-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Create"</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code><code>
</code><code>
</code><code class="nd">@PUT</code><code> </code><a class="co" id="co_developing_restful_services_CO2-4" href="#callout_developing_restful_services_CO2-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code class="nd">@Consumes</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code><code>
</code><code class="nd">@Produces</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code><code>
</code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">update</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">message</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Update"</code><code class="o">)</code><code class="o">;</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">message</code><code class="o">;</code><code>
</code><code class="o">}</code><code>
</code><code>
</code><code class="nd">@DELETE</code><code> </code><a class="co" id="co_developing_restful_services_CO2-5" href="#callout_developing_restful_services_CO2-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">delete</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">System</code><code class="o">.</code><code class="na">out</code><code class="o">.</code><code class="na">println</code><code class="o">(</code><code class="s">"Delete"</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO2-1" href="#co_developing_restful_services_CO2-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Responds to HTTP <code>POST</code> requests</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO2-2" href="#co_developing_restful_services_CO2-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Defines the media type(s) that are accepted</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO2-3" href="#co_developing_restful_services_CO2-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Body content of the request</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO2-4" href="#co_developing_restful_services_CO2-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Responds to HTTP <code>PUT</code> requests</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO2-5" href="#co_developing_restful_services_CO2-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a></dt>
<dd><p>Responds to HTTP <code>DELETE</code> requests</p></dd>
</dl>

<p>The following are valid HTTP methods: <code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, <code>@PATCH</code>, <code>@HEAD</code>, and <code>@OPTIONS</code>.</p>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.2 Extracting Request Parameters"><div class="sect1" id="idm45128539155224">
<h1>3.2 Extracting Request Parameters</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128539153944">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="extracting request parameters" id="idm45128539152744"/><a data-type="indexterm" data-primary="request parameters, extracting" id="idm45128539152072"/><a data-type="indexterm" data-primary="REST APIs" data-secondary="extracting request parameters" id="idm45128539151432"/>You want to extract request parameters using JAX-RS.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128539150136">
<h2>Solution</h2>

<p>Use some of the built-in annotations provided by JAX-RS specification.</p>

<p>Open the <code>org.acme.quickstart.GreetingResource.java</code> class and change the <code>hello</code> method with the request parameters to look like the following extract:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kd">enum</code><code> </code><code class="n">Order</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="n">desc</code><code class="o">,</code><code> </code><code class="n">asc</code><code class="o">;</code><code>
</code><code class="o">}</code><code>
</code><code>
</code><code class="nd">@GET</code><code>
</code><code class="nd">@Produces</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code><code>
</code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">hello</code><code class="o">(</code><code>
</code><code>                </code><code class="nd">@Context</code><code> </code><code class="n">UriInfo</code><code> </code><code class="n">uriInfo</code><code class="o">,</code><code> </code><a class="co" id="co_developing_restful_services_CO3-1" href="#callout_developing_restful_services_CO3-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>                </code><code class="nd">@QueryParam</code><code class="o">(</code><code class="s">"order"</code><code class="o">)</code><code> </code><code class="n">Order</code><code> </code><code class="n">order</code><code class="o">,</code><code> </code><a class="co" id="co_developing_restful_services_CO3-2" href="#callout_developing_restful_services_CO3-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>                </code><code class="nd">@NotBlank</code><code> </code><code class="nd">@HeaderParam</code><code class="o">(</code><code class="s">"authorization"</code><code class="o">)</code><code> </code><code class="n">String</code><code> </code><code class="n">authorization</code><code> </code><a class="co" id="co_developing_restful_services_CO3-3" href="#callout_developing_restful_services_CO3-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>                </code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">String</code><code class="o">.</code><code class="na">format</code><code class="o">(</code><code class="s">"URI: %s - Order %s - Authorization: %s"</code><code class="o">,</code><code>
</code><code>                         </code><code class="n">uriInfo</code><code class="o">.</code><code class="na">getAbsolutePath</code><code class="o">(</code><code class="o">)</code><code class="o">,</code><code> </code><code class="n">order</code><code class="o">,</code><code> </code><code class="n">authorization</code><code class="o">)</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO3-1" href="#co_developing_restful_services_CO3-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Gets <code>UriInfo</code> of the request; <code>UriInfo</code> is part of JAX-RS and allows you to obtain application and request URI information</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO3-2" href="#co_developing_restful_services_CO3-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Gets query parameter named <code>order</code> as <code>Enum</code></p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO3-3" href="#co_developing_restful_services_CO3-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Gets header parameter named <code>authorization</code> integrated with bean validation</p></dd>
</dl>

<p>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the <code>GET</code> method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">curl -X GET "http://localhost:8080/hello?order=asc" \</code>
<code class="go">    -H "accept: text/plain" -H "authorization: XYZ"</code>
<code class="go">URI: http://localhost:8080/hello - Order asc - Authorization: XYZ</code>

<code class="go">curl -X GET "http://localhost:8080/hello?order=asc" \</code>
<code class="go">    -H "accept: text/plain" -v</code>
<code class="go">HTTP/1.1 400 Bad Request</code></pre>

<p><a data-type="indexterm" data-primary="form parameters" id="idm45128539011176"/><a data-type="indexterm" data-primary="@FormParam" id="idm45128539010568"/><a data-type="indexterm" data-primary="matrix parameters" id="idm45128539009928"/><a data-type="indexterm" data-primary="@MatrixParam" id="idm45128539009256"/><a data-type="indexterm" data-primary="cookie values" id="idm45128539008584"/><a data-type="indexterm" data-primary="@CookieParam" id="idm45128539007912"/><a data-type="indexterm" data-primary="@Context annotation" id="idm45128539007240"/>Other request parameters can be extracted using annotations such as form parameters (<code>@FormParam</code>), matrix parameters (<code>@MatrixParam</code>), or cookie values (<code>@CookieParam</code>).
Also, using the <code>@Context</code> annotation, you can inject other elements related to JAX-RS, such as <code>javax.ws.rs.core.SecurityContext</code>, <code>javax.ws.rs.sse.SseEventSink</code>, or <code>javax.ws.rs.sse.Sse</code>.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128539011384">
<h2>Discussion</h2>

<p>In <a data-type="xref" href="#create-simple-rest-api-endpoint">Recipe 3.1</a>, you saw how to create REST API endpoints using JAX-RS, but you usually need to extract more information from a request rather than just the body content.</p>

<p><a data-type="indexterm" data-primary="RESTEasy" id="idm45128538994568"/>One of the important things that you need to take into consideration when using Quarkus and JAX-RS is that, under the covers, Quarkus uses RESTEasy working with Vert.x directly by default, without using anything related to the <code>Servlet</code> 
<span class="keep-together">specification</span>.</p>

<p>Generally speaking, everything you might need for developing REST API endpoints is well supported, and Quarkus offers alternatives when you need to implement custom <code>Servlet</code> filters or get the HTTP request directly into the code.</p>

<p>But, if it is a requirement, you can configure Quarkus to use RESTEasy while working with the <code>Servlet</code> specification instead of Vert.x by adding the <code>quarkus-undertow</code> extension:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension -Dextensions="quarkus-undertow"</code>

<code class="go">./gradlew addExtension --extensions="quarkus-undertow"</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128538987512">
<h2>See Also</h2>

<p>To learn more about JAX-RS, visit the following websites:</p>

<ul>
<li>
<p><a href="https://oreil.ly/Tgn5d">Eclipse Foundation: Jakarta RESTful Web Services</a></p>
</li>
<li>
<p><a href="https://oreil.ly/WpJ3x">RESTEasy</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.3 Using Semantic HTTP Response Status Codes"><div class="sect1" id="idm45128538947672">
<h1>3.3 Using Semantic HTTP Response Status Codes</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128538983752">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="REST APIs" data-secondary="semantic HTTP response status codes" id="idm45128538982552"/><a data-type="indexterm" data-primary="semantic HTTP response status codes" id="idm45128538981608"/><a data-type="indexterm" data-primary="status codes" id="idm45128538980968"/>You want to use HTTP response status codes to correctly reflect the result of a request.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128538979800">
<h2>Solution</h2>

<p><a data-type="indexterm" data-primary="JAX-RS Client" id="idm45128538962472"/>The JAX-RS specification uses the <code>javax.ws.rs.core.Response</code> interface to return the correct HTTP response status code as well as to set any other required information like response content, cookies, or headers:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.Consumes</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.POST</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.Path</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.Produces</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.core.MediaType</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.core.Response</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.core.UriBuilder</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@Path</code><code class="o">(</code><code class="s">"/developer"</code><code class="o">)</code><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">DeveloperResource</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>    </code><code class="nd">@POST</code><code>
</code><code>    </code><code class="nd">@Produces</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">APPLICATION_JSON</code><code class="o">)</code><code>
</code><code>    </code><code class="nd">@Consumes</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">APPLICATION_JSON</code><code class="o">)</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="n">Response</code><code> </code><code class="nf">createDeveloper</code><code class="o">(</code><code class="n">Developer</code><code> </code><code class="n">developer</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">developer</code><code class="o">.</code><code class="na">persist</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code>
</code><code>        </code><code class="k">return</code><code> </code><code class="n">Response</code><code class="o">.</code><code class="na">created</code><code class="o">(</code><code> </code><a class="co" id="co_developing_restful_services_CO4-1" href="#callout_developing_restful_services_CO4-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>            </code><code class="n">UriBuilder</code><code>
</code><code>                </code><code class="o">.</code><code class="na">fromResource</code><code class="o">(</code><code class="n">DeveloperResource</code><code class="o">.</code><code class="na">class</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO4-2" href="#callout_developing_restful_services_CO4-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>                </code><code class="o">.</code><code class="na">path</code><code class="o">(</code><code class="n">Long</code><code class="o">.</code><code class="na">toString</code><code class="o">(</code><code class="n">developer</code><code class="o">.</code><code class="na">getId</code><code class="o">(</code><code class="o">)</code><code class="o">)</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO4-3" href="#callout_developing_restful_services_CO4-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>                </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code>
</code><code>            </code><code class="o">)</code><code>
</code><code>            </code><code class="o">.</code><code class="na">entity</code><code class="o">(</code><code class="n">developer</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO4-4" href="#callout_developing_restful_services_CO4-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code>            </code><code class="o">.</code><code class="na">build</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO4-5" href="#callout_developing_restful_services_CO4-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kd">static</code><code> </code><code class="kd">class</code><code> </code><code class="nc">Developer</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>        </code><code class="kd">static</code><code> </code><code class="kt">long</code><code> </code><code class="n">counter</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code class="o">;</code><code>
</code><code>
</code><code>        </code><code class="kd">private</code><code> </code><code class="kt">long</code><code> </code><code class="n">id</code><code class="o">;</code><code>
</code><code>        </code><code class="kd">private</code><code> </code><code class="n">String</code><code> </code><code class="n">name</code><code class="o">;</code><code>
</code><code>
</code><code>        </code><code class="kd">public</code><code> </code><code class="kt">long</code><code> </code><code class="nf">getId</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="k">return</code><code> </code><code class="n">id</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>
</code><code>        </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">setName</code><code class="o">(</code><code class="n">String</code><code> </code><code class="n">name</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="k">this</code><code class="o">.</code><code class="na">name</code><code> </code><code class="o">=</code><code> </code><code class="n">name</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>
</code><code>        </code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">getName</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="k">return</code><code> </code><code class="n">name</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>
</code><code>        </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">persist</code><code class="o">(</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>            </code><code class="k">this</code><code class="o">.</code><code class="na">id</code><code> </code><code class="o">=</code><code> </code><code class="n">counter</code><code class="o">+</code><code class="o">+</code><code class="o">;</code><code>
</code><code>        </code><code class="o">}</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO4-1" href="#co_developing_restful_services_CO4-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Sets response status code as 201 created with the <code>Location</code> header as the URI</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO4-2" href="#co_developing_restful_services_CO4-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Sets path from the resource class</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO4-3" href="#co_developing_restful_services_CO4-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Sets the developer ID in the <code>Location</code> header</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO4-4" href="#co_developing_restful_services_CO4-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Sets the created developer as response content</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO4-5" href="#co_developing_restful_services_CO4-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a></dt>
<dd><p>Builds the <code>Response</code> object</p></dd>
</dl>
<div data-type="note" epub:type="note"><h6>Note</h6>
<p><a data-type="indexterm" data-primary="quarkus-resteasy-jackson extension" id="idm45128538857624"/><a data-type="indexterm" data-primary="quarkus-resteasy-jsonb extension" id="idm45128538856904"/>You will need the <code>quarkus-resteasy-jsonb</code> or <code>quarkus-resteasy-jackson</code> extension in your project if you are returning JSON from your endpoints.</p>
</div>

<p><a data-type="indexterm" data-primary="GET method" id="idm45128538607880"/>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the <code>GET</code> method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">curl -d '{"name":"Ada"}' -H "Content-Type: application/json" \</code>
<code class="go">  -X POST http://localhost:8080/developer -v</code>

<code class="go">&lt; HTTP/1.1 201 Created</code>
<code class="go">&lt; Content-Length: 21</code>
<code class="go">&lt; Content-Type: application/json</code>
<code class="go">&lt; Location: http://localhost:8080/developer/1</code>
<code class="go">&lt;</code>
<code class="go">{"id":1,"name":"Ada"}</code></pre>

<p>Notice that the <code>Location</code> header contains a valid URI to get access to the created resource.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128538830136">
<h2>Discussion</h2>

<p>When defining a RESTful Web API, it is really important to follow some conventions that are provided by the underlying technology that is used; for RESTful web services, it is the HTTP layer.</p>

<p>Another critical part of defining your API is using the correct response status codes, which are sent back to the client to indicate whether the request has been completed.
There are five classes of status codes<a data-type="indexterm" data-primary="informational responses" id="idm45128538727560"/><a data-type="indexterm" data-primary="successful responses" id="idm45128538726856"/><a data-type="indexterm" data-primary="redirects" id="idm45128538726184"/><a data-type="indexterm" data-primary="client errors" id="idm45128538725512"/><a data-type="indexterm" data-primary="server errors" id="idm45128538816296"/>:</p>

<ul>
<li>
<p>Informational responses (100–199)</p>
</li>
<li>
<p>Successful responses (200–299)</p>
</li>
<li>
<p>Redirects (300–399)</p>
</li>
<li>
<p>Client errors (400–499)</p>
</li>
<li>
<p>Server errors (500–599)</p>
</li>
</ul>

<p><a data-type="indexterm" data-primary="400 Bad Request" id="idm45128538650888"/><a data-type="indexterm" data-primary="400 Bad Request" data-primary-sortas="four" id="idm45128538766488"/><a data-type="indexterm" data-primary="500 Internal Server Error" id="idm45128538765544"/><a data-type="indexterm" data-primary="500 Internal Server Error" data-primary-sortas="five" id="idm45128538764808"/>By default, Quarkus tries to offer out-of-the-box responses with the correct HTTP status codes. For example, it offers a 400 Bad Request in case of constraint violations and a 500 Internal Server Error in the case of server exceptions.
But there is one use case that it is not covered by default: the creation of a resource in which an HTTP 201 Created status response code should be sent back to the client with the new resource in the body of the message and the URL of the new resource set in the <code>Location</code> header.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128538806440">
<h2>See Also</h2>

<p>Full HTTP response status codes are summarized at the following website:</p>

<ul>
<li>
<p><a href="https://oreil.ly/Gq02d">MDN Web Docs: HTTP response status codes</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.4 Binding HTTP Methods"><div class="sect1" id="idm45128538624520">
<h1>3.4 Binding HTTP Methods</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128538623544">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="binding HTTP methods" id="idm45128538720792"/><a data-type="indexterm" data-primary="HTTP methods, binding" id="idm45128538720088"/><a data-type="indexterm" data-primary="REST APIs" data-secondary="binding HTTP methods" id="idm45128538719416"/>You want to bind methods to HTTP verbs that do not have a dedicated annotation provided by the JAX-RS specification.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128538717960">
<h2>Solution</h2>

<p>Use <code>javax.ws.rs.HttpMethod</code> annotation to create your HTTP method annotation.</p>

<p><a data-type="indexterm" data-primary="JAX-RS Client" id="idm45128538673192"/><a data-type="indexterm" data-primary="@GET annotation" id="idm45128538672088"/><a data-type="indexterm" data-primary="@POST annotation" id="idm45128538633368"/><a data-type="indexterm" data-primary="@PUT annotation" id="idm45128538632696"/><a data-type="indexterm" data-primary="@DELETE annotation" id="idm45128538632024"/><a data-type="indexterm" data-primary="@PATCH annotation" id="idm45128538631352"/><a data-type="indexterm" data-primary="@HEAD annotation" id="idm45128538629784"/><a data-type="indexterm" data-primary="@OPTIONS annotation" id="idm45128538629112"/>JAX-RS specification provides seven annotations to specify the HTTP method that a method should respond to.
These annotations are <code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, <code>@PATCH</code>, <code>@HEAD</code>, and <code>@OPTIONS</code>.
But there are many more HTTP methods, and JAX-RS provides <code>javax.ws.rs.HttpMethod</code> annotation to support these other methods.</p>

<p><a data-type="indexterm" data-primary="meta-annotation" id="idm45128538739208"/><a data-type="indexterm" data-primary="LOCK verb" id="idm45128538738392"/><a data-type="indexterm" data-primary="RFC-4918" id="idm45128538683832"/>The first thing to do is create a meta-annotation.
We’re going to use the <code>LOCK</code> verb, defined at <a href="https://tools.ietf.org/html/rfc4918#section-9.10">RFC-4918</a>.
The <code>LOCK</code> verb locks access or refreshes an existing lock to a resource.
Our annotation will be named <code>LOCK</code>, and it is annotated with <code>@javax.ws.rs.HttpMethod</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.lang.annotation.Documented</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.lang.annotation.ElementType</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.lang.annotation.Retention</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.lang.annotation.RetentionPolicy</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.lang.annotation.Target</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.HttpMethod</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@Target</code><code class="o">(</code><code class="o">{</code><code class="n">ElementType</code><code class="o">.</code><code class="na">METHOD</code><code class="o">}</code><code class="o">)</code><code>
</code><code class="nd">@Retention</code><code class="o">(</code><code class="n">RetentionPolicy</code><code class="o">.</code><code class="na">RUNTIME</code><code class="o">)</code><code>
</code><code class="nd">@HttpMethod</code><code class="o">(</code><code class="s">"LOCK"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO5-1" href="#callout_developing_restful_services_CO5-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="nd">@Documented</code><code>
</code><code class="kd">public</code><code> </code><code class="nd">@interface</code><code> </code><code class="n">LOCK</code><code> </code><code class="o">{</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO5-1" href="#co_developing_restful_services_CO5-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Binds the <code>LOCK</code> HTTP method to the annotation</p></dd>
</dl>

<p>Finally, use this annotation in a resource method to bind it to the <code>LOCK</code> HTTP verb.</p>

<p>Open the <code>org.acme.quickstart.GreetingResource.java</code> class and create a <code>LOCK</code> method:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@LOCK</code><code> </code><a class="co" id="co_developing_restful_services_CO6-1" href="#callout_developing_restful_services_CO6-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="nd">@Produces</code><code class="o">(</code><code class="n">MediaType</code><code class="o">.</code><code class="na">TEXT_PLAIN</code><code class="o">)</code><code>
</code><code class="nd">@Path</code><code class="o">(</code><code class="s">"{id}"</code><code class="o">)</code><code>
</code><code class="kd">public</code><code> </code><code class="n">String</code><code> </code><code class="nf">lockResource</code><code class="o">(</code><code class="nd">@PathParam</code><code class="o">(</code><code class="s">"id"</code><code class="o">)</code><code> </code><code class="kt">long</code><code> </code><code class="n">id</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>    </code><code class="k">return</code><code> </code><code class="n">id</code><code> </code><code class="o">+</code><code> </code><code class="s">" locked"</code><code class="o">;</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO6-1" href="#co_developing_restful_services_CO6-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Bind to <code>LOCK</code> HTTP method</p></dd>
</dl>

<p>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the <code>LOCK</code> method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">curl -X LOCK http://localhost:8080/hello/1</code>
<code class="go">1 locked</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128538674808">
<h2>See Also</h2>

<p>A complete list of HTTP methods can be found at the following GitHub page:</p>

<ul>
<li>
<p><a href="https://oreil.ly/DC9Wi">KNOW YOUR HTTP methods WELL</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.5 Enabling Cross-Origin Resource Sharing (CORS)"><div class="sect1" id="idm45128538345496">
<h1>3.5 Enabling Cross-Origin Resource Sharing (CORS)</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128538344280">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="CORS (cross-origin resource sharing)" id="idm45128538322088"/><a data-type="indexterm" data-primary="REST APIs" data-secondary="enabling cross-origin resource sharing (CORS)" id="idm45128538321448"/>You want to request restricted resources from another domain.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128538320152">
<h2>Solution</h2>

<p>Use <code>quarkus.http.cors</code> configuration property to enable CORS.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128538318152">
<h2>Discussion</h2>

<p><em>Cross-origin resource sharing</em> (CORS) is a mechanism that allows restricted resources to be requested from another domain outside the domain from which the first resource was served.
Quarkus provides a set of configuration properties to configure CORS.</p>

<p>To enable CORS in Quarkus you need to set the <code>quarkus.http.cors</code> configuration property to <code>true</code> in the <em>application.properties</em> file.</p>

<p>An example of CORS configuration could look like the following:</p>

<pre data-type="programlisting" data-code-language="properties"><code class="na">quarkus.http.cors</code><code class="o">=</code><code class="s">true</code>
<code class="na">quarkus.http.cors.origins</code><code class="o">=</code><code class="s">http://example.com</code>
<code class="na">quarkus.http.cors.methods</code><code class="o">=</code><code class="s">GET,PUT,POST,DELETE</code>
<code class="na">quarkus.http.cors.headers</code><code class="o">=</code><code class="s">accept,authorization,content-type,x-requested-with</code></pre>

<p>You can view the output and headers using <code>curl</code>:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">curl -d '{"name":"Ada"}' -H "Content-Type: application/json" \</code>
<code class="go">    -X POST http://localhost:8080/developer \</code>
<code class="go">    -H "Origin: http://example.com" --verbose</code></pre>

<p>The output should show the <code>access-control-allow-origin</code> header:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">upload completely sent off: 14 out of 14 bytes</code>
<code class="go">* Mark bundle as not supporting multiuse</code>
<code class="go">&lt; HTTP/1.1 201 Created</code>
<code class="go">&lt; access-control-allow-origin: http://example.com</code>
<code class="go">&lt; access-control-allow-credentials: true</code>
<code class="go">&lt; Content-Length: 21</code>
<code class="go">&lt; Content-Type: application/json</code>
<code class="go">&lt; Location: http://localhost:8080/developer/5</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128538317816">
<h2>See Also</h2>

<p>You can find more information about CORS at the following Wikipedia page:</p>

<ul>
<li>
<p><a href="https://oreil.ly/iSiqh">Cross-origin resource sharing</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.6 Using Reactive Routes"><div class="sect1" id="idm45128538270632">
<h1>3.6 Using Reactive Routes</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128538269416">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="reactive routes" id="idm45128538268184"/><a data-type="indexterm" data-primary="REST APIs" data-secondary="reactive routes" id="idm45128538267480"/>You want to implement HTTP endpoints using reactive routes.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128538207208">
<h2>Solution</h2>

<p>Use the Vert.x <code>io.vertx.ext.web.Router</code> router instance or the <code>i⁠o⁠.⁠q⁠u⁠a⁠r⁠k⁠u⁠s​.⁠v⁠e⁠r⁠t⁠x⁠.⁠w⁠e⁠b⁠.⁠R⁠o⁠u⁠t⁠e</code> annotation.</p>

<p>There are two ways to use reactive routes within Quarkus.
The first way is to register routes directly using the <code>io.vertx.ext.web.Router</code> class.</p>

<p><a data-type="indexterm" data-primary="CDI (Contexts and Dependency Injection)" id="idm45128538203256"/>To retrieve the <code>Router</code> instance at startup, you need to observe the creation of the object using Contexts and Dependency Injection (CDI).</p>

<p>Create a new class named <code>org.acme.quickstart.ApplicationRoutes.java</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.enterprise.context.ApplicationScoped</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.enterprise.event.Observes</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">io.quarkus.vertx.http.runtime.filters.Filters</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">io.quarkus.vertx.web.Route</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">io.vertx.core.http.HttpMethod</code><code class="o">;</code><code>   </code><a class="co" id="co_developing_restful_services_CO7-1" href="#callout_developing_restful_services_CO7-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code class="kn">import</code><code> </code><code class="nn">io.vertx.ext.web.Router</code><code class="o">;</code><code>         </code><a class="co" id="co_developing_restful_services_CO7-2" href="#callout_developing_restful_services_CO7-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code class="kn">import</code><code> </code><code class="nn">io.vertx.ext.web.RoutingContext</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO7-3" href="#callout_developing_restful_services_CO7-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code>
</code><code class="nd">@ApplicationScoped</code><code> </code><a class="co" id="co_developing_restful_services_CO7-4" href="#callout_developing_restful_services_CO7-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">ApplicationRoutes</code><code> </code><code class="o">{</code><code>
</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">routes</code><code class="o">(</code><code class="nd">@Observes</code><code> </code><code class="n">Router</code><code> </code><code class="n">router</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_restful_services_CO7-5" href="#callout_developing_restful_services_CO7-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>
</code><code>        </code><code class="n">router</code><code>
</code><code>            </code><code class="o">.</code><code class="na">get</code><code class="o">(</code><code class="s">"/ok"</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO7-6" href="#callout_developing_restful_services_CO7-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>            </code><code class="o">.</code><code class="na">handler</code><code class="o">(</code><code class="n">rc</code><code> </code><code class="o">-</code><code class="o">&gt;</code><code> </code><code class="n">rc</code><code class="o">.</code><code class="na">response</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">end</code><code class="o">(</code><code class="s">"OK from Route"</code><code class="o">)</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO7-7" href="#callout_developing_restful_services_CO7-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO7-1" href="#co_developing_restful_services_CO7-4"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Instantiates the object into CDI container with <em>application</em> scope</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO7-2" href="#co_developing_restful_services_CO7-5"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Provides the <code>Router</code> object to register the routes</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO7-3" href="#co_developing_restful_services_CO7-6"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Binds the <code>GET</code> HTTP method to <code>/ok</code></p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO7-4" href="#co_developing_restful_services_CO7-7"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Handles the logic</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO7-5" href="#co_developing_restful_services_CO7-1"><img src="Images/5.png" alt="5" width="12" height="12"/></a></dt>
<dd><p>Imports used later in the example</p></dd>
</dl>

<p>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the new method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">curl http://localhost:8080/ok</code>
<code class="go">OK from Route</code></pre>

<p>The second way to use reactive routes is a declarative approach with the <code>i⁠o⁠.⁠q⁠u⁠a⁠r⁠k⁠u⁠s​.⁠v⁠e⁠r⁠t⁠x⁠.⁠w⁠e⁠b⁠.⁠R⁠o⁠u⁠t⁠e</code> annotation.
To have access to this annotation, you need to add the <code>quarkus-vertx-web</code> extension:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw quarkus:add-extension -Dextensions="quarkus-vertx-web"</code></pre>

<p><a data-type="indexterm" data-primary="CDI bean" id="idm45128538024184"/><a data-type="indexterm" data-primary="@Route" id="idm45128538023688"/>Then you can annotate methods with <code>@Route</code>.
These methods must be defined within a CDI bean.</p>

<p>Open the <code>org.acme.quickstart.ApplicationRoutes.java</code> class and define a route:</p>

<pre data-type="programlisting" data-code-language="java"><code class="nd">@Route</code><code class="o">(</code><code class="n">path</code><code> </code><code class="o">=</code><code> </code><code class="s">"/declarativeok"</code><code class="o">,</code><code> </code><code class="n">methods</code><code> </code><code class="o">=</code><code> </code><code class="n">HttpMethod</code><code class="o">.</code><code class="na">GET</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO8-1" href="#callout_developing_restful_services_CO8-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">greetings</code><code class="o">(</code><code class="n">RoutingContext</code><code> </code><code class="n">routingContext</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_restful_services_CO8-2" href="#callout_developing_restful_services_CO8-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>    </code><code class="n">String</code><code> </code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="n">routingContext</code><code class="o">.</code><code class="na">request</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">getParam</code><code class="o">(</code><code class="s">"name"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO8-3" href="#callout_developing_restful_services_CO8-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>
</code><code>    </code><code class="k">if</code><code> </code><code class="o">(</code><code class="n">name</code><code> </code><code class="o">=</code><code class="o">=</code><code> </code><code class="kc">null</code><code class="o">)</code><code> </code><code class="o">{</code><code>
</code><code>        </code><code class="n">name</code><code> </code><code class="o">=</code><code> </code><code class="s">"world"</code><code class="o">;</code><code>
</code><code>    </code><code class="o">}</code><code>
</code><code>
</code><code>    </code><code class="n">routingContext</code><code class="o">.</code><code class="na">response</code><code class="o">(</code><code class="o">)</code><code class="o">.</code><code class="na">end</code><code class="o">(</code><code class="s">"OK "</code><code> </code><code class="o">+</code><code> </code><code class="n">name</code><code> </code><code class="o">+</code><code> </code><code class="s">" you are right"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO8-4" href="#callout_developing_restful_services_CO8-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO8-1" href="#co_developing_restful_services_CO8-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Sets the HTTP path and method</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO8-2" href="#co_developing_restful_services_CO8-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p><code>RoutingContext</code> to get request information</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO8-3" href="#co_developing_restful_services_CO8-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Gets query param</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO8-4" href="#co_developing_restful_services_CO8-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Handles the logic</p></dd>
</dl>
<div style="page-break-after: always;"/>

<p>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the new method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">curl localhost:8080/declarativeok?name=Alex</code>
<code class="go">OK Alex you are right</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128537819912">
<h2>Discussion</h2>

<p><a data-type="indexterm" data-primary="Vert.x" id="idm45128537845752"/><a data-type="indexterm" data-primary="Netty" id="idm45128537845048"/><a data-type="indexterm" data-primary="event loops" id="idm45128537844376"/><a data-type="indexterm" data-primary="worker thread" id="idm45128537843704"/><a data-type="indexterm" data-primary="I/O thread" id="idm45128537843032"/>Quarkus HTTP is based on a nonblocking and reactive engine.
Under the covers it is using Vert.x and Netty.
When a request is received, it is managed by <em>event loops</em> that may either rely on a worker thread, in case of servlet or JAX-RS, or use the I/O thread, in case of reactive route, to handle the logic of the invocation.</p>

<p>It is important to note that reactive routes must be either nonblocking or explicitly declared as blocking; if not, because of the nature of reactive event looping, you are going to block the loop, thus preventing further loops from being processed until the thread unblocks.</p>

<p>Within the same project, you can mix JAX-RS endpoints with reactive routes without any problem.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128537838328">
<h2>See Also</h2>

<p>You can learn more about reactive routes in Vert.x on the following web page:</p>

<ul>
<li>
<p><a href="https://oreil.ly/kznp9">Basic Vert.x-Web Concepts</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.7 Intercepting HTTP Requests"><div class="sect1" id="idm45128537835000">
<h1>3.7 Intercepting HTTP Requests</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128537833784">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="HTTP requests, intercepting" id="http_int"/><a data-type="indexterm" data-primary="intercepting HTTP requests" id="int_http"/><a data-type="indexterm" data-primary="REST APIs" data-secondary="intercepting HTTP requests" id="rest_int"/>You want to intercept HTTP requests to manipulate requests or responses.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128537829160">
<h2>Solution</h2>

<p>Sometimes you need to manipulate the request before reaching the endpoint logic (i.e., security checks) or before the response is sent back to the caller (i.e., compressing response).
With Quarkus you can intercept HTTP requests by using either Vert.x <code>Filters</code> or JAX-RS filter interfaces.</p>

<p>Let’s see how to implement a filter using <code>io.quarkus.vertx.http.runtime.filters.Filters</code>.</p>

<p>To retrieve the <code>Filters</code> instance at startup, you need to observe the creation of the object using CDI.</p>

<p>Open the <code>org.acme.quickstart.ApplicationRoutes.java</code> class and add a method named <code>filters</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">filters</code><code class="o">(</code><code class="nd">@Observes</code><code> </code><code class="n">Filters</code><code> </code><code class="n">filters</code><code class="o">)</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_restful_services_CO9-1" href="#callout_developing_restful_services_CO9-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code>    </code><code class="n">filters</code><code>
</code><code>        </code><code class="o">.</code><code class="na">register</code><code class="o">(</code><code>
</code><code>            </code><code class="n">rc</code><code> </code><code class="o">-</code><code class="o">&gt;</code><code> </code><code class="o">{</code><code>
</code><code>                </code><code class="n">rc</code><code class="o">.</code><code class="na">response</code><code class="o">(</code><code class="o">)</code><code> </code><a class="co" id="co_developing_restful_services_CO9-2" href="#callout_developing_restful_services_CO9-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>                    </code><code class="o">.</code><code class="na">putHeader</code><code class="o">(</code><code class="s">"V-Header"</code><code class="o">,</code><code> </code><code class="s">"Header added by VertX Filter"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO9-3" href="#callout_developing_restful_services_CO9-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>                </code><code class="n">rc</code><code class="o">.</code><code class="na">next</code><code class="o">(</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO9-4" href="#callout_developing_restful_services_CO9-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a><code>
</code><code>            </code><code class="o">}</code><code class="o">,</code><code>
</code><code>            </code><code class="mi">10</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO9-5" href="#callout_developing_restful_services_CO9-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO9-1" href="#co_developing_restful_services_CO9-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Provides <code>Filters</code> object to register the filters</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO9-2" href="#co_developing_restful_services_CO9-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Modifies the response</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO9-3" href="#co_developing_restful_services_CO9-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Adds a new header to the response</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO9-4" href="#co_developing_restful_services_CO9-4"><img src="Images/4.png" alt="4" width="12" height="12"/></a></dt>
<dd><p>Continues the filter chain</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO9-5" href="#co_developing_restful_services_CO9-5"><img src="Images/5.png" alt="5" width="12" height="12"/></a></dt>
<dd><p>Sets the order of execution</p></dd>
</dl>

<p>It is important to note that these filters are applied for servlets, JAX-RS resources, and reactive routes.</p>

<p>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the new method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">echo Reactive-Route</code>
<code class="go">curl localhost:8080/ok -v</code>
<code class="go">&lt; V-Header: Header added by VertX Filter</code>
<code class="go">&lt; content-length: 13</code>
<code class="go">OK from Route</code>

<code class="go">echo JAX-RS</code>
<code class="go">curl -X GET "http://localhost:8080/hello?order=asc" \</code>
<code class="go">    -H "accept: text/plain" -H "authorization: XYZ" -v</code>
<code class="go">&lt; V-Header: Header added by VertX Filter</code>
<code class="go">&lt; content-length: 65</code>
<code class="go">URI: http://localhost:8080/hello - Order asc - Authorization: XYZ</code></pre>

<p>Notice that both requests (the reactive route and JAX-RS endpoints) were modified by the registered filter and by adding a new header.</p>

<p>That said, you can also use the  <code>javax.ws.rs.container.ContainerRequestFilter</code>/ <code>javax.ws.rs.container.ContainerResponseFilter</code> interfaces to implement a filter.</p>

<p>Create a new class named <code>org.acme.quickstart.HeaderAdditionContainerResponseFilter.java</code>:</p>

<pre data-type="programlisting" data-code-language="java"><code class="kn">package</code><code> </code><code class="n">org</code><code class="o">.</code><code class="na">acme</code><code class="o">.</code><code class="na">quickstart</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">java.io.IOException</code><code class="o">;</code><code>
</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.container.ContainerRequestContext</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.container.ContainerResponseContext</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.container.ContainerResponseFilter</code><code class="o">;</code><code>
</code><code class="kn">import</code><code> </code><code class="nn">javax.ws.rs.ext.Provider</code><code class="o">;</code><code>
</code><code>
</code><code class="nd">@Provider</code><code> </code><a class="co" id="co_developing_restful_services_CO10-1" href="#callout_developing_restful_services_CO10-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="kd">public</code><code> </code><code class="kd">class</code><code> </code><code class="nc">HeaderAdditionContainerResponseFilter</code><code>
</code><code>                </code><code class="kd">implements</code><code> </code><code class="n">ContainerResponseFilter</code><code> </code><code class="o">{</code><code> </code><a class="co" id="co_developing_restful_services_CO10-2" href="#callout_developing_restful_services_CO10-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code>
</code><code>    </code><code class="nd">@Override</code><code>
</code><code>    </code><code class="kd">public</code><code> </code><code class="kt">void</code><code> </code><code class="nf">filter</code><code class="o">(</code><code class="n">ContainerRequestContext</code><code> </code><code class="n">requestContext</code><code class="o">,</code><code>
</code><code>                       </code><code class="n">ContainerResponseContext</code><code> </code><code class="n">responseContext</code><code class="o">)</code><code>
</code><code>            </code><code class="kd">throws</code><code> </code><code class="n">IOException</code><code> </code><code class="o">{</code><code>
</code><code>                </code><code class="n">responseContext</code><code class="o">.</code><code class="na">getHeaders</code><code class="o">(</code><code class="o">)</code><code>
</code><code>                  </code><code class="o">.</code><code class="na">add</code><code class="o">(</code><code class="s">"X-Header"</code><code class="o">,</code><code> </code><code class="s">"Header added by JAXRS Filter"</code><code class="o">)</code><code class="o">;</code><code> </code><a class="co" id="co_developing_restful_services_CO10-3" href="#callout_developing_restful_services_CO10-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a><code>
</code><code>    </code><code class="o">}</code><code>
</code><code class="o">}</code></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO10-1" href="#co_developing_restful_services_CO10-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Sets this class as an extension interface</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO10-2" href="#co_developing_restful_services_CO10-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Applies changes in response</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO10-3" href="#co_developing_restful_services_CO10-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>Adds a new header to the response</p></dd>
</dl>

<p>This filter is applied only to JAX-RS resources, and not in reactive routes.</p>

<p>Try it by opening a new terminal window, starting the Quarkus application, and sending a request to the new method:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">echo Reactive-Route</code>
<code class="go">curl localhost:8080/ok -v</code>
<code class="go">&lt; V-Header: Header added by VertX Filter</code>
<code class="go">&lt; content-length: 13</code>
<code class="go">OK from Route</code>

<code class="go">echo JAX-RS</code>
<code class="go">curl -X GET "http://localhost:8080/hello?order=asc" \</code>
<code class="go">    -H "accept: text/plain" -H "authorization: XYZ" -v</code>
<code class="go">&lt; V-Header: Header added by VertX Filter</code>
<code class="go">&lt; Content-Length: 65</code>
<code class="go">&lt; Content-Type: text/plain;charset=UTF-8</code>
<code class="go">&lt; X-Header: Header added by JAXRS Filter</code>
<code class="go">URI: http://localhost:8080/hello - Order asc - Authorization: XYZ</code></pre>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128537514056">
<h2>Discussion</h2>

<p>Notice that in the case of the reactive-route endpoint, only the <code>V-Header</code> header is added, and not the <code>X-Header</code> header. Meanwhile, in the JAX-RS endpoint, the request is modified by both filters by adding both HTTP headers.</p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128537497016">
<h2>See Also</h2>

<p>To learn more about JAX-RS and Vert.x, you can visit the following websites<a data-type="indexterm" data-primary="" data-startref="http_int" id="idm45128537495688"/><a data-type="indexterm" data-primary="" data-startref="int_http" id="idm45128537494712"/><a data-type="indexterm" data-primary="" data-startref="rest_int" id="idm45128537493768"/>:</p>

<ul>
<li>
<p><a href="https://oreil.ly/xioAv">Eclipse Foundation: Jakarta RESTful web services</a></p>
</li>
<li>
<p><a href="https://vertx.io/docs">Vert.x Documentation</a></p>
</li>
</ul>
</div></section>





</div></section>













<section data-type="sect1" data-pdf-bookmark="3.8 Secure Connections with SSL"><div class="sect1" id="idm45128537479416">
<h1>3.8 Secure Connections with SSL</h1>








<section data-type="sect2" data-pdf-bookmark="Problem"><div class="sect2" id="idm45128537478168">
<h2>Problem</h2>

<p><a data-type="indexterm" data-primary="REST APIs" data-secondary="secure connections with SSL" id="idm45128537476968"/><a data-type="indexterm" data-primary="secure connections, with SSL" id="idm45128537476024"/><a data-type="indexterm" data-primary="SSL" data-secondary="secure connections with" id="idm45128537475384"/>You want to secure connections so as to prevent an attacker from stealing sensitive 
<span class="keep-together">information.</span></p>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Solution"><div class="sect2" id="idm45128537473528">
<h2>Solution</h2>

<p>Enable Quarkus to use SSL to secure connections.</p>

<p>Securing communication between a client and the application is important when the information that is going to be transmitted is sensitive (password, account numbers, health information, etc.).
For this reason, it is very important to protect the communication between services using SSL.</p>

<p><a data-type="indexterm" data-primary="keyStore" id="idm45128537470792"/>To secure the communications, two elements must be provided: a certificate and an associated key file.
Both can be provided individually or in the form of a <em>keystore</em>.</p>

<p>Let’s configure Quarkus to use a keystore that contains an entry with a certificate:</p>

<pre data-type="programlisting" data-code-language="java"><code class="n">quarkus</code><code class="o">.</code><code class="na">http</code><code class="o">.</code><code class="na">ssl</code><code class="o">-</code><code class="n">port</code><code class="o">=</code><code class="mi">8443</code><code> </code><a class="co" id="co_developing_restful_services_CO11-1" href="#callout_developing_restful_services_CO11-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a><code>
</code><code class="n">quarkus</code><code class="o">.</code><code class="na">http</code><code class="o">.</code><code class="na">ssl</code><code class="o">.</code><code class="na">certificate</code><code class="o">.</code><code class="na">key</code><code class="o">-</code><code class="n">store</code><code class="o">-</code><code class="n">file</code><code class="o">=</code><code class="n">keystore</code><code class="o">.</code><code class="na">jks</code><code> </code><a class="co" id="co_developing_restful_services_CO11-2" href="#callout_developing_restful_services_CO11-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a><code>
</code><code class="n">quarkus</code><code class="o">.</code><code class="na">http</code><code class="o">.</code><code class="na">ssl</code><code class="o">.</code><code class="na">certificate</code><code class="o">.</code><code class="na">key</code><code class="o">-</code><code class="n">store</code><code class="o">-</code><code class="n">file</code><code class="o">-</code><code class="n">type</code><code class="o">=</code><code class="n">jks</code><code>
</code><code class="n">quarkus</code><code class="o">.</code><code class="na">http</code><code class="o">.</code><code class="na">ssl</code><code class="o">.</code><code class="na">certificate</code><code class="o">.</code><code class="na">key</code><code class="o">-</code><code class="n">store</code><code class="o">-</code><code class="n">password</code><code class="o">=</code><code class="n">changeit</code><code> </code><a class="co" id="co_developing_restful_services_CO11-3" href="#callout_developing_restful_services_CO11-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></pre>
<dl class="calloutlist">
<dt><a class="co" id="callout_developing_restful_services_CO11-1" href="#co_developing_restful_services_CO11-1"><img src="Images/1.png" alt="1" width="12" height="12"/></a></dt>
<dd><p>Sets HTTPS port</p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO11-2" href="#co_developing_restful_services_CO11-2"><img src="Images/2.png" alt="2" width="12" height="12"/></a></dt>
<dd><p>Type of keystore and location relative to <em>src/main/resources</em></p></dd>
<dt><a class="co" id="callout_developing_restful_services_CO11-3" href="#co_developing_restful_services_CO11-3"><img src="Images/3.png" alt="3" width="12" height="12"/></a></dt>
<dd><p>The password to open the keystore</p></dd>
</dl>

<p>Start the application and send a request to the HTTPS endpoint:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">./mvnw clean compile quarkus:dev</code>

<code class="go">curl --insecure https://localhost:8443/hello</code>
<code class="go">hello</code></pre>

<p><a data-type="indexterm" data-primary="certificate validation" id="idm45128537318216"/>As the certificate has been self-signed, the <code>--insecure</code> flag is provided to skip the 
<span class="keep-together">certificate</span> validation.
In an example in which the certificate is not self-signed, 
<span class="keep-together">the <code>insecure</code></span> flag should not be provided.
The flag was used in this example for 
<span class="keep-together">simplicity</span>.</p>
<div data-type="important"><h6>Important</h6>
<p>Providing the password as plain text in the configuration file is a bad practice. It can be supplied by using an environment variable <code>QUARKUS_HTTP_SSL_CERTIFICATE_KEY_STORE_PASSWORD</code>, as you read at the beginning of the book when the MicroProfile Config spec was introduced.</p>
</div>
</div></section>













<section data-type="sect2" data-pdf-bookmark="Discussion"><div class="sect2" id="idm45128537472904">
<h2>Discussion</h2>

<p>For the busy developer, this is how to generate your own key cert for Quarkus:</p>
<ol>
<li>
<p>Go to <em>src/main/resources</em>.</p>
</li>
<li>
<p>Execute the following command:</p>

<pre data-type="programlisting" data-code-language="shell-session"><code class="go">keytool -genkey -keyalg RSA -alias selfsigned \</code>
<code class="go">    -keystore keystore.jks -storepass changeit \</code>
<code class="go">    -validity 360 -keysize 2048</code></pre>
</li>

</ol>
</div></section>













<section data-type="sect2" data-pdf-bookmark="See Also"><div class="sect2" id="idm45128537285736">
<h2>See Also</h2>

<p><a data-type="indexterm" data-primary="keytool" id="idm45128537332872"/>To learn about how to generate certificates, key stores, and trust stores, see the following web page<a data-type="indexterm" data-primary="" data-startref="rest_cha" id="idm45128537331928"/>:</p>

<ul>
<li>
<p><a href="https://oreil.ly/mwOSH">Oracle: Java Platform, Standard Edition Tools Reference: <code>keytool</code></a></p>
</li>
</ul>
</div></section>





</div></section>







</div></section></div>



  </body></html>